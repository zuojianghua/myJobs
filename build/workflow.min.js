function RGBColor(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in e)t==i&&(t=e[i]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],s=0;s<n.length;s++){var r=n[s].re,o=n[s].process,a=r.exec(t);a&&(channels=o(a),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var s=n[i].example,r=0;r<s.length;r++)t[t.length]=s[r];for(var o in e)t[t.length]=o;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(var i=0;i<t.length;i++)try{var c=document.createElement("li"),h=new RGBColor(t[i]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+h.toHex()+"; color:"+h.toHex(),l.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+t[i]+" -> "+h.toRGB()+" -> "+h.toHex());c.appendChild(l),c.appendChild(u),a.appendChild(c)}catch(t){}return a}}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=s(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,r)}function r(){t.datepicker._isDisabledDatepicker(m.inline?m.dpDiv.parent()[0]:m.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function o(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}function a(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.ui.version="1.12.1";var c=0,h=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,r;for(r=0;null!=(s=i[r]);r++)try{n=t._data(s,"events"),n&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,r,o,a={},c=e.split(".")[0];e=e.split(".")[1];var h=c+"-"+e;return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[c]=t[c]||{},s=t[c][e],r=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),o=new i,o.options=t.widget.extend({},o.options),t.each(n,function(e,n){return t.isFunction(n)?void(a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}()):void(a[e]=n)}),r.prototype=t.widget.extend(o,{widgetEventPrefix:s?o.widgetEventPrefix||e:e},a,{constructor:r,namespace:c,widgetName:e,widgetFullName:h}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var i,n,s=h.call(arguments,1),r=0,o=s.length;o>r;r++)for(i in s[r])n=s[r][i],s[r].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(s){var r="string"==typeof s,o=h.call(arguments,1),a=this;return r?this.length||"instance"!==s?this.each(function(){var i,r=t.data(this,n);return"instance"===s?(a=r,!1):r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,o),i!==r&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+s+"'")}):a=void 0:(o.length&&(s=t.widget.extend.apply(null,[s].concat(o))),this.each(function(){var e=t.data(this,n);e?(e.option(s||{}),e._init&&e._init()):t.data(this,n,new i(s,this))})),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,r,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},n=e.split("."),e=n.shift(),n.length){for(s=o[e]=t.widget.extend({},this.options[e]),r=0;n.length-1>r;r++)s[n[r]]=s[n[r]]||{},s=s[n[r]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,s;for(i in e)s=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&s&&s.length&&(n=t(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,r){var o,a;for(a=0;i.length>a;a++)o=s.classesElementLookup[i[a]]||t(),o=t(e.add?t.unique(o.get().concat(e.element.get())):o.not(e.element).get()),s.classesElementLookup[i[a]]=o,n.push(i[a]),r&&e.classes[i[a]]&&n.push(e.classes[i[a]])}var n=[],s=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,s){-1!==t.inArray(e.target,s)&&(i.classesElementLookup[n]=t(s.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var s,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,o){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var c=n.match(/^([\w:-]*)\s*(.*)$/),h=c[1]+r.eventNamespace,l=c[2];l?s.on(h,l,a):i.on(h,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,r,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var s,r=Math.max,o=Math.abs,a=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return t("body").append(n),e=r.offsetWidth,n.css("overflow","scroll"),i=r.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),s=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,r="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType,r=!n&&!s;return{element:i,isWindow:n,isDocument:s,offset:r?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(s){if(!s||!s.of)return d.apply(this,arguments);s=t.extend({},s);var u,p,f,g,m,v,y=t(s.of),w=t.position.getWithinInfo(s.within),x=t.position.getScrollInfo(w),b=(s.collision||"flip").split(" "),_={};return v=n(y),y[0].preventDefault&&(s.at="left top"),p=v.width,f=v.height,g=v.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(s[this]||"").split(" ");1===i.length&&(i=a.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=a.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",t=h.exec(i[0]),e=h.exec(i[1]),_[this]=[t?t[0]:0,e?e[0]:0],s[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===s.at[0]?m.left+=p:"center"===s.at[0]&&(m.left+=p/2),"bottom"===s.at[1]?m.top+=f:"center"===s.at[1]&&(m.top+=f/2),u=e(_.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var n,a,c=t(this),h=c.outerWidth(),l=c.outerHeight(),d=i(this,"marginLeft"),v=i(this,"marginTop"),C=h+d+i(this,"marginRight")+x.width,M=l+v+i(this,"marginBottom")+x.height,P=t.extend({},m),S=e(_.my,c.outerWidth(),c.outerHeight());"right"===s.my[0]?P.left-=h:"center"===s.my[0]&&(P.left-=h/2),"bottom"===s.my[1]?P.top-=l:"center"===s.my[1]&&(P.top-=l/2),P.left+=S[0],P.top+=S[1],n={marginLeft:d,marginTop:v},t.each(["left","top"],function(e,i){t.ui.position[b[e]]&&t.ui.position[b[e]][i](P,{targetWidth:p,targetHeight:f,elemWidth:h,elemHeight:l,collisionPosition:n,collisionWidth:C,collisionHeight:M,offset:[u[0]+S[0],u[1]+S[1]],my:s.my,at:s.at,within:w,elem:c})}),s.using&&(a=function(t){var e=g.left-P.left,i=e+p-h,n=g.top-P.top,a=n+f-l,u={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:c,left:P.left,top:P.top,width:h,height:l},horizontal:0>i?"left":e>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};h>p&&p>o(e+i)&&(u.horizontal="center"),l>f&&f>o(n+a)&&(u.vertical="middle"),u.important=r(o(e),o(i))>r(o(n),o(a))?"horizontal":"vertical",s.using.call(this,t,u)}),c.offset(t.extend(P,{using:a}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,c=s-a,h=a+e.collisionWidth-o-s;e.collisionWidth>o?c>0&&0>=h?(i=t.left+c+e.collisionWidth-o-s,t.left+=c-i):t.left=h>0&&0>=c?s:c>h?s+o-e.collisionWidth:s:c>0?t.left+=c:h>0?t.left-=h:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,c=s-a,h=a+e.collisionHeight-o-s;e.collisionHeight>o?c>0&&0>=h?(i=t.top+c+e.collisionHeight-o-s,t.top+=c-i):t.top=h>0&&0>=c?s:c>h?s+o-e.collisionHeight:s:c>0?t.top+=c:h>0?t.top-=h:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,r=s.offset.left+s.scrollLeft,a=s.width,c=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,l=h-c,u=h+e.collisionWidth-a-c,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>l?(i=t.left+d+p+f+e.collisionWidth-a-r,(0>i||o(l)>i)&&(t.left+=d+p+f)):u>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-c,(n>0||u>o(n))&&(t.left+=d+p+f))},top:function(t,e){var i,n,s=e.within,r=s.offset.top+s.scrollTop,a=s.height,c=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,l=h-c,u=h+e.collisionHeight-a-c,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>l?(n=t.top+p+f+g+e.collisionHeight-a-r,(0>n||o(l)>n)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-c,(i>0||u>o(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var l="ui-effects-",u="ui-effects-style",d="ui-effects-animated",p=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var n=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function n(i){var n=h(),s=n._rgba=[];return i=i.toLowerCase(),f(c,function(t,r){var o,a=r.re.exec(i),c=a&&r.parse(a),h=r.space||"rgba";return c?(o=n[h](c),n[l[h].cache]=o[l[h].cache],s=n._rgba=o._rgba,!1):e}),s.length?("0,0,0,0"===s.join()&&t.extend(s,r.transparent),n):r[i]}function s(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var r,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(l,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(s,o,a,c){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(o),o=e);var u=this,d=t.type(s),p=this._rgba=[];return o!==e&&(s=[s,o,a,c],d="array"),"string"===d?this.parse(n(s)||r._default):"array"===d?(f(l.rgba.props,function(t,e){p[e.idx]=i(s[e.idx],e)}),this):"object"===d?(s instanceof h?f(l,function(t,e){s[e.cache]&&(u[e.cache]=s[e.cache].slice())}):f(l,function(e,n){var r=n.cache;f(n.props,function(t,e){if(!u[r]&&n.to){if("alpha"===t||null==s[t])return;u[r]=n.to(u._rgba)}u[r][e.idx]=i(s[t],e,!0)}),u[r]&&0>t.inArray(null,u[r].slice(0,3))&&(u[r][3]=1,n.from&&(u._rgba=n.from(u[r])))}),this):e},is:function(t){var i=h(t),n=!0,s=this;return f(l,function(t,r){var o,a=i[r.cache];return a&&(o=s[r.cache]||r.to&&r.to(s._rgba)||[],f(r.props,function(t,i){return null!=a[i.idx]?n=a[i.idx]===o[i.idx]:e})),n}),n},_space:function(){var t=[],e=this;return f(l,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=h(t),s=n._space(),r=l[s],o=0===this.alpha()?h("transparent"):this,a=o[r.cache]||r.to(o._rgba),c=a.slice();return n=n[r.cache],f(r.props,function(t,s){var r=s.idx,o=a[r],h=n[r],l=u[s.type]||{};null!==h&&(null===o?c[r]=h:(l.mod&&(h-o>l.mod/2?o+=l.mod:o-h>l.mod/2&&(o-=l.mod)),c[r]=i((h-o)*e+o,s)))}),this[s](c)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=h(e)._rgba;return h(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,l.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,r=t[2]/255,o=t[3],a=Math.max(n,s,r),c=Math.min(n,s,r),h=a-c,l=a+c,u=.5*l;return e=c===a?0:n===a?60*(s-r)/h+360:s===a?60*(r-n)/h+120:60*(n-s)/h+240,i=0===h?0:.5>=u?h/l:h/(2-l),[Math.round(e)%360,i,u,null==o?1:o]},l.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],r=t[3],o=.5>=n?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(255*s(a,o,e+1/3)),Math.round(255*s(a,o,e)),Math.round(255*s(a,o,e-1/3)),r]},f(l,function(n,s){var r=s.props,o=s.cache,c=s.to,l=s.from;h.fn[n]=function(n){if(c&&!this[o]&&(this[o]=c(this._rgba)),n===e)return this[o].slice();var s,a=t.type(n),u="array"===a||"object"===a?n:arguments,d=this[o].slice();return f(r,function(t,e){var n=u["object"===a?t:e.idx];null==n&&(n=d[e.idx]),d[e.idx]=i(n,e)}),l?(s=h(l(d)),s[o]=d,s):h(d)},f(r,function(e,i){h.fn[e]||(h.fn[e]=function(s){var r,o=t.type(s),c="alpha"===e?this._hsla?"hsla":"rgba":n,h=this[c](),l=h[i.idx];return"undefined"===o?l:("function"===o&&(s=s.call(this,l),o=t.type(s)),null==s&&i.empty?this:("string"===o&&(r=a.exec(s),r&&(s=l+parseFloat(r[2])*("+"===r[1]?1:-1))),h[i.idx]=s,this[c](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,s){var r,o,a="";if("transparent"!==s&&("string"!==t.type(s)||(r=n(s)))){if(s=h(r||s),!d.rgba&&1!==s._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&o&&o.style;)try{a=t.css(o,"backgroundColor"),o=o.parentNode}catch(t){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(p),function(){function e(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(r[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(r[i]=s[i]);return r}function i(e,i){var n,r,o={};for(n in i)r=i[n],e[n]!==r&&(s[n]||(t.fx.step[n]||!isNaN(parseFloat(r)))&&(o[n]=r));return o}var n=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(p.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(s,r,o,a){var c=t.speed(r,o,a);return this.queue(function(){var r,o=t(this),a=o.attr("class")||"",h=c.children?o.find("*").addBack():o;h=h.map(function(){var i=t(this);return{el:i,start:e(this)}}),r=function(){t.each(n,function(t,e){s[e]&&o[e+"Class"](s[e])})},r(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",a),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},c,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),c.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,r){return n?t.effects.animateClass.call(this,{add:i},n,s,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,r,o){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,r,o):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,r)}})}(),function(){function e(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}function n(t,e){var i=e.outerWidth(),n=e.outerHeight(),s=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,r=s.exec(t)||["",0,i,n,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?i:parseFloat(r[2]),bottom:"auto"===r[3]?n:parseFloat(r[3]),left:parseFloat(r[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(i){return!!t(i).data(d)||e(i)}}(t.expr.filters.animated)),
t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;n>i;i++)null!==e[i]&&t.data(l+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,s=e.length;s>n;n++)null!==e[n]&&(i=t.data(l+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,s="vertical"!==i?(e||100)/100:1;return{height:t.height()*s,width:t.width()*n,outerHeight:t.outerHeight()*s,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(u,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(u)||"",t.removeData(u)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),s=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(l+"placeholder",i)),e.css({position:n,left:s.left,top:s.top}),i},removePlaceholder:function(t){var e=l+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var r=e.cssUnit(i);r[0]>0&&(s[i]=r[0]*n+r[1])}),s}}),t.fn.extend({effect:function(){function i(e){function i(){a.removeData(d),t.effects.cleanUp(a),"hide"===n.mode&&a.hide(),o()}function o(){t.isFunction(c)&&c.call(a[0]),t.isFunction(e)&&e()}var a=t(this);n.mode=l.shift(),t.uiBackCompat===!1||r?"none"===n.mode?(a[h](),o()):s.call(a[0],n,i):(a.is(":hidden")?"hide"===h:"show"===h)?(a[h](),o()):s.call(a[0],n,o)}var n=e.apply(this,arguments),s=t.effects.effect[n.effect],r=s.mode,o=n.queue,a=o||"fx",c=n.complete,h=n.mode,l=[],u=function(e){var i=t(this),n=t.effects.mode(i,h)||r;i.data(d,!0),l.push(n),r&&("show"===n||n===r&&"hide"===n)&&i.show(),r&&"none"===n||t.effects.saveStyle(i),t.isFunction(e)&&e()};return t.fx.off||!s?h?this[h](n.duration,c):this.each(function(){c&&c.call(this)}):o===!1?this.each(u).each(i):this.queue(a,u).queue(a,i)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):n(this.css("clip"),this)},transfer:function(e,i){var n=t(this),s=t(e.to),r="fixed"===s.css("position"),o=t("body"),a=r?o.scrollTop():0,c=r?o.scrollLeft():0,h=s.offset(),l={top:h.top-a,left:h.left-c,height:s.innerHeight(),width:s.innerWidth()},u=n.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:u.top-a,left:u.left-c,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(l,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=n(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();var f=t.effects;t.effects.define("blind","hide",function(e,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},s=t(this),r=e.direction||"up",o=s.cssClip(),a={clip:t.extend({},o)},c=t.effects.createPlaceholder(s);a.clip[n[r][0]]=a.clip[n[r][1]],"show"===e.mode&&(s.cssClip(a.clip),c&&c.css(t.effects.clipToBox(a)),a.clip=o),c&&c.animate(t.effects.clipToBox(a),e.duration,e.easing),s.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("bounce",function(e,i){var n,s,r,o=t(this),a=e.mode,c="hide"===a,h="show"===a,l=e.direction||"up",u=e.distance,d=e.times||5,p=2*d+(h||c?1:0),f=e.duration/p,g=e.easing,m="up"===l||"down"===l?"top":"left",v="up"===l||"left"===l,y=0,w=o.queue().length;for(t.effects.createPlaceholder(o),r=o.css(m),u||(u=o["top"===m?"outerHeight":"outerWidth"]()/3),h&&(s={opacity:1},s[m]=r,o.css("opacity",0).css(m,v?2*-u:2*u).animate(s,f,g)),c&&(u/=Math.pow(2,d-1)),s={},s[m]=r;d>y;y++)n={},n[m]=(v?"-=":"+=")+u,o.animate(n,f,g).animate(s,f,g),u=c?2*u:u/2;c&&(n={opacity:0},n[m]=(v?"-=":"+=")+u,o.animate(n,f,g)),o.queue(i),t.effects.unshift(o,w,p+1)}),t.effects.define("clip","hide",function(e,i){var n,s={},r=t(this),o=e.direction||"vertical",a="both"===o,c=a||"horizontal"===o,h=a||"vertical"===o;n=r.cssClip(),s.clip={top:h?(n.bottom-n.top)/2:n.top,right:c?(n.right-n.left)/2:n.right,bottom:h?(n.bottom-n.top)/2:n.bottom,left:c?(n.right-n.left)/2:n.left},t.effects.createPlaceholder(r),"show"===e.mode&&(r.cssClip(s.clip),s.clip=n),r.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("drop","hide",function(e,i){var n,s=t(this),r=e.mode,o="show"===r,a=e.direction||"left",c="up"===a||"down"===a?"top":"left",h="up"===a||"left"===a?"-=":"+=",l="+="===h?"-=":"+=",u={opacity:0};t.effects.createPlaceholder(s),n=e.distance||s["top"===c?"outerHeight":"outerWidth"](!0)/2,u[c]=h+n,o&&(s.css(u),u[c]=l+n,u.opacity=1),s.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("explode","hide",function(e,i){function n(){w.push(this),w.length===u*d&&s()}function s(){p.css({visibility:"visible"}),t(w).remove(),i()}var r,o,a,c,h,l,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=e.mode,g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),y=Math.ceil(p.outerHeight()/u),w=[];for(r=0;u>r;r++)for(c=m.top+r*y,l=r-(u-1)/2,o=0;d>o;o++)a=m.left+o*v,h=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(g?h*v:0),top:c+(g?l*y:0),opacity:g?0:1}).animate({left:a+(g?0:h*v),top:c+(g?0:l*y),opacity:g?1:0},e.duration||500,e.easing,n)}),t.effects.define("fade","toggle",function(e,i){var n="show"===e.mode;t(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("fold","hide",function(e,i){var n=t(this),s=e.mode,r="show"===s,o="hide"===s,a=e.size||15,c=/([0-9]+)%/.exec(a),h=!!e.horizFirst,l=h?["right","bottom"]:["bottom","right"],u=e.duration/2,d=t.effects.createPlaceholder(n),p=n.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[l[0]],p[l[1]]],v=n.queue().length;c&&(a=parseInt(c[1],10)/100*m[o?0:1]),f.clip[l[0]]=a,g.clip[l[0]]=a,g.clip[l[1]]=0,r&&(n.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),n.queue(function(i){d&&d.animate(t.effects.clipToBox(f),u,e.easing).animate(t.effects.clipToBox(g),u,e.easing),i()}).animate(f,u,e.easing).animate(g,u,e.easing).queue(i),t.effects.unshift(n,v,4)}),t.effects.define("highlight","show",function(e,i){var n=t(this),s={backgroundColor:n.css("backgroundColor")};"hide"===e.mode&&(s.opacity=0),t.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("size",function(e,i){var n,s,r,o=t(this),a=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.mode,u="effect"!==l,d=e.scale||"both",p=e.origin||["middle","center"],f=o.css("position"),g=o.position(),m=t.effects.scaledDimensions(o),v=e.from||m,y=e.to||t.effects.scaledDimensions(o,0);t.effects.createPlaceholder(o),"show"===l&&(r=v,v=y,y=r),s={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},("box"===d||"both"===d)&&(s.from.y!==s.to.y&&(v=t.effects.setTransition(o,c,s.from.y,v),y=t.effects.setTransition(o,c,s.to.y,y)),s.from.x!==s.to.x&&(v=t.effects.setTransition(o,h,s.from.x,v),y=t.effects.setTransition(o,h,s.to.x,y))),("content"===d||"both"===d)&&s.from.y!==s.to.y&&(v=t.effects.setTransition(o,a,s.from.y,v),y=t.effects.setTransition(o,a,s.to.y,y)),p&&(n=t.effects.getBaseline(p,m),v.top=(m.outerHeight-v.outerHeight)*n.y+g.top,v.left=(m.outerWidth-v.outerWidth)*n.x+g.left,y.top=(m.outerHeight-y.outerHeight)*n.y+g.top,y.left=(m.outerWidth-y.outerWidth)*n.x+g.left),o.css(v),("content"===d||"both"===d)&&(c=c.concat(["marginTop","marginBottom"]).concat(a),h=h.concat(["marginLeft","marginRight"]),o.find("*[width]").each(function(){var i=t(this),n=t.effects.scaledDimensions(i),r={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},o={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x};s.from.y!==s.to.y&&(r=t.effects.setTransition(i,c,s.from.y,r),o=t.effects.setTransition(i,c,s.to.y,o)),s.from.x!==s.to.x&&(r=t.effects.setTransition(i,h,s.from.x,r),o=t.effects.setTransition(i,h,s.to.x,o)),u&&t.effects.saveStyle(i),i.css(r),i.animate(o,e.duration,e.easing,function(){u&&t.effects.restoreStyle(i)})})),o.animate(y,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=o.offset();0===y.opacity&&o.css("opacity",v.opacity),u||(o.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(o)),i()}})}),t.effects.define("scale",function(e,i){var n=t(this),s=e.mode,r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==s?0:100),o=t.extend(!0,{from:t.effects.scaledDimensions(n),to:t.effects.scaledDimensions(n,r,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(o.from.opacity=1,o.to.opacity=0),t.effects.effect.size.call(this,o,i)}),t.effects.define("puff","hide",function(e,i){var n=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,n,i)}),t.effects.define("pulsate","show",function(e,i){var n=t(this),s=e.mode,r="show"===s,o="hide"===s,a=r||o,c=2*(e.times||5)+(a?1:0),h=e.duration/c,l=0,u=1,d=n.queue().length;for((r||!n.is(":visible"))&&(n.css("opacity",0).show(),l=1);c>u;u++)n.animate({opacity:l},h,e.easing),l=1-l;n.animate({opacity:l},h,e.easing),n.queue(i),t.effects.unshift(n,d,c+1)}),t.effects.define("shake",function(e,i){var n=1,s=t(this),r=e.direction||"left",o=e.distance||20,a=e.times||3,c=2*a+1,h=Math.round(e.duration/c),l="up"===r||"down"===r?"top":"left",u="up"===r||"left"===r,d={},p={},f={},g=s.queue().length;for(t.effects.createPlaceholder(s),d[l]=(u?"-=":"+=")+o,p[l]=(u?"+=":"-=")+2*o,f[l]=(u?"-=":"+=")+2*o,s.animate(d,h,e.easing);a>n;n++)s.animate(p,h,e.easing).animate(f,h,e.easing);s.animate(p,h,e.easing).animate(d,h/2,e.easing).queue(i),t.effects.unshift(s,g,c+1)}),t.effects.define("slide","show",function(e,i){var n,s,r=t(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,c=e.direction||"left",h="up"===c||"down"===c?"top":"left",l="up"===c||"left"===c,u=e.distance||r["top"===h?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(r),n=r.cssClip(),s=r.position()[h],d[h]=(l?-1:1)*u+s,d.clip=r.cssClip(),d.clip[o[c][1]]=d.clip[o[c][0]],"show"===a&&(r.cssClip(d.clip),r.css(h,d[h]),d.clip=n,d[h]=s),r.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})});var f;t.uiBackCompat!==!1&&(f=t.effects.define("transfer",function(e,i){t(this).transfer(e,i)})),t.ui.focusable=function(i,n){var s,r,o,a,c,h=i.nodeName.toLowerCase();return"area"===h?(s=i.parentNode,r=s.name,!(!i.href||!r||"map"!==s.nodeName.toLowerCase())&&(o=t("img[usemap='#"+r+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(h)?(a=!i.disabled,a&&(c=t(i).closest("fieldset")[0],c&&(a=!c.disabled))):a="a"===h?i.href||n:n,a&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function n(e,i,n,r){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?o["inner"+i].call(this):this.each(function(){t(this).css(r,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(r,n(this,e,!0,s)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,n,s,r;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(s=this.eq(0).parents("label"),n=this.attr("id"),n&&(e=this.eq(0).parents().last(),r=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(n)+"']",s=s.add(r.find(i).addBack(i))),this.pushStack(s))},t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),n=null!=i;return(!n||i>=0)&&t.ui.focusable(e,n)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,n=this.options.icons;n&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+n.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),r=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(t(e.target).attr("tabIndex",-1),t(r).attr("tabIndex",0),t(r).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,n=i.heightStyle,s=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),n=e.next(),s=n.uniqueId().attr("id");e.attr("aria-controls",s),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(e=s.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each(function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,n,s=this.options,r=this.active,o=t(e.currentTarget),a=o[0]===r[0],c=a&&s.collapsible,h=c?t():o.next(),l=r.next(),u={oldHeader:r,oldPanel:l,newHeader:c?t():o,newPanel:h};e.preventDefault(),a&&!s.collapsible||this._trigger("beforeActivate",e,u)===!1||(s.active=!c&&this.headers.index(o),this.active=a?t():o,this._toggle(u),this._removeClass(r,"ui-accordion-header-active","ui-state-active"),s.icons&&(i=r.children(".ui-accordion-header-icon"),this._removeClass(i,null,s.icons.activeHeader)._addClass(i,null,s.icons.header)),a||(this._removeClass(o,"ui-accordion-header-collapsed")._addClass(o,"ui-accordion-header-active","ui-state-active"),s.icons&&(n=o.children(".ui-accordion-header-icon"),this._removeClass(n,null,s.icons.header)._addClass(n,null,s.icons.activeHeader)),this._addClass(o.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var n,s,r,o=this,a=0,c=t.css("box-sizing"),h=t.length&&(!e.length||t.index()<e.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){o._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(s=u),s=s||u.easing||l.easing,r=r||u.duration||l.duration,e.length?t.length?(n=t.show().outerHeight(),e.animate(this.hideProps,{duration:r,easing:s,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:r,easing:s,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===c&&(a+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(n-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,r,s,d):t.animate(this.showProps,r,s,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),n=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&n.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),n=t(e.currentTarget);i[0]===n[0]&&(this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,n))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,n,s,r,o=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,n=this.previousFilter||"",r=!1,s=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===n?r=!0:s=n+s,i=this._filterMenuItems(s),i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,n,s,r,o=this,a=this.options.icons.submenu,c=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),n=c.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);o._addClass(n,"ui-menu-icon","ui-icon "+a),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front"),e=c.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);o._isDivider(e)&&o._addClass(e,"ui-menu-divider","ui-widget-content")}),s=i.not(".ui-menu-item, .ui-menu-divider"),r=s.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,n,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),s=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),
this._addClass(s,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,r,o,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.outerHeight(),0>s?this.activeMenu.scrollTop(r+s):s+a>o&&this.activeMenu.scrollTop(r+s-o+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this._removeClass(n.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-n-s}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),r="textarea"===s,o="input"===s;this.isMultiLine=r||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[r||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var r=t.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:e=!0,this._move("previousPage",s);break;case r.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case r.UP:e=!0,this._keyEvent("previous",s);break;case r.DOWN:e=!0,this._keyEvent("next",s);break;case r.ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case r.TAB:this.menu.active&&this.menu.select(s);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var n,s;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(s=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:s})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value),n=i.item.attr("aria-label")||s.value,void(n&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(e,i){var n=i.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!n)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var g=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(n,s){var r,o={};return s?"controlgroupLabel"===n?(r=e.element.find(s),r.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(r,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(r.get()))):void(t.fn[n]&&(o=e["_"+n+"Options"]?e["_"+n+"Options"]("middle"):{classes:{}},e.element.find(s).each(function(){var s=t(this),r=s[n]("instance"),a=t.widget.extend({},o);if("button"!==n||!s.parent(".ui-spinner").length){r||(r=s[n]()[n]("instance")),r&&(a.classes=e._resolveClassesValues(a.classes,r)),s[n](a);var c=s[n]("widget");t.data(c[0],"ui-controlgroup-data",r?r:s[n]("instance")),i.push(c[0])}}))):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this),n=i.data("ui-controlgroup-data");n&&n[e]&&n[e]()})},_updateCornerClass:function(t,e){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",n=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,i),this._addClass(t,null,n)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],n},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var n={};return t.each(e,function(s){var r=i.options.classes[s]||"";r=t.trim(r.replace(g,"")),n[s]=(r+" "+e[s]).replace(/\s+/g," ")}),n},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,n){var s=e[n]().data("ui-controlgroup-data");if(s&&i["_"+s.widgetName+"Options"]){var r=i["_"+s.widgetName+"Options"](1===e.length?"only":n);r.classes=i._resolveClassesValues(r.classes,s),s.element[s.widgetName](r)}else i._updateCornerClass(e[n](),n)}),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,n=this,s=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(s.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(s.disabled=e),s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,i=this.element[0].name,n="input[name='"+t.ui.escapeSelector(i)+"']";return i?(e=this.form.length?t(this.form[0].elements).filter(n):t(n).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var n="iconPosition"!==e,s=n?this.options.iconPosition:i,r="top"===s||"bottom"===s;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(s),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(s))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}});var m;t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return o(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,r;n=e.nodeName.toLowerCase(),s="div"===n||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),s),r.settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,r):s&&this._inlineDatepicker(e,r)},_newInst:function(e,i){var n=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,r,o=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=t("<span class='"+this._appendClass+"'>"+o+"</span>"),e[a?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&e.on("focus",this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:s,title:s}):s)),e[a?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,r=new Date(2009,11,20),o=this._get(t,"dateFormat");o.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;t.length>s;s++)t[s].length>i&&(i=t[s].length,n=s);return n},r.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,s,r){var a,c,h,l,u,d=this._dialogInst;return d||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),o(d.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty(),m===s&&(m=null))},_enableDatepicker:function(e){var i,n,s=t(e),r=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),r=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var s,r,a,c,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(s=i||{},"string"==typeof i&&(s={},
s[i]=n),void(h&&(this._curInst===h&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),o(h.settings,s),null!==a&&void 0!==s.dateFormat&&void 0===s.minDate&&(h.settings.minDate=this._formatDate(h,a)),null!==c&&void 0!==s.dateFormat&&void 0===s.maxDate&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,r),this._updateAlternate(h),this._updateDatepicker(h))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,r=t.datepicker._getInst(e.target),o=!0,a=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),o=!1;break;case 13:return s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),s[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,s[0]),i=t.datepicker._get(r,"onSelect"),i?(n=t.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,a?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);return t.datepicker._get(s,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(e){var i,n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n)),i&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(t){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,s,r,a,c,h,l;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),s=t.datepicker._get(n,"beforeShow"),r=s?s.apply(e,[e,n]):{},r!==!1&&(o(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),a=!1,t(e).parents().each(function(){return a|="fixed"===t(this).css("position"),!a}),c={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),c=t.datepicker._checkOffset(n,c,a),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":a?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"}),n.inline||(h=t.datepicker._get(n,"showAnim"),l=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?n.dpDiv.show(h,t.datepicker._get(n,"showOptions"),l):n.dpDiv[h||"show"](h?l:null),t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,m=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,n=this._getNumberOfMonths(e),s=n[1],o=17,a=e.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&r.apply(a.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,c=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-o:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>c&&c>s?Math.abs(i.left+s-c):0),i.top-=Math.min(i.top,i.top+r>h&&h>r?Math.abs(r+a):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,r,o=this._curInst;!o||e&&o!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),n=this._get(o,"duration"),s=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[i]||t.effects[i])?o.dpDiv.hide(i,t.datepicker._get(o,"showOptions"),n,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==n)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),r=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(r,i+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),r=this._getInst(s[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(s)},_selectDay:function(e,i,n,s){var r,o=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(r=this._getInst(o[0]),r.selectedDay=r.currentDay=t("a",s).html(),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),r=this._getInst(s[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),n=this._get(r,"onSelect"),n?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,r=this._get(e,"altField");r&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(r).val(s))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var s,r,o,a,c=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,w=!1,x=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},b=function(t){var e=x(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s="y"===t?n:1,r=RegExp("^\\d{"+s+","+n+"}"),o=i.substring(c).match(r);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},_=function(e,n,s){var r=-1,o=t.map(x(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(o,function(t,e){var n=e[1];return i.substr(c,n.length).toLowerCase()===n.toLowerCase()?(r=e[0],c+=n.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+c},C=function(){if(i.charAt(c)!==e.charAt(s))throw"Unexpected literal at position "+c;c++};for(s=0;e.length>s;s++)if(w)"'"!==e.charAt(s)||x("'")?C():w=!1;else switch(e.charAt(s)){case"d":v=b("d");break;case"D":_("D",u,d);break;case"o":y=b("o");break;case"m":m=b("m");break;case"M":m=_("M",p,f);break;case"y":g=b("y");break;case"@":a=new Date(b("@")),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((b("!")-this._ticksTo1970)/1e4),g=a.getFullYear(),m=a.getMonth()+1,v=a.getDate();break;case"'":x("'")?C():w=!0;break;default:C()}if(i.length>c&&(o=i.substr(c),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=g?0:-100)),y>-1)for(m=1,v=y;r=this._getDaysInMonth(g,m-1),!(r>=v);)m++,v-=r;if(a=this._daylightSavingAdjust(new Date(g,m-1,v)),a.getFullYear()!==g||a.getMonth()+1!==m||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,c=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(c(t))for(;i>n.length;)n="0"+n;return n},l=function(t,e,i,n){return c(t)?n[e]:i[e]},u="",d=!1;if(e)for(n=0;t.length>n;n++)if(d)"'"!==t.charAt(n)||c("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),s,r);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),o,a);break;case"y":u+=c("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":c("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=t.length>e+1&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;t.length>e;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),r=s,o=this._getFormatConfig(t);try{r=this.parseDate(i,n,o)||s}catch(t){n=e?"":n}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=n?r.getDate():0,t.currentMonth=n?r.getMonth():0,t.currentYear=n?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),r=n.getMonth(),o=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=a.exec(i);c;){switch(c[2]||"d"){case"d":case"D":o+=parseInt(c[1],10);break;case"w":case"W":o+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(s,r))}c=a.exec(i)}return new Date(s,r,o)},o=null==i||""===i?n:"string"==typeof i?r(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?n:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,r=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),s===t.selectedMonth&&r===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,r,o,a,c,h,l,u,d,p,f,g,m,v,y,w,x,b,_,C,M,P,S,E,k,D,A,T,z,L,I,R,N,B,H,F,O=new Date,V=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),W=this._get(t,"isRTL"),$=this._get(t,"showButtonPanel"),G=this._get(t,"hideIfNoPrevNext"),U=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),j=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),q=1!==Y[0]||1!==Y[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-j,tt=t.drawYear;if(0>Q&&(Q+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate())),e=Z&&Z>e?Z:e;this._daylightSavingAdjust(new Date(tt,Q,1))>e;)Q--,0>Q&&(Q=11,tt--);for(t.drawMonth=Q,t.drawYear=tt,i=this._get(t,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Q-X,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":G?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=U?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Q+X,1)),this._getFormatConfig(t)):s,r=this._canAdjustMonth(t,1,tt,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>":G?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>",o=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?K:V,o=U?this.formatDate(o,a,this._getFormatConfig(t)):o,c=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=$?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?c:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(W?"":c)+"</div>":"",l=parseInt(this._get(t,"firstDay"),10),l=isNaN(l)?0:l,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),w=this._getDefaultDate(t),x="",_=0;Y[0]>_;_++){for(C="",this.maxRows=4,M=0;Y[1]>M;M++){if(P=this._daylightSavingAdjust(new Date(tt,Q,t.selectedDay)),S=" ui-corner-all",E="",q){if(E+="<div class='ui-datepicker-group",Y[1]>1)switch(M){case 0:E+=" ui-datepicker-group-first",S=" ui-corner-"+(W?"right":"left");break;case Y[1]-1:E+=" ui-datepicker-group-last",S=" ui-corner-"+(W?"left":"right");break;default:E+=" ui-datepicker-group-middle",S=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===_?W?r:n:"")+(/all|right/.test(S)&&0===_?W?n:r:"")+this._generateMonthYearHeader(t,Q,tt,Z,J,_>0||M>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",b=0;7>b;b++)D=(b+l)%7,k+="<th scope='col'"+((b+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[D]+"'>"+p[D]+"</span></th>";for(E+=k+"</tr></thead><tbody>",A=this._getDaysInMonth(tt,Q),tt===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,A)),T=(this._getFirstDayOfMonth(tt,Q)-l+7)%7,z=Math.ceil((T+A)/7),L=q&&this.maxRows>z?this.maxRows:z,this.maxRows=L,I=this._daylightSavingAdjust(new Date(tt,Q,1-T)),R=0;L>R;R++){for(E+="<tr>",N=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(I)+"</td>":"",b=0;7>b;b++)B=m?m.apply(t.input?t.input[0]:null,[I]):[!0,""],H=I.getMonth()!==Q,F=H&&!y||!B[0]||Z&&Z>I||J&&I>J,N+="<td class='"+((b+l+6)%7>=5?" ui-datepicker-week-end":"")+(H?" ui-datepicker-other-month":"")+(I.getTime()===P.getTime()&&Q===t.selectedMonth&&t._keyEvent||w.getTime()===I.getTime()&&w.getTime()===P.getTime()?" "+this._dayOverClass:"")+(F?" "+this._unselectableClass+" ui-state-disabled":"")+(H&&!v?"":" "+B[1]+(I.getTime()===K.getTime()?" "+this._currentClass:"")+(I.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(H&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+(F?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(H&&!v?"&#xa0;":F?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===V.getTime()?" ui-state-highlight":"")+(I.getTime()===K.getTime()?" ui-state-active":"")+(H?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);E+=N+"</tr>"}Q++,Q>11&&(Q=0,tt++),E+="</tbody></table>"+(q?"</div>"+(Y[0]>0&&M===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=E}x+=C}return x+=h,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,i,n,s,r,o,a){var c,h,l,u,d,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),w="<div class='ui-datepicker-title'>",x="";if(r||!m)x+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(c=n&&n.getFullYear()===i,h=s&&s.getFullYear()===i,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!c||l>=n.getMonth())&&(!h||s.getMonth()>=l)&&(x+="<option value='"+l+"'"+(l===e?" selected='selected'":"")+">"+a[l]+"</option>");x+="</select>"}if(y||(w+=x+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)w+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,g=s?Math.min(g,s.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",w+=t.yearshtml,t.yearshtml=null}return w+=this._get(t,"yearSuffix"),y&&(w+=(!r&&m&&v?"":"&#xa0;")+x),w+="</div>"},_adjustInstDate:function(t,e,i){var n=t.selectedYear+("Y"===i?e:0),s=t.selectedMonth+("M"===i?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,r)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&i>e?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(i,n+(0>e?e:s[0]*s[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),o=null,a=null,c=this._get(t,"yearRange");return c&&(i=c.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!s||e.getTime()>=s.getTime())&&(!r||e.getTime()<=r.getTime())&&(!o||e.getFullYear()>=o)&&(!a||a>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var v=!1;t(document).on("mouseup",function(){v=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!v){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),v=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,v=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,n){var s,r=t.ui[e].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;r.length>s;s++)t.options[r[s][0]]&&r[s][1].apply(t.element,i)}},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){
var i=t.ui.safeActiveElement(this.document[0]),n=t(e.target);n.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,r=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),n=i[0],void(n&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),c=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(c=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(c=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,c=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r),"y"===o.axis&&(c=this.originalPageX),"x"===o.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(e,i,n){t.each(n.sortables,function(){var s=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(s=!1),s})),s?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",e),n.dropped=r.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(e),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),r=n.options;s.css("cursor")&&(r._cursor=s.css("cursor")),s.css("cursor",r.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),r=n.options;s.css("opacity")&&(r._opacity=s.css("opacity")),s.css("opacity",r.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var s=n.options,r=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<s.scrollSensitivity?o.scrollTop=r=o.scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<s.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,r,o,a,c,h,l,u,d,p,f=n.options,g=f.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,y=i.offset.top,w=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)c=n.snapElements[d].left-n.margins.left,h=c+n.snapElements[d].width,l=n.snapElements[d].top-n.margins.top,u=l+n.snapElements[d].height,c-g>v||m>h+g||l-g>w||y>u+g||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(s=g>=Math.abs(l-w),r=g>=Math.abs(u-y),o=g>=Math.abs(c-v),a=g>=Math.abs(h-m),s&&(i.position.top=n._convertPositionTo("relative",{top:l-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=s||r||o||a,"outer"!==f.snapMode&&(s=g>=Math.abs(l-y),r=g>=Math.abs(u-w),o=g>=Math.abs(c-m),a=g>=Math.abs(h-v),s&&(i.position.top=n._convertPositionTo("relative",{top:l,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(s||r||o||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=s||r||o||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,r=n.options,o=t.makeArray(t(r.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});o.length&&(s=parseInt(t(o[0]).css("zIndex"),10)||0,t(o).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+o.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),r=n.options;s.css("zIndex")&&(r._zIndex=s.css("zIndex")),s.css("zIndex",r.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,n,s,r,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;n.length>i;i++)e=t.trim(n[i]),s="ui-resizable-"+e,r=t("<div>"),this._addClass(r,"ui-resizable-handle "+s),r.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(r);this._renderAxis=function(e){var i,n,s,r;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=r&&r[1]?r[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=t(r.containment).scrollLeft()||0,n+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,r=this.axis,o=e.pageX-s.left||0,a=e.pageY-s.top||0,c=this._change[r];return this._updatePrevProperties(),!!c&&(i=c.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,r,o,a,c,h=this.options,l=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:l.sizeDiff.height,r=n?0:l.sizeDiff.width,o={width:l.helper.width()-r,height:l.helper.height()-s},a=parseFloat(l.element.css("left"))+(l.position.left-l.originalPosition.left)||null,c=parseFloat(l.element.css("top"))+(l.position.top-l.originalPosition.top)||null,h.animate||this.element.css(t.extend(o,{top:c,left:a})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,r,o=this.options;r={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),n>r.minHeight&&(r.minHeight=n),r.maxWidth>i&&(r.maxWidth=i),r.maxHeight>s&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,c=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),l=/nw|ne|n/.test(i);return r&&(t.width=e.minWidth),o&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),r&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),o&&l&&(t.top=c-e.minHeight),s&&l&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(s[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),o=r&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,c={width:i.size.width-a,height:i.size.height-o},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,l=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(c,l&&h?{top:l,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,r,o,a,c=t(this).resizable("instance"),h=c.options,l=c.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?l.parent().get(0):u;d&&(c.containerElement=t(d),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=c._num(e.css("padding"+n))}),c.containerOffset=e.offset(),c.containerPosition=e.position(),c.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=c.containerOffset,s=c.containerSize.height,r=c.containerSize.width,o=c._hasScroll(d,"left")?d.scrollWidth:r,a=c._hasScroll(d)?d.scrollHeight:s,c.parentData={element:d,left:n.left,top:n.top,width:o,height:a}))},resize:function(e){var i,n,s,r,o=t(this).resizable("instance"),a=o.options,c=o.containerOffset,h=o.position,l=o._aspectRatio||e.shiftKey,u={top:0,left:0},d=o.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=c),h.left<(o._helper?c.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-c.left:o.position.left-u.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=a.helper?c.left:0),h.top<(o._helper?c.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-c.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?c.top:0),s=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),s&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-c.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-c.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,r=e.containerElement,o=t(e.helper),a=o.offset(),c=o.outerWidth()-e.sizeDiff.width,h=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(r.css("position"))&&t(this).css({
left:a.left-s.left-n.left,width:c,height:h}),e._helper&&!i.animate&&/static/.test(r.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:c,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,r=n.originalSize,o=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};t(s.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},r=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,r=i.originalSize,o=i.originalPosition,a=i.axis,c="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=c[0]||1,l=c[1]||1,u=Math.round((s.width-r.width)/h)*h,d=Math.round((s.height-r.height)/l)*l,p=r.width+u,f=r.height+d,g=n.maxWidth&&p>n.maxWidth,m=n.maxHeight&&f>n.maxHeight,v=n.minWidth&&n.minWidth>p,y=n.minHeight&&n.minHeight>f;n.grid=c,v&&(p+=h),y&&(f+=l),g&&(p-=h),m&&(f-=l),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=o.top-d):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=o.left-u):((0>=f-l||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-l>0?(i.size.height=f,i.position.top=o.top-d):(f=l-e.height,i.size.height=f,i.position.top=o.top+r.height-f),p-h>0?(i.size.width=p,i.position.left=o.left-u):(p=h-e.width,i.size.width=p,i.position.left=o.left+r.width-p))}}),t.ui.resizable,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var n=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),r=Math.max.apply(null,s);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!i&&this._trigger("focus",e),n},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){s.trigger("focus")}),e.preventDefault()):(this._delay(function(){n.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,function(i,n){var s,r;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,r={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,t("<button></button>",n).button(r).appendTo(e.uiButtonSet).on("click",function(){s.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){i._addClass(t(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,r){var o=r.offset.left-i.document.scrollLeft(),a=r.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(a>=0?"+":"")+a,of:i.window},i._removeClass(t(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,e(r))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,s=n.resizable,r=this.uiDialog.css("position"),o="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,s){i._addClass(t(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(s))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(s,r){var o=i.uiDialog.offset(),a=o.left-i.document.scrollLeft(),c=o.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(c>=0?"+":"")+c,of:i.window},i._removeClass(t(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,e(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,s={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(n=!0),t in i.resizableRelatedOptions&&(s[t]=e)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,i){var n,s,r=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(n=r.is(":data(ui-draggable)"),n&&!i&&r.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=r.is(":data(ui-resizable)"),s&&!i&&r.resizable("destroy"),s&&"string"==typeof i&&r.resizable("option","handles",i),s||i===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&y(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(s=!0,!1):void 0}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var y=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n,s){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,c=o+e.helperProportions.height,h=i.offset.left,l=i.offset.top,u=h+i.proportions().width,d=l+i.proportions().height;switch(n){case"fit":return r>=h&&u>=a&&o>=l&&d>=c;case"intersect":return r+e.helperProportions.width/2>h&&u>a-e.helperProportions.width/2&&o+e.helperProportions.height/2>l&&d>c-e.helperProportions.height/2;case"pointer":return t(s.pageY,l,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(o>=l&&d>=o||c>=l&&d>=c||l>o&&c>d)&&(r>=h&&u>=r||a>=h&&u>=a||h>r&&a>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,s,r=t.ui.ddmanager.droppables[e.options.scope]||[],o=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;r.length>n;n++)if(!(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element))){for(s=0;a.length>s;s++)if(a[s]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],i),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&y(e,this,this.options.tolerance,i)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,r,o=y(e,this,this.options.tolerance,i),a=!o&&this.isover?"isout":o&&!this.isover?"isover":null;a&&(this.options.greedy&&(s=this.options.scope,r=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===s}),r.length&&(n=t(r[0]).droppable("instance"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),n=i.offset(),s={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:s.left,top:s.top,right:s.left+i.outerWidth(),bottom:s.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");return s?(n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),i._removeClass(s.$element,n?"ui-unselecting":"ui-selected")._addClass(s.$element,n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,r=this.opos[0],o=this.opos[1],a=e.pageX,c=e.pageY;return r>a&&(i=a,a=r,r=i),o>c&&(i=c,c=o,o=i),this.helper.css({left:r,top:o,width:a-r,height:c-o}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1,l={};i&&i.element!==n.element[0]&&(l.left=i.left+n.elementPos.left,l.right=i.right+n.elementPos.left,l.top=i.top+n.elementPos.top,l.bottom=i.bottom+n.elementPos.top,"touch"===s.tolerance?h=!(l.left>a||r>l.right||l.top>c||o>l.bottom):"fit"===s.tolerance&&(h=l.left>r&&a>l.right&&l.top>o&&c>l.bottom),h?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(n).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var n=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&n.index!==e.focusIndex&&(e._trigger("focus",t,{item:n}),e.isOpen||e._select(n,t)),e.focusIndex=n.index,e.button.attr("aria-activedescendant",e.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var n=this,s="";t.each(i,function(i,r){var o;r.optgroup!==s&&(o=t("<li>",{text:r.optgroup}),n._addClass(o,"ui-selectmenu-optgroup","ui-menu-divider"+(r.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),
o.appendTo(e),s=r.optgroup),n._renderItemData(e,r)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var n=t("<li>"),s=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(n,null,"ui-state-disabled"),this._setText(s,i.label),n.append(s).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,n,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),n="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](s).eq(-1):i[t+"All"](s).eq(0),n.length&&this.menuInstance.focus(e,n)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,n=[];e.each(function(e,s){n.push(i._parseOption(t(s),e))}),this.items=n},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle"),r="<span tabindex='0'></span>",o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)o.push(r);this.handles=s.add(t(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,r,o,a,c,h,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-l.values(e));(s>i||s===i&&(e===l._lastChangedValue||l.values(e)===u.min))&&(s=i,r=t(this),o=e)}),a=this._start(e,o),a!==!1&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),c=r.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-c.left-r.width()/2,top:e.pageY-c.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,r;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),r=this._valueMin()+n*s,this._trimAlignValue(r)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,s,r=this.value(),o=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(s,i):Math.max(s,i)),o[e]=i),i!==r&&(n=this._trigger("slide",t,this._uiHash(e,i,o)),n!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,r;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,s=arguments[0],r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=s-1;n>=0;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.round((t-e)/i)*i;t=n+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,s,r,o=this.options.range,a=this.options,c=this,h=!this._animateOff&&a.animate,l={};this._hasMultipleValues()?this.handles.each(function(n){i=100*((c.values(n)-c._valueMin())/(c._valueMax()-c._valueMin())),l["horizontal"===c.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](l,a.animate),c.options.range===!0&&("horizontal"===c.orientation?(0===n&&c.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===n&&c.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&c.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&c.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),i=r!==s?100*((n-s)/(r-s)):0,l["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](l,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,n,s,r,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,o),i===!1))return}switch(r=this.options.step,n=s=this._hasMultipleValues()?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-r)}this._slide(e,o,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,s=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(n=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,r,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],s))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,c=a+t.height,h=this.offset.click.top,l=this.offset.click.left,u="x"===this.options.axis||n+h>a&&c>n+h,d="y"===this.options.axis||e+l>r&&o>e+l,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>r&&o>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&c>s-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;return!!r&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){a.push(this)}var n,s,r,o,a=[],c=[],h=this._connectWith();if(h&&e)for(n=h.length-1;n>=0;n--)for(r=t(h[n],this.document[0]),s=r.length-1;s>=0;s--)o=t.data(r[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&c.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(c.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=c.length-1;n>=0;n--)c[n][0].each(i);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,r,o,a,c,h,l=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(s=t(d[i],this.document[0]),n=s.length-1;n>=0;n--)r=t.data(s[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(u.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=u.length-1;i>=0;i--)for(o=u[i][1],a=u[i][0],n=0,h=a.length;h>n;n++)c=t(a[n]),c.data(this.widgetName+"-item",o),l.push({item:c,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),r=s.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]);return e._addClass(s,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(s,"ui-sortable-helper"),"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===n?e._createTrPlaceholder(e.currentItem,s):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){(!i||n.forcePlaceholderSize)&&(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,s,r,o,a,c,h,l,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(s=1e4,r=null,l=d.floating||this._isFloating(this.currentItem),o=l?"left":"top",a=l?"width":"height",u=l?"pageX":"pageY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(c=this.items[n].item.offset()[o],h=!1,e[u]-c>this.items[n][a]/2&&(h=!0),s>Math.abs(e[u]-c)&&(s=Math.abs(e[u]-c),r=this.items[n],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],
top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,r=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,c=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||s.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;s.length>n;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],function(t,n){var s=i.attr(n);null!=s&&s.length&&(e[n]=s)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&n.min>t?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,n,s;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i))):(("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(n=this.buttons.first().find(".ui-icon"),this._removeClass(n,null,this.options.icons.up),this._addClass(n,null,e.up),s=this.buttons.last().find(".ui-icon"),this._removeClass(s,null,this.options.icons.down),this._addClass(s,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:a(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:a(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:a(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:a(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void a(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,n;i=e.href.replace(t,""),n=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(t){}try{n=decodeURIComponent(n)}catch(t){}return e.hash.length>1&&i===n}}(),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,s){return t(s).attr("aria-controls")===n?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=!!this.tabs.length&&0)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=!i&&0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function n(){return e>s&&(e=0),0>e&&(e=s),e}for(var s=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,n=this.anchors,s=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(i,n){var s,r,o,a=t(n).uniqueId().attr("id"),c=t(n).closest("li"),h=c.attr("aria-controls");e._isLocal(n)?(s=n.hash,o=s.substring(1),r=e.element.find(e._sanitizeSelector(s))):(o=c.attr("aria-controls")||t({}).uniqueId()[0].id,s="#"+o,r=e.element.find(s),r.length||(r=e._createPanel(o),r.insertAfter(e.panels[i-1]||e.tablist)),r.attr("aria-live","polite")),r.length&&(e.panels=e.panels.add(r)),h&&c.data("ui-tabs-aria-controls",h),c.attr({"aria-controls":o,"aria-labelledby":a}),r.attr("aria-labelledby",a)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(s.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,n,s;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),s=0;n=this.tabs[s];s++)i=t(n),e===!0||-1!==t.inArray(s,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===!0)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),r=s.closest("li"),o=r[0]===n[0],a=o&&i.collapsible,c=a?t():this._getPanelForTab(r),h=n.length?this._getPanelForTab(n):t(),l={oldTab:n,oldPanel:h,newTab:a?t():r,newPanel:c};e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,l)===!1||(i.active=!a&&this.tabs.index(r),this.active=o?t():r,this.xhr&&this.xhr.abort(),h.length||c.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),c.length&&this.load(this.tabs.index(r),e),this._toggle(e,l))},_toggle:function(e,i){function n(){r.running=!1,r._trigger("activate",e,i)}function s(){r._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&r.options.show?r._show(o,r.options.show,n):(o.show(),n())}var r=this,o=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){r._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a.hide(),s()),a.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&a.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var n=this,s=this.tabs.eq(e),r=s.find(".ui-tabs-anchor"),o=this._getPanelForTab(s),a={tab:s,panel:o},c=function(t,e){"abort"===e&&n.panels.stop(!1,!0),n._removeClass(s,"ui-tabs-loading"),o.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=t.ajax(this._ajaxSettings(r,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(s,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(t,e,s){setTimeout(function(){o.html(t),n._trigger("load",i,a),c(s,e)},1)}).fail(function(t,e){setTimeout(function(){c(t,e)},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,r){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:r},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(i,n);-1!==s&&n.splice(s,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var n=this;this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n.element[0],e.close(s,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);return e.is("[title]")?e.data("ui-tooltip-title",e.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._registerCloseHandlers(e,n),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,r=e?e.type:null;return"string"==typeof n||n.nodeType||n.jquery?this._open(e,t,n):(i=n.call(t[0],function(i){s._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=r),this._open(e,t,i))})}),void(i&&this._open(e,t,i)))},_open:function(e,i,n){function s(t){h.of=t,o.is(":hidden")||o.position(h)}var r,o,a,c,h=t.extend({},this.options.position);if(n){if(r=this._find(i))return void r.tooltip.find(".ui-tooltip-content").html(n);i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),o=r.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),c=t("<div>").html(o.find(".ui-tooltip-content").html()),c.removeAttr("name").find("[name]").removeAttr("name"),c.removeAttr("id").find("[id]").removeAttr("id"),c.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:s}),s(e)):o.position(t.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(h.of),clearInterval(a))},t.fx.interval)),this._trigger("open",e,{tooltip:o})}},_registerCloseHandlers:function(e,i){var n={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}}};i[0]!==this.element[0]&&(n.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(n.mouseleave="close"),e&&"focusin"!==e.type||(n.focusout="close"),this._on(!0,i,n)},close:function(e){var i,n=this,s=t(e?e.currentTarget:this.element),r=this._find(s);return r?(i=r.tooltip,void(r.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),r.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){n._removeTooltip(t(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),r.closing=!0,this._trigger("close",e,{tooltip:i}),r.hiding||(r.closing=!1)))):void s.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),n=t("<div>").appendTo(i),s=i.uniqueId().attr("id");return this._addClass(n,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[s]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),
e},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur"),r=n.element;s.target=s.currentTarget=r[0],e.close(s,!0),t("#"+i).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip}),function(){var t=this,e=function(){"use strict";function e(){}function i(t,e){var i;for(i in t)Object.hasOwnProperty.call(t,i)&&e(i)}function n(t,e){return i(e,function(i){t[i]=e[i]}),t}function s(t,e){i(e,function(i){void 0===t[i]&&(t[i]=e[i])})}function r(t,e,i,n,s,r,a){var c,h=r>t?0:(t-r)/s;for(c in e)e.hasOwnProperty(c)&&(e[c]=o(i[c],n[c],u[a[c]],h));return e}function o(t,e,i,n){return t+(e-t)*i(n)}function a(t,e){var n=l.prototype.filter,s=t._filterArgs;i(n,function(i){void 0!==n[i][e]&&n[i][e].apply(t,s)})}function c(t,e,i,n,s,o,c,h,l,u,d){y=e+i+n,w=Math.min(d||v(),y),x=w>=y,b=n-(y-w),t.isPlaying()&&!x?(t._scheduleId=u(t._timeoutHandler,g),a(t,"beforeTween"),e+i>w?r(1,s,o,c,1,1,h):r(w,s,o,c,n,e+i,h),a(t,"afterTween"),l(s,t._attachment,b)):t.isPlaying()&&x&&(l(c,t._attachment,b),t.stop(!0))}function h(t,e){var n={};return"string"==typeof e?i(t,function(t){n[t]=e}):i(t,function(t){n[t]||(n[t]=e[t]||p)}),n}function l(t,e){this._currentState=t||{},this._configured=!1,this._scheduleFunction=d,void 0!==e&&this.setConfig(e)}var u,d,p="linear",f=500,g=1e3/60,m=Date.now?Date.now:function(){return+new Date},v="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:m;d="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var y,w,x,b;return l.prototype.tween=function(t){return this._isTweening?this:(void 0===t&&this._configured||this.setConfig(t),this._timestamp=v(),this._start(this.get(),this._attachment),this.resume())},l.prototype.setConfig=function(t){t=t||{},this._configured=!0,this._attachment=t.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=t.delay||0,this._start=t.start||e,this._step=t.step||e,this._finish=t.finish||e,this._duration=t.duration||f,this._currentState=n({},t.from)||this.get(),this._originalState=this.get(),this._targetState=n({},t.to)||this.get();var i=this;this._timeoutHandler=function(){c(i,i._timestamp,i._delay,i._duration,i._currentState,i._originalState,i._targetState,i._easing,i._step,i._scheduleFunction)};var r=this._currentState,o=this._targetState;return s(o,r),this._easing=h(r,t.easing||p),this._filterArgs=[r,this._originalState,o,this._easing],a(this,"tweenCreated"),this},l.prototype.get=function(){return n({},this._currentState)},l.prototype.set=function(t){this._currentState=t},l.prototype.pause=function(){return this._pausedAtTime=v(),this._isPaused=!0,this},l.prototype.resume=function(){return this._isPaused&&(this._timestamp+=v()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},l.prototype.seek=function(t){t=Math.max(t,0);var e=v();return 0===this._timestamp+t?this:(this._timestamp=e-t,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,c(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,e),this.pause()),this)},l.prototype.stop=function(i){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=e,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),i&&(n(this._currentState,this._targetState),a(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},l.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},l.prototype.setScheduleFunction=function(t){this._scheduleFunction=t},l.prototype.dispose=function(){var t;for(t in this)this.hasOwnProperty(t)&&delete this[t]},l.prototype.filter={},l.prototype.formula={linear:function(t){return t}},u=l.prototype.formula,n(l,{now:v,each:i,tweenProps:r,tweenProp:o,applyFilter:a,shallowCopy:n,defaults:s,composeEasingObject:h}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=c),"object"==typeof exports?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):void 0===t.Tweenable&&(t.Tweenable=l),l}();!function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return 1>(t/=.5)?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return 1>(t/=.5)?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return 1>(t/=.5)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*(6*t-1)*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})}(),function(){function t(t,e,i,n,s,r){function o(t){return((p*t+f)*t+g)*t}function a(t){return((m*t+v)*t+y)*t}function c(t){return(3*p*t+2*f)*t+g}function h(t){return 1/(200*t)}function l(t,e){return a(d(t,e))}function u(t){return t>=0?t:0-t}function d(t,e){var i,n,s,r,a,h;for(s=t,h=0;8>h;h++){if(r=o(s)-t,e>u(r))return s;if(a=c(s),1e-6>u(a))break;s-=r/a}if(i=0,n=1,s=t,i>s)return i;if(s>n)return n;for(;n>i;){if(r=o(s),e>u(r-t))return s;t>r?i=s:n=s,s=.5*(n-i)+i}return s}var p=0,f=0,g=0,m=0,v=0,y=0;return g=3*e,f=3*(n-e)-g,p=1-g-f,y=3*i,v=3*(s-i)-y,m=1-y-v,l(t,h(r))}function i(e,i,n,s){return function(r){return t(r,e,i,n,s,1)}}e.setBezierFunction=function(t,n,s,r,o){var a=i(n,s,r,o);return a.displayName=t,a.x1=n,a.y1=s,a.x2=r,a.y2=o,e.prototype.formula[t]=a},e.unsetBezierFunction=function(t){delete e.prototype.formula[t]}}(),function(){function t(t,i,n,s,r,o){return e.tweenProps(s,i,t,n,1,o,r)}var i=new e;i._filterArgs=[],e.interpolate=function(n,s,r,o,a){var c=e.shallowCopy({},n),h=a||0,l=e.composeEasingObject(n,o||"linear");i.set({});var u=i._filterArgs;u.length=0,u[0]=c,u[1]=n,u[2]=s,u[3]=l,e.applyFilter(i,"tweenCreated"),e.applyFilter(i,"beforeTween");var d=t(n,c,s,r,l,h);return e.applyFilter(i,"afterTween"),d}}(),function(t){function e(t,e){var i,n=[],s=t.length;for(i=0;s>i;i++)n.push("_"+e+"_"+i);return n}function i(t){var e=t.match(b);return e?(1===e.length||t[0].match(x))&&e.unshift(""):e=["",""],e.join(S)}function n(e){t.each(e,function(t){var i=e[t];"string"==typeof i&&i.match(P)&&(e[t]=s(i))})}function s(t){return c(P,t,r)}function r(t){var e=o(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function o(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),E[0]=a(t.substr(0,2)),E[1]=a(t.substr(2,2)),E[2]=a(t.substr(4,2)),E}function a(t){return parseInt(t,16)}function c(t,e,i){var n=e.match(t),s=e.replace(t,S);if(n)for(var r,o=n.length,a=0;o>a;a++)r=n.shift(),s=s.replace(S,i(r));return s}function h(t){return c(C,t,l)}function l(t){for(var e=t.match(_),i=e.length,n=t.match(M)[0],s=0;i>s;s++)n+=parseInt(e[s],10)+",";return n=n.slice(0,-1)+")"}function u(n){var s={};return t.each(n,function(t){var r=n[t];if("string"==typeof r){var o=v(r);s[t]={formatString:i(r),chunkNames:e(o,t)}}}),s}function d(e,i){t.each(i,function(t){for(var n=e[t],s=v(n),r=s.length,o=0;r>o;o++)e[i[t].chunkNames[o]]=+s[o];delete e[t]})}function p(e,i){t.each(i,function(t){var n=e[t],s=f(e,i[t].chunkNames),r=g(s,i[t].chunkNames);n=m(i[t].formatString,r),e[t]=h(n)})}function f(t,e){for(var i,n={},s=e.length,r=0;s>r;r++)i=e[r],n[i]=t[i],delete t[i];return n}function g(t,e){k.length=0;for(var i=e.length,n=0;i>n;n++)k.push(t[e[n]]);return k}function m(t,e){for(var i=t,n=e.length,s=0;n>s;s++)i=i.replace(S,+e[s].toFixed(4));return i}function v(t){return t.match(_)}function y(e,i){t.each(i,function(t){for(var n=i[t],s=n.chunkNames,r=s.length,o=e[t].split(" "),a=o[o.length-1],c=0;r>c;c++)e[s[c]]=o[c]||a;delete e[t]})}function w(e,i){t.each(i,function(t){for(var n=i[t],s=n.chunkNames,r=s.length,o="",a=0;r>a;a++)o+=" "+e[s[a]],delete e[s[a]];e[t]=o.substr(1)})}var x=/(\d|\-|\.)/,b=/([^\-0-9\.]+)/g,_=/[0-9.\-]+/g,C=RegExp("rgb\\("+_.source+/,\s*/.source+_.source+/,\s*/.source+_.source+"\\)","g"),M=/^.*\(/,P=/#([0-9]|[a-f]){3,6}/gi,S="VAL",E=[],k=[];t.prototype.filter.token={tweenCreated:function(t,e,i){n(t),n(e),n(i),this._tokenData=u(t)},beforeTween:function(t,e,i,n){y(n,this._tokenData),d(t,this._tokenData),d(e,this._tokenData),d(i,this._tokenData)},afterTween:function(t,e,i,n){p(t,this._tokenData),p(e,this._tokenData),p(i,this._tokenData),w(n,this._tokenData)}}}(e)}.call(null),function(t,e){"function"==typeof define&&define.amd?define("eve",function(){return e()}):"object"==typeof exports?module.exports=e():t.eve=e()}(this,function(){var t,e,i="0.4.2",n="hasOwnProperty",s=/[\.\/]/,r="*",o=function(){},a=function(t,e){return t-e},c={n:{}},h=function(i,n){i=String(i);var s,r=e,o=Array.prototype.slice.call(arguments,2),c=h.listeners(i),l=0,u=[],d={},p=[],f=t;t=i,e=0;for(var g=0,m=c.length;g<m;g++)"zIndex"in c[g]&&(u.push(c[g].zIndex),c[g].zIndex<0&&(d[c[g].zIndex]=c[g]));for(u.sort(a);u[l]<0;)if(s=d[u[l++]],p.push(s.apply(n,o)),e)return e=r,p;for(g=0;g<m;g++)if(s=c[g],"zIndex"in s)if(s.zIndex==u[l]){if(p.push(s.apply(n,o)),e)break;do if(l++,s=d[u[l]],s&&p.push(s.apply(n,o)),e)break;while(s)}else d[s.zIndex]=s;else if(p.push(s.apply(n,o)),e)break;return e=r,t=f,p.length?p:null};return h._events=c,h.listeners=function(t){var e,i,n,o,a,h,l,u,d=t.split(s),p=c,f=[p],g=[];for(o=0,a=d.length;o<a;o++){for(u=[],h=0,l=f.length;h<l;h++)for(p=f[h].n,i=[p[d[o]],p[r]],n=2;n--;)e=i[n],e&&(u.push(e),g=g.concat(e.f||[]));f=u}return g},h.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var i=t.split(s),n=c,r=0,a=i.length;r<a;r++)n=n.n,n=n.hasOwnProperty(i[r])&&n[i[r]]||(n[i[r]]={n:{}});for(n.f=n.f||[],r=0,a=n.f.length;r<a;r++)if(n.f[r]==e)return o;return n.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},h.f=function(t){var e=[].slice.call(arguments,1);return function(){h.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},h.stop=function(){e=1},h.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},h.nts=function(){return t.split(s)},h.off=h.unbind=function(t,e){if(!t)return void(h._events=c={n:{}});var i,o,a,l,u,d,p,f=t.split(s),g=[c];for(l=0,u=f.length;l<u;l++)for(d=0;d<g.length;d+=a.length-2){if(a=[d,1],i=g[d].n,f[l]!=r)i[f[l]]&&a.push(i[f[l]]);else for(o in i)i[n](o)&&a.push(i[o]);g.splice.apply(g,a)}for(l=0,u=g.length;l<u;l++)for(i=g[l];i.n;){if(e){if(i.f){for(d=0,p=i.f.length;d<p;d++)if(i.f[d]==e){i.f.splice(d,1);break}!i.f.length&&delete i.f}for(o in i.n)if(i.n[n](o)&&i.n[o].f){var m=i.n[o].f;for(d=0,p=m.length;d<p;d++)if(m[d]==e){m.splice(d,1);break}!m.length&&delete i.n[o].f}}else{delete i.f;for(o in i.n)i.n[n](o)&&i.n[o].f&&delete i.n[o].f}i=i.n}},h.once=function(t,e){var i=function(){return h.unbind(t,i),e.apply(this,arguments)};return h.on(t,i)},h.version=i,h.toString=function(){return"You are running Eve "+i},h}),function(t,e){"function"==typeof define&&define.amd?define("raphael.core",["eve"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("eve")):t.Raphael=e(t.eve)}(this,function(t){function e(i){if(e.is(i,"function"))return w?i():t.on("raphael.DOMload",i);if(e.is(i,Y))return e._engine.create[k](e,i.splice(0,3+e.is(i[0],G))).add(i);var n=Array.prototype.slice.call(arguments,0);if(e.is(n[n.length-1],"function")){var s=n.pop();return w?s.call(e._engine.create[k](e,n)):t.on("raphael.DOMload",function(){s.call(e._engine.create[k](e,n))})}return e._engine.create[k](e,arguments)}function i(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[M](n)&&(e[n]=i(t[n]));return e}function n(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function s(t,e,i){function s(){var r=Array.prototype.slice.call(arguments,0),o=r.join("␀"),a=s.cache=s.cache||{},c=s.count=s.count||[];return a[M](o)?(n(c,o),i?i(a[o]):a[o]):(c.length>=1e3&&delete a[c.shift()],c.push(o),a[o]=t[k](e,r),i?i(a[o]):a[o])}return s}function r(){return this.hex}function o(t,e){for(var i=[],n=0,s=t.length;s-2*!e>n;n+=2){var r=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?s-4==n?r[3]={x:+t[0],y:+t[1]}:s-2==n&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[s-2],y:+t[s-1]}:s-4==n?r[3]=r[2]:n||(r[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return i}function a(t,e,i,n,s){var r=-3*e+9*i-9*n+3*s,o=t*r+6*e-12*i+6*n;return t*o-3*e+3*i}function c(t,e,i,n,s,r,o,c,h){null==h&&(h=1),h=h>1?1:h<0?0:h;for(var l=h/2,u=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,g=0;g<u;g++){var m=l*d[g]+l,v=a(m,t,i,s,o),y=a(m,e,n,r,c),w=v*v+y*y;f+=p[g]*H.sqrt(w)}return l*f}function h(t,e,i,n,s,r,o,a,h){if(!(h<0||c(t,e,i,n,s,r,o,a)<h)){var l,u=1,d=u/2,p=u-d,f=.01;for(l=c(t,e,i,n,s,r,o,a,p);V(l-h)>f;)d/=2,p+=(l<h?1:-1)*d,l=c(t,e,i,n,s,r,o,a,p);return p}}function l(t,e,i,n,s,r,o,a){if(!(F(t,i)<O(s,o)||O(t,i)>F(s,o)||F(e,n)<O(r,a)||O(e,n)>F(r,a))){var c=(t*n-e*i)*(s-o)-(t-i)*(s*a-r*o),h=(t*n-e*i)*(r-a)-(e-n)*(s*a-r*o),l=(t-i)*(r-a)-(e-n)*(s-o);if(l){var u=c/l,d=h/l,p=+u.toFixed(2),f=+d.toFixed(2);if(!(p<+O(t,i).toFixed(2)||p>+F(t,i).toFixed(2)||p<+O(s,o).toFixed(2)||p>+F(s,o).toFixed(2)||f<+O(e,n).toFixed(2)||f>+F(e,n).toFixed(2)||f<+O(r,a).toFixed(2)||f>+F(r,a).toFixed(2)))return{x:u,y:d}}}}function u(t,i,n){var s=e.bezierBBox(t),r=e.bezierBBox(i);if(!e.isBBoxIntersect(s,r))return n?0:[];for(var o=c.apply(0,t),a=c.apply(0,i),h=F(~~(o/5),1),u=F(~~(a/5),1),d=[],p=[],f={},g=n?0:[],m=0;m<h+1;m++){var v=e.findDotsAtSegment.apply(e,t.concat(m/h));d.push({x:v.x,y:v.y,t:m/h})}for(m=0;m<u+1;m++)v=e.findDotsAtSegment.apply(e,i.concat(m/u)),p.push({x:v.x,y:v.y,t:m/u});for(m=0;m<h;m++)for(var y=0;y<u;y++){var w=d[m],x=d[m+1],b=p[y],_=p[y+1],C=V(x.x-w.x)<.001?"y":"x",M=V(_.x-b.x)<.001?"y":"x",P=l(w.x,w.y,x.x,x.y,b.x,b.y,_.x,_.y);if(P){if(f[P.x.toFixed(4)]==P.y.toFixed(4))continue;f[P.x.toFixed(4)]=P.y.toFixed(4);var S=w.t+V((P[C]-w[C])/(x[C]-w[C]))*(x.t-w.t),E=b.t+V((P[M]-b[M])/(_[M]-b[M]))*(_.t-b.t);S>=0&&S<=1.001&&E>=0&&E<=1.001&&(n?g++:g.push({x:P.x,y:P.y,t1:O(S,1),t2:O(E,1)}))}}return g}function d(t,i,n){t=e._path2curve(t),i=e._path2curve(i);for(var s,r,o,a,c,h,l,d,p,f,g=n?0:[],m=0,v=t.length;m<v;m++){var y=t[m];if("M"==y[0])s=c=y[1],r=h=y[2];else{"C"==y[0]?(p=[s,r].concat(y.slice(1)),s=p[6],r=p[7]):(p=[s,r,s,r,c,h,c,h],s=c,r=h);for(var w=0,x=i.length;w<x;w++){var b=i[w];if("M"==b[0])o=l=b[1],a=d=b[2];else{"C"==b[0]?(f=[o,a].concat(b.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,l,d,l,d],o=l,a=d);var _=u(p,f,n);if(n)g+=_;else{for(var C=0,M=_.length;C<M;C++)_[C].segment1=m,_[C].segment2=w,_[C].bez1=p,_[C].bez2=f;g=g.concat(_)}}}}}return g}function p(t,e,i,n,s,r){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+s,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(){return this.x+z+this.y+z+this.width+" × "+this.height}function g(t,e,i,n,s,r){function o(t){return((u*t+l)*t+h)*t}function a(t,e){var i=c(t,e);return((f*i+p)*i+d)*i}function c(t,e){var i,n,s,r,a,c;for(s=t,c=0;c<8;c++){if(r=o(s)-t,V(r)<e)return s;if(a=(3*u*s+2*l)*s+h,V(a)<1e-6)break;s-=r/a}if(i=0,n=1,s=t,s<i)return i;if(s>n)return n;for(;i<n;){if(r=o(s),V(r-t)<e)return s;t>r?i=s:n=s,s=(n-i)/2+i}return s}var h=3*e,l=3*(n-e)-h,u=1-h-l,d=3*i,p=3*(s-i)-d,f=1-d-p;return a(t,1/(200*r))}function m(t,e){var i=[],n={};if(this.ms=e,this.times=1,t){for(var s in t)t[M](s)&&(n[J(s)]=t[s],i.push(J(s)));i.sort(lt)}this.anim=n,this.top=i[i.length-1],this.percents=i}function v(i,n,s,r,o,a){s=J(s);var c,h,l,u,d,f,m=i.ms,v={},y={},w={};if(r)for(_=0,C=re.length;_<C;_++){var x=re[_];if(x.el.id==n.id&&x.anim==i){x.percent!=s?(re.splice(_,1),l=1):h=x,n.attr(x.totalOrigin);break}}else r=+y;for(var _=0,C=i.percents.length;_<C;_++){if(i.percents[_]==s||i.percents[_]>r*i.top){s=i.percents[_],d=i.percents[_-1]||0,m=m/i.top*(s-d),u=i.percents[_+1],c=i.anim[s];break}r&&n.attr(i.anim[i.percents[_]])}if(c){if(h)h.initstatus=r,h.start=new Date-h.ms*r;else{for(var P in c)if(c[M](P)&&(it[M](P)||n.paper.customAttributes[M](P)))switch(v[P]=n.attr(P),null==v[P]&&(v[P]=et[P]),y[P]=c[P],it[P]){case G:w[P]=(y[P]-v[P])/m;break;case"colour":v[P]=e.getRGB(v[P]);var S=e.getRGB(y[P]);w[P]={r:(S.r-v[P].r)/m,g:(S.g-v[P].g)/m,b:(S.b-v[P].b)/m};break;case"path":var E=It(v[P],y[P]),k=E[1];for(v[P]=E[0],w[P]=[],_=0,C=v[P].length;_<C;_++){w[P][_]=[0];for(var A=1,T=v[P][_].length;A<T;A++)w[P][_][A]=(k[_][A]-v[P][_][A])/m}break;case"transform":var z=n._,R=Ft(z[P],y[P]);if(R)for(v[P]=R.from,y[P]=R.to,w[P]=[],w[P].real=!0,_=0,C=v[P].length;_<C;_++)for(w[P][_]=[v[P][_][0]],A=1,T=v[P][_].length;A<T;A++)w[P][_][A]=(y[P][_][A]-v[P][_][A])/m;else{var N=n.matrix||new p,B={_:{transform:z.transform},getBBox:function(){return n.getBBox(1)}};v[P]=[N.a,N.b,N.c,N.d,N.e,N.f],Bt(B,y[P]),y[P]=B._.transform,w[P]=[(B.matrix.a-N.a)/m,(B.matrix.b-N.b)/m,(B.matrix.c-N.c)/m,(B.matrix.d-N.d)/m,(B.matrix.e-N.e)/m,(B.matrix.f-N.f)/m]}break;case"csv":var H=L(c[P])[I](b),F=L(v[P])[I](b);if("clip-rect"==P)for(v[P]=F,w[P]=[],_=F.length;_--;)w[P][_]=(H[_]-v[P][_])/m;y[P]=H;break;default:for(H=[][D](c[P]),F=[][D](v[P]),w[P]=[],_=n.paper.customAttributes[P].length;_--;)w[P][_]=((H[_]||0)-(F[_]||0))/m}var O=c.easing,V=e.easing_formulas[O];if(!V)if(V=L(O).match(K),V&&5==V.length){var W=V;V=function(t){return g(t,+W[1],+W[2],+W[3],+W[4],m)}}else V=ut;if(f=c.start||i.start||+new Date,x={anim:i,percent:s,timestamp:f,start:f+(i.del||0),status:0,initstatus:r||0,stop:!1,ms:m,easing:V,from:v,diff:w,to:y,el:n,callback:c.callback,prev:d,next:u,repeat:a||i.times,origin:n.attr(),totalOrigin:o},re.push(x),r&&!h&&!l&&(x.stop=!0,x.start=new Date-m*r,1==re.length))return ae();l&&(x.start=new Date-x.ms*r),1==re.length&&oe(ae)}t("raphael.anim.start."+n.id,n,i)}}function y(t){for(var e=0;e<re.length;e++)re[e].el.paper==t&&re.splice(e--,1)}e.version="2.1.4",e.eve=t;var w,x,b=/[, ]+/,_={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,M="hasOwnProperty",P={doc:document,win:window},S={was:Object.prototype[M].call(P.win,"Raphael"),is:P.win.Raphael},E=function(){this.ca=this.customAttributes={}},k="apply",D="concat",A="ontouchstart"in P.win||P.win.DocumentTouch&&P.doc instanceof DocumentTouch,T="",z=" ",L=String,I="split",R="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](z),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=L.prototype.toLowerCase,H=Math,F=H.max,O=H.min,V=H.abs,W=H.pow,$=H.PI,G="number",U="string",Y="array",j=Object.prototype.toString,X=(e._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),q={NaN:1,Infinity:1,"-Infinity":1},K=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=H.round,J=parseFloat,Q=parseInt,tt=L.prototype.toUpperCase,et=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,"stroke-scale":!1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},it=e._availableAnimAttrs={blur:G,"clip-rect":"csv",cx:G,cy:G,fill:"colour","fill-opacity":G,"font-size":G,height:G,opacity:G,path:"path",r:G,rx:G,ry:G,stroke:"colour","stroke-opacity":G,"stroke-width":G,transform:"transform",width:G,x:G,y:G},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,st={hs:1,rg:1},rt=/,?([achlmqrstvxz]),?/gi,ot=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ht=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),lt=function(t,e){return J(t)-J(e)},ut=function(t){return t},dt=e._rectPath=function(t,e,i,n,s){return s?[["M",t+s,e],["l",i-2*s,0],["a",s,s,0,0,1,s,s],["l",0,n-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-i,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-n],["a",s,s,0,0,1,s,-s],["z"]]:[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},pt=function(t,e,i,n){return null==n&&(n=i),[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},ft=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return dt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return dt(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return dt(e.x,e.y,e.width,e.height)}},gt=e.mapPath=function(t,e){if(!e)return t;var i,n,s,r,o,a,c;for(t=It(t),s=0,o=t.length;s<o;s++)for(c=t[s],r=1,a=c.length;r<a;r+=2)i=e.x(c[r],c[r+1]),n=e.y(c[r],c[r+1]),c[r]=i,c[r+1]=n;return t};if(e._g=P,e.type=P.win.SVGAngle||P.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var mt,vt=P.doc.createElement("div");if(vt.innerHTML='<v:shape adj="1"/>',mt=vt.firstChild,mt.style.behavior="url(#default#VML)",!mt||"object"!=typeof mt.adj)return e.type=T;vt=null}e.svg=!(e.vml="VML"==e.type),e._Paper=E,e.fn=x=E.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(t,e){return e=B.call(e),"finite"==e?!q[M](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||j.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,i,n,s,r,o){if(null==r){var a=t-n,c=i-s;return a||c?(180+180*H.atan2(-c,-a)/$+360)%360:0}return e.angle(t,i,r,o)-e.angle(n,s,r,o)},e.rad=function(t){return t%360*$/180},e.deg=function(t){return Math.round(180*t/$%360*1e3)/1e3},e.snapTo=function(t,i,n){if(n=e.is(n,"finite")?n:10,e.is(t,Y)){for(var s=t.length;s--;)if(V(t[s]-i)<=n)return t[s]}else{t=+t;var r=i%t;if(r<n)return i-r;if(r>t-n)return i-r+t}return i};e.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*H.random()|0,i="x"==t?e:3&e|8;return i.toString(16)});e.setWindow=function(i){t("raphael.setWindow",e,P.win,i),P.win=i,P.doc=P.win.document,e._engine.initWin&&e._engine.initWin(P.win)};var yt=function(t){if(e.vml){var i,n=/^\s+|\s+$/g;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),i=r.body}catch(t){i=createPopup().document.body}var o=i.createTextRange();yt=s(function(t){try{i.style.color=L(t).replace(n,T);var e=o.queryCommandValue("ForeColor");return e=(255&e)<<16|65280&e|(16711680&e)>>>16,"#"+("000000"+e.toString(16)).slice(-6)}catch(t){return"none"}})}else{var a=P.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",P.doc.body.appendChild(a),yt=s(function(t){return a.style.color=t,P.doc.defaultView.getComputedStyle(a,T).getPropertyValue("color")})}return yt(t)},wt=function(){return"hsb("+[this.h,this.s,this.b]+")"},xt=function(){return"hsl("+[this.h,this.s,this.l]+")"},bt=function(){return this.hex},_t=function(t,i,n){if(null==i&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,i=t.g,t=t.r),null==i&&e.is(t,U)){var s=e.getRGB(t);t=s.r,i=s.g,n=s.b}return(t>1||i>1||n>1)&&(t/=255,i/=255,n/=255),[t,i,n]},Ct=function(t,i,n,s){t*=255,i*=255,n*=255;var r={r:t,g:i,b:n,hex:e.rgb(t,i,n),toString:bt};return e.is(s,"finite")&&(r.opacity=s),r};e.color=function(t){var i;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(i=e.hsb2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(i=e.hsl2rgb(t),t.r=i.r,t.g=i.g,t.b=i.b,t.hex=i.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(i=e.rgb2hsl(t),t.h=i.h,t.s=i.s,t.l=i.l,i=e.rgb2hsb(t),t.v=i.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=bt,t},e.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,n=t.o,t=t.h),t*=360;var s,r,o,a,c;return t=t%360/60,c=i*e,a=c*(1-V(t%2-1)),s=r=o=i-c,t=~~t,s+=[c,a,0,0,a,c][t],r+=[a,c,c,a,0,0][t],o+=[0,0,a,c,c,a][t],Ct(s,r,o,n)},e.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(t>1||e>1||i>1)&&(t/=360,e/=100,i/=100),t*=360;var s,r,o,a,c;return t=t%360/60,c=2*e*(i<.5?i:1-i),a=c*(1-V(t%2-1)),s=r=o=i-c/2,t=~~t,s+=[c,a,0,0,a,c][t],r+=[a,c,c,a,0,0][t],o+=[0,0,a,c,c,a][t],Ct(s,r,o,n)},e.rgb2hsb=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o;return r=F(t,e,i),o=r-O(t,e,i),n=0==o?null:r==t?(e-i)/o:r==e?(i-t)/o+2:(t-e)/o+4,n=(n+360)%6*60/360,s=0==o?0:o/r,{h:n,s:s,b:r,toString:wt}},e.rgb2hsl=function(t,e,i){i=_t(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o,a,c;return o=F(t,e,i),a=O(t,e,i),c=o-a,n=0==c?null:o==t?(e-i)/c:o==e?(i-t)/c+2:(t-e)/c+4,n=(n+360)%6*60/360,r=(o+a)/2,s=0==c?0:r<.5?c/(2*r):c/(2-2*r),{h:n,s:s,l:r,toString:xt}},e._path2string=function(){return this.join(",").replace(rt,"$1")};e._preload=function(t,e){var i=P.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,P.doc.body.removeChild(this)},i.onerror=function(){P.doc.body.removeChild(this)},P.doc.body.appendChild(i),i.src=t};e.getRGB=s(function(t){if(!t||(t=L(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:r};!(st[M](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=yt(t));var i,n,s,o,a,c,h=t.match(X);return h?(h[2]&&(s=Q(h[2].substring(5),16),n=Q(h[2].substring(3,5),16),i=Q(h[2].substring(1,3),16)),h[3]&&(s=Q((a=h[3].charAt(3))+a,16),n=Q((a=h[3].charAt(2))+a,16),i=Q((a=h[3].charAt(1))+a,16)),h[4]&&(c=h[4][I](nt),i=J(c[0]),"%"==c[0].slice(-1)&&(i*=2.55),n=J(c[1]),"%"==c[1].slice(-1)&&(n*=2.55),s=J(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(o=J(c[3])),c[3]&&"%"==c[3].slice(-1)&&(o/=100)),h[5]?(c=h[5][I](nt),i=J(c[0]),"%"==c[0].slice(-1)&&(i*=2.55),n=J(c[1]),"%"==c[1].slice(-1)&&(n*=2.55),s=J(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(i/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(o=J(c[3])),c[3]&&"%"==c[3].slice(-1)&&(o/=100),e.hsb2rgb(i,n,s,o)):h[6]?(c=h[6][I](nt),i=J(c[0]),"%"==c[0].slice(-1)&&(i*=2.55),n=J(c[1]),"%"==c[1].slice(-1)&&(n*=2.55),s=J(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),("deg"==c[0].slice(-3)||"°"==c[0].slice(-1))&&(i/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(o=J(c[3])),c[3]&&"%"==c[3].slice(-1)&&(o/=100),e.hsl2rgb(i,n,s,o)):(h={r:i,g:n,b:s,toString:r},h.hex="#"+(16777216|s|n<<8|i<<16).toString(16).slice(1),e.is(o,"finite")&&(h.opacity=o),h)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:r}},e),e.hsb=s(function(t,i,n){return e.hsb2rgb(t,i,n).hex}),e.hsl=s(function(t,i,n){return e.hsl2rgb(t,i,n).hex}),e.rgb=s(function(t,e,i){function n(t){return t+.5|0}return"#"+(16777216|n(i)|n(e)<<8|n(t)<<16).toString(16).slice(1)}),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var i=Mt(t);if(i.arr)return St(i.arr);var n={
a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},s=[];return e.is(t,Y)&&e.is(t[0],Y)&&(s=St(t)),s.length||L(t).replace(ot,function(t,e,i){var r=[],o=e.toLowerCase();if(i.replace(ct,function(t,e){e&&r.push(+e)}),"m"==o&&r.length>2&&(s.push([e][D](r.splice(0,2))),o="l",e="m"==e?"l":"L"),"r"==o)s.push([e][D](r));else for(;r.length>=n[o]&&(s.push([e][D](r.splice(0,n[o]))),n[o]););}),s.toString=e._path2string,i.arr=St(s),s},e.parseTransformString=s(function(t){if(!t)return null;var i=[];return e.is(t,Y)&&e.is(t[0],Y)&&(i=St(t)),i.length||L(t).replace(at,function(t,e,n){var s=[];B.call(e);n.replace(ct,function(t,e){e&&s.push(+e)}),i.push([e][D](s))}),i.toString=e._path2string,i});var Mt=function(t){var e=Mt.ps=Mt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[M](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])}),e[t]};e.findDotsAtSegment=function(t,e,i,n,s,r,o,a,c){var h=1-c,l=W(h,3),u=W(h,2),d=c*c,p=d*c,f=l*t+3*u*c*i+3*h*c*c*s+p*o,g=l*e+3*u*c*n+3*h*c*c*r+p*a,m=t+2*c*(i-t)+d*(s-2*i+t),v=e+2*c*(n-e)+d*(r-2*n+e),y=i+2*c*(s-i)+d*(o-2*s+i),w=n+2*c*(r-n)+d*(a-2*r+n),x=h*t+c*i,b=h*e+c*n,_=h*s+c*o,C=h*r+c*a,M=90-180*H.atan2(m-y,v-w)/$;return(m>y||v<w)&&(M+=180),{x:f,y:g,m:{x:m,y:v},n:{x:y,y:w},start:{x:x,y:b},end:{x:_,y:C},alpha:M}},e.bezierBBox=function(t,i,n,s,r,o,a,c){e.is(t,"array")||(t=[t,i,n,s,r,o,a,c]);var h=Lt.apply(null,t);return{x:h.min.x,y:h.min.y,x2:h.max.x,y2:h.max.y,width:h.max.x-h.min.x,height:h.max.y-h.min.y}},e.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},e.isBBoxIntersect=function(t,i){var n=e.isPointInsideBBox;return n(i,t.x,t.y)||n(i,t.x2,t.y)||n(i,t.x,t.y2)||n(i,t.x2,t.y2)||n(t,i.x,i.y)||n(t,i.x2,i.y)||n(t,i.x,i.y2)||n(t,i.x2,i.y2)||(t.x<i.x2&&t.x>i.x||i.x<t.x2&&i.x>t.x)&&(t.y<i.y2&&t.y>i.y||i.y<t.y2&&i.y>t.y)},e.pathIntersection=function(t,e){return d(t,e)},e.pathIntersectionNumber=function(t,e){return d(t,e,1)},e.isPointInsidePath=function(t,i,n){var s=e.pathBBox(t);return e.isPointInsideBBox(s,i,n)&&d(t,[["M",i,n],["H",s.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Pt=e.pathBBox=function(t){var e=Mt(t);if(e.bbox){var n=e.bbox;return{x:n.x,y:n.y,width:n.width,height:n.height,x2:n.x2,y2:n.y2}}if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=It(t);for(var s,r=0,o=0,a=[],c=[],h=0,l=t.length;h<l;h++)if(s=t[h],"M"==s[0])r=s[1],o=s[2],a.push(r),c.push(o);else{var u=Lt(r,o,s[1],s[2],s[3],s[4],s[5],s[6]);a=a[D](u.min.x,u.max.x),c=c[D](u.min.y,u.max.y),r=s[5],o=s[6]}var d=O[k](0,a),p=O[k](0,c),f=F[k](0,a),g=F[k](0,c),m=f-d,v=g-p,y={x:d,y:p,x2:f,y2:g,width:m,height:v,cx:d+m/2,cy:p+v/2};return e.bbox=i(y),y},St=function(t){var n=i(t);return n.toString=e._path2string,n},Et=e._pathToRelative=function(t){var i=Mt(t);if(i.rel)return St(i.rel);e.is(t,Y)&&e.is(t&&t[0],Y)||(t=e.parsePathString(t));var n=[],s=0,r=0,o=0,a=0,c=0;"M"==t[0][0]&&(s=t[0][1],r=t[0][2],o=s,a=r,c++,n.push(["M",s,r]));for(var h=c,l=t.length;h<l;h++){var u=n[h]=[],d=t[h];if(d[0]!=B.call(d[0]))switch(u[0]=B.call(d[0]),u[0]){case"a":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]-s).toFixed(3),u[7]=+(d[7]-r).toFixed(3);break;case"v":u[1]=+(d[1]-r).toFixed(3);break;case"m":o=d[1],a=d[2];default:for(var p=1,f=d.length;p<f;p++)u[p]=+(d[p]-(p%2?s:r)).toFixed(3)}else{u=n[h]=[],"m"==d[0]&&(o=d[1]+s,a=d[2]+r);for(var g=0,m=d.length;g<m;g++)n[h][g]=d[g]}var v=n[h].length;switch(n[h][0]){case"z":s=o,r=a;break;case"h":s+=+n[h][v-1];break;case"v":r+=+n[h][v-1];break;default:s+=+n[h][v-2],r+=+n[h][v-1]}}return n.toString=e._path2string,i.rel=St(n),n},kt=e._pathToAbsolute=function(t){var i=Mt(t);if(i.abs)return St(i.abs);if(e.is(t,Y)&&e.is(t&&t[0],Y)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],s=0,r=0,a=0,c=0,h=0;"M"==t[0][0]&&(s=+t[0][1],r=+t[0][2],a=s,c=r,h++,n[0]=["M",s,r]);for(var l,u,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=h,f=t.length;p<f;p++){if(n.push(l=[]),u=t[p],u[0]!=tt.call(u[0]))switch(l[0]=tt.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+s),l[7]=+(u[7]+r);break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+s;break;case"R":for(var g=[s,r][D](u.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+s,g[++m]=+g[m]+r;n.pop(),n=n[D](o(g,d));break;case"M":a=+u[1]+s,c=+u[2]+r;default:for(m=1,v=u.length;m<v;m++)l[m]=+u[m]+(m%2?s:r)}else if("R"==u[0])g=[s,r][D](u.slice(1)),n.pop(),n=n[D](o(g,d)),l=["R"][D](u.slice(-2));else for(var y=0,w=u.length;y<w;y++)l[y]=u[y];switch(l[0]){case"Z":s=a,r=c;break;case"H":s=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],c=l[l.length-1];default:s=l[l.length-2],r=l[l.length-1]}}return n.toString=e._path2string,i.abs=St(n),n},Dt=function(t,e,i,n){return[t,e,i,n,i,n]},At=function(t,e,i,n,s,r){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*n,o*s+a*i,o*r+a*n,s,r]},Tt=function(t,e,i,n,r,o,a,c,h,l){var u,d=120*$/180,p=$/180*(+r||0),f=[],g=s(function(t,e,i){var n=t*H.cos(i)-e*H.sin(i),s=t*H.sin(i)+e*H.cos(i);return{x:n,y:s}});if(l)M=l[0],P=l[1],_=l[2],C=l[3];else{u=g(t,e,-p),t=u.x,e=u.y,u=g(c,h,-p),c=u.x,h=u.y;var m=(H.cos($/180*r),H.sin($/180*r),(t-c)/2),v=(e-h)/2,y=m*m/(i*i)+v*v/(n*n);y>1&&(y=H.sqrt(y),i=y*i,n=y*n);var w=i*i,x=n*n,b=(o==a?-1:1)*H.sqrt(V((w*x-w*v*v-x*m*m)/(w*v*v+x*m*m))),_=b*i*v/n+(t+c)/2,C=b*-n*m/i+(e+h)/2,M=H.asin(((e-C)/n).toFixed(9)),P=H.asin(((h-C)/n).toFixed(9));M=t<_?$-M:M,P=c<_?$-P:P,M<0&&(M=2*$+M),P<0&&(P=2*$+P),a&&M>P&&(M-=2*$),!a&&P>M&&(P-=2*$)}var S=P-M;if(V(S)>d){var E=P,k=c,A=h;P=M+d*(a&&P>M?1:-1),c=_+i*H.cos(P),h=C+n*H.sin(P),f=Tt(c,h,i,n,r,0,a,k,A,[P,E,_,C])}S=P-M;var T=H.cos(M),z=H.sin(M),L=H.cos(P),R=H.sin(P),N=H.tan(S/4),B=4/3*i*N,F=4/3*n*N,O=[t,e],W=[t+B*z,e-F*T],G=[c+B*R,h-F*L],U=[c,h];if(W[0]=2*O[0]-W[0],W[1]=2*O[1]-W[1],l)return[W,G,U][D](f);f=[W,G,U][D](f).join()[I](",");for(var Y=[],j=0,X=f.length;j<X;j++)Y[j]=j%2?g(f[j-1],f[j],p).y:g(f[j],f[j+1],p).x;return Y},zt=function(t,e,i,n,s,r,o,a,c){var h=1-c;return{x:W(h,3)*t+3*W(h,2)*c*i+3*h*c*c*s+W(c,3)*o,y:W(h,3)*e+3*W(h,2)*c*n+3*h*c*c*r+W(c,3)*a}},Lt=s(function(t,e,i,n,s,r,o,a){var c,h=s-2*i+t-(o-2*s+i),l=2*(i-t)-2*(s-i),u=t-i,d=(-l+H.sqrt(l*l-4*h*u))/2/h,p=(-l-H.sqrt(l*l-4*h*u))/2/h,f=[e,a],g=[t,o];return V(d)>"1e12"&&(d=.5),V(p)>"1e12"&&(p=.5),d>0&&d<1&&(c=zt(t,e,i,n,s,r,o,a,d),g.push(c.x),f.push(c.y)),p>0&&p<1&&(c=zt(t,e,i,n,s,r,o,a,p),g.push(c.x),f.push(c.y)),h=r-2*n+e-(a-2*r+n),l=2*(n-e)-2*(r-n),u=e-n,d=(-l+H.sqrt(l*l-4*h*u))/2/h,p=(-l-H.sqrt(l*l-4*h*u))/2/h,V(d)>"1e12"&&(d=.5),V(p)>"1e12"&&(p=.5),d>0&&d<1&&(c=zt(t,e,i,n,s,r,o,a,d),g.push(c.x),f.push(c.y)),p>0&&p<1&&(c=zt(t,e,i,n,s,r,o,a,p),g.push(c.x),f.push(c.y)),{min:{x:O[k](0,g),y:O[k](0,f)},max:{x:F[k](0,g),y:F[k](0,f)}}}),It=e._path2curve=s(function(t,e){var i=!e&&Mt(t);if(!e&&i.curve)return St(i.curve);for(var n=kt(t),s=e&&kt(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e,i){var n,s,r={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in r)&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][D](Tt[k](0,[e.x,e.y][D](t.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*e.x-e.bx,s=2*e.y-e.by):(n=e.x,s=e.y),t=["C",n,s][D](t.slice(1));break;case"T":"Q"==i||"T"==i?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][D](At(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][D](At(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][D](Dt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][D](Dt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][D](Dt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][D](Dt(e.x,e.y,e.X,e.Y))}return t}),c=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)l[e]="A",s&&(u[e]="A"),t.splice(e++,0,["C"][D](i.splice(0,6)));t.splice(e,1),g=F(n.length,s&&s.length||0)}},h=function(t,e,i,r,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=t[o][1],i.y=t[o][2],g=F(n.length,s&&s.length||0))},l=[],u=[],d="",p="",f=0,g=F(n.length,s&&s.length||0);f<g;f++){n[f]&&(d=n[f][0]),"C"!=d&&(l[f]=d,f&&(p=l[f-1])),n[f]=a(n[f],r,p),"A"!=l[f]&&"C"==d&&(l[f]="C"),c(n,f),s&&(s[f]&&(d=s[f][0]),"C"!=d&&(u[f]=d,f&&(p=u[f-1])),s[f]=a(s[f],o,p),"A"!=u[f]&&"C"==d&&(u[f]="C"),c(s,f)),h(n,s,r,o,f),h(s,n,o,r,f);var m=n[f],v=s&&s[f],y=m.length,w=s&&v.length;r.x=m[y-2],r.y=m[y-1],r.bx=J(m[y-4])||r.x,r.by=J(m[y-3])||r.y,o.bx=s&&(J(v[w-4])||o.x),o.by=s&&(J(v[w-3])||o.y),o.x=s&&v[w-2],o.y=s&&v[w-1]}return s||(i.curve=St(n)),s?[n,s]:n},null,St),Rt=(e._parseDots=s(function(t){for(var i=[],n=0,s=t.length;n<s;n++){var r={},o=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=e.getRGB(o[1]),r.color.error)return null;r.opacity=r.color.opacity,r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),i.push(r)}for(n=1,s=i.length-1;n<s;n++)if(!i[n].offset){for(var a=J(i[n-1].offset||0),c=0,h=n+1;h<s;h++)if(i[h].offset){c=i[h].offset;break}c||(c=100,h=s),c=J(c);for(var l=(c-a)/(h-n+1);n<h;n++)a+=l,i[n].offset=a+"%"}return i}),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Nt=(e._tofront=function(t,e){e.top!==t&&(Rt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Rt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,i){Rt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,i){Rt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var i=Pt(t),n={_:{transform:T},getBBox:function(){return i}};return Bt(n,e),n.matrix}),Bt=(e.transformPath=function(t,e){return gt(t,Nt(t,e))},e._extractTransform=function(t,i){if(null==i)return t._.transform;i=L(i).replace(/\.{3}|\u2026/g,t._.transform||T);var n=e.parseTransformString(i),s=0,r=0,o=0,a=1,c=1,h=t._,l=new p;if(h.transform=n||[],n)for(var u=0,d=n.length;u<d;u++){var f,g,m,v,y,w=n[u],x=w.length,b=L(w[0]).toLowerCase(),_=w[0]!=b,C=_?l.invert():0;"t"==b&&3==x?_?(f=C.x(0,0),g=C.y(0,0),m=C.x(w[1],w[2]),v=C.y(w[1],w[2]),l.translate(m-f,v-g)):l.translate(w[1],w[2]):"r"==b?2==x?(y=y||t.getBBox(1),l.rotate(w[1],y.x+y.width/2,y.y+y.height/2),s+=w[1]):4==x&&(_?(m=C.x(w[2],w[3]),v=C.y(w[2],w[3]),l.rotate(w[1],m,v)):l.rotate(w[1],w[2],w[3]),s+=w[1]):"s"==b?2==x||3==x?(y=y||t.getBBox(1),l.scale(w[1],w[x-1],y.x+y.width/2,y.y+y.height/2),a*=w[1],c*=w[x-1]):5==x&&(_?(m=C.x(w[3],w[4]),v=C.y(w[3],w[4]),l.scale(w[1],w[2],m,v)):l.scale(w[1],w[2],w[3],w[4]),a*=w[1],c*=w[2]):"m"==b&&7==x&&l.add(w[1],w[2],w[3],w[4],w[5],w[6]),h.dirtyT=1,t.matrix=l}t.matrix=l,h.sx=a,h.sy=c,h.deg=s,h.dx=r=l.e,h.dy=o=l.f,1==a&&1==c&&!s&&h.bbox?(h.bbox.x+=+r,h.bbox.y+=+o):h.dirtyT=1}),Ht=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ft=e._equaliseTransform=function(t,i){i=L(i).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],i=e.parseTransformString(i)||[];for(var n,s,r,o,a=F(t.length,i.length),c=[],h=[],l=0;l<a;l++){if(r=t[l]||Ht(i[l]),o=i[l]||Ht(r),r[0]!=o[0]||"r"==r[0].toLowerCase()&&(r[2]!=o[2]||r[3]!=o[3])||"s"==r[0].toLowerCase()&&(r[3]!=o[3]||r[4]!=o[4]))return;for(c[l]=[],h[l]=[],n=0,s=F(r.length,o.length);n<s;n++)n in r&&(c[l][n]=r[n]),n in o&&(h[l][n]=o[n])}return{from:c,to:h}};e._getContainer=function(t,i,n,s){var r;if(r=null!=s||e.is(t,"object")?t:P.doc.getElementById(t),null!=r)return r.tagName?null==i?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:i,height:n}:{container:1,x:t,y:i,width:n,height:s}},e.pathToRelative=Et,e._engine={},e.path2curve=It,e.matrix=function(t,e,i,n,s,r){return new p(t,e,i,n,s,r)},function(t){function i(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var e=H.sqrt(i(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,i,n,s,r){var o,a,c,h,l=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,i,s],[e,n,r],[0,0,1]];for(t&&t instanceof p&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),o=0;o<3;o++)for(a=0;a<3;a++){for(h=0,c=0;c<3;c++)h+=u[o][c]*d[c][a];l[o][a]=h}this.a=l[0][0],this.b=l[1][0],this.c=l[0][1],this.d=l[1][1],this.e=l[0][2],this.f=l[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){null==e&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,i,n){t=e.rad(t),i=i||0,n=n||0;var s=+H.cos(t).toFixed(9),r=+H.sin(t).toFixed(9);this.add(s,r,-r,s,i,n),this.add(1,0,0,1,-i,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[L.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var s=[[this.a,this.c],[this.b,this.d]];t.scalex=H.sqrt(i(s[0])),n(s[0]),t.shear=s[0][0]*s[1][0]+s[0][1]*s[1][1],s[1]=[s[1][0]-s[0][0]*t.shear,s[1][1]-s[0][1]*t.shear],t.scaley=H.sqrt(i(s[1])),n(s[1]),t.shear/=t.scaley;var r=-s[0][1],o=s[1][1];return o<0?(t.rotate=e.deg(H.acos(o)),r<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(H.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[I]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:T)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:T)+(e.rotate?"r"+[e.rotate,0,0]:T)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);for(var Ot=function(){this.returnValue=!1},Vt=function(){return this.originalEvent.preventDefault()},Wt=function(){this.cancelBubble=!0},$t=function(){return this.originalEvent.stopPropagation()},Gt=function(t){var e=P.doc.documentElement.scrollTop||P.doc.body.scrollTop,i=P.doc.documentElement.scrollLeft||P.doc.body.scrollLeft;return{x:t.clientX+i,y:t.clientY+e}},Ut=function(){return P.doc.addEventListener?function(t,e,i,n){var s=function(t){var e=Gt(t);return i.call(n,t,e.x,e.y)};if(t.addEventListener(e,s,!1),A&&N[e]){var r=function(e){for(var s=Gt(e),r=e,o=0,a=e.targetTouches&&e.targetTouches.length;o<a;o++)if(e.targetTouches[o].target==t){e=e.targetTouches[o],e.originalEvent=r,e.preventDefault=Vt,e.stopPropagation=$t;break}return i.call(n,e,s.x,s.y)};t.addEventListener(N[e],r,!1)}return function(){return t.removeEventListener(e,s,!1),A&&N[e]&&t.removeEventListener(N[e],r,!1),!0}}:P.doc.attachEvent?function(t,e,i,n){var s=function(t){t=t||P.win.event;var e=P.doc.documentElement.scrollTop||P.doc.body.scrollTop,s=P.doc.documentElement.scrollLeft||P.doc.body.scrollLeft,r=t.clientX+s,o=t.clientY+e;return t.preventDefault=t.preventDefault||Ot,t.stopPropagation=t.stopPropagation||Wt,i.call(n,t,r,o)};t.attachEvent("on"+e,s);var r=function(){return t.detachEvent("on"+e,s),!0};return r}:void 0}(),Yt=[],jt=function(e){for(var i,n=e.clientX,s=e.clientY,r=P.doc.documentElement.scrollTop||P.doc.body.scrollTop,o=P.doc.documentElement.scrollLeft||P.doc.body.scrollLeft,a=Yt.length;a--;){if(i=Yt[a],A&&e.touches){for(var c,h=e.touches.length;h--;)if(c=e.touches[h],c.identifier==i.el._drag.id){n=c.clientX,s=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var l,u=i.el.node,d=u.nextSibling,p=u.parentNode,f=u.style.display;P.win.opera&&p.removeChild(u),u.style.display="none",l=i.el.paper.getElementByPoint(n,s),u.style.display=f,P.win.opera&&(d?p.insertBefore(u,d):p.appendChild(u)),l&&t("raphael.drag.over."+i.el.id,i.el,l),n+=o,s+=r,t("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,s-i.el._drag.y,n,s,e)}},Xt=function(i){e.unmousemove(jt).unmouseup(Xt);for(var n,s=Yt.length;s--;)n=Yt[s],n.el._drag={},t("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,i);Yt=[]},qt=e.el={},Kt=R.length;Kt--;)!function(t){e[t]=qt[t]=function(i,n){return e.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:Ut(this.shape||this.node||P.doc,t,i,n||this)})),this},e["un"+t]=qt["un"+t]=function(i){for(var n=this.events||[],s=n.length;s--;)n[s].name!=t||!e.is(i,"undefined")&&n[s].f!=i||(n[s].unbind(),n.splice(s,1),!n.length&&delete this.events);return this}}(R[Kt]);qt.data=function(i,n){var s=ht[this.id]=ht[this.id]||{};if(0==arguments.length)return s;if(1==arguments.length){if(e.is(i,"object")){for(var r in i)i[M](r)&&this.data(r,i[r]);return this}return t("raphael.data.get."+this.id,this,s[i],i),s[i]}return s[i]=n,t("raphael.data.set."+this.id,this,n,i),this},qt.removeData=function(t){return null==t?ht[this.id]={}:ht[this.id]&&delete ht[this.id][t],this},qt.getData=function(){return i(ht[this.id]||{})},qt.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},qt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Zt=[];qt.drag=function(i,n,s,r,o,a){function c(c){(c.originalEvent||c).preventDefault();var h=c.clientX,l=c.clientY,u=P.doc.documentElement.scrollTop||P.doc.body.scrollTop,d=P.doc.documentElement.scrollLeft||P.doc.body.scrollLeft;if(this._drag.id=c.identifier,A&&c.touches)for(var p,f=c.touches.length;f--;)if(p=c.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){h=p.clientX,l=p.clientY;break}this._drag.x=h+d,this._drag.y=l+u,!Yt.length&&e.mousemove(jt).mouseup(Xt),Yt.push({el:this,move_scope:r,start_scope:o,end_scope:a}),n&&t.on("raphael.drag.start."+this.id,n),i&&t.on("raphael.drag.move."+this.id,i),s&&t.on("raphael.drag.end."+this.id,s),t("raphael.drag.start."+this.id,o||r||this,c.clientX+d,c.clientY+u,c)}return this._drag={},Zt.push({el:this,start:c}),this.mousedown(c),this},qt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},qt.undrag=function(){for(var i=Zt.length;i--;)Zt[i].el==this&&(this.unmousedown(Zt[i].start),Zt.splice(i,1),t.unbind("raphael.drag.*."+this.id));!Zt.length&&e.unmousemove(jt).unmouseup(Xt),Yt=[]},x.circle=function(t,i,n){var s=e._engine.circle(this,t||0,i||0,n||0);return this.__set__&&this.__set__.push(s),s},x.rect=function(t,i,n,s,r){var o=e._engine.rect(this,t||0,i||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},x.ellipse=function(t,i,n,s){var r=e._engine.ellipse(this,t||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(r),r},x.path=function(t){t&&!e.is(t,U)&&!e.is(t[0],Y)&&(t+=T);var i=e._engine.path(e.format[k](e,arguments),this);return this.__set__&&this.__set__.push(i),i},x.image=function(t,i,n,s,r){var o=e._engine.image(this,t||"about:blank",i||0,n||0,s||0,r||0);return this.__set__&&this.__set__.push(o),o},x.text=function(t,i,n){var s=e._engine.text(this,t||0,i||0,L(n));return this.__set__&&this.__set__.push(s),s},x.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var i=new he(t);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},x.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},x.setSize=function(t,i){return e._engine.setSize.call(this,t,i)},x.setViewBox=function(t,i,n,s,r){return e._engine.setViewBox.call(this,t,i,n,s,r)},x.top=x.bottom=null,x.raphael=e;var Jt=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,s=i.documentElement,r=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0,a=e.top+(P.win.pageYOffset||s.scrollTop||n.scrollTop)-r,c=e.left+(P.win.pageXOffset||s.scrollLeft||n.scrollLeft)-o;return{y:a,x:c}};x.getElementByPoint=function(t,e){var i=this,n=i.canvas,s=P.doc.elementFromPoint(t,e);if(P.win.opera&&"svg"==s.tagName){var r=Jt(n),o=n.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=n.getIntersectionList(o,null);a.length&&(s=a[a.length-1])}if(!s)return null;for(;s.parentNode&&s!=n.parentNode&&!s.raphael;)s=s.parentNode;return s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null},x.getElementsByBBox=function(t){var i=this.set();return this.forEach(function(n){e.isBBoxIntersect(n.getBBox(),t)&&i.push(n)}),i},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var i=this.bottom;i;){if(t.call(e,i)===!1)return this;i=i.next}return this},x.getElementsByPoint=function(t,e){var i=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)}),i},qt.isPointInside=function(t,i){var n=this.realPath=ft[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=e.transformPath(n,this.attr("transform"))),e.isPointInsidePath(n,t,i)},qt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=ft[this.type](this),e.bboxwt=Pt(this.realPath),e.bboxwt.toString=f,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=ft[this.type](this)),e.bbox=Pt(gt(this.realPath,this.matrix)),e.bbox.toString=f,e.dirty=e.dirtyT=0),e.bbox)},qt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},qt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:null==t.opacity?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,s=n.set(),r=this.realPath||ft[this.type](this);r=this.matrix?gt(r,this.matrix):r;for(var o=1;o<i+1;o++)s.push(n.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*o).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(e.offsetx,e.offsety)};var Qt=function(t,i,n,s,r,o,a,l,u){return null==u?c(t,i,n,s,r,o,a,l):e.findDotsAtSegment(t,i,n,s,r,o,a,l,h(t,i,n,s,r,o,a,l,u))},te=function(t,i){return function(n,s,r){n=It(n);for(var o,a,c,h,l,u="",d={},p=0,f=0,g=n.length;f<g;f++){if(c=n[f],"M"==c[0])o=+c[1],a=+c[2];else{if(h=Qt(o,a,c[1],c[2],c[3],c[4],c[5],c[6]),p+h>s){if(i&&!d.start){if(l=Qt(o,a,c[1],c[2],c[3],c[4],c[5],c[6],s-p),u+=["C"+l.start.x,l.start.y,l.m.x,l.m.y,l.x,l.y],r)return u;d.start=u,u=["M"+l.x,l.y+"C"+l.n.x,l.n.y,l.end.x,l.end.y,c[5],c[6]].join(),p+=h,o=+c[5],a=+c[6];continue}if(!t&&!i)return l=Qt(o,a,c[1],c[2],c[3],c[4],c[5],c[6],s-p),{x:l.x,y:l.y,alpha:l.alpha}}p+=h,o=+c[5],a=+c[6]}u+=c.shift()+c}return d.end=u,l=t?p:i?d:e.findDotsAtSegment(o,a,c[0],c[1],c[2],c[3],c[4],c[5],1),l.alpha&&(l={x:l.x,y:l.y,alpha:l.alpha}),l}},ee=te(1),ie=te(),ne=te(0,1);e.getTotalLength=ee,e.getPointAtLength=ie,e.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return ne(t,e).end;var n=ne(t,i,1);return e?ne(n,e).end:n},qt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},qt.getPointAtLength=function(t){var e=this.getPath();if(e)return ie(e,t)},qt.getPath=function(){var t,i=e._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return i&&(t=i(this)),t},qt.getSubpath=function(t,i){var n=this.getPath();if(n)return e.getSubpath(n,t,i)};var se=e.easing_formulas={linear:function(t){return t},"<":function(t){return W(t,1.7)},">":function(t){return W(t,.48)},"<>":function(t){var e=.48-t/1.04,i=H.sqrt(.1734+e*e),n=i-e,s=W(V(n),1/3)*(n<0?-1:1),r=-i-e,o=W(V(r),1/3)*(r<0?-1:1),a=s+o+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:W(2,-10*t)*H.sin((t-.075)*(2*$)/.3)+1},bounce:function(t){var e,i=7.5625,n=2.75;return t<1/n?e=i*t*t:t<2/n?(t-=1.5/n,e=i*t*t+.75):t<2.5/n?(t-=2.25/n,e=i*t*t+.9375):(t-=2.625/n,e=i*t*t+.984375),e}};se.easeIn=se["ease-in"]=se["<"],se.easeOut=se["ease-out"]=se[">"],se.easeInOut=se["ease-in-out"]=se["<>"],se["back-in"]=se.backIn,se["back-out"]=se.backOut;var re=[],oe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ae=function(){for(var i=+new Date,n=0;n<re.length;n++){var s=re[n];if(!s.el.removed&&!s.paused){var r,o,a=i-s.start,c=s.ms,h=s.easing,l=s.from,u=s.diff,d=s.to,p=(s.t,s.el),f={},g={};if(s.initstatus?(a=(s.initstatus*s.anim.top-s.prev)/(s.percent-s.prev)*c,s.status=s.initstatus,delete s.initstatus,s.stop&&re.splice(n--,1)):s.status=(s.prev+(s.percent-s.prev)*(a/c))/s.anim.top,!(a<0))if(a<c){var m=h(a/c);for(var y in l)if(l[M](y)){switch(it[y]){case G:r=+l[y]+m*c*u[y];break;case"colour":r="rgb("+[ce(Z(l[y].r+m*c*u[y].r)),ce(Z(l[y].g+m*c*u[y].g)),ce(Z(l[y].b+m*c*u[y].b))].join(",")+")";break;case"path":r=[];for(var w=0,x=l[y].length;w<x;w++){r[w]=[l[y][w][0]];for(var b=1,_=l[y][w].length;b<_;b++)r[w][b]=+l[y][w][b]+m*c*u[y][w][b];r[w]=r[w].join(z)}r=r.join(z);break;case"transform":if(u[y].real)for(r=[],w=0,x=l[y].length;w<x;w++)for(r[w]=[l[y][w][0]],b=1,_=l[y][w].length;b<_;b++)r[w][b]=l[y][w][b]+m*c*u[y][w][b];else{var C=function(t){return+l[y][t]+m*c*u[y][t]};r=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==y)for(r=[],w=4;w--;)r[w]=+l[y][w]+m*c*u[y][w];break;default:var P=[][D](l[y]);for(r=[],w=p.paper.customAttributes[y].length;w--;)r[w]=+P[w]+m*c*u[y][w]}f[y]=r}p.attr(f),function(e,i,n){setTimeout(function(){t("raphael.anim.frame."+e,i,n)})}(p.id,p,s.anim)}else{if(function(i,n,s){setTimeout(function(){t("raphael.anim.frame."+n.id,n,s),t("raphael.anim.finish."+n.id,n,s),e.is(i,"function")&&i.call(n)})}(s.callback,p,s.anim),p.attr(d),re.splice(n--,1),s.repeat>1&&!s.next){for(o in d)d[M](o)&&(g[o]=s.totalOrigin[o]);s.el.attr(g),v(s.anim,s.el,s.anim.percents[0],null,s.totalOrigin,s.repeat-1)}s.next&&!s.stop&&v(s.anim,s.el,s.next,null,s.totalOrigin,s.repeat)}}}re.length&&oe(ae)},ce=function(t){return t>255?255:t<0?0:t};qt.animateWith=function(t,i,n,s,r,o){var a=this;if(a.removed)return o&&o.call(a),a;var c=n instanceof m?n:e.animation(n,s,r,o);v(c,a,c.percents[0],null,a.attr());for(var h=0,l=re.length;h<l;h++)if(re[h].anim==i&&re[h].el==t){re[l-1].start=re[h].start;break}return a},qt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(t){var e=new m(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},m.prototype.repeat=function(t){var e=new m(this.anim,this.ms);return e.del=this.del,e.times=H.floor(F(t,0))||1,e},e.animation=function(t,i,n,s){if(t instanceof m)return t;!e.is(n,"function")&&n||(s=s||n||null,n=null),t=Object(t),i=+i||0;var r,o,a={};for(o in t)t[M](o)&&J(o)!=o&&J(o)+"%"!=o&&(r=!0,a[o]=t[o]);if(r)return n&&(a.easing=n),s&&(a.callback=s),new m({100:a},i);if(s){var c=0;for(var h in t){var l=Q(h);t[M](h)&&l>c&&(c=l)}c+="%",!t[c].callback&&(t[c].callback=s)}return new m(t,i)},qt.animate=function(t,i,n,s){var r=this;if(r.removed)return s&&s.call(r),r;var o=t instanceof m?t:e.animation(t,i,n,s);return v(o,r,o.percents[0],null,r.attr()),r},qt.setTime=function(t,e){return t&&null!=e&&this.status(t,O(e,t.ms)/t.ms),this},qt.status=function(t,e){var i,n,s=[],r=0;if(null!=e)return v(t,this,-1,O(e,1)),this;for(i=re.length;r<i;r++)if(n=re[r],n.el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;s.push({anim:n.anim,status:n.status})}return t?0:s},qt.pause=function(e){for(var i=0;i<re.length;i++)re[i].el.id!=this.id||e&&re[i].anim!=e||t("raphael.anim.pause."+this.id,this,re[i].anim)!==!1&&(re[i].paused=!0);return this},qt.resume=function(e){for(var i=0;i<re.length;i++)if(re[i].el.id==this.id&&(!e||re[i].anim==e)){var n=re[i];t("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},qt.stop=function(e){for(var i=0;i<re.length;i++)re[i].el.id!=this.id||e&&re[i].anim!=e||t("raphael.anim.stop."+this.id,this,re[i].anim)!==!1&&re.splice(i--,1);return this},t.on("raphael.remove",y),t.on("raphael.clear",y),qt.toString=function(){return"Raphaël’s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;e<i;e++)!t[e]||t[e].constructor!=qt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},le=he.prototype;le.push=function(){for(var t,e,i=0,n=arguments.length;i<n;i++)t=arguments[i],!t||t.constructor!=qt.constructor&&t.constructor!=he||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},le.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},le.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var ue in qt)qt[M](ue)&&(le[ue]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][k](i,e)})}}(ue));return le.attr=function(t,i){if(t&&e.is(t,Y)&&e.is(t[0],"object"))for(var n=0,s=t.length;n<s;n++)this.items[n].attr(t[n]);else for(var r=0,o=this.items.length;r<o;r++)this.items[r].attr(t,i);return this},le.clear=function(){for(;this.length;)this.pop()},le.splice=function(t,e,i){t=t<0?F(this.length+t,0):t,e=F(0,O(this.length-t,e));var n,s=[],r=[],o=[];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<e;n++)r.push(this[t+n]);for(;n<this.length-t;n++)s.push(this[t+n]);var a=o.length;for(n=0;n<a+s.length;n++)this.items[t+n]=this[t+n]=n<a?o[n]:s[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new he(r)},le.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},le.animate=function(t,i,n,s){(e.is(n,"function")||!n)&&(s=n||null);var r,o,a=this.items.length,c=a,h=this;if(!a)return this;s&&(o=function(){!--a&&s.call(h)}),n=e.is(n,U)?n:o;var l=e.animation(t,i,n,o);for(r=this.items[--c].animate(l);c--;)this.items[c]&&!this.items[c].removed&&this.items[c].animateWith(r,l,l),this.items[c]&&!this.items[c].removed||a--;return this},le.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},le.toBack=function(){for(var t=this.items.length;t--;)this.items[t].toBack();return this},le.isVisible=function(){for(var t=this.items.length,e=!1;t--;)e=e||this.items[t].isVisible();return e},le.getBBox=function(t){for(var e=[],i=[],n=[],s=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox(t);e.push(o.x),i.push(o.y),n.push(o.x+o.width),s.push(o.y+o.height)}return e=O[k](0,e),i=O[k](0,i),n=F[k](0,n),s=F[k](0,s),{x:e,y:i,x2:n,y2:s,width:n-e,height:s-i}},le.clone=function(t){t=this.paper.set();for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},le.toString=function(){return"Raphaël‘s set"},le.glow=function(t){var e=this.paper.set();return this.forEach(function(i,n){var s=i.glow(t);null!=s&&s.forEach(function(t,i){e.push(t)})}),e},le.isPointInside=function(t,e){var i=!1;return this.forEach(function(n){if(n.isPointInside(t,e))return i=!0,!1}),i},e.registerFont=function(t){
if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[M](n)&&(e.face[n]=t.face[n]);if(this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e],!t.svg){e.face["units-per-em"]=Q(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[M](s)){var r=t.glyphs[s];if(e.glyphs[s]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},r.k)for(var o in r.k)r[M](o)&&(e.glyphs[s].k[o]=r.k[o])}}return t},x.getFont=function(t,i,n,s){if(s=s||"normal",n=n||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,e.fonts){var r=e.fonts[t];if(!r){var o=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,T)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[M](a)&&o.test(a)){r=e.fonts[a];break}}var c;if(r)for(var h=0,l=r.length;h<l&&(c=r[h],c.face["font-weight"]!=i||c.face["font-style"]!=n&&c.face["font-style"]||c.face["font-stretch"]!=s);h++);return c}},x.print=function(t,i,n,s,r,o,a,c){o=o||"middle",a=F(O(a||0,1),-1),c=F(O(c||1,3),1);var h,l=L(n)[I](T),u=0,d=0,p=T;if(e.is(s,"string")&&(s=this.getFont(s)),s){h=(r||16)/s.face["units-per-em"];for(var f=s.face.bbox[I](b),g=+f[0],m=f[3]-f[1],v=0,y=+f[1]+("baseline"==o?m+ +s.face.descent:m/2),w=0,x=l.length;w<x;w++){if("\n"==l[w])u=0,C=0,d=0,v+=m*c;else{var _=d&&s.glyphs[l[w-1]]||{},C=s.glyphs[l[w]];u+=d?(_.w||s.w)+(_.k&&_.k[l[w]]||0)+s.w*a:0,d=1}C&&C.d&&(p+=e.transformPath(C.d,["t",u*h,v*h,"s",h,h,g,y,"t",(t-g)/h,(i-y)/h]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(e.is(t,"array"))for(var i,n=this.set(),s=0,r=t.length;s<r;s++)i=t[s]||{},_[M](i.type)&&n.push(this[i.type]().attr(i));return n},e.format=function(t,i){var n=e.is(i,Y)?[0][D](i):arguments;return t&&e.is(t,U)&&n.length-1&&(t=t.replace(C,function(t,e){return null==n[++e]?T:n[e]})),t||T},e.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var s=n;return i.replace(e,function(t,e,i,n,r){e=e||n,s&&(e in s&&(s=s[e]),"function"==typeof s&&r&&(s=s()))}),s=(null==s||s==n?t:s)+""};return function(e,n){return String(e).replace(t,function(t,e){return i(t,e,n)})}}(),e.ninja=function(){return S.was?P.win.Raphael=S.is:delete Raphael,e},e.st=le,t.on("raphael.DOMload",function(){w=!0}),function(t,i,n){function s(){/in/.test(t.readyState)?setTimeout(s,9):e.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(i,n=function(){t.removeEventListener(i,n,!1),t.readyState="complete"},!1),t.readyState="loading"),s()}(document,"DOMContentLoaded"),e}),function(t,e){"function"==typeof define&&define.amd?define("raphael.svg",["raphael.core"],function(t){return e(t)}):e("object"==typeof exports?require("./raphael.core"):t.Raphael)}(this,function(t){if(!t||t.svg){var e="hasOwnProperty",i=String,n=parseFloat,s=parseInt,r=Math,o=r.max,a=r.abs,c=r.pow,h=/[, ]+/,l=t.eve,u="",d=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(n,s){if(s){"string"==typeof n&&(n=m(n));for(var r in s)s[e](r)&&("xlink:"==r.substring(0,6)?n.setAttributeNS(p,r.substring(6),i(s[r])):n.setAttribute(r,i(s[r])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,s){var h="linear",l=e.id+s,d=.5,p=.5,f=e.node,g=e.paper,v=f.style,y=t._g.doc.getElementById(l);if(!y){if(s=i(s).replace(t._radial_gradient,function(t,e,i){if(h="radial",e&&i){d=n(e),p=n(i);var s=2*(p>.5)-1;c(d-.5,2)+c(p-.5,2)>.25&&(p=r.sqrt(.25-c(d-.5,2))*s+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*s)}return u}),s=s.split(/\s*\-\s*/),"linear"==h){var w=s.shift();if(w=-n(w),isNaN(w))return null;var x=[0,0,r.cos(t.rad(w)),r.sin(t.rad(w))],b=1/(o(a(x[2]),a(x[3]))||1);x[2]*=b,x[3]*=b,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var _=t._parseDots(s);if(!_)return null;if(l=l.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&l!=e.gradient.id&&(g.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=m(h+"Gradient",{id:l}),e.gradient=y,m(y,"radial"==h?{fx:d,fy:p}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:e.matrix.invert()}),g.defs.appendChild(y);for(var C=0,M=_.length;C<M;C++)y.appendChild(m("stop",{offset:_[C].offset?_[C].offset:C?"100%":"0%","stop-color":_[C].color||"#fff","stop-opacity":isFinite(_[C].opacity)?_[C].opacity:1}))}}var P="";return m(f,{fill:"url('"+P+"#"+l+"')",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},w=function(n,s,r){if("path"==n.type){for(var o,a,c,h,l,d=i(s).toLowerCase().split("-"),p=n.paper,v=r?"end":"start",y=n.node,w=n.attrs,x=w["stroke-width"],b=d.length,_="classic",C=3,M=3,P=5;b--;)switch(d[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=d[b];break;case"wide":M=5;break;case"narrow":M=2;break;case"long":C=5;break;case"short":C=2}if("open"==_?(C+=2,M+=2,P+=2,c=1,h=r?4:1,l={fill:"none",stroke:w.stroke}):(h=c=C/2,l={fill:w.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=_){var S="raphael-marker-"+_,E="raphael-marker-"+v+_+C+M+"-obj"+n.id;t._g.doc.getElementById(S)?g[S]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:f[_],id:S})),g[S]=1);var k,D=t._g.doc.getElementById(E);D?(g[E]++,k=D.getElementsByTagName("use")[0]):(D=m(m("marker"),{id:E,markerHeight:M,markerWidth:C,orient:"auto",refX:h,refY:M/2}),k=m(m("use"),{"xlink:href":"#"+S,transform:(r?"rotate(180 "+C/2+" "+M/2+") ":u)+"scale("+C/P+","+M/P+")","stroke-width":(1/((C/P+M/P)/2)).toFixed(4)}),D.appendChild(k),p.defs.appendChild(D),g[E]=1),m(k,l);var A=c*("diamond"!=_&&"oval"!=_);r?(o=n._.arrows.startdx*x||0,a=t.getTotalLength(w.path)-A*x):(o=A*x,a=t.getTotalLength(w.path)-(n._.arrows.enddx*x||0)),l={},l["marker-"+v]="url(#"+E+")",(a||o)&&(l.d=t.getSubpath(w.path,o,a)),m(y,l),n._.arrows[v+"Path"]=S,n._.arrows[v+"Marker"]=E,n._.arrows[v+"dx"]=A,n._.arrows[v+"Type"]=_,n._.arrows[v+"String"]=s}else r?(o=n._.arrows.startdx*x||0,a=t.getTotalLength(w.path)-o):(o=0,a=t.getTotalLength(w.path)-(n._.arrows.enddx*x||0)),n._.arrows[v+"Path"]&&m(y,{d:t.getSubpath(w.path,o,a)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(l in g)if(g[e](l)&&!g[l]){var T=t._g.doc.getElementById(l);T&&T.parentNode.removeChild(T)}}},x={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},b=function(t,e,n){if(e=x[i(e).toLowerCase()]){for(var s=t.attrs["stroke-width"]||"1",r={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],a=e.length;a--;)o[a]=e[a]*s+(a%2?1:-1)*r;m(t.node,{"stroke-dasharray":o.join(",")})}else m(t.node,{"stroke-dasharray":"none"})},_=function(n,r){var c=n.node,l=n.attrs,d=c.style.visibility;c.style.visibility="hidden";for(var f in r)if(r[e](f)){if(!t._availableAttrs[e](f))continue;var g=r[f];switch(l[f]=g,f){case"blur":n.blur(g);break;case"title":var x=c.getElementsByTagName("title");if(x.length&&(x=x[0]))x.firstChild.nodeValue=g;else{x=m("title");var _=t._g.doc.createTextNode(g);x.appendChild(_),c.appendChild(x)}break;case"href":case"target":var C=c.parentNode;if("a"!=C.tagName.toLowerCase()){var P=m("a");C.insertBefore(P,c),P.appendChild(c),C=P}"target"==f?C.setAttributeNS(p,"show","blank"==g?"new":g):C.setAttributeNS(p,f,g);break;case"cursor":c.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":w(n,g);break;case"arrow-end":w(n,g,1);break;case"clip-rect":var S=i(g).split(h);if(4==S.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var E=m("clipPath"),k=m("rect");E.id=t.createUUID(),m(k,{x:S[0],y:S[1],width:S[2],height:S[3]}),E.appendChild(k),n.paper.defs.appendChild(E),m(c,{"clip-path":"url(#"+E.id+")"}),n.clip=k}if(!g){var D=c.getAttribute("clip-path");if(D){var A=t._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g,u));A&&A.parentNode.removeChild(A),m(c,{"clip-path":u}),delete n.clip}}break;case"path":"path"==n.type&&(m(c,{d:g?l.path=t._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1)));break;case"width":if(c.setAttribute(f,g),n._.dirty=1,!l.fx)break;f="x",g=l.x;case"x":l.fx&&(g=-l.x-(l.width||0));case"rx":if("rx"==f&&"rect"==n.type)break;case"cx":c.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"height":if(c.setAttribute(f,g),n._.dirty=1,!l.fy)break;f="y",g=l.y;case"y":l.fy&&(g=-l.y-(l.height||0));case"ry":if("ry"==f&&"rect"==n.type)break;case"cy":c.setAttribute(f,g),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?m(c,{rx:g,ry:g}):c.setAttribute(f,g),n._.dirty=1;break;case"src":"image"==n.type&&c.setAttributeNS(p,"href",g);break;case"stroke-width":l["stroke-scale"]||(1==n._.sx&&1==n._.sy||(g/=o(a(n._.sx),a(n._.sy))||1),n.paper._vbSize),c.setAttribute(f,g),l["stroke-dasharray"]&&b(n,l["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1));break;case"stroke-dasharray":b(n,g,r);break;case"fill":var T=i(g).match(t._ISURL);if(T){E=m("pattern");var z=m("image");E.id=t.createUUID(),m(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(z,{x:0,y:0,"xlink:href":T[1]}),E.appendChild(z),function(e){t._preload(T[1],function(){var t=this.offsetWidth,i=this.offsetHeight;m(e,{width:t,height:i}),m(z,{width:t,height:i})})}(E),n.paper.defs.appendChild(E),m(c,{fill:"url(#"+E.id+")"}),n.pattern=E,n.pattern&&y(n);break}var L=t.getRGB(g);if(L.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g)){if("opacity"in l||"fill-opacity"in l){var I=t._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,u));if(I){var R=I.getElementsByTagName("stop");m(R[R.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=g,l.fill="none";break}}else delete r.gradient,delete l.gradient,!t.is(l.opacity,"undefined")&&t.is(r.opacity,"undefined")&&m(c,{opacity:l.opacity}),!t.is(l["fill-opacity"],"undefined")&&t.is(r["fill-opacity"],"undefined")&&m(c,{"fill-opacity":l["fill-opacity"]});L[e]("opacity")&&m(c,{"fill-opacity":L.opacity>1?L.opacity/100:L.opacity});case"stroke":L=t.getRGB(g),c.setAttribute(f,L.hex),"stroke"==f&&L[e]("opacity")&&m(c,{"stroke-opacity":L.opacity>1?L.opacity/100:L.opacity}),"stroke"==f&&n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g);break;case"opacity":l.gradient&&!l[e]("stroke-opacity")&&m(c,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(l.gradient){if(I=t._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,u)))for(R=I.getElementsByTagName("stop"),gri=0,grii=R.length;gri<grii;gri++)m(R[gri],{"stop-opacity":g});break}default:"font-size"==f&&(g=s(g,10)+"px");var N=f.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});c.style[N]=g,n._.dirty=1,c.setAttribute(f,g)}}M(n,r),c.style.visibility=d},C=1.2,M=function(n,r){if("text"==n.type&&(r[e]("text")||r[e]("font")||r[e]("font-size")||r[e]("x")||r[e]("y"))){var o=n.attrs,a=n.node,c=a.firstChild?s(t._g.doc.defaultView.getComputedStyle(a.firstChild,u).getPropertyValue("font-size"),10):10;if(r[e]("text")){for(o.text=r.text;a.firstChild;)a.removeChild(a.firstChild);for(var h,l=i(r.text).split("\n"),d=[],p=0,f=l.length;p<f;p++)h=m("tspan"),p&&m(h,{dy:c*C,x:o.x}),h.appendChild(t._g.doc.createTextNode(l[p])),a.appendChild(h),d[p]=h}else for(d=a.getElementsByTagName("tspan"),p=0,f=d.length;p<f;p++)p?m(d[p],{dy:c*C,x:o.x}):m(d[0],{dy:0});m(a,{x:o.x,y:o.y}),n._.dirty=1;var g=n._getBBox(),v=o.y-(g.y+g.height/2);v&&t.is(v,"finite")&&m(d[0],{dy:v})}},P=function(t){return t.parentNode&&"a"===t.parentNode.tagName.toLowerCase()?t.parentNode:t},S=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},E=t.el;S.prototype=E,E.constructor=S,t._engine.path=function(t,e){var i=m("path");e.canvas&&e.canvas.appendChild(i);var n=new S(i,e);return n.type="path",_(n,{fill:"none",stroke:"#000",path:t}),n},E.rotate=function(t,e,s){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(e=s),null==e||null==s){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}return this.transform(this._.transform.concat([["r",t,e,s]])),this},E.scale=function(t,e,s,r){if(this.removed)return this;if(t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3])),t=n(t[0]),null==e&&(e=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]])),this},E.translate=function(t,e){return this.removed?this:(t=i(t).split(h),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},E.transform=function(i){var n=this._;if(null==i)return n.transform;if(t._extractTransform(this,i),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var s=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":s})}return n.transform=this.matrix.toTransformString(),this},E.hide=function(){return this.removed||(this.node.style.display="none"),this},E.show=function(){return this.removed||(this.node.style.display=""),this},E.remove=function(){var e=P(this.node);if(!this.removed&&e.parentNode){var i=this.paper;i.__set__&&i.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&i.defs.removeChild(this.gradient),t._tear(this,i),e.parentNode.removeChild(e),this.removeData();for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},E._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e,i=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&"none"==e.display&&(i=!0,e.display="");var n={};try{n=this.node.getBBox()}catch(t){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{n=n||{},i&&(e.display="none")}return t&&this.hide(),n},E.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&t.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var o=i.split(h),a={},c=0,u=o.length;c<u;c++)i=o[c],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return u-1?a:a[o[0]]}if(null==n&&t.is(i,"array")){for(a={},c=0,u=i.length;c<u;c++)a[i[c]]=this.attr(i[c]);return a}if(null!=n){var d={};d[i]=n}else null!=i&&t.is(i,"object")&&(d=i);for(var p in d)l("raphael.attr."+p+"."+this.id,this,d[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&d[e](p)&&t.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var g in f)f[e](g)&&(d[g]=f[g])}return _(this,d),this},E.toFront=function(){if(this.removed)return this;var e=P(this.node);e.parentNode.appendChild(e);var i=this.paper;return i.top!=this&&t._tofront(this,i),this},E.toBack=function(){if(this.removed)return this;var e=P(this.node),i=e.parentNode;i.insertBefore(e,i.firstChild),t._toback(this,this.paper);this.paper;return this},E.insertAfter=function(e){if(this.removed||!e)return this;var i=P(this.node),n=P(e.node||e[e.length-1].node);return n.nextSibling?n.parentNode.insertBefore(i,n.nextSibling):n.parentNode.appendChild(i),t._insertafter(this,e,this.paper),this},E.insertBefore=function(e){if(this.removed||!e)return this;var i=P(this.node),n=P(e.node||e[0].node);return n.parentNode.insertBefore(i,n),t._insertbefore(this,e,this.paper),this},E.blur=function(e){var i=this;if(0!==+e){var n=m("filter"),s=m("feGaussianBlur");i.attrs.blur=e,n.id=t.createUUID(),m(s,{stdDeviation:+e||1.5}),n.appendChild(s),i.paper.defs.appendChild(n),i._blur=n,m(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter");return i},t._engine.circle=function(t,e,i,n){var s=m("circle");t.canvas&&t.canvas.appendChild(s);var r=new S(s,t);return r.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",m(s,r.attrs),r},t._engine.rect=function(t,e,i,n,s,r){var o=m("rect");t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={x:e,y:i,width:n,height:s,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},a.type="rect",m(o,a.attrs),a},t._engine.ellipse=function(t,e,i,n,s){var r=m("ellipse");t.canvas&&t.canvas.appendChild(r);var o=new S(r,t);return o.attrs={cx:e,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},o.type="ellipse",m(r,o.attrs),o},t._engine.image=function(t,e,i,n,s,r){var o=m("image");m(o,{x:i,y:n,width:s,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={x:i,y:n,width:s,height:r,src:e},a.type="image",a},t._engine.text=function(e,i,n,s){var r=m("text");e.canvas&&e.canvas.appendChild(r);var o=new S(r,e);return o.attrs={x:i,y:n,"text-anchor":"middle",text:s,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},o.type="text",_(o,o.attrs),o},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e&&e.container,n=e.x,s=e.y,r=e.width,o=e.height;if(!i)throw new Error("SVG container not found.");var a,c=m("svg"),h="overflow:hidden;";return n=n||0,s=s||0,r=r||512,o=o||342,m(c,{height:o,version:1.1,width:r,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==i?(c.style.cssText=h+"position:absolute;left:"+n+"px;top:"+s+"px",t._g.doc.body.appendChild(c),a=1):(c.style.cssText=h+"position:relative",i.firstChild?i.insertBefore(c,i.firstChild):i.appendChild(c)),i=new t._Paper,i.width=r,i.height=o,i.canvas=c,i.clear(),i._left=i._top=0,a&&(i.renderfix=function(){}),i.renderfix(),i},t._engine.setViewBox=function(t,e,i,n,s){l("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r,a,c=this.getSize(),h=o(i/c.width,n/c.height),u=this.top,p=s?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(h=1),delete this._vbSize,r="0 0 "+this.width+d+this.height):(this._vbSize=h,r=t+d+e+d+i+d+n),m(this.canvas,{viewBox:r,preserveAspectRatio:p});h&&u;)a="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":a}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[t,e,i,n,!!s],this},t.prototype.renderfix=function(){var t,e=this.canvas,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}var n=-t.e%1,s=-t.f%1;(n||s)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),s&&(this._top=(this._top+s)%1,i.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var k=t.st;for(var D in E)E[e](D)&&!k[e](D)&&(k[D]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(D))}}),function(t,e){"function"==typeof define&&define.amd?define("raphael.vml",["raphael.core"],function(t){return e(t)}):e("object"==typeof exports?require("./raphael.core"):t.Raphael)}(this,function(t){if(!t||t.vml){var e="hasOwnProperty",i=String,n=parseFloat,s=Math,r=s.round,o=s.max,a=s.min,c=s.abs,h="fill",l=/[, ]+/,u=t.eve,d=" progid:DXImageTransform.Microsoft",p=" ",f="",g={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,w="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",x=21600,b={path:1,rect:1,image:1},_={circle:1,ellipse:1},C=function(e){var n=/[ahqstv]/gi,s=t._pathToAbsolute;if(i(e).match(n)&&(s=t._path2curve),n=/[clmz]/g,s==t._pathToAbsolute&&!i(e).match(n)){var o=i(e).replace(m,function(t,e,i){var n=[],s="m"==e.toLowerCase(),o=g[e];return i.replace(y,function(t){s&&2==n.length&&(o+=n+g["m"==e?"l":"L"],n=[]),n.push(r(t*x))}),o+n});return o}var a,c,h=s(e);o=[];for(var l=0,u=h.length;l<u;l++){a=h[l],c=h[l][0].toLowerCase(),"z"==c&&(c="x");for(var d=1,v=a.length;d<v;d++)c+=r(a[d]*x)+(d!=v-1?",":f);o.push(c)}return o.join(p)},M=function(e,i,n){var s=t.matrix();return s.rotate(-e,.5,.5),{dx:s.x(i,n),dy:s.y(i,n)}},P=function(t,e,i,n,s,r){var o=t._,a=t.matrix,l=o.fillpos,u=t.node,d=u.style,f=1,g="",m=x/e,v=x/i;if(d.visibility="hidden",e&&i){if(u.coordsize=c(m)+p+c(v),d.rotation=r*(e*i<0?-1:1),r){var y=M(r,n,s);n=y.dx,s=y.dy}if(e<0&&(g+="x"),i<0&&(g+=" y")&&(f=-1),d.flip=g,u.coordorigin=n*-m+p+s*-v,l||o.fillsize){var w=u.getElementsByTagName(h);w=w&&w[0],u.removeChild(w),l&&(y=M(r,a.x(l[0],l[1]),a.y(l[0],l[1])),w.position=y.dx*f+p+y.dy*f),o.fillsize&&(w.size=o.fillsize[0]*c(e)+p+o.fillsize[1]*c(i)),u.appendChild(w)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S=function(t,e,n){for(var s=i(e).toLowerCase().split("-"),r=n?"end":"start",o=s.length,a="classic",c="medium",h="medium";o--;)switch(s[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=s[o];break;case"wide":case"narrow":h=s[o];break;case"long":case"short":c=s[o]}var l=t.node.getElementsByTagName("stroke")[0];l[r+"arrow"]=a,l[r+"arrowlength"]=c,l[r+"arrowwidth"]=h},E=function(s,c){s.attrs=s.attrs||{};var u=s.node,d=s.attrs,g=u.style,m=b[s.type]&&(c.x!=d.x||c.y!=d.y||c.width!=d.width||c.height!=d.height||c.cx!=d.cx||c.cy!=d.cy||c.rx!=d.rx||c.ry!=d.ry||c.r!=d.r),v=_[s.type]&&(d.cx!=c.cx||d.cy!=c.cy||d.r!=c.r||d.rx!=c.rx||d.ry!=c.ry),y=s;for(var w in c)c[e](w)&&(d[w]=c[w]);if(m&&(d.path=t._getPath[s.type](s),s._.dirty=1),c.href&&(u.href=c.href),c.title&&(u.title=c.title),c.target&&(u.target=c.target),c.cursor&&(g.cursor=c.cursor),"blur"in c&&s.blur(c.blur),(c.path&&"path"==s.type||m)&&(u.path=C(~i(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),s._.dirty=1,"image"==s.type&&(s._.fillpos=[d.x,d.y],s._.fillsize=[d.width,d.height],P(s,1,1,0,0,0))),"transform"in c&&s.transform(c.transform),v){var M=+d.cx,E=+d.cy,D=+d.rx||+d.r||0,A=+d.ry||+d.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r((M-D)*x),r((E-A)*x),r((M+D)*x),r((E+A)*x),r(M*x)),s._.dirty=1}if("clip-rect"in c){var z=i(c["clip-rect"]).split(l);if(4==z.length){z[2]=+z[2]+ +z[0],z[3]=+z[3]+ +z[1];var L=u.clipRect||t._g.doc.createElement("div"),I=L.style;I.clip=t.format("rect({1}px {2}px {3}px {0}px)",z),u.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=s.paper.width+"px",I.height=s.paper.height+"px",u.parentNode.insertBefore(L,u),L.appendChild(u),u.clipRect=L)}c["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(s.textpath){var R=s.textpath.style;c.font&&(R.font=c.font),c["font-family"]&&(R.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),c["font-size"]&&(R.fontSize=c["font-size"]),c["font-weight"]&&(R.fontWeight=c["font-weight"]),c["font-style"]&&(R.fontStyle=c["font-style"])}if("arrow-start"in c&&S(y,c["arrow-start"]),"arrow-end"in c&&S(y,c["arrow-end"],1),null!=c.opacity||null!=c["stroke-width"]||null!=c.fill||null!=c.src||null!=c.stroke||null!=c["stroke-width"]||null!=c["stroke-opacity"]||null!=c["fill-opacity"]||null!=c["stroke-dasharray"]||null!=c["stroke-miterlimit"]||null!=c["stroke-linejoin"]||null!=c["stroke-linecap"]){var N=u.getElementsByTagName(h),B=!1;if(N=N&&N[0],!N&&(B=N=T(h)),"image"==s.type&&c.src&&(N.src=c.src),c.fill&&(N.on=!0),null!=N.on&&"none"!=c.fill&&null!==c.fill||(N.on=!1),N.on&&c.fill){var H=i(c.fill).match(t._ISURL);if(H){N.parentNode==u&&u.removeChild(N),N.rotate=!0,N.src=H[1],N.type="tile";var F=s.getBBox(1);N.position=F.x+p+F.y,s._.fillpos=[F.x,F.y],t._preload(H[1],function(){s._.fillsize=[this.offsetWidth,this.offsetHeight]})}else N.color=t.getRGB(c.fill).hex,N.src=f,N.type="solid",t.getRGB(c.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=i(c.fill).charAt())&&k(y,c.fill,N)&&(d.fill="none",d.gradient=c.fill,N.rotate=!1)}if("fill-opacity"in c||"opacity"in c){var O=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(c.fill).o+1||2)-1);O=a(o(O,0),1),N.opacity=O,N.src&&(N.color="none")}u.appendChild(N);var V=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],W=!1;!V&&(W=V=T("stroke")),(c.stroke&&"none"!=c.stroke||c["stroke-width"]||null!=c["stroke-opacity"]||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])&&(V.on=!0),("none"==c.stroke||null===c.stroke||null==V.on||0==c.stroke||0==c["stroke-width"])&&(V.on=!1);var $=t.getRGB(c.stroke);V.on&&c.stroke&&(V.color=$.hex),O=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+$.o+1||2)-1);var G=.75*(n(c["stroke-width"])||1);if(O=a(o(O,0),1),null==c["stroke-width"]&&(G=d["stroke-width"]),c["stroke-width"]&&(V.weight=G),G&&G<1&&(O*=G)&&(V.weight=1),V.opacity=O,c["stroke-linejoin"]&&(V.joinstyle=c["stroke-linejoin"]||"miter"),V.miterlimit=c["stroke-miterlimit"]||8,c["stroke-linecap"]&&(V.endcap="butt"==c["stroke-linecap"]?"flat":"square"==c["stroke-linecap"]?"square":"round"),"stroke-dasharray"in c){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};V.dashstyle=U[e](c["stroke-dasharray"])?U[c["stroke-dasharray"]]:f}W&&u.appendChild(V)}if("text"==y.type){y.paper.canvas.style.display=f;var Y=y.paper.span,j=100,X=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);g=Y.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily=d["font-family"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&(g.fontStyle=d["font-style"]),X=n(d["font-size"]||X&&X[0])||10,g.fontSize=X*j+"px",y.textpath.string&&(Y.innerHTML=i(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var q=Y.getBoundingClientRect();y.W=d.w=(q.right-q.left)/j,y.H=d.h=(q.bottom-q.top)/j,y.X=d.x,y.Y=d.y+y.H/2,("x"in c||"y"in c)&&(y.path.v=t.format("m{0},{1}l{2},{1}",r(d.x*x),r(d.y*x),r(d.x*x)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,J=K.length;Z<J;Z++)if(K[Z]in c){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},k=function(e,r,o){e.attrs=e.attrs||{};var a=(e.attrs,Math.pow),c="linear",h=".5 .5";if(e.attrs.gradient=r,r=i(r).replace(t._radial_gradient,function(t,e,i){return c="radial",e&&i&&(e=n(e),i=n(i),a(e-.5,2)+a(i-.5,2)>.25&&(i=s.sqrt(.25-a(e-.5,2))*(2*(i>.5)-1)+.5),h=e+p+i),f}),r=r.split(/\s*\-\s*/),"linear"==c){var l=r.shift();if(l=-n(l),isNaN(l))return null}var u=t._parseDots(r);if(!u)return null;if(e=e.shape||e.node,u.length){e.removeChild(o),o.on=!0,o.method="none",o.color=u[0].color,o.color2=u[u.length-1].color;for(var d=[],g=0,m=u.length;g<m;g++)u[g].offset&&d.push(u[g].offset+p+u[g].color);o.colors=d.length?d.join():"0% "+o.color,"radial"==c?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=h,o.angle=0):(o.type="gradient",o.angle=(270-l)%360),e.appendChild(o)}return 1},D=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},A=t.el;D.prototype=A,A.constructor=D,A.transform=function(e){if(null==e)return this._.transform;var n,s=this.paper._viewBoxShift,r=s?"s"+[s.scale,s.scale]+"-1-1t"+[s.dx,s.dy]:f;s&&(n=e=i(e).replace(/\.{3}|\u2026/g,this._.transform||f)),t._extractTransform(this,r+e);var o,a=this.matrix.clone(),c=this.skew,h=this.node,l=~i(this.attrs.fill).indexOf("-"),u=!i(this.attrs.fill).indexOf("url(");if(a.translate(1,1),u||l||"image"==this.type)if(c.matrix="1 0 0 1",c.offset="0 0",o=a.split(),l&&o.noRotation||!o.isSimple){h.style.filter=a.toFilter();var d=this.getBBox(),g=this.getBBox(1),m=d.x-g.x,v=d.y-g.y;h.coordorigin=m*-x+p+v*-x,P(this,1,1,m,v,0)}else h.style.filter=f,P(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else h.style.filter=f,c.matrix=i(a),c.offset=a.offset();return null!==n&&(this._.transform=n,t._extractTransform(this,n)),this},A.rotate=function(t,e,s){if(this.removed)return this;if(null!=t){if(t=i(t).split(l),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),null==s&&(e=s),null==e||null==s){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,s]])),this}},A.translate=function(t,e){return this.removed?this:(t=i(t).split(l),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},A.scale=function(t,e,s,r){if(this.removed)return this;if(t=i(t).split(l),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3]),isNaN(s)&&(s=null),isNaN(r)&&(r=null)),t=n(t[0]),null==e&&(e=t),null==r&&(s=r),null==s||null==r)var o=this.getBBox(1);return s=null==s?o.x+o.width/2:s,r=null==r?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]])),this._.dirtyT=1,this},A.hide=function(){return!this.removed&&(this.node.style.display="none"),this},A.show=function(){return!this.removed&&(this.node.style.display=f),this},A.auxGetBBox=t.el.getBBox,A.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var e={},i=1/this.paper._viewBoxShift.scale;return e.x=t.x-this.paper._viewBoxShift.dx,e.x*=i,e.y=t.y-this.paper._viewBoxShift.dy,e.y*=i,e.width=t.width*i,e.height=t.height*i,e.x2=e.x+e.width,e.y2=e.y+e.height,e}return t},A._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},A.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),
t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},A.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&t.is(i,"string")){if(i==h&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=i.split(l),a={},c=0,d=o.length;c<d;c++)i=o[c],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return d-1?a:a[o[0]]}if(this.attrs&&null==n&&t.is(i,"array")){for(a={},c=0,d=i.length;c<d;c++)a[i[c]]=this.attr(i[c]);return a}var p;null!=n&&(p={},p[i]=n),null==n&&t.is(i,"object")&&(p=i);for(var f in p)u("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&p[e](f)&&t.is(this.paper.customAttributes[f],"function")){var g=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var m in g)g[e](m)&&(p[m]=g[m])}p.text&&"text"==this.type&&(this.textpath.string=p.text),E(this,p)}return this},A.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},A.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},A.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},A.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},A.blur=function(e){var i=this.node.runtimeStyle,n=i.filter;return n=n.replace(v,f),0!==+e?(this.attrs.blur=e,i.filter=n+p+d+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",r(+e||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur),this},t._engine.path=function(t,e){var i=T("shape");i.style.cssText=w,i.coordsize=x+p+x,i.coordorigin=e.coordorigin;var n=new D(i,e),s={fill:"none",stroke:"#000"};t&&(s.path=t),n.type="path",n.path=[],n.Path=f,E(n,s),e.canvas.appendChild(i);var r=T("skew");return r.on=!0,i.appendChild(r),n.skew=r,n.transform(f),n},t._engine.rect=function(e,i,n,s,r,o){var a=t._rectPath(i,n,s,r,o),c=e.path(a),h=c.attrs;return c.X=h.x=i,c.Y=h.y=n,c.W=h.width=s,c.H=h.height=r,h.r=o,h.path=a,c.type="rect",c},t._engine.ellipse=function(t,e,i,n,s){var r=t.path();r.attrs;return r.X=e-n,r.Y=i-s,r.W=2*n,r.H=2*s,r.type="ellipse",E(r,{cx:e,cy:i,rx:n,ry:s}),r},t._engine.circle=function(t,e,i,n){var s=t.path();s.attrs;return s.X=e-n,s.Y=i-n,s.W=s.H=2*n,s.type="circle",E(s,{cx:e,cy:i,r:n}),s},t._engine.image=function(e,i,n,s,r,o){var a=t._rectPath(n,s,r,o),c=e.path(a).attr({stroke:"none"}),l=c.attrs,u=c.node,d=u.getElementsByTagName(h)[0];return l.src=i,c.X=l.x=n,c.Y=l.y=s,c.W=l.width=r,c.H=l.height=o,l.path=a,c.type="image",d.parentNode==u&&u.removeChild(d),d.rotate=!0,d.src=i,d.type="tile",c._.fillpos=[n,s],c._.fillsize=[r,o],u.appendChild(d),P(c,1,1,0,0,0),c},t._engine.text=function(e,n,s,o){var a=T("shape"),c=T("path"),h=T("textpath");n=n||0,s=s||0,o=o||"",c.v=t.format("m{0},{1}l{2},{1}",r(n*x),r(s*x),r(n*x)+1),c.textpathok=!0,h.string=i(o),h.on=!0,a.style.cssText=w,a.coordsize=x+p+x,a.coordorigin="0 0";var l=new D(a,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:o};l.shape=a,l.path=c,l.textpath=h,l.type="text",l.attrs.text=i(o),l.attrs.x=n,l.attrs.y=s,l.attrs.w=1,l.attrs.h=1,E(l,u),a.appendChild(h),a.appendChild(c),e.canvas.appendChild(a);var d=T("skew");return d.on=!0,a.appendChild(d),l.skew=d,l.transform(f),l},t._engine.setSize=function(e,i){var n=this.canvas.style;return this.width=e,this.height=i,e==+e&&(e+="px"),i==+i&&(i+="px"),n.width=e,n.height=i,n.clip="rect(0 "+e+" "+i+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,i,n,s,r){t.eve("raphael.setViewBox",this,this._viewBox,[e,i,n,s,r]);var o,a,c=this.getSize(),h=c.width,l=c.height;return r&&(o=l/s,a=h/n,n*o<h&&(e-=(h-n*o)/2/o),s*a<l&&(i-=(l-s*a)/2/a)),this._viewBox=[e,i,n,s,!!r],this._viewBoxShift={dx:-e,dy:-i,scale:c},this.forEach(function(t){t.transform("...")}),this};var T;t._engine.initWin=function(t){var e=t.document;e.styleSheets.length<31?e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):e.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),T=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){T=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e.container,n=e.height,s=e.width,r=e.x,o=e.y;if(!i)throw new Error("VML container not found.");var a=new t._Paper,c=a.canvas=t._g.doc.createElement("div"),h=c.style;return r=r||0,o=o||0,s=s||512,n=n||342,a.width=s,a.height=n,s==+s&&(s+="px"),n==+n&&(n+="px"),a.coordsize=1e3*x+p+1e3*x,a.coordorigin="0 0",a.span=t._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(a.span),h.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,n),1==i?(t._g.doc.body.appendChild(c),h.left=r+"px",h.top=o+"px",h.position="absolute"):i.firstChild?i.insertBefore(c,i.firstChild):i.appendChild(c),a.renderfix=function(){},a},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var z=t.st;for(var L in A)A[e](L)&&!z[e](L)&&(z[L]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(L))}}),function(t,e){if("function"==typeof define&&define.amd)define("raphael",["raphael.core","raphael.svg","raphael.vml"],function(i){return t.Raphael=e(i)});else if("object"==typeof exports){var i=require("raphael.core");require("raphael.svg"),require("raphael.vml"),module.exports=e(i)}else t.Raphael=e(t.Raphael)}(this,function(t){return t.ninja()}),function(t){var e="http://www.w3.org/2000/svg",i=0,n={Filter:function(t){if(void 0==t)for(t="filter-"+i++;void 0!=n.filters[t];)t="filter-"+i++;if(void 0!=n.filters[t])throw"A filter with id "+t+" already exists";this.element=document.createElementNS(e,"filter"),this.element.setAttribute("id",t),this.element.setAttribute("x","-25%"),this.element.setAttribute("y","-25%"),this.element.setAttribute("width","150%"),this.element.setAttribute("height","150%"),this.lastFEResult=null,n.filters[t]=this,this.id=t},FilterEffect:function(t,i){this.element=document.createElementNS(e,t);for(var n in i)this.element.setAttribute(n,i[n])},getFilter:function(t){var e=t.data("filterId"),i=null;return void 0==e?(e="element-filter-"+t.id,i=t.paper.createFilter(e),t.filter(e)):i=n.filters[e],i},filters:{}};n.Filter.prototype={addEffect:function(t,e,i){var s=new n.FilterEffect(t,e);if(i)if(i instanceof Array)for(var r in i)i.hasOwnProperty(r)&&s.element.appendChild(i[r].element);else s.element.appendChild(i.element);return this.element.appendChild(s.element),this},chainEffect:function(t,e,n){void 0==e&&(e={});var s,r;return s=void 0==e.in?this.getLastResult():e.in,r=void 0==e.result?i++:e.result,this.lastFEResult=r,e.in=s,e.result=r,this.addEffect(t,e,n),this},getLastResult:function(){return void 0==this.lastFEResult?"SourceGraphic":this.lastFEResult},merge:function(t,e,i){var s=new n.FilterEffect("feMergeNode",{in:t}),r=new n.FilterEffect("feMergeNode",{in:e});return this.chainEffect("feMerge",i,[s,r]),this},compose:function(t,e,i,n){return void 0==n&&(n={}),void 0==i&&(i="over"),n.in=t,n.in2=e,n.operator=i,this.chainEffect("feComposite",n),this},arithmeticCompose:function(t,e,i,n,s,r){return void 0==i&&(i=0),void 0==n&&(n=0),void 0==s&&(s=0),void 0==r&&(r=0),this.compose(t,e,"arithmetic",{k1:i,k2:n,k3:s,k4:r}),this},addBlur:function(t,e){if(!t)throw"Standard deviation is required to perform a blur filter";return void 0==e&&(e={}),e.stdDeviation=t,this.chainEffect("feGaussianBlur",e),this},addOffset:function(t,e,i){if(void 0==t|void 0==e)throw"dx and dy values are required to perform an offset FE";return void 0==i&&(i={}),i.dx=t,i.dy=e,this.chainEffect("feOffset",i),this},addLighting:function(t,e,s,r,o,a){if(void 0==t|void 0==e|void 0==s)throw"Three co-ordinates are required to create a light source";var c=this.getLastResult(),h=i++;void 0==a&&(a={}),a.result=h,void 0!=r&&(a["lighting-color"]=r),void 0==o||"diffuse"==o?o="feDiffuseLighting":"specular"==o&&(o="feSpecularLighting");var l=new n.FilterEffect("fePointLight",{x:t,y:e,z:s});return this.chainEffect(o,a,l).arithmeticCompose(c,h,3,.2,0,0),this},addShiftToColor:function(t,e,i){if(void 0==t)throw"A colour string is a required argument to create a colorMatrix";void 0==e&&(e=.5);var n=1-e,s=n;void 0==i&&(i={});var r=Raphael.color(t),o=r.r*e/255,a=r.g*e/255,c=r.b*e/255;return i.values=s+" 0 0 0 "+o+" 0 "+s+" 0 0 "+a+" 0 0 "+s+" 0 "+c+" 0 0 0 1 0 ",this.chainEffect("feColorMatrix",i),this},addRecolor:function(t,e,i){if(void 0==t)throw"A colour string is a required argument to create a colorMatrix";void 0==e&&(e=1),void 0==i&&(i={});var n=Raphael.color(t),s=n.r/255,r=n.g/255,o=n.b/255;return i.values="0 0 0 0 "+s+" 0 0 0 0 "+r+" 0 0 0 0 "+o+" 0 0 0 "+e+" 0 ",this.chainEffect("feColorMatrix",i),this},addDesaturate:function(t,e){return void 0==t&&(saturnation=0),void 0==e&&(e={}),e.values=t,e.type="saturate",this.chainEffect("feColorMatrix",e),this},addConvolveMatrix:function(t,e){if(void 0==t)throw"A matrix (usually 9 numbers) must be provided to apply a convolve matrix transform";return void 0==e&&(e={}),e.kernelMatrix=t,this.chainEffect("feConvolveMatrix",e),this},createShadow:function(t,e,i,n,s){if(void 0==t)throw"dx is required for the shadow effect";if(void 0==e)throw"dy is required for the shadow effect";if(void 0==i)throw"blur (stdDeviation) is required for the shadow effect";void 0==n&&(n=.6);var r=this.getLastResult();return void 0==s&&(s="#000000"),this.addOffset(t,e,{in:"SourceAlpha"}),this.addRecolor(s,n),this.addBlur(i),this.merge(this.getLastResult(),r),this},createEmboss:function(t,e,i,s){void 0==t&&(t=2),void 0==e&&(e=-1e3),void 0==i&&(i=-5e3),void 0==s&&(s=300),this.addOffset(t*e/(e+i),t*i/(e+i),{in:"SourceAlpha"}),this.addBlur(.5*t);var r=new n.FilterEffect("fePointLight",{x:e,y:i,z:s});this.chainEffect("feSpecularLighting",{surfaceScale:t,specularConstant:.8,specularExponent:15},r),this.compose(this.getLastResult(),"SourceAlpha","in");var o=this.getLastResult();this.addOffset(t*-1*e/(e+i),t*-1*i/(e+i),{in:"SourceAlpha"}),this.addBlur(.5*t);var a=new n.FilterEffect("fePointLight",{x:-1*e,y:-1*i,z:s});this.chainEffect("feSpecularLighting",{surfaceScale:t,specularConstant:1.8,specularExponent:6},a),this.compose(this.getLastResult(),"SourceAlpha","in"),this.chainEffect("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"});var c=this.getLastResult();return this.arithmeticCompose(o,c,0,.8,.5,0),this.merge("SourceGraphic",this.getLastResult()),this}},t.FRaphael=n}(this),Raphael.fn.createFilter=function(t){var e=this,i=new FRaphael.Filter(t);return e.defs.appendChild(i.element),i},Raphael.el.filter=function(t){var e=t instanceof FRaphael.Filter?t.id:t;return this.node.setAttribute("filter","url(#"+e+")"),this.data("filterId",e),this},Raphael.el.getFilter=function(){return FRaphael.getFilter(this)},Raphael.el.blur=function(t){return void 0==t&&(t=3),this.getFilter().addBlur(t),this},Raphael.el.shadow=function(t,e,i,n,s){return void 0==t&&(t=3),void 0==e&&(e=3),void 0==i&&(i=3),this.getFilter().createShadow(t,e,i,n,s),this},Raphael.el.light=function(t,e,i,n,s){return void 0==t&&(t=this.paper.width),void 0==e&&(e=0),void 0==i&&(i=20),this.getFilter().addLighting(t,e,i,n,s),this},Raphael.el.colorShift=function(t,e){return void 0==t&&(t="black"),void 0==e&&(e=.5),this.getFilter().addShiftToColor(t,e),this},Raphael.el.emboss=function(t){return this.getFilter().createEmboss(t),this},Raphael.el.desaturate=function(t){return this.getFilter().addDesaturate(t),this},Raphael.el.greyScale=function(){return this.getFilter().addDesaturate(0),this},function(t){function e(n){return this.filter(e.resizableFilterSelector).each(function(){new i(t(this),n)}),this}function i(i,n){i.data("AutoResizer")&&i.data("AutoResizer").destroy(),n=this.config=t.extend({},e.defaults,n),this.el=i,this.nodeName=i[0].nodeName.toLowerCase(),this.originalHeight=i.height(),this.previousScrollTop=null,this.value=i.val(),"original"===n.maxWidth&&(n.maxWidth=i.width()),"original"===n.minWidth&&(n.minWidth=i.width()),"original"===n.maxHeight&&(n.maxHeight=i.height()),"original"===n.minHeight&&(n.minHeight=i.height()),"textarea"===this.nodeName&&i.css({resize:"none",overflowY:"hidden"}),i.data("AutoResizer",this),n.animate.complete=function(t){return function(){return n.onAfterResize.call(i),t.apply(this,arguments)}}(n.animate.complete),this.bind()}var n="ar"+ +new Date;e.defaults={onResize:function(){},onBeforeResize:function(){return 123},onAfterResize:function(){return 555},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};e.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingTop","paddingLeft","paddingBottom","paddingRight","width"],e.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden"},e.resizableFilterSelector=["textarea:not(textarea."+n+")","input:not(input[type])","input[type=text]","input[type=password]","input[type=email]","input[type=url]"].join(","),e.AutoResizer=i,t.fn.autoResize=e,i.prototype={bind:function(){var e=t.proxy(function(){return this.check(),!0},this);this.unbind(),this.el.bind("keyup.autoResize",e).bind("change.autoResize",e).bind("paste.autoResize",function(){setTimeout(function(){e()},0)}),this.el.is(":hidden")||this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var i=this.el,s="textarea"===this.nodeName?i.clone():t("<span/>");this.clone=s,t.each(e.cloneCSSProperties,function(t,e){s[0].style[e]=i.css(e)}),s.removeAttr("name").removeAttr("id").addClass(n).attr("tabIndex",-1).css(e.cloneCSSValues),"textarea"===this.nodeName?s.height("auto"):s.width("auto").css({whiteSpace:"nowrap"})},check:function(t,e){this.clone||(this.createClone(),this.injectClone());var i=this.config,n=this.clone,s=this.el,r=s.val();if(r===this.prevValue)return!0;if(this.prevValue=r,"input"===this.nodeName){n.text(r);var o=n.width(),a=o+i.extraSpace>=i.minWidth?o+i.extraSpace:i.minWidth,c=s.width();return a=Math.min(a,i.maxWidth),void((a<c&&a>=i.minWidth||a>=i.minWidth&&a<=i.maxWidth)&&(i.onBeforeResize.call(s),i.onResize.call(s),s.scrollLeft(0),i.animate&&!e?s.stop(1,1).animate({width:a},i.animate):(s.width(a),i.onAfterResize.call(s))))}n.width(s.width()).height(0).val(r).scrollTop(1e4);var h=n[0].scrollTop;if(r){if(this.previousScrollTop===h)return;this.previousScrollTop=h,h+i.extraSpace>=i.maxHeight?(s.css("overflowY",""),h=i.maxHeight,e=!0):h+i.extraSpace<=i.minHeight?h=i.minHeight:(s.css("overflowY","hidden"),h+=i.extraSpace)}else h=i.minHeight,this.previousScrollTop=null;i.onBeforeResize.call(s),i.onResize.call(s),i.animate&&!e?s.stop(1,1).animate({height:h},i.animate):(s.height(h),i.onAfterResize.call(s))},destroy:function(){this.unbind(),this.el.removeData("AutoResizer"),this.clone.remove(),delete this.el,delete this.clone},injectClone:function(){(e.cloneContainer||(e.cloneContainer=t("<arclones/>").appendTo("body"))).append(this.clone)}}}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var i=t.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var i,n=t.ui.mouse.prototype,s=n._mouseInit;n._touchStart=function(t){var n=this;!i&&n._mouseCapture(t)&&(i=!0,n._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},n._touchMove=function(t){i&&(this._touchMoved=!0,e(t,"mousemove"))},n._touchEnd=function(t){i&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),i=!1)},n._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),s.call(e)}}}(jQuery),function(t,e){function i(t){for(var e,i=t.split(/\s+/),n=[],s=0;e=i[s];s++)e=e[0].toUpperCase(),n.push(e);return n}function n(e){return e.id&&t('label[for="'+e.id+'"]').val()||e.name}function s(i,r,o){return o||(o=0),r.each(function(){var r,a,c=t(this),h=this,l=this.nodeName.toLowerCase();switch("label"==l&&c.find("input, textarea, select").length&&(r=c.text(),c=c.children().first(),h=c.get(0),l=h.nodeName.toLowerCase()),l){case"menu":a={name:c.attr("label"),items:{}},o=s(a.items,c.children(),o);break;case"a":case"button":a={name:c.text(),disabled:!!c.attr("disabled"),callback:function(){return function(){c.click()}}()};break;case"menuitem":case"command":switch(c.attr("type")){case e:case"command":case"menuitem":a={name:c.attr("label"),disabled:!!c.attr("disabled"),callback:function(){return function(){c.click()}}()};break;case"checkbox":a={type:"checkbox",disabled:!!c.attr("disabled"),name:c.attr("label"),selected:!!c.attr("checked")};break;case"radio":a={type:"radio",disabled:!!c.attr("disabled"),name:c.attr("label"),radio:c.attr("radiogroup"),value:c.attr("id"),selected:!!c.attr("checked")};break;default:a=e}break;case"hr":a="-------";break;case"input":switch(c.attr("type")){case"text":a={type:"text",name:r||n(h),disabled:!!c.attr("disabled"),value:c.val()};break;case"checkbox":a={type:"checkbox",name:r||n(h),disabled:!!c.attr("disabled"),selected:!!c.attr("checked")};break;case"radio":a={type:"radio",name:r||n(h),disabled:!!c.attr("disabled"),radio:!!c.attr("name"),value:c.val(),selected:!!c.attr("checked")};break;default:a=e}break;case"select":a={type:"select",name:r||n(h),disabled:!!c.attr("disabled"),selected:c.val(),options:{}},c.children().each(function(){a.options[this.value]=t(this).text()});break;case"textarea":a={type:"textarea",name:r||n(h),disabled:!!c.attr("disabled"),value:c.val()};break;case"label":break;default:a={type:"html",html:c.clone(!0)}}a&&(o++,i["key"+o]=a)}),o}if(t.support.htmlMenuitem="HTMLMenuItemElement"in window,t.support.htmlCommand="HTMLCommandElement"in window,t.support.eventSelectstart="onselectstart"in document.documentElement,!t.ui||!t.ui.widget){var r=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}r(e)}}var o=null,a=!1,c=t(window),h=0,l={},u={},d={},p={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!1,determinePosition:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight(),i.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(i)}},position:function(t,e,i){var n;if(!e&&!i)return void t.determinePosition.call(this,t.$menu);n="maintain"===e&&"maintain"===i?t.$menu.position():{top:i,left:e};var s=c.scrollTop()+c.height(),r=c.scrollLeft()+c.width(),o=t.$menu.height(),a=t.$menu.width();n.top+o>s&&(n.top-=o),n.left+a>r&&(n.left-=a),t.$menu.css(n)},positionSubmenu:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};e.css(i)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:t.noop,hide:t.noop},callback:null,items:{}},f={timer:null,pageX:null,pageY:null},g=function(t){for(var e=0,i=t;;)if(e=Math.max(e,parseInt(i.css("z-index"),10)||0),i=i.parent(),!i||!i.length||"html body".indexOf(i.prop("nodeName").toLowerCase())>-1)break;return e},m={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(e){var i=t(this);if(e.preventDefault(),e.stopImmediatePropagation(),!("right"!=e.data.trigger&&e.originalEvent||i.hasClass("context-menu-active")||i.hasClass("context-menu-disabled"))){if(o=i,e.data.build){var n=e.data.build(o,e);if(n===!1)return;if(e.data=t.extend(!0,{},p,e.data,n||{}),!e.data.items||t.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),new Error("No Items sepcified");e.data.$trigger=o,v.create(e.data)}v.show.call(i,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var i=t(this);o&&o.length&&!o.is(i)&&o.data("contextMenu").$menu.trigger("contextmenu:hide"),2==e.button&&(o=i.data("contextMenuActive",!0))},mouseup:function(e){var i=t(this);i.data("contextMenuActive")&&o&&o.length&&o.is(i)&&!i.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),o=i,i.trigger(t.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))),i.removeData("contextMenuActive")},mouseenter:function(e){var i=t(this),n=t(e.relatedTarget),s=t(document);n.is(".context-menu-list")||n.closest(".context-menu-list").length||o&&o.length||(f.pageX=e.pageX,f.pageY=e.pageY,f.data=e.data,s.on("mousemove.contextMenuShow",m.mousemove),f.timer=setTimeout(function(){f.timer=null,s.off("mousemove.contextMenuShow"),o=i,i.trigger(t.Event("contextmenu",{data:f.data,pageX:f.pageX,pageY:f.pageY}))},e.data.delay))},mousemove:function(t){f.pageX=t.pageX,f.pageY=t.pageY},mouseleave:function(e){var i=t(e.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(f.timer)}catch(t){}f.timer=null}},layerClick:function(e){var i,n,s=t(this),r=s.data("contextMenuRoot"),o=e.button,a=e.pageX,h=e.pageY;e.preventDefault(),e.stopImmediatePropagation(),setTimeout(function(){var s,l="left"==r.trigger&&0===o||"right"==r.trigger&&2===o;if(document.elementFromPoint&&(r.$layer.hide(),i=document.elementFromPoint(a-c.scrollLeft(),h-c.scrollTop()),r.$layer.show()),r.reposition&&l)if(document.elementFromPoint){if(r.$trigger.is(i)||r.$trigger.has(i).length)return void r.position.call(r.$trigger,r,a,h)}else if(n=r.$trigger.offset(),s=t(window),n.top+=s.scrollTop(),n.top<=e.pageY&&(n.left+=s.scrollLeft(),n.left<=e.pageX&&(n.bottom=n.top+r.$trigger.outerHeight(),n.bottom>=e.pageY&&(n.right=n.left+r.$trigger.outerWidth(),n.right>=e.pageX))))return void r.position.call(r.$trigger,r,a,h);i&&l&&r.$trigger.one("contextmenu:hidden",function(){t(i).contextMenu({x:a,y:h})}),r.$menu.trigger("contextmenu:hide")},50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var e=o.data("contextMenu")||{};switch(t.keyCode){case 9:case 38:if(m.keyStop(t,e),e.isInput){if(9==t.keyCode&&t.shiftKey)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void e.$menu.trigger("prevcommand");if(38==t.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault()}else if(9!=t.keyCode||t.shiftKey)return void e.$menu.trigger("prevcommand");case 40:if(m.keyStop(t,e),!e.isInput)return void e.$menu.trigger("nextcommand");if(9==t.keyCode)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void e.$menu.trigger("nextcommand");if(40==t.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault();break;case 37:if(m.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){var i=e.$selected.parent().parent();return e.$selected.trigger("contextmenu:blur"),void(e.$selected=i)}break;case 39:if(m.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;var n=e.$selected.data("contextMenu")||{};if(n.$menu&&e.$selected.hasClass("context-menu-submenu"))return e.$selected=null,n.$selected=null,void n.$menu.trigger("nextcommand");break;case 35:case 36:return e.$selected&&e.$selected.find("input, textarea, select").length?void 0:((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==t.keyCode?"first":"last"]().trigger("contextmenu:focus"),void t.preventDefault());case 13:if(m.keyStop(t,e),e.isInput){if(e.$selected&&!e.$selected.is("textarea, select"))return void t.preventDefault();break}return void(e.$selected&&e.$selected.trigger("mouseup"));case 32:case 33:case 34:return void m.keyStop(t,e);case 27:return m.keyStop(t,e),void e.$menu.trigger("contextmenu:hide");default:var s=String.fromCharCode(t.keyCode).toUpperCase();if(e.accesskeys[s])return void e.accesskeys[s].$node.trigger(e.accesskeys[s].$menu?"contextmenu:focus":"mouseup")}t.stopPropagation(),e.$selected&&e.$selected.trigger(t)},prevItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{};if(i.$selected){var n=i.$selected;i=i.$selected.parent().data("contextMenu")||{},i.$selected=n}for(var s=i.$menu.children(),r=i.$selected&&i.$selected.prev().length?i.$selected.prev():s.last(),o=r;r.hasClass("disabled")||r.hasClass("not-selectable");)if(r=r.prev().length?r.prev():s.last(),r.is(o))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),e),m.itemMouseenter.call(r.get(0),e);var a=r.find("input, textarea, select");a.length&&a.focus()},nextItem:function(e){e.stopPropagation();var i=t(this).data("contextMenu")||{};if(i.$selected){var n=i.$selected;i=i.$selected.parent().data("contextMenu")||{},i.$selected=n}for(var s=i.$menu.children(),r=i.$selected&&i.$selected.next().length?i.$selected.next():s.first(),o=r;r.hasClass("disabled")||r.hasClass("not-selectable");)if(r=r.next().length?r.next():s.first(),r.is(o))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),e),m.itemMouseenter.call(r.get(0),e);var a=r.find("input, textarea, select");a.length&&a.focus()},focusInput:function(e){var i=t(this).closest(".context-menu-item"),n=i.data(),s=n.contextMenu,r=n.contextMenuRoot;r.$selected=s.$selected=i,r.isInput=s.isInput=!0},blurInput:function(e){var i=t(this).closest(".context-menu-item"),n=i.data(),s=n.contextMenu,r=n.contextMenuRoot;r.isInput=s.isInput=!1},menuMouseenter:function(e){var i=t(this).data().contextMenuRoot;i.hovering=!0},menuMouseleave:function(e){var i=t(this).data().contextMenuRoot;i.$layer&&i.$layer.is(e.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(e){var i=t(this),n=i.data(),s=n.contextMenu,r=n.contextMenuRoot;return r.hovering=!0,e&&r.$layer&&r.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(s.$menu?s:r).$menu.children(".hover").trigger("contextmenu:blur"),i.hasClass("disabled")||i.hasClass("not-selectable")?void(s.$selected=null):void i.trigger("contextmenu:focus")},itemMouseleave:function(e){var i=t(this),n=i.data(),s=n.contextMenu,r=n.contextMenuRoot;return r!==s&&r.$layer&&r.$layer.is(e.relatedTarget)?(r.$selected&&r.$selected.trigger("contextmenu:blur"),e.preventDefault(),e.stopImmediatePropagation(),void(r.$selected=s.$selected=s.$node)):void i.trigger("contextmenu:blur")},itemClick:function(e){var i,n=t(this),s=n.data(),r=s.contextMenu,o=s.contextMenuRoot,a=s.contextMenuKey;if(r.items[a]&&!n.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){if(e.preventDefault(),e.stopImmediatePropagation(),t.isFunction(o.callbacks[a])&&Object.prototype.hasOwnProperty.call(o.callbacks,a))i=o.callbacks[a];else{if(!t.isFunction(o.callback))return;i=o.callback}i.call(o.$trigger,a,o)!==!1?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&v.update.call(o.$trigger,o)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(e,i){var n=t(this).data("contextMenuRoot");v.hide.call(n.$trigger,n,i&&i.force)},focusItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),s=n.contextMenu,r=n.contextMenuRoot;i.addClass("hover").siblings(".hover").trigger("contextmenu:blur"),s.$selected=r.$selected=i,s.$node&&r.positionSubmenu.call(s.$node,s.$menu)},blurItem:function(e){e.stopPropagation();var i=t(this),n=i.data(),s=n.contextMenu;n.contextMenuRoot;i.removeClass("hover"),s.$selected=null}},v={show:function(e,i,n){var s=t(this),r={};return t("#context-menu-layer").trigger("mousedown"),e.$trigger=s,e.events.show.call(s,e)===!1?void(o=null):(v.update.call(s,e),e.position.call(s,e,i,n),e.zIndex&&(r.zIndex=g(s)+e.zIndex),v.layer.call(e.$menu,e,r.zIndex),e.$menu.find("ul").css("zIndex",r.zIndex+1),e.$menu.css(r)[e.animation.show](e.animation.duration,function(){s.trigger("contextmenu:visible")}),s.data("contextMenu",e).addClass("context-menu-active"),t(document).off("keydown.contextMenu").on("keydown.contextMenu",m.key),void(e.autoHide&&t(document).on("mousemove.contextMenuAutoHide",function(t){var i=s.offset();i.right=i.left+s.outerWidth(),i.bottom=i.top+s.outerHeight(),!e.$layer||e.hovering||t.pageX>=i.left&&t.pageX<=i.right&&t.pageY>=i.top&&t.pageY<=i.bottom||e.$menu.trigger("contextmenu:hide")})))},hide:function(i,n){var s=t(this);if(i||(i=s.data("contextMenu")||{}),n||!i.events||i.events.hide.call(s,i)!==!1){if(s.removeData("contextMenu").removeClass("context-menu-active"),i.$layer){setTimeout(function(t){return function(){t.remove()}}(i.$layer),10);try{delete i.$layer}catch(t){i.$layer=null}}o=null,i.$menu.find(".hover").trigger("contextmenu:blur"),i.$selected=null,t(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),i.$menu&&i.$menu[i.animation.hide](i.animation.duration,function(){i.build&&(i.$menu.remove(),t.each(i,function(t,n){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:i[t]=e;try{delete i[t]}catch(t){}return!0}})),setTimeout(function(){s.trigger("contextmenu:hidden")},10)})}},create:function(n,s){s===e&&(s=n),n.$menu=t('<ul class="context-menu-list"></ul>').addClass(n.className||"").data({contextMenu:n,contextMenuRoot:s}),t.each(["callbacks","commands","inputs"],function(t,e){n[e]={},s[e]||(s[e]={})}),s.accesskeys||(s.accesskeys={}),t.each(n.items,function(e,r){var o=t('<li class="context-menu-item"></li>').addClass(r.className||""),a=null,c=null;if(o.on("click",t.noop),r.$node=o.data({contextMenu:n,contextMenuRoot:s,contextMenuKey:e}),r.accesskey)for(var h,l=i(r.accesskey),u=0;h=l[u];u++)if(!s.accesskeys[h]){s.accesskeys[h]=r,r._name=r.name.replace(new RegExp("("+h+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof r)o.addClass("context-menu-separator not-selectable");else if(r.type&&d[r.type])d[r.type].call(o,r,n,s),t.each([n,s],function(i,n){n.commands[e]=r,t.isFunction(r.callback)&&(n.callbacks[e]=r.callback)});else{switch("html"==r.type?o.addClass("context-menu-html not-selectable"):r.type?(a=t("<label></label>").appendTo(o),
t("<span></span>").html(r._name||r.name).appendTo(a),o.addClass("context-menu-input"),n.hasTypes=!0,t.each([n,s],function(t,i){i.commands[e]=r,i.inputs[e]=r})):r.items&&(r.type="sub"),r.type){case"text":c=t('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+e).val(r.value||"").appendTo(a);break;case"textarea":c=t('<textarea name=""></textarea>').attr("name","context-menu-input-"+e).val(r.value||"").appendTo(a),r.height&&c.height(r.height);break;case"checkbox":c=t('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+e).val(r.value||"").prop("checked",!!r.selected).prependTo(a);break;case"radio":c=t('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+r.radio).val(r.value||"").prop("checked",!!r.selected).prependTo(a);break;case"select":c=t('<select name="">').attr("name","context-menu-input-"+e).appendTo(a),r.options&&(t.each(r.options,function(e,i){t("<option></option>").val(e).text(i).appendTo(c)}),c.val(r.selected));break;case"sub":t("<span></span>").html(r._name||r.name).appendTo(o),r.appendTo=r.$node,v.create(r,s),o.data("contextMenu",r).addClass("context-menu-submenu"),r.callback=null;break;case"html":t(r.html).appendTo(o);break;default:t.each([n,s],function(i,n){n.commands[e]=r,t.isFunction(r.callback)&&(n.callbacks[e]=r.callback)}),t("<span></span>").html(r._name||r.name||"").appendTo(o)}r.type&&"sub"!=r.type&&"html"!=r.type&&(c.on("focus",m.focusInput).on("blur",m.blurInput),r.events&&c.on(r.events,n)),r.icon&&o.addClass("icon icon-"+r.icon)}r.$input=c,r.$label=a,o.appendTo(n.$menu),!n.hasTypes&&t.support.eventSelectstart&&o.on("selectstart.disableTextSelect",m.abortevent)}),n.$node||n.$menu.css("display","none").addClass("context-menu-root"),n.$menu.appendTo(n.appendTo||document.body)},resize:function(e,i){e.css({position:"absolute",display:"block"}),e.data("width",Math.ceil(e.width())+1),e.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),e.find("> li > ul").each(function(){v.resize(t(this),!0)}),i||e.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return t(this).data("width")})},update:function(i,n){var s=this;n===e&&(n=i,v.resize(i.$menu)),i.$menu.children().each(function(){var e=t(this),r=e.data("contextMenuKey"),o=i.items[r],a=t.isFunction(o.disabled)&&o.disabled.call(s,r,n)||o.disabled===!0;if(e[a?"addClass":"removeClass"]("disabled"),o.type)switch(e.find("input, select, textarea").prop("disabled",a),o.type){case"text":case"textarea":o.$input.val(o.value||"");break;case"checkbox":case"radio":o.$input.val(o.value||"").prop("checked",!!o.selected);break;case"select":o.$input.val(o.selected||"")}o.$menu&&v.update.call(s,o,n)})},layer:function(e,i){var n=e.$layer=t('<div id="context-menu-layer" style="position:fixed; z-index:'+i+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:c.height(),width:c.width(),display:"block"}).data("contextMenuRoot",e).insertBefore(this).on("contextmenu",m.abortevent).on("mousedown",m.layerClick);return t.support.fixedPosition||n.css({position:"absolute",height:t(document).height()}),n}};t.fn.contextMenu=function(i){if(i===e)this.first().trigger("contextmenu");else if(i.x&&i.y)this.first().trigger(t.Event("contextmenu",{pageX:i.x,pageY:i.y}));else if("hide"===i){var n=this.data("contextMenu").$menu;n&&n.trigger("contextmenu:hide")}else"destroy"===i?t.contextMenu("destroy",{context:this}):t.isPlainObject(i)?(i.context=this,t.contextMenu("create",i)):i?this.removeClass("context-menu-disabled"):i||this.addClass("context-menu-disabled");return this},t.contextMenu=function(i,n){"string"!=typeof i&&(n=i,i="create"),"string"==typeof n?n={selector:n}:n===e&&(n={});var s=t.extend(!0,{},p,n||{}),r=t(document),o=r,c=!1;switch(s.context&&s.context.length?(o=t(s.context).first(),s.context=o.get(0),c=s.context!==document):s.context=document,i){case"create":if(!s.selector)throw new Error("No selector specified");if(s.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+s.selector+'" as it contains a reserved className');if(!s.build&&(!s.items||t.isEmptyObject(s.items)))throw new Error("No Items sepcified");switch(h++,s.ns=".contextMenu"+h,c||(l[s.selector]=s.ns),u[s.ns]=s,s.trigger||(s.trigger="right"),a||(r.on({"contextmenu:hide.contextMenu":m.hideMenu,"prevcommand.contextMenu":m.prevItem,"nextcommand.contextMenu":m.nextItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.menuMouseenter,"mouseleave.contextMenu":m.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",m.inputClick).on({"mouseup.contextMenu":m.itemClick,"contextmenu:focus.contextMenu":m.focusItem,"contextmenu:blur.contextMenu":m.blurItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.itemMouseenter,"mouseleave.contextMenu":m.itemMouseleave},".context-menu-item"),a=!0),o.on("contextmenu"+s.ns,s.selector,s,m.contextmenu),c&&o.on("remove"+s.ns,function(){t(this).contextMenu("destroy")}),s.trigger){case"hover":o.on("mouseenter"+s.ns,s.selector,s,m.mouseenter).on("mouseleave"+s.ns,s.selector,s,m.mouseleave);break;case"left":o.on("click"+s.ns,s.selector,s,m.click)}s.build||v.create(s);break;case"destroy":var d;if(c){var f=s.context;t.each(u,function(e,i){if(i.context!==f)return!0;d=t(".context-menu-list").filter(":visible"),d.length&&d.data().contextMenuRoot.$trigger.is(t(i.context).find(i.selector))&&d.trigger("contextmenu:hide",{force:!0});try{u[i.ns].$menu&&u[i.ns].$menu.remove(),delete u[i.ns]}catch(t){u[i.ns]=null}return t(i.context).off(i.ns),!0})}else if(s.selector){if(l[s.selector]){d=t(".context-menu-list").filter(":visible"),d.length&&d.data().contextMenuRoot.$trigger.is(s.selector)&&d.trigger("contextmenu:hide",{force:!0});try{u[l[s.selector]].$menu&&u[l[s.selector]].$menu.remove(),delete u[l[s.selector]]}catch(t){u[l[s.selector]]=null}r.off(l[s.selector])}}else r.off(".contextMenu .contextMenuAutoHide"),t.each(u,function(e,i){t(i.context).off(i.ns)}),l={},u={},h=0,a=!1,t("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!t.support.htmlCommand&&!t.support.htmlMenuitem||"boolean"==typeof n&&n)&&t('menu[type="context"]').each(function(){this.id&&t.contextMenu({selector:"[contextmenu="+this.id+"]",items:t.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+i+'"')}return this},t.contextMenu.setInputValues=function(i,n){n===e&&(n={}),t.each(i.inputs,function(t,e){switch(e.type){case"text":case"textarea":e.value=n[t]||"";break;case"checkbox":e.selected=!!n[t];break;case"radio":e.selected=(n[e.radio]||"")==e.value;break;case"select":e.selected=n[t]||""}})},t.contextMenu.getInputValues=function(i,n){return n===e&&(n={}),t.each(i.inputs,function(t,e){switch(e.type){case"text":case"textarea":case"select":n[t]=e.$input.val();break;case"checkbox":n[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(n[e.radio]=e.value)}}),n},t.contextMenu.fromMenu=function(e){var i=t(e),n={};return s(n,i.children()),n},t.contextMenu.defaults=p,t.contextMenu.types=d,t.contextMenu.handle=m,t.contextMenu.op=v,t.contextMenu.menus=u}(jQuery),function(t,e){"use strict";"undefined"!=typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],e):"undefined"!=typeof module&&module.exports&&(module.exports=e(require("rgbcolor"),require("stackblur"))),t.canvg=e(t.RGBColor,t.stackBlur)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=[0,0,0],i=function(i,n){var s=t.match(i);null!=s&&(e[n]+=s.length,t=t.replace(i," "))};return t=t.replace(/:not\(([^\)]*)\)/g,"     $1 "),t=t.replace(/{[\s\S]*/gm," "),i(a,1),i(c,0),i(h,1),i(l,2),i(u,1),i(d,1),t=t.replace(/[\*\s\+>~]/g," "),t=t.replace(/[#\.]/g," "),i(p,2),e.join("")}function s(s){var o={opts:s};o.FRAMERATE=30,o.MAX_VIRTUAL_PIXELS=3e4,o.log=function(t){},1==o.opts.log&&"undefined"!=typeof console&&(o.log=function(t){console.log(t)}),o.init=function(t){var e=0;o.UniqueId=function(){return e++,"canvg"+e},o.Definitions={},o.Styles={},o.StylesSpecificity={},o.Animations=[],o.Images=[],o.ctx=t,o.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},o.init(),o.ImagesLoaded=function(){for(var t=0;t<o.Images.length;t++)if(!o.Images[t].loaded)return!1;return!0},o.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},o.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},o.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},o.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,i=new Windows.Data.Xml.Dom.XmlLoadSettings;return i.prohibitDtd=!1,e.loadXml(t,i),e}if(window.DOMParser){var n=new DOMParser;return n.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},o.Property=function(t,e){this.name=t,this.value=e},o.Property.prototype.getValue=function(){return this.value},o.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},o.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},o.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},o.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},o.Property.prototype.addOpacity=function(e){var i=this.value;if(null!=e.value&&""!=e.value&&"string"==typeof this.value){var n=new t(this.value);n.ok&&(i="rgba("+n.r+", "+n.g+", "+n.b+", "+e.numValue()+")")}return new o.Property(this.name,i)},o.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),o.Definitions[t]},o.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},o.Property.prototype.getFillStyleDefinition=function(t,e){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(o.ctx,t,e);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var n=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),n.hasValue()&&(i.attribute("patternTransform",!0).value=n.value)}return i.createPattern(o.ctx,t)}return null},o.Property.prototype.getDPI=function(t){return 96},o.Property.prototype.getEM=function(t){var e=12,i=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);return i.hasValue()&&(e=i.toPixels(t)),e},o.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},o.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*o.ViewPort.ComputeSize(t);var n=this.numValue();return e&&n<1?n*o.ViewPort.ComputeSize(t):n},o.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():t.match(/ms$/)?this.numValue():this.numValue()},o.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var a={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return o.Property.prototype.toTextBaseline=function(){return this.hasValue()?a[this.value]:null},o.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,i,n,s,r){var a=null!=r?this.Parse(r):this.CreateFont("","","","","",o.ctx.font);return{fontFamily:s||a.fontFamily,fontSize:n||a.fontSize,fontStyle:t||a.fontStyle,fontWeight:i||a.fontWeight,fontVariant:e||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(e){for(var i={},n=o.trim(o.compressSpaces(e||"")).split(" "),s={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},r="",a=0;a<n.length;a++)s.fontStyle||t.Styles.indexOf(n[a])==-1?s.fontVariant||t.Variants.indexOf(n[a])==-1?s.fontWeight||t.Weights.indexOf(n[a])==-1?s.fontSize?"inherit"!=n[a]&&(r+=n[a]):("inherit"!=n[a]&&(i.fontSize=n[a].split("/")[0]),s.fontStyle=s.fontVariant=s.fontWeight=s.fontSize=!0):("inherit"!=n[a]&&(i.fontWeight=n[a]),s.fontStyle=s.fontVariant=s.fontWeight=!0):("inherit"!=n[a]&&(i.fontVariant=n[a]),s.fontStyle=s.fontVariant=!0):("inherit"!=n[a]&&(i.fontStyle=n[a]),s.fontStyle=!0);return""!=r&&(i.fontFamily=r),i}},o.ToNumberArray=function(t){for(var e=o.trim(o.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<e.length;i++)e[i]=parseFloat(e[i]);return e},o.Point=function(t,e){this.x=t,this.y=e},o.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},o.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],i=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=i},o.CreatePoint=function(t){var e=o.ToNumberArray(t);return new o.Point(e[0],e[1])},o.CreatePath=function(t){for(var e=o.ToNumberArray(t),i=[],n=0;n<e.length;n+=2)i.push(new o.Point(e[n],e[n+1]));return i},o.BoundingBox=function(t,e,n,s){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,n,s,r){var o=t+2/3*(i-t),a=e+2/3*(n-e),c=o+1/3*(s-t),h=a+1/3*(r-e);this.addBezierCurve(t,e,o,c,a,h,s,r)},this.addBezierCurve=function(t,e,n,s,r,o,a,c){var h=[t,e],l=[n,s],u=[r,o],d=[a,c];for(this.addPoint(h[0],h[1]),this.addPoint(d[0],d[1]),i=0;i<=1;i++){var p=function(t){return Math.pow(1-t,3)*h[i]+3*Math.pow(1-t,2)*t*l[i]+3*(1-t)*Math.pow(t,2)*u[i]+Math.pow(t,3)*d[i]},f=6*h[i]-12*l[i]+6*u[i],g=-3*h[i]+9*l[i]-9*u[i]+3*d[i],m=3*l[i]-3*h[i];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(v<0)){var y=(-f+Math.sqrt(v))/(2*g);0<y&&y<1&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var w=(-f-Math.sqrt(v))/(2*g);0<w&&w<1&&(0==i&&this.addX(p(w)),1==i&&this.addY(p(w)))}}else{if(0==f)continue;var x=-m/f;0<x&&x<1&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,s)},o.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=o.ToNumberArray(t);this.angle=new o.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=o.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=o.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],i=this.m[2],n=this.m[4],s=this.m[1],r=this.m[3],o=this.m[5],a=0,c=0,h=1,l=1/(e*(r*h-o*c)-i*(s*h-o*a)+n*(s*c-r*a));t.transform(l*(r*h-o*c),l*(o*a-s*h),l*(n*c-i*h),l*(e*h-n*a),l*(i*o-n*r),l*(n*s-e*o))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new o.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=o.trim(o.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),n=0;n<i.length;n++){var s=o.trim(i[n].split("(")[0]),r=i[n].split("(")[1].replace(")",""),a=this.Type[s];if("undefined"!=typeof a){var c=new a(r);c.type=s,this.transforms.push(c)}}},o.AspectRatio=function(t,e,i,n,s,r,a,c,h,l){e=o.compressSpaces(e),e=e.replace(/^defer\s/,"");var u=e.split(" ")[0]||"xMidYMid",d=e.split(" ")[1]||"meet",p=i/n,f=s/r,g=Math.min(p,f),m=Math.max(p,f);"meet"==d&&(n*=g,r*=g),"slice"==d&&(n*=m,r*=m),h=new o.Property("refX",h),l=new o.Property("refY",l),h.hasValue()&&l.hasValue()?t.translate(-g*h.toPixels("x"),-g*l.toPixels("y")):(u.match(/^xMid/)&&("meet"==d&&g==f||"slice"==d&&m==f)&&t.translate(i/2-n/2,0),u.match(/YMid$/)&&("meet"==d&&g==p||"slice"==d&&m==p)&&t.translate(0,s/2-r/2),u.match(/^xMax/)&&("meet"==d&&g==f||"slice"==d&&m==f)&&t.translate(i-n,0),u.match(/YMax$/)&&("meet"==d&&g==p||"slice"==d&&m==p)&&t.translate(0,s-r)),"none"==u?t.scale(p,f):"meet"==d?t.scale(g,g):"slice"==d&&t.scale(m,m),t.translate(null==a?0:-a,null==c?0:-c)},o.Element={},o.EmptyProperty=new o.Property("EMPTY",""),o.Element.ElementBase=function(t){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var i=this.attributes[t];return null!=i?i:(1==e&&(i=new o.Property(t,""),this.attributes[t]=i),i||o.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return o.EmptyProperty},this.style=function(t,e,i){var n=this.styles[t];if(null!=n)return n;var s=this.attribute(t);if(null!=s&&s.hasValue())return this.styles[t]=s,s;if(1!=i){var r=this.parent;if(null!=r){var a=r.style(t);if(null!=a&&a.hasValue())return a}}return 1==e&&(n=new o.Property(t,""),this.styles[t]=n),n||o.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var i=this.style("filter").getDefinition();null!=i&&i.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var i=t;e&&(i=o.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},this.addStylesFromStyleDefinition=function(){for(var e in o.Styles)if("@"!=e[0]&&r(t,e)){var i=o.Styles[e],n=o.StylesSpecificity[e];if(null!=i)for(var s in i){var a=this.stylesSpecificity[s];"undefined"==typeof a&&(a="000"),n>a&&(this.styles[s]=i[s],this.stylesSpecificity[s]=n)}}};var e=new RegExp("^[A-Z-]+$"),i=function(t){return e.test(t)?t.toLowerCase():t};if(null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var s=t.attributes[n],a=i(s.nodeName);this.attributes[a]=new o.Property(a,s.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var c=this.attribute("style").value.split(new RegExp(";(?![^\\(]*\\))")),n=0;n<c.length;n++)if(""!=o.trim(c[n])){var h=c[n].split(":");h.length>2&&(h[1]=h.slice(1).join(":"),h.length=2);var l=o.trim(h[0]),u=o.trim(h[1]);this.styles[l]=new o.Property(l,u)}this.attribute("id").hasValue()&&null==o.Definitions[this.attribute("id").value]&&(o.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var d=t.childNodes[n];if(1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&(3==d.nodeType||4==d.nodeType)){var p=d.value||d.text||d.textContent||"";""!=o.compressSpaces(p)&&this.addChild(new o.Element.tspan(d),!1)}}}},o.Element.RenderedElementBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var e=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=e&&(t.fillStyle=e)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),"inherit"!=i.value&&(t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value)}if(this.style("fill-opacity").hasValue()){var i=new o.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var e=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=e&&(t.strokeStyle=e)}else if(this.style("stroke").hasValue()){var n=this.style("stroke");"currentColor"==n.value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.strokeStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("stroke-opacity").hasValue()){var n=new o.Property("stroke",t.strokeStyle);n=n.addOpacity(this.style("stroke-opacity")),t.strokeStyle=n.value}if(this.style("stroke-width").hasValue()){var s=this.style("stroke-width").toPixels();t.lineWidth=0==s?.001:s}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var r=o.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(r):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=r:"undefined"==typeof t.mozDash||1==r.length&&0==r[0]||(t.mozDash=r);var a=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=a:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=a:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=a)}if("undefined"!=typeof t.font&&(t.font=o.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var c=new o.Transform(this.style("transform",!1,!0).value);c.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var h=this.style("clip-path",!1,!0).getDefinition();null!=h&&h.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},o.Element.RenderedElementBase.prototype=new o.Element.ElementBase,o.Element.PathElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new o.BoundingBox},this.renderChildren=function(t){this.path(t),o.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,e[0][0],e[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),n=1;n<e.length-1;n++)i.render(t,e[n][0],e[n][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,e[e.length-1][0],e[e.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},o.Element.PathElementBase.prototype=new o.Element.RenderedElementBase,o.Element.svg=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),o.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var e=o.ViewPort.width(),i=o.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){e=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var n=0,s=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),s=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(n,s),t.lineTo(e,s),t.lineTo(e,i),t.lineTo(n,i),t.closePath(),t.clip())}if(o.ViewPort.SetCurrent(e,i),this.attribute("viewBox").hasValue()){var r=o.ToNumberArray(this.attribute("viewBox").value),a=r[0],c=r[1];e=r[2],i=r[3],o.AspectRatio(t,this.attribute("preserveAspectRatio").value,o.ViewPort.width(),e,o.ViewPort.height(),i,a,c,this.attribute("refX").value,this.attribute("refY").value),o.ViewPort.RemoveCurrent(),o.ViewPort.SetCurrent(r[2],r[3])}}},o.Element.svg.prototype=new o.Element.RenderedElementBase,o.Element.rect=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y"),r=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(a=r),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(r=a),r=Math.min(r,n/2),a=Math.min(a,s/2),null!=t&&(t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+a),t.lineTo(e+n,i+s-a),t.quadraticCurveTo(e+n,i+s,e+n-r,i+s),t.lineTo(e+r,i+s),t.quadraticCurveTo(e,i+s,e,i+s-a),t.lineTo(e,i+a),t.quadraticCurveTo(e,i,e+r,i),t.closePath()),new o.BoundingBox(e,i,e+n,i+s)}},o.Element.rect.prototype=new o.Element.PathElementBase,o.Element.circle=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),n=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!0),t.closePath()),new o.BoundingBox(e-n,i-n,e+n,i+n)}},o.Element.circle.prototype=new o.Element.PathElementBase,o.Element.ellipse=function(t){this.base=o.Element.PathElementBase,this.base(t),this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),n=this.attribute("ry").toPixels("y"),s=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(s,r-n),t.bezierCurveTo(s+e*i,r-n,s+i,r-e*n,s+i,r),t.bezierCurveTo(s+i,r+e*n,s+e*i,r+n,s,r+n),t.bezierCurveTo(s-e*i,r+n,s-i,r+e*n,s-i,r),t.bezierCurveTo(s-i,r-e*n,s-e*i,r-n,s,r-n),t.closePath()),new o.BoundingBox(s-i,r-n,s+i,r+n)}},o.Element.ellipse.prototype=new o.Element.PathElementBase,o.Element.line=function(t){this.base=o.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new o.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new o.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new o.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},o.Element.line.prototype=new o.Element.PathElementBase,o.Element.polyline=function(t){this.base=o.Element.PathElementBase,this.base(t),this.points=o.CreatePath(this.attribute("points").value),this.path=function(t){var e=new o.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)e.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.length>0&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},o.Element.polyline.prototype=new o.Element.PathElementBase,o.Element.polygon=function(t){this.base=o.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},o.Element.polygon.prototype=new o.Element.polyline,o.Element.path=function(t){this.base=o.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var i=0;i<2;i++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2");for(var i=0;i<2;i++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=o.compressSpaces(e),e=o.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",
this.previousCommand="",this.start=new o.Point(0,0),this.control=new o.Point(0,0),this.current=new o.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new o.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new o.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var i=new o.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var n=e.getAsCurrentPoint();for(e.addMarker(n),i.addPoint(n.x,n.y),null!=t&&t.moveTo(n.x,n.y),e.start=e.current;!e.isCommandOrEnd();){var n=e.getAsCurrentPoint();e.addMarker(n,e.start),i.addPoint(n.x,n.y),null!=t&&t.lineTo(n.x,n.y)}break;case"L":case"l":for(;!e.isCommandOrEnd();){var s=e.current,n=e.getAsCurrentPoint();e.addMarker(n,s),i.addPoint(n.x,n.y),null!=t&&t.lineTo(n.x,n.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var r=new o.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(r,e.current),e.current=r,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();){var r=new o.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar());e.addMarker(r,e.current),e.current=r,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"C":case"c":for(;!e.isCommandOrEnd();){var a=e.current,c=e.getPoint(),h=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,h,c),i.addBezierCurve(a.x,a.y,c.x,c.y,h.x,h.y,l.x,l.y),null!=t&&t.bezierCurveTo(c.x,c.y,h.x,h.y,l.x,l.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();){var a=e.current,c=e.getReflectedControlPoint(),h=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,h,c),i.addBezierCurve(a.x,a.y,c.x,c.y,h.x,h.y,l.x,l.y),null!=t&&t.bezierCurveTo(c.x,c.y,h.x,h.y,l.x,l.y)}break;case"Q":case"q":for(;!e.isCommandOrEnd();){var a=e.current,h=e.getAsControlPoint(),l=e.getAsCurrentPoint();e.addMarker(l,h,h),i.addQuadraticCurve(a.x,a.y,h.x,h.y,l.x,l.y),null!=t&&t.quadraticCurveTo(h.x,h.y,l.x,l.y)}break;case"T":case"t":for(;!e.isCommandOrEnd();){var a=e.current,h=e.getReflectedControlPoint();e.control=h;var l=e.getAsCurrentPoint();e.addMarker(l,h,h),i.addQuadraticCurve(a.x,a.y,h.x,h.y,l.x,l.y),null!=t&&t.quadraticCurveTo(h.x,h.y,l.x,l.y)}break;case"A":case"a":for(;!e.isCommandOrEnd();){var a=e.current,u=e.getScalar(),d=e.getScalar(),p=e.getScalar()*(Math.PI/180),f=e.getScalar(),g=e.getScalar(),l=e.getAsCurrentPoint(),m=new o.Point(Math.cos(p)*(a.x-l.x)/2+Math.sin(p)*(a.y-l.y)/2,-Math.sin(p)*(a.x-l.x)/2+Math.cos(p)*(a.y-l.y)/2),v=Math.pow(m.x,2)/Math.pow(u,2)+Math.pow(m.y,2)/Math.pow(d,2);v>1&&(u*=Math.sqrt(v),d*=Math.sqrt(v));var y=(f==g?-1:1)*Math.sqrt((Math.pow(u,2)*Math.pow(d,2)-Math.pow(u,2)*Math.pow(m.y,2)-Math.pow(d,2)*Math.pow(m.x,2))/(Math.pow(u,2)*Math.pow(m.y,2)+Math.pow(d,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var w=new o.Point(y*u*m.y/d,y*-d*m.x/u),x=new o.Point((a.x+l.x)/2+Math.cos(p)*w.x-Math.sin(p)*w.y,(a.y+l.y)/2+Math.sin(p)*w.x+Math.cos(p)*w.y),b=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(b(t)*b(e))},C=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},M=C([1,0],[(m.x-w.x)/u,(m.y-w.y)/d]),P=[(m.x-w.x)/u,(m.y-w.y)/d],S=[(-m.x-w.x)/u,(-m.y-w.y)/d],E=C(P,S);_(P,S)<=-1&&(E=Math.PI),_(P,S)>=1&&(E=0);var k=1-g?1:-1,D=M+k*(E/2),A=new o.Point(x.x+u*Math.cos(D),x.y+d*Math.sin(D));if(e.addMarkerAngle(A,D-k*Math.PI/2),e.addMarkerAngle(l,D-k*Math.PI),i.addPoint(l.x,l.y),null!=t){var _=u>d?u:d,T=u>d?1:u/d,z=u>d?d/u:1;t.translate(x.x,x.y),t.rotate(p),t.scale(T,z),t.arc(0,0,_,M,M+E,1-g),t.scale(1/T,1/z),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),e.current=e.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],e[n]]);return i}},o.Element.path.prototype=new o.Element.PathElementBase,o.Element.pattern=function(t){this.base=o.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var i=this.attribute("width").toPixels("x",!0),n=this.attribute("height").toPixels("y",!0),s=new o.Element.svg;s.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),s.attributes.width=new o.Property("width",i+"px"),s.attributes.height=new o.Property("height",n+"px"),s.attributes.transform=new o.Property("transform",this.attribute("patternTransform").value),s.children=this.children;var r=document.createElement("canvas");r.width=i,r.height=n;var a=r.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&a.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var c=-1;c<=1;c++)for(var h=-1;h<=1;h++)a.save(),s.attributes.x=new o.Property("x",c*r.width),s.attributes.y=new o.Property("y",h*r.height),s.render(a),a.restore();var l=t.createPattern(r,"repeat");return l}},o.Element.pattern.prototype=new o.Element.ElementBase,o.Element.marker=function(t){this.base=o.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,i){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var n=new o.Element.svg;n.attributes.viewBox=new o.Property("viewBox",this.attribute("viewBox").value),n.attributes.refX=new o.Property("refX",this.attribute("refX").value),n.attributes.refY=new o.Property("refY",this.attribute("refY").value),n.attributes.width=new o.Property("width",this.attribute("markerWidth").value),n.attributes.height=new o.Property("height",this.attribute("markerHeight").value),n.attributes.fill=new o.Property("fill",this.attribute("fill").valueOrDefault("black")),n.attributes.stroke=new o.Property("stroke",this.attribute("stroke").valueOrDefault("none")),n.children=this.children,n.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-e.x,-e.y)}},o.Element.marker.prototype=new o.Element.ElementBase,o.Element.defs=function(t){this.base=o.Element.ElementBase,this.base(t),this.render=function(t){}},o.Element.defs.prototype=new o.Element.ElementBase,o.Element.GradientBase=function(t){this.base=o.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var i=this.attributesToInherit[e];!this.attribute(i).hasValue()&&t.attribute(i).hasValue()&&(this.attribute(i,!0).value=t.attribute(i).value)}},this.createGradient=function(t,e,i){var n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));var s=function(t){if(i.hasValue()){var e=new o.Property("color",t);return e.addOpacity(i).value}return t},r=this.getGradient(t,e);if(null==r)return s(n.stops[n.stops.length-1].color);for(var a=0;a<n.stops.length;a++)r.addColorStop(n.stops[a].offset,s(n.stops[a].color));if(this.attribute("gradientTransform").hasValue()){var c=o.ViewPort.viewPorts[0],h=new o.Element.rect;h.attributes.x=new o.Property("x",-o.MAX_VIRTUAL_PIXELS/3),h.attributes.y=new o.Property("y",-o.MAX_VIRTUAL_PIXELS/3),h.attributes.width=new o.Property("width",o.MAX_VIRTUAL_PIXELS),h.attributes.height=new o.Property("height",o.MAX_VIRTUAL_PIXELS);var l=new o.Element.g;l.attributes.transform=new o.Property("transform",this.attribute("gradientTransform").value),l.children=[h];var u=new o.Element.svg;u.attributes.x=new o.Property("x",0),u.attributes.y=new o.Property("y",0),u.attributes.width=new o.Property("width",c.width),u.attributes.height=new o.Property("height",c.height),u.children=[l];var d=document.createElement("canvas");d.width=c.width,d.height=c.height;var p=d.getContext("2d");return p.fillStyle=r,u.render(p),p.createPattern(d,"no-repeat")}return r}},o.Element.GradientBase.prototype=new o.Element.ElementBase,o.Element.linearGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var i="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var n="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),s="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),r="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return n==r&&s==o?null:t.createLinearGradient(n,s,r,o)}},o.Element.linearGradient.prototype=new o.Element.GradientBase,o.Element.radialGradient=function(t){this.base=o.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var n="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),s="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),r=n,o=s;this.attribute("fx").hasValue()&&(r="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var a="objectBoundingBox"==this.gradientUnits()?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(r,o,0,n,s,a)}},o.Element.radialGradient.prototype=new o.Element.GradientBase,o.Element.stop=function(t){this.base=o.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},o.Element.stop.prototype=new o.Element.ElementBase,o.Element.AnimateBase=function(t){this.base=o.Element.ElementBase,this.base(t),o.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var i=this.calcValue();if(this.attribute("type").hasValue()){var n=this.attribute("type").value;i=n+"("+i+")"}this.getProperty().value=i,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),i=Math.floor(e),n=Math.ceil(e);t.from=new o.Property("from",parseFloat(this.values.value[i])),t.to=new o.Property("to",parseFloat(this.values.value[n])),t.progress=(e-i)/(n-i)}else t.from=this.from,t.to=this.to;return t}},o.Element.AnimateBase.prototype=new o.Element.ElementBase,o.Element.animate=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},o.Element.animate.prototype=new o.Element.AnimateBase,o.Element.animateColor=function(e){this.base=o.Element.AnimateBase,this.base(e),this.calcValue=function(){var e=this.progress(),i=new t(e.from.value),n=new t(e.to.value);if(i.ok&&n.ok){var s=i.r+(n.r-i.r)*e.progress,r=i.g+(n.g-i.g)*e.progress,o=i.b+(n.b-i.b)*e.progress;return"rgb("+parseInt(s,10)+","+parseInt(r,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},o.Element.animateColor.prototype=new o.Element.AnimateBase,o.Element.animateTransform=function(t){this.base=o.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=o.ToNumberArray(t.from.value),i=o.ToNumberArray(t.to.value),n="",s=0;s<e.length;s++)n+=e[s]+(i[s]-e[s])*t.progress+" ";return n}},o.Element.animateTransform.prototype=new o.Element.animate,o.Element.font=function(t){this.base=o.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(o.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},o.Element.font.prototype=new o.Element.ElementBase,o.Element.fontface=function(t){this.base=o.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},o.Element.fontface.prototype=new o.Element.ElementBase,o.Element.missingglyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=0},o.Element.missingglyph.prototype=new o.Element.path,o.Element.glyph=function(t){this.base=o.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},o.Element.glyph.prototype=new o.Element.path,o.Element.text=function(t){this.captureTextNodes=!0,this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize);return new o.BoundingBox(t,e-i,t+Math.floor(2*i/3)*this.children[0].getText().length,e)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,i){var n=this.style("text-anchor").valueOrDefault("start");if("start"!=n){for(var s=0,r=i;r<e.children.length;r++){var o=e.children[r];if(r>i&&o.attribute("x").hasValue())break;s+=o.measureTextRecursive(t)}return-1*("end"==n?s:s/2)}return 0},this.renderChild=function(t,e,i,n){var s=i.children[n];s.attribute("x").hasValue()?(s.x=s.attribute("x").toPixels("x")+e.getAnchorDelta(t,i,n),s.attribute("dx").hasValue()&&(s.x+=s.attribute("dx").toPixels("x"))):(s.attribute("dx").hasValue()&&(e.x+=s.attribute("dx").toPixels("x")),s.x=e.x),e.x=s.x+s.measureText(t),s.attribute("y").hasValue()?(s.y=s.attribute("y").toPixels("y"),s.attribute("dy").hasValue()&&(s.y+=s.attribute("dy").toPixels("y"))):(s.attribute("dy").hasValue()&&(e.y+=s.attribute("dy").toPixels("y")),s.y=e.y),e.y=s.y,s.render(t);for(var n=0;n<s.children.length;n++)e.renderChild(t,e,s,n)}},o.Element.text.prototype=new o.Element.RenderedElementBase,o.Element.TextElementBase=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,i){var n=e[i],s=null;if(t.isArabic){var r="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(r="terminal"),i>0&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(r="medial"),i>0&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(r="initial"),"undefined"!=typeof t.glyphs[n]&&(s=t.glyphs[n][r],null==s&&"glyph"==t.glyphs[n].type&&(s=t.glyphs[n]))}else s=t.glyphs[n];return null==s&&(s=t.missingGlyph),s},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)""!=t.fillStyle&&t.fillText(o.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(o.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),n=this.parent.style("font-style").valueOrDefault(o.Font.Parse(o.ctx.font).fontStyle),s=this.getText();e.isRTL&&(s=s.split("").reverse().join(""));for(var r=o.ToNumberArray(this.parent.attribute("dx").value),a=0;a<s.length;a++){var c=this.getGlyph(e,s,a),h=i/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(h,-h);var l=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/i,"italic"==n&&t.transform(1,0,.4,1,0,0),c.render(t),"italic"==n&&t.transform(1,0,-.4,1,0,0),t.lineWidth=l,t.scale(1/h,-1/h),t.translate(-this.x,-this.y),this.x+=i*(c.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,"undefined"==typeof r[a]||isNaN(r[a])||(this.x+=r[a])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var i=this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize),n=0,s=this.getText();e.isRTL&&(s=s.split("").reverse().join(""));for(var r=o.ToNumberArray(this.parent.attribute("dx").value),a=0;a<s.length;a++){var c=this.getGlyph(e,s,a);n+=(c.horizAdvX||e.horizAdvX)*i/e.fontFace.unitsPerEm,"undefined"==typeof r[a]||isNaN(r[a])||(n+=r[a])}return n}var h=o.compressSpaces(this.getText());if(!t.measureText)return 10*h.length;t.save(),this.setContext(t);var l=t.measureText(h).width;return t.restore(),l}},o.Element.TextElementBase.prototype=new o.Element.RenderedElementBase,o.Element.tspan=function(t){this.captureTextNodes=!0,this.base=o.Element.TextElementBase,this.base(t),this.text=o.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},o.Element.tspan.prototype=new o.Element.TextElementBase,o.Element.tref=function(t){this.base=o.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},o.Element.tref.prototype=new o.Element.TextElementBase,o.Element.a=function(t){this.base=o.Element.TextElementBase,this.base(t),this.hasText=t.childNodes.length>0;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);o.Mouse.checkBoundingBox(this,new o.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(this.children.length>0){var i=new o.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){o.ctx.canvas.style.cursor="pointer"}},o.Element.a.prototype=new o.Element.TextElementBase,o.Element.image=function(t){this.base=o.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var i=e.match(/\.svg$/);if(o.Images.push(this),this.loaded=!1,i)this.img=o.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==o.opts.useCORS&&(this.img.crossOrigin="Anonymous");var n=this;this.img.onload=function(){n.loaded=!0},this.img.onerror=function(){o.log('ERROR: image "'+e+'" not found'),n.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),s=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");0!=s&&0!=r&&(t.save(),i?t.drawSvg(this.img,e,n,s,r):(t.translate(e,n),o.AspectRatio(t,this.attribute("preserveAspectRatio").value,s,this.img.width,r,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");return new o.BoundingBox(t,e,t+i,e+n)}}},o.Element.image.prototype=new o.Element.RenderedElementBase,o.Element.g=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new o.BoundingBox,e=0;e<this.children.length;e++)t.addBoundingBox(this.children[e].getBoundingBox());return t}},o.Element.g.prototype=new o.Element.RenderedElementBase,o.Element.symbol=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.render=function(t){}},o.Element.symbol.prototype=new o.Element.RenderedElementBase,o.Element.style=function(t){this.base=o.Element.ElementBase,this.base(t);for(var e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),e=o.compressSpaces(e);for(var s=e.split("}"),i=0;i<s.length;i++)if(""!=o.trim(s[i]))for(var r=s[i].split("{"),a=r[0].split(","),c=r[1].split(";"),h=0;h<a.length;h++){var l=o.trim(a[h]);if(""!=l){for(var u=o.Styles[l]||{},d=0;d<c.length;d++){var p=c[d].indexOf(":"),f=c[d].substr(0,p),g=c[d].substr(p+1,c[d].length-p);null!=f&&null!=g&&(u[o.trim(f)]=new o.Property(o.trim(f),o.trim(g)))}if(o.Styles[l]=u,o.StylesSpecificity[l]=n(l),"@font-face"==l)for(var m=u["font-family"].value.replace(/"/g,""),v=u.src.value.split(","),y=0;y<v.length;y++)if(v[y].indexOf('format("svg")')>0)for(var w=v[y].indexOf("url"),x=v[y].indexOf(")",w),b=v[y].substr(w+5,x-w-6),_=o.parseXml(o.ajax(b)),C=_.getElementsByTagName("font"),M=0;M<C.length;M++){var P=o.CreateElement(C[M]);o.Definitions[m]=P}}}},o.Element.style.prototype=new o.Element.ElementBase,o.Element.use=function(t){this.base=o.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var e=this.getHrefAttribute().getDefinition();this.path=function(t){null!=e&&e.path(t)},this.getBoundingBox=function(){if(null!=e)return e.getBoundingBox()},this.renderChildren=function(t){if(null!=e){var i=e;"symbol"==e.type&&(i=new o.Element.svg,i.type="svg",i.attributes.viewBox=new o.Property("viewBox",e.attribute("viewBox").value),i.attributes.preserveAspectRatio=new o.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),i.attributes.overflow=new o.Property("overflow",e.attribute("overflow").value),i.children=e.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new o.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new o.Property("height",this.attribute("height").value)));var n=i.parent;i.parent=null,i.render(t),i.parent=n}}},o.Element.use.prototype=new o.Element.RenderedElementBase,o.Element.mask=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),s=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");if(0==s&&0==r){for(var a=new o.BoundingBox,c=0;c<this.children.length;c++)a.addBoundingBox(this.children[c].getBoundingBox());var i=Math.floor(a.x1),n=Math.floor(a.y1),s=Math.floor(a.width()),r=Math.floor(a.height())}var h=e.attribute("mask").value;e.attribute("mask").value="";var l=document.createElement("canvas");l.width=i+s,l.height=n+r;var u=l.getContext("2d");this.renderChildren(u);var d=document.createElement("canvas");d.width=i+s,d.height=n+r;var p=d.getContext("2d");e.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=u.createPattern(l,"no-repeat"),p.fillRect(0,0,i+s,n+r),t.fillStyle=p.createPattern(d,"no-repeat"),t.fillRect(0,0,i+s,n+r),e.attribute("mask").value=h},this.render=function(t){}},o.Element.mask.prototype=new o.Element.ElementBase,o.Element.clipPath=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t){var e=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},e.call(t);for(var n=0;n<this.children.length;n++){var s=this.children[n];if("undefined"!=typeof s.path){var r=null;s.style("transform",!1,!0).hasValue()&&(r=new o.Transform(s.style("transform",!1,!0).value),r.apply(t)),s.path(t),CanvasRenderingContext2D.prototype.closePath=i,r&&r.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=e,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(t){}},o.Element.clipPath.prototype=new o.Element.ElementBase,o.Element.filter=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=e.getBoundingBox(),n=Math.floor(i.x1),s=Math.floor(i.y1),r=Math.floor(i.width()),o=Math.floor(i.height()),a=e.style("filter").value;e.style("filter").value="";for(var c=0,h=0,l=0;l<this.children.length;l++){var u=this.children[l].extraFilterDistance||0;c=Math.max(c,u),h=Math.max(h,u)}var d=document.createElement("canvas");d.width=r+2*c,d.height=o+2*h;var p=d.getContext("2d");p.translate(-n+c,-s+h),e.render(p);for(var l=0;l<this.children.length;l++)"function"==typeof this.children[l].apply&&this.children[l].apply(p,0,0,r+2*c,o+2*h);t.drawImage(d,0,0,r+2*c,o+2*h,n-c,s-h,r+2*c,o+2*h),e.style("filter",!0).value=a},this.render=function(t){}},o.Element.filter.prototype=new o.Element.ElementBase,o.Element.feMorphology=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,i,n,s){}},o.Element.feMorphology.prototype=new o.Element.ElementBase,o.Element.feComposite=function(t){this.base=o.Element.ElementBase,this.base(t),this.apply=function(t,e,i,n,s){}},o.Element.feComposite.prototype=new o.Element.ElementBase,o.Element.feColorMatrix=function(t){function e(t,e,i,n,s,r){return t[i*n*4+4*e+r]}function i(t,e,i,n,s,r,o){t[i*n*4+4*e+r]=o}function n(t,e){var i=s[t];return i*(i<0?e-255:e)}this.base=o.Element.ElementBase,this.base(t);var s=o.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var r=s[0];s=[.213+.787*r,.715-.715*r,.072-.072*r,0,0,.213-.213*r,.715+.285*r,.072-.072*r,0,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var a=s[0]*Math.PI/180,c=function(t,e,i){return t+Math.cos(a)*e+Math.sin(a)*i};s=[c(.213,.787,-.213),c(.715,-.715,-.715),c(.072,-.072,.928),0,0,c(.213,-.213,.143),c(.715,.285,.14),c(.072,-.072,-.283),0,0,c(.213,-.213,-.787),c(.715,-.715,.715),c(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,s,r,o,a){for(var c=t.getImageData(0,0,o,a),r=0;r<a;r++)for(var s=0;s<o;s++){var h=e(c.data,s,r,o,a,0),l=e(c.data,s,r,o,a,1),u=e(c.data,s,r,o,a,2),d=e(c.data,s,r,o,a,3);i(c.data,s,r,o,a,0,n(0,h)+n(1,l)+n(2,u)+n(3,d)+n(4,1)),i(c.data,s,r,o,a,1,n(5,h)+n(6,l)+n(7,u)+n(8,d)+n(9,1)),i(c.data,s,r,o,a,2,n(10,h)+n(11,l)+n(12,u)+n(13,d)+n(14,1)),i(c.data,s,r,o,a,3,n(15,h)+n(16,l)+n(17,u)+n(18,d)+n(19,1))}t.clearRect(0,0,o,a),t.putImageData(c,0,0)}},o.Element.feColorMatrix.prototype=new o.Element.ElementBase,o.Element.feGaussianBlur=function(t){this.base=o.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,i,n,s,r){return"undefined"==typeof e.canvasRGBA?void o.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=o.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),
e.canvasRGBA(t.canvas.id,i,n,s,r,this.blurRadius),void document.body.removeChild(t.canvas))}},o.Element.feGaussianBlur.prototype=new o.Element.ElementBase,o.Element.title=function(t){},o.Element.title.prototype=new o.Element.ElementBase,o.Element.desc=function(t){},o.Element.desc.prototype=new o.Element.ElementBase,o.Element.MISSING=function(t){o.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},o.Element.MISSING.prototype=new o.Element.ElementBase,o.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var i=null;return i="undefined"!=typeof o.Element[e]?new o.Element[e](t):new o.Element.MISSING(t),i.type=t.nodeName,i},o.load=function(t,e){o.loadXml(t,o.ajax(e))},o.loadXml=function(t,e){o.loadXmlDoc(t,o.parseXml(e))},o.loadXmlDoc=function(t,e){o.init(t);var i=function(e){for(var i=t.canvas;i;)e.x-=i.offsetLeft,e.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=o.opts.ignoreMouse&&(t.canvas.onclick=function(t){var e=i(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onclick(e.x,e.y)},t.canvas.onmousemove=function(t){var e=i(new o.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));o.Mouse.onmousemove(e.x,e.y)});var n=o.CreateElement(e.documentElement);n.root=!0,n.addStylesFromStyleDefinition();var s=!0,r=function(){o.ViewPort.Clear(),t.canvas.parentNode&&o.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=o.opts.ignoreDimensions&&(n.style("width").hasValue()&&(t.canvas.width=n.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),n.style("height").hasValue()&&(t.canvas.height=n.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,r=t.canvas.clientHeight||t.canvas.height;if(1==o.opts.ignoreDimensions&&n.style("width").hasValue()&&n.style("height").hasValue()&&(i=n.style("width").toPixels("x"),r=n.style("height").toPixels("y")),o.ViewPort.SetCurrent(i,r),null!=o.opts.offsetX&&(n.attribute("x",!0).value=o.opts.offsetX),null!=o.opts.offsetY&&(n.attribute("y",!0).value=o.opts.offsetY),null!=o.opts.scaleWidth||null!=o.opts.scaleHeight){var a=null,c=null,h=o.ToNumberArray(n.attribute("viewBox").value);null!=o.opts.scaleWidth&&(n.attribute("width").hasValue()?a=n.attribute("width").toPixels("x")/o.opts.scaleWidth:isNaN(h[2])||(a=h[2]/o.opts.scaleWidth)),null!=o.opts.scaleHeight&&(n.attribute("height").hasValue()?c=n.attribute("height").toPixels("y")/o.opts.scaleHeight:isNaN(h[3])||(c=h[3]/o.opts.scaleHeight)),null==a&&(a=c),null==c&&(c=a),n.attribute("width",!0).value=o.opts.scaleWidth,n.attribute("height",!0).value=o.opts.scaleHeight,n.style("transform",!0,!0).value+=" scale("+1/a+","+1/c+")"}1!=o.opts.ignoreClear&&t.clearRect(0,0,i,r),n.render(t),s&&(s=!1,"function"==typeof o.opts.renderCallback&&o.opts.renderCallback(e))},a=!0;o.ImagesLoaded()&&(a=!1,r()),o.intervalID=setInterval(function(){var t=!1;if(a&&o.ImagesLoaded()&&(a=!1,t=!0),1!=o.opts.ignoreMouse&&(t|=o.Mouse.hasEvents()),1!=o.opts.ignoreAnimation)for(var e=0;e<o.Animations.length;e++)t|=o.Animations[e].update(1e3/o.FRAMERATE);"function"==typeof o.opts.forceRedraw&&1==o.opts.forceRedraw()&&(t=!0),t&&(r(),o.Mouse.runEvents()),(o.opts.ignoreAnimation===!0||s===!1&&a===!1)&&o.stop()},1e3/o.FRAMERATE)},o.stop=function(){o.intervalID&&clearInterval(o.intervalID)},o.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInPath&&e.isPointInPath(n.x,n.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInBox(n.x,n.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){o.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],i=this.eventElements[t];i;)e.run(i),i=i.parent;this.events=[],this.eventElements=[]}},o}var r,o=function(t,e,i){if(null!=t||null!=e||null!=i){"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop();var n=s(i||{});1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=n);var r=t.getContext("2d");"undefined"!=typeof e.documentElement?n.loadXmlDoc(r,e):"<"==e.substr(0,1)?n.loadXml(r,e):n.load(r,e)}else for(var a=document.querySelectorAll("svg"),c=0;c<a.length;c++){var h=a[c],l=document.createElement("canvas");l.width=h.clientWidth,l.height=h.clientHeight,h.parentNode.insertBefore(l,h),h.parentNode.removeChild(h);var u=document.createElement("div");u.appendChild(h),o(l,u.innerHTML)}};"undefined"!=typeof Element.prototype.matches?r=function(t,e){return t.matches(e)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?r=function(t,e){return t.webkitMatchesSelector(e)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?r=function(t,e){return t.mozMatchesSelector(e)}:"undefined"!=typeof Element.prototype.msMatchesSelector?r=function(t,e){return t.msMatchesSelector(e)}:"undefined"!=typeof Element.prototype.oMatchesSelector?r=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(r=function(t,e){return $(t).is(e)}),"undefined"==typeof r&&(r=Sizzle.matchesSelector));var a=/(\[[^\]]+\])/g,c=/(#[^\s\+>~\.\[:]+)/g,h=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:[\w-]+\([^\)]*\))/gi,d=/(:[^\s\+>~\.\[:]+)/g,p=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,n,s,r){var a={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:n,scaleHeight:s};for(var c in r)r.hasOwnProperty(c)&&(a[c]=r[c]);o(this.canvas,t,a)}),o}),function(){var t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){function i(){!initializing&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;initializing=!0;var s=new this;initializing=!1;for(var r in e)s[r]="function"==typeof e[r]&&"function"==typeof n[r]&&t.test(e[r])?function(t,e){return function(){var i=this._super;this._super=n[t];var s=e.apply(this,arguments);return this._super=i,s}}(r,e[r]):e[r];return i.prototype=s,i.prototype.constructor=i,i.extend=arguments.callee,i.inject=function(e){var i=this.prototype,n={};for(var s in e)"function"==typeof e[s]&&"function"==typeof i[s]&&t.test(e[s])?(n[s]=i[s],i[s]=function(t,e){return function(){var i=this.parent;this.parent=n[t];var s=e.apply(this,arguments);return this.parent=i,s}}(s,e[s])):i[s]=e[s]},i}}();var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,r,o,a=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(r=c.length,i=0;i<r;i+=1)o[i]=str(i,c)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,c),s&&o.push(quote(n)+(gap?": ":":")+s));else for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(s=str(n,c),s&&o.push(quote(n)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var PF=function(){var t=function(e,i){var n=t.resolve(e,i||"/"),s=t.modules[n];if(!s)throw new Error("Failed to resolve module "+e+", tried "+n);var r=s._cached?s._cached:s();return r};return t.paths=[],t.modules={},t.extensions=[".js",".coffee"],t._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},t.resolve=function(){return function(e,i){function n(e){if(t.modules[e])return e;for(var i=0;i<t.extensions.length;i++){var n=t.extensions[i];if(t.modules[e+n])return e+n}}function s(e){e=e.replace(/\/+$/,"");var i=e+"/package.json";if(t.modules[i]){var s=t.modules[i](),r=s.browserify;if("object"==typeof r&&r.main){var o=n(a.resolve(e,r.main));if(o)return o}else if("string"==typeof r){var o=n(a.resolve(e,r));if(o)return o}else if(s.main){var o=n(a.resolve(e,s.main));if(o)return o}}return n(e+"/index")}function r(t,e){for(var i=o(e),r=0;r<i.length;r++){var a=i[r],c=n(a+"/"+t);if(c)return c;var h=s(a+"/"+t);if(h)return h}var c=n(t);if(c)return c}function o(t){var e;e="/"===t?[""]:a.normalize(t).split("/");for(var i=[],n=e.length-1;n>=0;n--)if("node_modules"!==e[n]){var s=e.slice(0,n+1).join("/")+"/node_modules";i.push(s)}return i}if(i||(i="/"),t._core[e])return e;var a=t.modules.path();i=a.resolve("/",i);var c=i||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var h=n(a.resolve(c,e))||s(a.resolve(c,e));if(h)return h}var l=r(e,c);if(l)return l;throw new Error("Cannot find module '"+e+"'")}}(),t.alias=function(e,i){var n=t.modules.path(),s=null;try{s=t.resolve(e+"/package.json","/")}catch(i){s=t.resolve(e,"/")}for(var r=n.dirname(s),o=(Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e})(t.modules),a=0;a<o.length;a++){var c=o[a];if(c.slice(0,r.length+1)===r+"/"){var h=c.slice(r.length);t.modules[i+h]=t.modules[r+h]}else c===r&&(t.modules[i]=t.modules[r])}},t.define=function(e,i){var n=t._core[e]?"":t.modules.path().dirname(e),s=function(e){return t(e,n)};s.resolve=function(e){return t.resolve(e,n)},s.modules=t.modules,s.define=t.define;var r={exports:{}};t.modules[e]=function(){return t.modules[e]._cached=r.exports,i.call(r.exports,s,r,r.exports,n,e),t.modules[e]._cached=r.exports,r.exports}},"undefined"==typeof process&&(process={}),process.nextTick||(process.nextTick=function(){var t=[],e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;return e&&window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),t.length>0)){var i=t.shift();i()}},!0),function(i){e?(t.push(i),window.postMessage("browserify-tick","*")):setTimeout(i,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(e){if("evals"===e)return t("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),process.env||(process.env={}),process.argv||(process.argv=[]),t.define("path",function(t,e,i,n,s){function r(t,e){for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}function o(t,e){for(var i=0,n=t.length;n>=0;n--){var s=t[n];"."==s?t.splice(n,1):".."===s?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var a=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;i.resolve=function(){for(var t="",e=!1,i=arguments.length;i>=-1&&!e;i--){var n=i>=0?arguments[i]:process.cwd();"string"==typeof n&&n&&(t=n+"/"+t,e="/"===n.charAt(0))}return t=o(r(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},i.normalize=function(t){var e="/"===t.charAt(0),i="/"===t.slice(-1);return t=o(r(t.split("/"),function(t){return!!t}),!e).join("/"),!t&&!e&&(t="."),t&&i&&(t+="/"),(e?"/":"")+t},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(r(t,function(t,e){return t&&"string"==typeof t}).join("/"))},i.dirname=function(t){var e=a.exec(t)[1]||"",i=!1;return e?1===e.length||i&&e.length<=3&&":"===e.charAt(1)?e:e.substring(0,e.length-1):"."},i.basename=function(t,e){var i=a.exec(t)[2]||"";return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return a.exec(t)[3]||""}}),t.define("/core/Node.js",function(t,e,i,n,s){function r(t,e,i){this.x=t,this.y=e,this.walkable=void 0===i||i}e.exports=r}),t.define("/core/Grid.js",function(t,e,i,n,s){function r(t,e,i){this.width=t,this.height=e,this.nodes=this._buildNodes(t,e,i)}var o=t("./Node");r.prototype._buildNodes=function(t,e,i){var n,s,r=new Array(e);for(n=0;n<e;++n)for(r[n]=new Array(t),s=0;s<t;++s)r[n][s]=new o(s,n);if(void 0===i)return r;if(i.length!==e||i[0].length!==t)throw new Error("Matrix size does not fit");for(n=0;n<e;++n)for(s=0;s<t;++s)i[n][s]&&(r[n][s].walkable=!1);return r},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},r.prototype.getNeighbors=function(t,e,i){var n=t.x,s=t.y,r=[],o=!1,a=!1,c=!1,h=!1,l=!1,u=!1,d=!1,p=!1,f=this.nodes;return this.isWalkableAt(n,s-1)&&(r.push(f[s-1][n]),o=!0),this.isWalkableAt(n+1,s)&&(r.push(f[s][n+1]),c=!0),this.isWalkableAt(n,s+1)&&(r.push(f[s+1][n]),l=!0),this.isWalkableAt(n-1,s)&&(r.push(f[s][n-1]),d=!0),e?(i?(a=d&&o,h=o&&c,u=c&&l,p=l&&d):(a=d||o,h=o||c,u=c||l,p=l||d),a&&this.isWalkableAt(n-1,s-1)&&r.push(f[s-1][n-1]),h&&this.isWalkableAt(n+1,s-1)&&r.push(f[s-1][n+1]),u&&this.isWalkableAt(n+1,s+1)&&r.push(f[s+1][n+1]),p&&this.isWalkableAt(n-1,s+1)&&r.push(f[s+1][n-1]),r):r},r.prototype.clone=function(){var t,e,i=this.width,n=this.height,s=this.nodes,a=new r(i,n),c=new Array(n);for(t=0;t<n;++t)for(c[t]=new Array(i),e=0;e<i;++e)c[t][e]=new o(e,t,s[t][e].walkable);return a.nodes=c,a},e.exports=r}),t.define("/core/Heap.js",function(t,e,i,n,s){(function(){var t,i,n,s,r,o,a,c,h,l,u,d,p,f,g;n=Math.floor,l=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},h=function(t,e,s,r,o){var a;if(null==s&&(s=0),null==o&&(o=i),s<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);o(s,r)<0;)a=n((s+r)/2),o(e,t[a])<0?r=a:s=a+1;return[].splice.apply(t,[s,s-s].concat(e)),e},o=function(t,e,n){return null==n&&(n=i),t.push(e),f(t,0,t.length-1,n)},r=function(t,e){var n,s;return null==e&&(e=i),n=t.pop(),t.length?(s=t[0],t[0]=n,g(t,0,e)):s=n,s},c=function(t,e,n){var s;return null==n&&(n=i),s=t[0],t[0]=e,g(t,0,n),s},a=function(t,e,n){var s;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(s=[t[0],e],e=s[0],t[0]=s[1],g(t,0,n)),e},s=function(t,e){var s,r,o,a,c,h;for(null==e&&(e=i),a=function(){h=[];for(var e=0,i=n(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)h.push(e);return h}.apply(this).reverse(),c=[],r=0,o=a.length;r<o;r++)s=a[r],c.push(g(t,s,e));return c},p=function(t,e,n){var s;return null==n&&(n=i),s=t.indexOf(e),f(t,0,s,n),g(t,s,n)},u=function(t,e,n){var r,o,c,h,l;if(null==n&&(n=i),o=t.slice(0,e),!o.length)return o;for(s(o,n),l=t.slice(e),c=0,h=l.length;c<h;c++)r=l[c],a(o,r,n);return o.sort(n).reverse()},d=function(t,e,n){var o,a,c,u,d,p,f,g,m,v;if(null==n&&(n=i),10*e<=t.length){if(u=t.slice(0,e).sort(n),!u.length)return u;for(c=u[u.length-1],g=t.slice(e),d=0,f=g.length;d<f;d++)o=g[d],n(o,c)<0&&(h(u,o,0,null,n),u.pop(),c=u[u.length-1]);return u}for(s(t,n),v=[],a=p=0,m=l(e,t.length);0<=m?p<m:p>m;a=0<=m?++p:--p)v.push(r(t,n));return v},f=function(t,e,n,s){var r,o,a;for(null==s&&(s=i),r=t[n];n>e;){a=n-1>>1,o=t[a];{if(!(s(r,o)<0))break;t[n]=o,n=a}}return t[n]=r},g=function(t,e,n){var s,r,o,a,c;for(null==n&&(n=i),r=t.length,c=e,o=t[e],s=2*e+1;s<r;)a=s+1,a<r&&!(n(t[s],t[a])<0)&&(s=a),t[e]=t[s],e=s,s=2*e+1;return t[e]=o,f(t,c,e,n)},t=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.name="Heap",t.push=o,t.pop=r,t.replace=c,t.pushpop=a,t.heapify=s,t.nlargest=u,t.nsmallest=d,t.prototype.push=function(t){return o(this.nodes,t,this.cmp)},t.prototype.pop=function(){return r(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return s(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.remove=t.prototype.pop,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),("undefined"!=typeof e&&null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)}),t.define("/core/Util.js",function(t,e,i,n,s){function r(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function o(t,e){var i=r(t),n=r(e);return i.concat(n.reverse())}function a(t){var e,i,n,s,r,o=0;for(e=1;e<t.length;++e)i=t[e-1],n=t[e],s=i[0]-n[0],r=i[1]-n[1],o+=Math.sqrt(s*s+r*r);return o}function c(t,e,i,n){var s,r,o,a,c,h,l=Math.abs,u=[];for(o=l(i-t),a=l(n-e),s=t<i?1:-1,r=e<n?1:-1,c=o-a;u.push([t,e]),t!==i||e!==n;)h=2*c,h>-a&&(c-=a,t+=s),h<o&&(c+=o,e+=r);return u}function h(t,e){var i,n,s,r,o,a,h,l,u,d,p,f,g,m=e.length,v=e[0][0],y=e[0][1],w=e[m-1][0],x=e[m-1][1];for(i=v,n=y,o=e[1][0],a=e[1][1],h=[[i,n]],l=2;l<m;++l){for(d=e[l],s=d[0],r=d[1],p=c(i,n,s,r),g=!1,u=1;u<p.length;++u)if(f=p[u],!t.isWalkableAt(f[0],f[1])){g=!0,h.push([o,a]),i=o,n=a;break}g||(o=s,a=r)}return h.push([w,x]),h}i.backtrace=r,i.biBacktrace=o,i.pathLength=a,i.getLine=c,i.smoothenPath=h}),t.define("/core/Heuristic.js",function(t,e,i,n,s){e.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},chebyshev:function(t,e){return Math.max(t,e)}}}),t.define("/finders/AStarFinder.js",function(t,e,i,n,s){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||c.manhattan}var o=t("../core/Heap"),a=t("../core/Util"),c=t("../core/Heuristic");r.prototype.findPath=function(t,e,i,n,s){var r,c,h,l,u,d,p,f,g=new o(function(t,e){return t.f-e.f}),m=s.getNodeAt(t,e),v=s.getNodeAt(i,n),y=this.heuristic,w=this.allowDiagonal,x=this.dontCrossCorners,b=Math.abs,_=Math.SQRT2;for(m.g=0,m.f=0,g.push(m),m.opened=!0;!g.empty();){if(r=g.pop(),r.closed=!0,r===v)return a.backtrace(v);for(c=s.getNeighbors(r,w,x),l=0,u=c.length;l<u;++l)h=c[l],h.closed||(d=h.x,p=h.y,f=r.g+(d-r.x===0||p-r.y===0?1:_),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||y(b(d-i),b(p-n)),h.f=h.g+h.h,h.parent=r,h.opened?g.updateItem(h):(g.push(h),h.opened=!0)))}return[]},e.exports=r}),t.define("/finders/BestFirstFinder.js",function(t,e,i,n,s){function r(t){o.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}var o=t("./AStarFinder");r.prototype=new o,r.prototype.constructor=r,e.exports=r}),t.define("/finders/BreadthFirstFinder.js",function(t,e,i,n,s){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners}var o=t("../core/Util");r.prototype.findPath=function(t,e,i,n,s){var r,a,c,h,l,u=[],d=this.allowDiagonal,p=this.dontCrossCorners,f=s.getNodeAt(t,e),g=s.getNodeAt(i,n);for(u.push(f),f.opened=!0;u.length;){if(c=u.shift(),c.closed=!0,c===g)return o.backtrace(g);for(r=s.getNeighbors(c,d,p),h=0,l=r.length;h<l;++h)a=r[h],a.closed||a.opened||(u.push(a),a.opened=!0,a.parent=c)}return[]},e.exports=r}),t.define("/finders/DijkstraFinder.js",function(t,e,i,n,s){function r(t){o.call(this,t),this.heuristic=function(t,e){return 0}}var o=t("./AStarFinder");r.prototype=new o,r.prototype.constructor=r,e.exports=r}),t.define("/finders/BiAStarFinder.js",function(t,e,i,n,s){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||c.manhattan}var o=t("../core/Heap"),a=t("../core/Util"),c=t("../core/Heuristic");r.prototype.findPath=function(t,e,i,n,s){var r,c,h,l,u,d,p,f,g=function(t,e){return t.f-e.f},m=new o(g),v=new o(g),y=s.getNodeAt(t,e),w=s.getNodeAt(i,n),x=this.heuristic,b=this.allowDiagonal,_=this.dontCrossCorners,C=Math.abs,M=Math.SQRT2,P=1,S=2;for(y.g=0,y.f=0,m.push(y),y.opened=P,w.g=0,w.f=0,v.push(w),w.opened=S;!m.empty()&&!v.empty();){for(r=m.pop(),r.closed=!0,c=s.getNeighbors(r,b,_),l=0,u=c.length;l<u;++l)if(h=c[l],!h.closed){if(h.opened===S)return a.biBacktrace(r,h);d=h.x,p=h.y,f=r.g+(d-r.x===0||p-r.y===0?1:M),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||x(C(d-i),C(p-n)),h.f=h.g+h.h,h.parent=r,h.opened?m.updateItem(h):(m.push(h),h.opened=P))}for(r=v.pop(),r.closed=!0,c=s.getNeighbors(r,b,_),l=0,u=c.length;l<u;++l)if(h=c[l],!h.closed){if(h.opened===P)return a.biBacktrace(h,r);d=h.x,p=h.y,f=r.g+(d-r.x===0||p-r.y===0?1:M),(!h.opened||f<h.g)&&(h.g=f,h.h=h.h||x(C(d-t),C(p-e)),h.f=h.g+h.h,h.parent=r,h.opened?v.updateItem(h):(v.push(h),h.opened=S))}}return[]},e.exports=r}),t.define("/finders/BiBestFirstFinder.js",function(t,e,i,n,s){function r(t){o.call(this,t);var e=this.heuristic;this.heuristic=function(t,i){return 1e6*e(t,i)}}var o=t("./BiAStarFinder");r.prototype=new o,r.prototype.constructor=r,e.exports=r}),t.define("/finders/BiBreadthFirstFinder.js",function(t,e,i,n,s){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners}var o=t("../core/Util");r.prototype.findPath=function(t,e,i,n,s){var r,a,c,h,l,u=s.getNodeAt(t,e),d=s.getNodeAt(i,n),p=[],f=[],g=this.allowDiagonal,m=this.dontCrossCorners,v=0,y=1;for(p.push(u),u.opened=!0,u.by=v,f.push(d),d.opened=!0,d.by=y;p.length&&f.length;){for(c=p.shift(),c.closed=!0,r=s.getNeighbors(c,g,m),h=0,l=r.length;h<l;++h)if(a=r[h],!a.closed)if(a.opened){if(a.by===y)return o.biBacktrace(c,a)}else p.push(a),a.parent=c,a.opened=!0,a.by=v;for(c=f.shift(),c.closed=!0,r=s.getNeighbors(c,g,m),h=0,l=r.length;h<l;++h)if(a=r[h],!a.closed)if(a.opened){if(a.by===v)return o.biBacktrace(a,c)}else f.push(a),a.parent=c,a.opened=!0,a.by=y}return[]},e.exports=r}),t.define("/finders/BiDijkstraFinder.js",function(t,e,i,n,s){function r(t){o.call(this,t),this.heuristic=function(t,e){return 0}}var o=t("./BiAStarFinder");r.prototype=new o,r.prototype.constructor=r,e.exports=r}),t.define("/finders/JumpPointFinder.js",function(t,e,i,n,s){function r(t){t=t||{},this.heuristic=t.heuristic||c.manhattan}var o=t("../core/Heap"),a=t("../core/Util"),c=t("../core/Heuristic");r.prototype.findPath=function(t,e,i,n,s){var r,c=this.openList=new o(function(t,e){return t.f-e.f}),h=this.startNode=s.getNodeAt(t,e),l=this.endNode=s.getNodeAt(i,n);for(this.grid=s,h.g=0,h.f=0,c.push(h),h.opened=!0;!c.empty();){if(r=c.pop(),r.closed=!0,r===l)return a.backtrace(l);this._identifySuccessors(r)}return[]},r.prototype._identifySuccessors=function(t){var e,i,n,s,r,o,a,h,l,u,d=this.grid,p=this.heuristic,f=this.openList,g=this.endNode.x,m=this.endNode.y,v=t.x,y=t.y,w=Math.abs;Math.max;for(e=this._findNeighbors(t),s=0,r=e.length;s<r;++s)if(i=e[s],n=this._jump(i[0],i[1],v,y)){if(o=n[0],a=n[1],u=d.getNodeAt(o,a),u.closed)continue;h=c.euclidean(w(o-v),w(a-y)),l=t.g+h,(!u.opened||l<u.g)&&(u.g=l,u.h=u.h||p(w(o-g),w(a-m)),u.f=u.g+u.h,u.parent=t,u.opened?f.updateItem(u):(f.push(u),u.opened=!0))}},r.prototype._jump=function(t,e,i,n){var s,r,o=this.grid,a=t-i,c=e-n;if(!o.isWalkableAt(t,e))return null;if(o.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==a&&0!==c){if(o.isWalkableAt(t-a,e+c)&&!o.isWalkableAt(t-a,e)||o.isWalkableAt(t+a,e-c)&&!o.isWalkableAt(t,e-c))return[t,e]}else if(0!==a){if(o.isWalkableAt(t+a,e+1)&&!o.isWalkableAt(t,e+1)||o.isWalkableAt(t+a,e-1)&&!o.isWalkableAt(t,e-1))return[t,e]}else if(o.isWalkableAt(t+1,e+c)&&!o.isWalkableAt(t+1,e)||o.isWalkableAt(t-1,e+c)&&!o.isWalkableAt(t-1,e))return[t,e];return 0!==a&&0!==c&&(s=this._jump(t+a,e,t,e),r=this._jump(t,e+c,t,e),s||r)?[t,e]:o.isWalkableAt(t+a,e)||o.isWalkableAt(t,e+c)?this._jump(t+a,e+c,t,e):null},r.prototype._findNeighbors=function(t){var e,i,n,s,r,o,a,c,h=t.parent,l=t.x,u=t.y,d=this.grid,p=[];if(h)e=h.x,i=h.y,n=(l-e)/Math.max(Math.abs(l-e),1),s=(u-i)/Math.max(Math.abs(u-i),1),0!==n&&0!==s?(d.isWalkableAt(l,u+s)&&p.push([l,u+s]),d.isWalkableAt(l+n,u)&&p.push([l+n,u]),(d.isWalkableAt(l,u+s)||d.isWalkableAt(l+n,u))&&p.push([l+n,u+s]),!d.isWalkableAt(l-n,u)&&d.isWalkableAt(l,u+s)&&p.push([l-n,u+s]),!d.isWalkableAt(l,u-s)&&d.isWalkableAt(l+n,u)&&p.push([l+n,u-s])):0===n?d.isWalkableAt(l,u+s)&&(d.isWalkableAt(l,u+s)&&p.push([l,u+s]),d.isWalkableAt(l+1,u)||p.push([l+1,u+s]),d.isWalkableAt(l-1,u)||p.push([l-1,u+s])):d.isWalkableAt(l+n,u)&&(d.isWalkableAt(l+n,u)&&p.push([l+n,u]),d.isWalkableAt(l,u+1)||p.push([l+n,u+1]),d.isWalkableAt(l,u-1)||p.push([l+n,u-1]));else for(r=d.getNeighbors(t,!0),a=0,c=r.length;a<c;++a)o=r[a],p.push([o.x,o.y]);return p},e.exports=r}),t.define("/PathFinding.js",function(t,e,i,n,s){e.exports={Node:t("./core/Node"),Grid:t("./core/Grid"),Heap:t("./core/Heap"),Util:t("./core/Util"),Heuristic:t("./core/Heuristic"),AStarFinder:t("./finders/AStarFinder"),BestFirstFinder:t("./finders/BestFirstFinder"),BreadthFirstFinder:t("./finders/BreadthFirstFinder"),DijkstraFinder:t("./finders/DijkstraFinder"),BiAStarFinder:t("./finders/BiAStarFinder"),BiBestFirstFinder:t("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:t("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:t("./finders/BiDijkstraFinder"),JumpPointFinder:t("./finders/JumpPointFinder")}}),t("/PathFinding.js"),t("/PathFinding")}(),draw2d={geo:{},io:{json:{},png:{},svg:{}},storage:{},util:{spline:{}},shape:{basic:{},composite:{},arrow:{},node:{},note:{},diagram:{},flowchart:{},analog:{},icon:{},layout:{},pert:{},state:{},widget:{}},policy:{canvas:{},connection:{},line:{},port:{},figure:{}},command:{},decoration:{connection:{}},layout:{connection:{},anchor:{},mesh:{},locator:{}},ui:{},isTouchDevice:navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1||navigator.platform.indexOf("iPad")!=-1};Array.prototype.reduce||(Array.prototype.reduce=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,i=Object(this),n=i.length>>>0,s=0;if(2==arguments.length)e=arguments[1];else{for(;s<n&&!s in i;)s++;if(s>=n)throw new TypeError("Reduce of empty array with no initial value");e=i[s++]}for(;s<n;s++)s in i&&(e=t(e,i[s],s,i));return e}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var s=Object(this),r=s.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=0;n<r;){var o;n in s&&(o=s[n],t.call(i,o,n,s)),n++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=s)return-1;for(i=Math.max(r>=0?r:s-Math.abs(r),0);i<s;){if(i in n&&n[i]===t)return i;i++}return-1}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,e){var i=this[t],n=i,s=function(){return n},r=function(s){return i=n,n=e.call(this,t,i,s)};delete this[t]&&Object.defineProperty(this,t,{get:s,set:r,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(t){var e=this[t];delete this[t],this[t]=e}}),draw2d.util.Base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ENCODED_VALS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ENCODED_VALS_WEBSAFE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.",encodeByteArray:function(t,e){draw2d.util.Base64.init();for(var i=e?draw2d.util.Base64.byteToCharMapWebSafe_:draw2d.util.Base64.byteToCharMap_,n=[],s=0;s<t.length;s+=3){var r=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,l=r>>2,u=(3&r)<<4|a>>4,d=(15&a)<<2|h>>6,p=63&h;c||(p=64,o||(d=64)),n.push(i[l],i[u],i[d],i[p])}return n.join("")},encode:function(t,e){return draw2d.util.Base64.encodeByteArray(draw2d.util.Base64.stringToByteArray(t),e)},decode:function(t,e){draw2d.util.Base64.init();for(var i=e?draw2d.util.Base64.charToByteMapWebSafe_:draw2d.util.Base64.charToByteMap_,n=[],s=0;s<t.length;){var r=i[t.charAt(s++)],o=s<t.length,a=o?i[t.charAt(s)]:0;++s;var c=s<t.length,h=c?i[t.charAt(s)]:0;++s;var l=s<t.length,u=l?i[t.charAt(s)]:0;if(++s,null==r||null==a||null==h||null==u)throw Error();var d=r<<2|a>>4;if(n.push(d),64!=h){var p=a<<4&240|h>>2;if(n.push(p),64!=u){var f=h<<6&192|u;n.push(f)}}}return n},stringToByteArray:function(t){for(var e=[],i=0,n=0;n<t.length;n++){for(var s=t.charCodeAt(n);s>255;)e[i++]=255&s,s>>=8;e[i++]=s}return e},init:function(){if(!draw2d.util.Base64.byteToCharMap_){draw2d.util.Base64.byteToCharMap_={},draw2d.util.Base64.charToByteMap_={},draw2d.util.Base64.byteToCharMapWebSafe_={},draw2d.util.Base64.charToByteMapWebSafe_={};for(var t=0;t<draw2d.util.Base64.ENCODED_VALS.length;t++)draw2d.util.Base64.byteToCharMap_[t]=draw2d.util.Base64.ENCODED_VALS.charAt(t),draw2d.util.Base64.charToByteMap_[draw2d.util.Base64.byteToCharMap_[t]]=t,draw2d.util.Base64.byteToCharMapWebSafe_[t]=draw2d.util.Base64.ENCODED_VALS_WEBSAFE.charAt(t),draw2d.util.Base64.charToByteMapWebSafe_[draw2d.util.Base64.byteToCharMapWebSafe_[t]]=t}}},window.debug=function(){function t(t){!i||!n&&o&&o.log||i.apply(s,t)}function e(t){return c>0?c>t:h.length+c<=t}for(var i,n,s=this,r=Array.prototype.slice,o=s.console,a={},c=9,h=["error","warn","info","debug","log"],l="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),u=l.length,d=[];--u>=0;)!function(t){
a[t]=function(){0!==c&&o&&o[t]&&o[t].apply(o,arguments)}}(l[u]);for(u=h.length;--u>=0;)!function(i,n){a[n]=function(){var a=r.call(arguments),c=[n].concat(a);d.push(c),t(c),o&&e(i)&&(o.firebug?o[n].apply(s,a):o[n]?o[n](a):o.log(a))}}(u,h[u]);return a.setLevel=function(t){c="number"==typeof t?t:9},a.setCallback=function(){var e=r.call(arguments),s=d.length,o=s;for(i=e.shift()||null,n="boolean"==typeof e[0]&&e.shift(),o-="number"==typeof e[0]?e.shift():s;o<s;)t(d[o++])},a}(),draw2d.util.Color=Class.extend({init:function(t,e,i){if(this.hashString=null,"undefined"==typeof t||null===t)this.hashString="none";else if(t instanceof draw2d.util.Color)"none"===t.hashString?this.hashString="none":(this.red=t.red,this.green=t.green,this.blue=t.blue);else if("string"==typeof t)if("none"===t)this.hashString="none";else{var n=this.hex2rgb(t);this.red=n[0],this.green=n[1],this.blue=n[2]}else"object"==typeof t&&"number"==typeof t.red?(this.red=t.red,this.green=t.green,this.blue=t.blue):t instanceof Array&&3===t.length?(this.red=t[0],this.green=t[1],this.blue=t[2]):"object"==typeof t&&"number"==typeof t.length&&3===t.length?(this.red=t[0],this.green=t[1],this.blue=t[2]):(this.red=parseInt(t),this.green=parseInt(e),this.blue=parseInt(i))},getHTMLStyle:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},getRed:function(){return this.red},getGreen:function(){return this.green},getBlue:function(){return this.blue},getIdealTextColor:function(){var t=105,e=.299*this.red+.587*this.green+.114*this.blue;return 255-e<t?new draw2d.util.Color(0,0,0):new draw2d.util.Color(255,255,255)},hex2rgb:function(t){return t=t.replace("#",""),{0:parseInt(t.substr(0,2),16),1:parseInt(t.substr(2,2),16),2:parseInt(t.substr(4,2),16)}},hex:function(){return this.int2hex(this.red)+this.int2hex(this.green)+this.int2hex(this.blue)},hash:function(){return null===this.hashString&&(this.hashString="#"+this.hex()),this.hashString},int2hex:function(t){return t=Math.round(Math.min(Math.max(0,t),255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},darker:function(t){if("none"===this.hashString)return this;var e=parseInt(Math.round(this.getRed()*(1-t))),i=parseInt(Math.round(this.getGreen()*(1-t))),n=parseInt(Math.round(this.getBlue()*(1-t)));return e<0?e=0:e>255&&(e=255),i<0?i=0:i>255&&(i=255),n<0?n=0:n>255&&(n=255),new draw2d.util.Color(e,i,n)},lighter:function(t){if("none"===this.hashString)return this;var e=parseInt(Math.round(this.getRed()*(1+t))),i=parseInt(Math.round(this.getGreen()*(1+t))),n=parseInt(Math.round(this.getBlue()*(1+t)));return e<0?e=0:e>255&&(e=255),i<0?i=0:i>255&&(i=255),n<0?n=0:n>255&&(n=255),new draw2d.util.Color(e,i,n)},fadeTo:function(t,e){var i=Math.floor(this.red+e*(t.red-this.red)+.5),n=Math.floor(this.green+e*(t.green-this.green)+.5),s=Math.floor(this.blue+e*(t.blue-this.blue)+.5);return new draw2d.util.Color(i,n,s)},equals:function(t){return t instanceof draw2d.util.Color&&this.hash()==t.hash()}}),draw2d.util.ArrayList=Class.extend({init:function(t){$.isArray(t)?this.data=t:this.data=[]},clear:function(){return this.data=[],this},reverse:function(){return this.data.reverse(),this},getSize:function(){return this.data.length},isEmpty:function(){return 0===this.getSize()},last:function(){return this.data[this.data.length-1]},getLastElement:function(){return this.last()},asArray:function(){return this.data},first:function(){return this.data.length>0?this.data[0]:null},getFirstElement:function(){return this.first()},get:function(t){return this.data[t]},add:function(t){return this.data.push(t),this},grep:function(t){return this.data=$.grep(this.data,t),this},find:function(t){var e=$.grep(this.data,t);return 0===e.length?null:e[0]},map:function(t){return this.data=$.map(this.data,t),this},unique:function(){return this.data=$.unique(this.data),this},addAll:function(t,e){if(!(t instanceof draw2d.util.ArrayList))throw"Unable to handle unknown object type in ArrayList.addAll";return this.data=this.data.concat(t.data),e&&this.unique(),this},pop:function(){return this.removeElementAt(this.data.length-1)},push:function(t){this.add(t)},remove:function(t){var e=this.indexOf(t);return e>=0?this.removeElementAt(e):null},insertElementAt:function(t,e){return this.data.splice(e,0,t),this},removeElementAt:function(t){var e=this.data[t];return this.data.splice(t,1),e},removeAll:function(t){return t instanceof draw2d.util.ArrayList&&(t=t.data),$.isArray(t)&&$.each(t,$.proxy(function(t,e){this.remove(e)},this)),this},indexOf:function(t){return this.data.indexOf(t)},contains:function(t){return this.indexOf(t)!==-1},sort:function(t){return"function"==typeof t?this.data.sort(t):this.data.sort(function(e,i){return e[t]<i[t]?-1:e[t]>i[t]?1:0}),this},clone:function(t){var e=new draw2d.util.ArrayList;if(t)for(var i=0;i<this.data.length;i++)e.data.push(this.data[i].clone());else e.data=this.data.slice(0);return e},each:function(t,e){if("undefined"!=typeof e&&e===!0)for(var i=this.data.length-1;i>=0&&t(i,this.data[i])!==!1;i--);else for(var i=0;i<this.data.length&&t(i,this.data[i])!==!1;i++);return this},overwriteElementAt:function(t,e){return this.data[e]=t,this},getPersistentAttributes:function(){return{data:this.data}},setPersistentAttributes:function(t){this.data=t.data}}),draw2d.util.ArrayList.EMPTY_LIST=new draw2d.util.ArrayList,Raphael.fn.polygon=function(t){for(var e=["M"],i=t.split(" "),n=0;n<i.length;n++){for(var s=i[n].split(","),r=0;r<s.length;r++){var o=parseFloat(s[r]);isNaN(o)||e.push(o)}0==n&&e.push("L")}return e.push("Z"),this.path(e)},draw2d.util.JSON={set:function(t,e,i){if(e&&""!==e){for(var n,s=/[\w-]+|\[\]|([^\[[\w]\]]|["'](.*?)['"])/g,r=e.match(s),o=t,a=null,c=null,h=function(t,e,i){"[]"===e?t.push(i):t[e]=i};r.length>0;)n=r.shift().replace(/["']/g,""),isNaN(+n)&&"[]"!==n?"string"===$.type(n)&&($.isPlainObject(o)||(o={},h(a,c,o))):"array"!==$.type(o)&&(o=[],h(a,c,o)),a=o,c=n,o=o[n];h(a,c,i)}},get:function(t,e){var i=/[\w-]+|\[\]|([^\[[\w]\]]|["'](.*?)['"])/g;if(e){for(var n=e.match(i);null!==t&&n.length>0;){if(!t.propertyIsEnumerable(n[0].replace(/"/g,"")))return;t=t[n.shift().replace(/"/g,"")]}return t}},diff:function(t,e){var i={};for(key in t){var n=t[key],s=e[key];n!==s&&(n.equals?n.equals(s)||(i[key]=t[key]):i[key]=t[key])}return i},flatDiff:function(t,e){var i={};for(key in t)t[key]!==e[key]&&(i[key]=t[key]);return i},ensureDefault:function(t,e,i){t.hasOwnProperty(e)||(t[e]=i)}},draw2d.util.UUID=function(){},draw2d.util.UUID.create=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},draw2d.util.spline.Spline=Class.extend({NAME:"draw2d.util.spline.Spline",init:function(){},generate:function(t,e){throw"inherit classes must implement the method 'draw2d.util.spline.Spline.generate()'"}}),draw2d.util.spline.CubicSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.CubicSpline",init:function(){this._super()},generate:function(t,e){var i=new draw2d.util.ArrayList;i.add(t.get(0)),i.addAll(t),i.add(t.get(t.getSize()-1));var n=i.getSize(),s=new draw2d.util.ArrayList;s.add(t.get(0)),s.add(this.p(1,0,i));for(var r=1;r<n-2;r++)for(var o=1;o<=e;o++)s.add(this.p(r,o/e,i));return s.add(t.get(t.getSize()-1)),s},p:function(t,e,i){for(var n=0,s=0,r=t-1,o=-2;o<=1;o++){var a=this.blend(o,e),c=i.get(r++);n+=a*c.x,s+=a*c.y}return new draw2d.geo.Point(n,s)},blend:function(t,e){return t===-2?(((-e+3)*e-3)*e+1)/6:t===-1?((3*e-6)*e*e+4)/6:0===t?(((-3*e+3)*e+3)*e+1)/6:e*e*e/6}}),draw2d.util.spline.CatmullRomSpline=draw2d.util.spline.CubicSpline.extend({NAME:"draw2d.util.spline.CatmullRomSpline",init:function(){this._super()},blend:function(t,e){return t==-2?((-e+2)*e-1)*e/2:t==-1?((3*e-5)*e*e+2)/2:0==t?((-3*e+4)*e+1)*e/2:(e-1)*e*e/2}}),draw2d.util.spline.BezierSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.BezierSpline",init:function(){this._super()},generate:function(t,e){var i=t.getSize(),n=new draw2d.util.ArrayList;n.add(this.p(0,0,t));for(var s=0;s<i-3;s+=3)for(var r=1;r<=e;r++)n.add(this.p(s,r/e,t));return n},p:function(t,e,i){for(var n=0,s=0,r=t,o=0;o<=3;o++){var a=this.blend(o,e),c=i.get(r++);n+=a*c.x,s+=a*c.y}return new draw2d.geo.Point(n,s)},blend:function(t,e){return 0==t?(1-e)*(1-e)*(1-e):1==t?3*e*(1-e)*(1-e):2==t?3*e*e*(1-e):e*e*e}}),draw2d.geo.PositionConstants=function(){},draw2d.geo.PositionConstants.NORTH=1,draw2d.geo.PositionConstants.SOUTH=4,draw2d.geo.PositionConstants.WEST=8,draw2d.geo.PositionConstants.EAST=16,draw2d.geo.Point=Class.extend({NAME:"draw2d.geo.Point",init:function(t,e){t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):$.isNumeric(t.x)&&$.isNumeric(t.y)?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this.bx=null,this.by=null,this.bw=null,this.bh=null},setBoundary:function(t,e,i,n){return t instanceof draw2d.geo.Rectangle?(this.bx=t.x,this.by=t.y,this.bw=t.w,this.bh=t.h):(this.bx=t,this.by=e,this.bw=i,this.bh=n),this.adjustBoundary(),this},adjustBoundary:function(){if(null!==this.bx)return this.x=Math.min(Math.max(this.bx,this.x),this.bw),this.y=Math.min(Math.max(this.by,this.y),this.bh),this},translate:function(t,e){return this.x+=t,this.y+=e,this.adjustBoundary(),this},getX:function(){return this.x},getY:function(){return this.y},setX:function(t){return this.x=t,this.adjustBoundary(),this},setY:function(t){return this.y=t,this.adjustBoundary(),this},setPosition:function(t,e){return t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this.adjustBoundary(),this},getPosition:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.abs(e)>Math.abs(i)?e<0?draw2d.geo.PositionConstants.WEST:draw2d.geo.PositionConstants.EAST:i<0?draw2d.geo.PositionConstants.NORTH:draw2d.geo.PositionConstants.SOUTH},equals:function(t){return this.x===t.x&&this.y===t.y},distance:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},getDistance:function(t){return this.distance(t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},translated:function(t,e){var i=new draw2d.geo.Point(t,e);return new draw2d.geo.Point(this.x+i.x,this.y+i.y)},scale:function(t){return this.x*=t,this.y*=t,this.adjustBoundary(),this},scaled:function(t){return new draw2d.geo.Point(this.x*t,this.y*t)},getScaled:function(t){return this.scaled(t)},getPersistentAttributes:function(){return{x:this.x,y:this.y}},setPersistentAttributes:function(t){this.x=t.x,this.y=t.y},subtract:function(t){return new draw2d.geo.Point(this.x-t.x,this.y-t.y)},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){return new draw2d.geo.Point(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},clone:function(){return new draw2d.geo.Point(this.x,this.y)}}),draw2d.geo.Rectangle=draw2d.geo.Point.extend({NAME:"draw2d.geo.Rectangle",init:function(t,e,i,n){t instanceof draw2d.geo.Rectangle?(e=t.y,i=t.w,n=t.h,t=t.x):"number"==typeof t.x&&"number"==typeof t.y?(e=t.y,i=t.w|t.width,n=t.h|t.height,t=t.x):"number"==typeof t.top&&"number"==typeof t.left&&(e=t.top,i=t.w|t.width,n=t.h|t.height,t=t.left),this._super(t,e),this.w=i,this.h=n},adjustBoundary:function(){null!==this.bx&&(this.x=Math.min(Math.max(this.bx,this.x),this.bw-this.w),this.y=Math.min(Math.max(this.by,this.y),this.bh-this.h),this.w=Math.min(this.w,this.bw),this.h=Math.min(this.h,this.bh))},resize:function(t,e){return this.w+=t,this.h+=e,this.adjustBoundary(),this},scale:function(t,e){return this.w+=t,this.h+=e,this.x-=t/2,this.y-=e/2,this.adjustBoundary(),this},translate:function(t,e){var i=new draw2d.geo.Point(t,e);return this.x+=i.x,this.y+=i.y,this.adjustBoundary(),this},translated:function(t,e){var i=new draw2d.geo.Point(t,e);return new draw2d.geo.Rectangle(this.x+i.x,this.y+i.y,this.w,this.h)},setBounds:function(t){return this.setPosition(t.x,t.y),this.w=t.w,this.h=t.h,this},isEmpty:function(){return this.w<=0||this.h<=0},getWidth:function(){return this.w},setWidth:function(t){return this.w=t,this.adjustBoundary(),this},getHeight:function(){return this.h},setHeight:function(t){return this.h=t,this.adjustBoundary(),this},getLeft:function(){return this.x},getRight:function(){return this.x+this.w},getTop:function(){return this.y},getBottom:function(){return this.y+this.h},getTopLeft:function(){return new draw2d.geo.Point(this.x,this.y)},getTopCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y)},getTopRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y)},getCenterLeft:function(){return new draw2d.geo.Point(this.x,this.y+this.h/2)},getBottomLeft:function(){return new draw2d.geo.Point(this.x,this.y+this.h)},getBottomCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y+this.h)},getCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y+this.h/2)},getBottomRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y+this.h)},getVertices:function(){var t=new draw2d.util.ArrayList;return t.add(this.getTopLeft()),t.add(this.getTopRight()),t.add(this.getBottomRight()),t.add(this.getBottomLeft()),t},moveInside:function(t){var e=new draw2d.geo.Rectangle(t.x,t.y,t.w,t.h);return e.x=Math.max(e.x,this.x),e.y=Math.max(e.y,this.y),e.w<this.w?e.x=Math.min(e.x+e.w,this.x+this.w)-e.w:e.x=this.x,e.h<this.h?e.y=Math.min(e.y+e.h,this.y+this.h)-e.h:e.y=this.y,e},getDistance:function(t){var e=this.x,i=this.y,n=this.w,s=this.h,r=t.getX(),o=t.getY(),a=1,c=1;t instanceof draw2d.geo.Rectangle&&(a=t.getWidth(),c=t.getHeight());var h=9;if(e+n<=r)h=i+s<=o?0:i>=o+c?6:7;else if(e>=r+a)h=i+s<=o?2:i>=o+c?4:3;else if(i+s<=o)h=1;else{if(!(i>=o+c))return 0;h=5}switch(h){case 0:return e=e+n-r,i=i+s-o,-(e+i);case 1:return-(i+s-o);case 2:return e=r+a-e,i=i+s-o,-(e+i);case 3:return-(r+a-e);case 4:return e=r+a-e,i=o+c-i,-(e+i);case 5:return-(o+c-i);case 6:return e=e+n-r,i=o+c-i,-(e+i);case 7:return-(e+n-r)}throw"Unknown data type of parameter for distance calculation in draw2d.geo.Rectangle.getDistance(..)"},determineOctant:function(t){var e=3,i=this.x+e,n=this.y+e,s=this.w-2*e,r=this.h-2*e,o=t.x,a=t.y,c=2,h=2;t instanceof draw2d.geo.Rectangle&&(c=t.w,h=t.h);var l=0;return l=o+c<=i?a+h<=n?0:a>=n+r?6:7:o>=i+s?a+h<=n?2:a>=n+r?4:3:a+h<=n?1:a>=n+r?5:8},getDirection:function(t){var e=this.getTopLeft();switch(this.determineOctant(t)){case 0:return e.x-t.x<e.y-t.y?draw2d.geo.Rectangle.DIRECTION_UP:draw2d.geo.Rectangle.DIRECTION_LEFT;case 1:return draw2d.geo.Rectangle.DIRECTION_UP;case 2:return e=this.getTopRight(),t.x-e.x<e.y-t.y?draw2d.geo.Rectangle.DIRECTION_UP:draw2d.geo.Rectangle.DIRECTION_RIGHT;case 3:return draw2d.geo.Rectangle.DIRECTION_RIGHT;case 4:return e=this.getBottomRight(),t.x-e.x<t.y-e.y?draw2d.geo.Rectangle.DIRECTION_DOWN:draw2d.geo.Rectangle.DIRECTION_RIGHT;case 5:return draw2d.geo.Rectangle.DIRECTION_DOWN;case 6:return e=this.getBottomLeft(),e.x-t.x<t.y-e.y?draw2d.geo.Rectangle.DIRECTION_DOWN:draw2d.geo.Rectangle.DIRECTION_LEFT;case 7:return draw2d.geo.Rectangle.DIRECTION_LEFT;case 8:return t.y>this.y?draw2d.geo.Rectangle.DIRECTION_DOWN:draw2d.geo.Rectangle.DIRECTION_UP}return draw2d.geo.Rectangle.DIRECTION_UP},equals:function(t){return this.x==t.x&&this.y==t.y&&this.w==t.w&&this.h==t.h},hitTest:function(t,e){t instanceof draw2d.geo.Point&&(e=t.y,t=t.x);var i=this.x+this.getWidth(),n=this.y+this.getHeight();return t>=this.x&&t<=i&&e>=this.y&&e<=n},isInside:function(t){return t.hitTest(this.getTopLeft())&&t.hitTest(this.getTopRight())&&t.hitTest(this.getBottomLeft())&&t.hitTest(this.getBottomRight())},contains:function(t){return this.hitTest(t.getTopLeft())&&this.hitTest(t.getTopRight())&&this.hitTest(t.getBottomLeft())&&this.hitTest(t.getBottomRight())},intersects:function(t){var e=t.x,i=t.y,n=t.x+t.w,s=t.y+t.h,r=this.x,o=this.y,a=this.x+this.w,c=this.y+this.h,h=Math.max(0,Math.min(n,a)-Math.max(e,r)),l=Math.max(0,Math.min(s,c)-Math.max(i,o));return h*l!==0},merge:function(t){var e=Math.max(t.getRight(),this.getRight()),i=Math.max(t.getBottom(),this.getBottom());return this.setPosition(Math.min(this.x,t.x),Math.min(this.y,t.y)),this.w=e-this.x,this.h=i-this.y,this},intersectionWithLine:function(t,e){var i=new draw2d.util.ArrayList,n=this.getVertices();n.add(n.first());for(var s=n.first(),r=null,o=1;o<5;o++)r=n.get(o),s=draw2d.shape.basic.Line.intersection(t,e,s,r),null!==s&&i.add(s),s=r;return i},clone:function(){return new draw2d.geo.Rectangle(this.x,this.y,this.w,this.h)},toJSON:function(){return{width:this.w,height:this.h,x:this.x,y:this.y}}}),draw2d.geo.Rectangle.DIRECTION_UP=0,draw2d.geo.Rectangle.DIRECTION_RIGHT=1,draw2d.geo.Rectangle.DIRECTION_DOWN=2,draw2d.geo.Rectangle.DIRECTION_LEFT=3,draw2d.geo.Util={insetPoint:function(t,e,i){if(t.equals(e))return t;var n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s),o=Math.min(r/2,i);return{x:e.x+n/r*(r-o),y:e.y+s/r*(r-o)}}},draw2d.geo.Ray=draw2d.geo.Point.extend({NAME:"draw2d.geo.Ray",init:function(t,e){this._super(t,e)},isHorizontal:function(){return 0!=this.x},similarity:function(t){return Math.abs(this.dot(t))},getAveraged:function(t){return new draw2d.geo.Ray((this.x+t.x)/2,(this.y+t.y)/2)}}),draw2d.geo.Line={inverseLerp:function(t,e,i,n,s,r){var o=Math.abs(i-t),a=Math.abs(i-s);return 0===o&&(o=Math.abs(n-e),a=Math.abs(n-r),0==o)?1:a/o},pointProjection:function(t,e,i,n,s,r){var o=new draw2d.geo.Point(0,0);t==i&&e==n&&(t-=1e-5);var a=(s-t)*(i-t)+(r-e)*(n-e),c=Math.pow(i-t,2)+Math.pow(n-e,2);a/=c,o.x=t+a*(i-t),o.y=e+a*(n-e);var h,l,u,d;h=Math.min(t,i),l=Math.max(t,i),u=Math.min(e,n),d=Math.max(e,n);var p=o.x>=h&&o.x<=l&&o.y>=u&&o.y<=d;return p?o:null},distance:function(t,e,i,n,s,r){i-=t,n-=e,s-=t,r-=e;var o,a=s*i+r*n;a<=0?o=0:(s=i-s,r=n-r,a=s*i+r*n,o=a<=0?0:a*a/(i*i+n*n));var c=s*s+r*r-o;return c<0&&(c=0),Math.sqrt(c)}},draw2d.command.CommandType=Class.extend({NAME:"draw2d.command.CommandType",init:function(t){this.policy=t},getPolicy:function(){return this.policy}}),draw2d.command.CommandType.DELETE="DELETE",draw2d.command.CommandType.MOVE="MOVE",draw2d.command.CommandType.CONNECT="CONNECT",draw2d.command.CommandType.MOVE_BASEPOINT="MOVE_BASEPOINT",draw2d.command.CommandType.MOVE_VERTEX="MOVE_VERTEX",draw2d.command.CommandType.MOVE_VERTICES="MOVE_VERTICES",draw2d.command.CommandType.MOVE_GHOST_VERTEX="MOVE_GHOST_VERTEX",draw2d.command.CommandType.RESIZE="RESIZE",draw2d.command.CommandType.RESET="RESET",draw2d.command.CommandType.ROTATE="ROTATE",draw2d.command.Command=Class.extend({NAME:"draw2d.command.Command",init:function(t){this.label=t},getLabel:function(){return this.label},canExecute:function(){return!0},execute:function(){},cancel:function(){},undo:function(){},redo:function(){}}),draw2d.command.CommandCollection=draw2d.command.Command.extend({NAME:"draw2d.command.CommandCollection",init:function(t){this._super("undefined"==typeof t?draw2d.Configuration.i18n.command.collection:t),this.commands=new draw2d.util.ArrayList},getLabel:function(){if(1===this.commands.getSize())return this.commands.first().getLabel();if(this.commands.getSize()>1){var t=this.commands.clone().map(function(t){return t.getLabel()});if(t.unique(),1===t.getSize())return t.first()}return this._super()},add:function(t){this.commands.add(t)},canExecute:function(){var t=!1;return this.commands.each(function(e,i){t=t||i.canExecute()}),t},execute:function(){this.commands.each(function(t,e){e.execute()})},redo:function(){this.commands.each(function(t,e){e.redo()})},undo:function(){this.commands.reverse(),this.commands.each(function(t,e){e.undo()}),this.commands.reverse()}}),draw2d.command.CommandStack=Class.extend({NAME:"draw2d.command.CommandStack",init:function(){this.undostack=[],this.redostack=[],this.maxundo=50,this.transactionCommand=null,this.eventListeners=new draw2d.util.ArrayList},setUndoLimit:function(t){return this.maxundo=t,this},markSaveLocation:function(){return this.undostack=[],this.redostack=[],this.notifyListeners(new draw2d.command.Command,draw2d.command.CommandStack.POST_EXECUTE),this},execute:function(t){if("undefined"==typeof t)throw"Missing parameter [command] for method call CommandStack.execute";if(null!==t&&t.canExecute()!==!1)return null!==this.transactionCommand?void this.transactionCommand.add(t):(this.notifyListeners(t,draw2d.command.CommandStack.PRE_EXECUTE),this.undostack.push(t),t.execute(),this.redostack=[],this.undostack.length>this.maxundo&&(this.undostack=this.undostack.slice(this.undostack.length-this.maxundo)),this.notifyListeners(t,draw2d.command.CommandStack.POST_EXECUTE),this)},startTransaction:function(t){return this.transactionCommand=new draw2d.command.CommandCollection(t),this},commitTransaction:function(){if(null!==this.transactionCommand){var t=this.transactionCommand;return this.transactionCommand=null,1===t.commands.getSize()?this.execute(t.commands.first()):this.execute(t),this}},undo:function(){var t=this.undostack.pop();return t&&(this.notifyListeners(t,draw2d.command.CommandStack.PRE_UNDO),this.redostack.push(t),t.undo(),this.notifyListeners(t,draw2d.command.CommandStack.POST_UNDO)),this},redo:function(){var t=this.redostack.pop();return t&&(this.notifyListeners(t,draw2d.command.CommandStack.PRE_REDO),this.undostack.push(t),t.redo(),this.notifyListeners(t,draw2d.command.CommandStack.POST_REDO)),this},getRedoLabel:function(){if(0===this.redostack.length)return"";var t=this.redostack[this.redostack.length-1];return t?t.getLabel():""},getUndoLabel:function(){if(0===this.undostack.length)return"";var t=this.undostack[this.undostack.length-1];return t?t.getLabel():""},canRedo:function(){return this.redostack.length>0},canUndo:function(){return this.undostack.length>0},addEventListener:function(t){if(t instanceof draw2d.command.CommandStackEventListener)this.eventListeners.add(t);else if("function"==typeof t.stackChanged)this.eventListeners.add(t);else{if("function"!=typeof t)throw"Object doesn't implement required callback interface [draw2d.command.CommandStackListener]";this.eventListeners.add({stackChanged:t})}return this},removeEventListener:function(t){for(var e=this.eventListeners.getSize(),i=0;i<e;i++){var n=this.eventListeners.get(i);if(n===t||n.stackChanged===t)return void this.eventListeners.remove(n)}return this},notifyListeners:function(t,e){for(var i=new draw2d.command.CommandStackEvent(this,t,e),n=this.eventListeners.getSize(),s=0;s<n;s++)this.eventListeners.get(s).stackChanged(i)}}),draw2d.command.CommandStack.PRE_EXECUTE=1,draw2d.command.CommandStack.PRE_REDO=2,draw2d.command.CommandStack.PRE_UNDO=4,draw2d.command.CommandStack.POST_EXECUTE=8,draw2d.command.CommandStack.POST_REDO=16,draw2d.command.CommandStack.POST_UNDO=32,draw2d.command.CommandStack.POST_INIT=64,draw2d.command.CommandStack.POST_MASK=draw2d.command.CommandStack.POST_EXECUTE|draw2d.command.CommandStack.POST_UNDO|draw2d.command.CommandStack.POST_REDO,draw2d.command.CommandStack.PRE_MASK=draw2d.command.CommandStack.PRE_EXECUTE|draw2d.command.CommandStack.PRE_UNDO|draw2d.command.CommandStack.PRE_REDO,draw2d.command.CommandStackEvent=Class.extend({NAME:"draw2d.command.CommandStackEvent",init:function(t,e,i){this.stack=t,this.command=e,this.details=i},getStack:function(){return this.stack},getCommand:function(){return this.command},getDetails:function(){return this.details},isPostChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.POST_MASK)},isPreChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.PRE_MASK)}}),draw2d.command.CommandStackEventListener=Class.extend({NAME:"draw2d.command.CommandStackEventListener",init:function(){},stackChanged:function(t){}}),draw2d.command.CommandMove=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMove",init:function(t,e,i){this._super(draw2d.Configuration.i18n.command.moveShape),this.figure=t,"undefined"==typeof e?(this.oldX=t.getX(),this.oldY=t.getY()):(this.oldX=e,this.oldY=i)},setStartPosition:function(t,e){this.oldX=t,this.oldY=e},setPosition:function(t,e){this.newX=t,this.newY=e},canExecute:function(){return this.newX!=this.oldX||this.newY!=this.oldY},execute:function(){this.redo()},undo:function(){this.figure.setPosition(this.oldX,this.oldY)},redo:function(){this.figure.setPosition(this.newX,this.newY)}}),draw2d.command.CommandAttr=draw2d.command.Command.extend({NAME:"draw2d.command.CommandAttr",init:function(t,e){var i=this;this._super(draw2d.Configuration.i18n.command.changeAttributes),this.figure=t,this.newAttributes=e,this.oldAttributes={},$.each(e,function(e,n){i.oldAttributes[e]=t.attr(e)})},canExecute:function(){return!0},execute:function(){this.redo()},undo:function(){this.figure.attr(this.oldAttributes)},redo:function(){this.figure.attr(this.newAttributes)}}),draw2d.command.CommandMoveLine=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveLine",init:function(t){this._super(draw2d.Configuration.i18n.command.moveLine),this.line=t,this.dx=0,this.dy=0},setTranslation:function(t,e){this.dx=t,this.dy=e},canExecute:function(){return 0!==this.dx&&0!==this.dy},execute:function(){this.redo()},undo:function(){var t=this;this.line.getVertices().each(function(e,i){i.translate(-t.dx,-t.dy)}),this.line.svgPathString=null,this.line.setPosition(this.line.getStartPoint())},redo:function(){var t=this;this.line.getVertices().each(function(e,i){i.translate(t.dx,t.dy)}),this.line.svgPathString=null,this.line.setPosition(this.line.getStartPoint())}}),draw2d.command.CommandMoveConnection=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveConnection",init:function(t){this._super(draw2d.Configuration.i18n.command.moveLine),this.line=t,this.dx=0,this.dy=0},setTranslation:function(t,e){this.dx=t,this.dy=e},canExecute:function(){return 0!==this.dx&&0!==this.dy},execute:function(){this.redo()},undo:function(){var t=this;this.line.getVertices().each(function(e,i){i.translate(-t.dx,-t.dy)}),this.line.svgPathString=null,this.line.setPosition(this.line.getStartPoint())},redo:function(){var t=this;this.line.getVertices().each(function(e,i){i.translate(t.dx,t.dy)}),this.line.svgPathString=null,this.line.setPosition(this.line.getStartPoint())}}),draw2d.command.CommandMoveVertex=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveVertex",init:function(t){this._super(draw2d.Configuration.i18n.command.moveVertex),this.line=t,this.index=-1,this.newPoint=null},setIndex:function(t){this.index=t,this.origPoint=this.line.getVertices().get(this.index).clone()},updatePosition:function(t,e){this.newPoint=new draw2d.geo.Point(t,e)},canExecute:function(){return this.index!==-1&&null!==this.newPoint},execute:function(){this.redo()},undo:function(){this.line.setVertex(this.index,this.origPoint.x,this.origPoint.y)},redo:function(){this.line.setVertex(this.index,this.newPoint.x,this.newPoint.y)}}),draw2d.command.CommandMoveVertices=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveVertices",init:function(t){this._super(draw2d.Configuration.i18n.command.moveVertices),this.line=t,this.oldVertices=t.getVertices().clone(!0),this.newVertices=null},updateVertices:function(t){this.newVertices=t},canExecute:function(){return null!==this.newVertices},execute:function(){this.redo()},undo:function(){this.line.setVertices(this.oldVertices)},redo:function(){this.line.setVertices(this.newVertices)}}),draw2d.command.CommandResize=draw2d.command.Command.extend({NAME:"draw2d.command.CommandResize",init:function(t,e,i){this._super(draw2d.Configuration.i18n.command.resizeShape),this.figure=t,"undefined"==typeof e?(this.oldWidth=t.getWidth(),this.oldHeight=t.getHeight()):(this.oldWidth=e,this.oldHeight=i)},setDimension:function(t,e){this.newWidth=0|t,this.newHeight=0|e},canExecute:function(){return this.newWidth!=this.oldWidth||this.newHeight!=this.oldHeight},execute:function(){this.redo()},undo:function(){this.figure.setDimension(this.oldWidth,this.oldHeight)},redo:function(){this.figure.setDimension(this.newWidth,this.newHeight)}}),draw2d.command.CommandRotate=draw2d.command.Command.extend({NAME:"draw2d.command.CommandRotate",init:function(t,e){this._super(draw2d.Configuration.i18n.command.rotateShape),this.figure=t,this.oldAngle=t.getRotationAngle(),this.newAngle=e},canExecute:function(){return this.oldAngle!=this.newAngle},execute:function(){this.redo()},undo:function(){this.rotate(this.oldAngle)},redo:function(){this.rotate(this.newAngle)},rotate:function(t){var e=this.figure.getWidth(),i=this.figure.getHeight();this.figure.setRotationAngle(t),this.figure.setDimension(i,e),this.figure.portRelayoutRequired=!0}}),draw2d.command.CommandConnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandConnect",init:function(t,e,i){this._super(draw2d.Configuration.i18n.command.connectPorts),this.canvas=e.getCanvas(),this.source=t,this.target=e,this.connection=null,this.dropTarget=i},setConnection:function(t){this.connection=t},getConnection:function(){return this.connection},execute:function(){var t=$.proxy(function(t){this.connection=t,this.connection.setSource(this.source),this.connection.setTarget(this.target),this.canvas.add(this.connection)},this);if(null===this.connection){var e=draw2d.Configuration.factory.createConnection(this.source,this.target,t,this.dropTarget);if("undefined"==typeof e)return;this.connection=e}t(this.connection)},redo:function(){this.canvas.add(this.connection),this.connection.reconnect()},undo:function(){this.canvas.remove(this.connection)}}),draw2d.command.CommandReconnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandReconnect",init:function(t){this._super(draw2d.Configuration.i18n.command.connectPorts),this.con=t,this.oldSourcePort=t.getSource(),this.oldTargetPort=t.getTarget()},canExecute:function(){return!0},setNewPorts:function(t,e){this.newSourcePort=t,this.newTargetPort=e},setIndex:function(t){},updatePosition:function(t,e){},execute:function(){this.redo()},cancel:function(){this.con.setSource(this.oldSourcePort),this.con.setTarget(this.oldTargetPort),this.con.routingRequired=!0,this.con.repaint()},undo:function(){this.con.setSource(this.oldSourcePort),this.con.setTarget(this.oldTargetPort),this.con.routingRequired=!0,this.con.repaint()},redo:function(){this.con.setSource(this.newSourcePort),this.con.setTarget(this.newTargetPort),this.con.routingRequired=!0,this.con.repaint()}}),draw2d.command.CommandDelete=draw2d.command.Command.extend({NAME:"draw2d.command.CommandDelete",init:function(t){this._super(draw2d.Configuration.i18n.command.deleteShape),this.parent=t.getParent(),this.figure=t,this.canvas=t.getCanvas(),this.connections=null,this.removedParentEntry=null,this.indexOfChild=-1},canExecute:function(){return null!==this.figure.getCanvas()},execute:function(){this.redo()},undo:function(){null!==this.parent?(this.parent.add(this.removedParentEntry.figure,this.removedParentEntry.locator,this.indexOfChild),this.canvas.setCurrentSelection(this.parent)):(this.canvas.add(this.figure),this.canvas.setCurrentSelection(this.figure)),this.figure instanceof draw2d.Connection&&this.figure.reconnect();for(var t=0;t<this.connections.getSize();++t)this.canvas.add(this.connections.get(t)),this.connections.get(t).reconnect()},redo:function(){this.canvas.setCurrentSelection(null),null===this.connections&&(this.figure instanceof draw2d.shape.node.Node?this.connections=this.figure.getConnections():this.connections=new draw2d.util.ArrayList);for(var t=0;t<this.connections.getSize();++t)this.canvas.remove(this.connections.get(t));null!==this.parent?(this.indexOfChild=this.parent.getChildren().indexOf(this.figure),this.removedParentEntry=this.parent.remove(this.figure)):this.canvas.remove(this.figure)}}),draw2d.command.CommandDeleteGroup=draw2d.command.Command.extend({NAME:"draw2d.command.CommandDeleteGroup",init:function(t){this._super(draw2d.Configuration.i18n.command.deleteShape),this.parent=t.getParent(),this.group=t,this.canvas=t.getCanvas(),this.removedParentEntry=null,this.indexOfChild=-1,this.batchDelete=null},canExecute:function(){for(var t=this.group.getAssignedFigures(),e=0;e<t.getSize();e++)if(t.get(e).isDeleteable()===!1)return!1;return null!==this.group.getCanvas()},execute:function(){this.redo()},undo:function(){this.batchDelete.undo(),this.canvas.setCurrentSelection(this.group);
},redo:function(){if(null===this.batchDelete){this.batchDelete=new draw2d.command.CommandCollection,this.batchDelete.add(new draw2d.command.CommandUngroup(this.canvas,this.group));for(var t=this.group.getAssignedFigures(),e=0;e<t.getSize();e++){var i=t.get(e),n=i.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE));this.batchDelete.add(n)}}this.batchDelete.execute()}}),draw2d.command.CommandAdd=draw2d.command.Command.extend({NAME:"draw2d.command.CommandAdd",init:function(t,e,i,n){this._super(draw2d.Configuration.i18n.command.addShape),this.figure=e,this.canvas=t,this.pos=new draw2d.geo.Point(i,n)},canExecute:function(){return null===this.figure.getCanvas()},execute:function(){this.canvas.add(this.figure,this.pos.x,this.pos.y)},redo:function(){this.execute()},undo:function(){this.canvas.remove(this.figure)}}),draw2d.command.CommandGroup=draw2d.command.Command.extend({NAME:"draw2d.command.CommandGroup",init:function(t,e){this._super(draw2d.Configuration.i18n.command.groupShapes),e instanceof draw2d.Selection?this.figures=e.getAll():this.figures=e,this.figures.grep(function(t){return null===t.getComposite()}),this.canvas=t,this.group=new draw2d.shape.composite.Group},canExecute:function(){return!this.figures.isEmpty()},execute:function(){this.redo()},undo:function(){var t=this;this.figures.each(function(e,i){t.group.unassignFigure(i)}),this.canvas.remove(this.group),this.canvas.setCurrentSelection(this.figures)},redo:function(){var t=this;this.figures.each(function(e,i){t.group.assignFigure(i)}),this.canvas.add(this.group),this.canvas.setCurrentSelection(this.group)}}),draw2d.command.CommandUngroup=draw2d.command.Command.extend({NAME:"draw2d.command.CommandUngroup",init:function(t,e){this._super(draw2d.Configuration.i18n.command.ungroupShapes),e instanceof draw2d.Selection?this.group=e.getAll().first():this.group=e,this.canvas=t,this.figures=this.group.getAssignedFigures().clone()},canExecute:function(){return!this.figures.isEmpty()},execute:function(){this.redo()},undo:function(){var t=this;this.figures.each(function(e,i){t.group.assignFigure(i)}),this.canvas.add(this.group),this.canvas.setCurrentSelection(this.group)},redo:function(){var t=this;this.figures.each(function(e,i){t.group.unassignFigure(i)}),this.canvas.setCurrentSelection(this.figures),this.canvas.remove(this.group)}}),draw2d.command.CommandAddVertex=draw2d.command.Command.extend({NAME:"draw2d.command.CommandAddVertex",init:function(t,e,i,n){this._super(draw2d.Configuration.i18n.command.addVertex),this.line=t,this.index=e,this.newPoint=new draw2d.geo.Point(i,n)},canExecute:function(){return!0},execute:function(){this.redo()},undo:function(){this.line.removeVertexAt(this.index)},redo:function(){this.line.insertVertexAt(this.index,this.newPoint.x,this.newPoint.y)}}),draw2d.command.CommandAssignFigure=draw2d.command.Command.extend({NAME:"draw2d.command.CommandAssignFigure",init:function(t,e){this._super(draw2d.Configuration.i18n.command.assignShape),this.figure=t,this.composite=e,this.assignedConnections=new draw2d.util.ArrayList,this.isNode=this.figure instanceof draw2d.shape.node.Node,this.oldBoundingBox=e.getBoundingBox(),this.newBoundingBox=null},canExecute:function(){return!0},execute:function(){if(this.composite.assignFigure(this.figure),this.newBoundingBox=this.composite.getBoundingBox(),this.isNode===!0){var t=this.figure.getConnections(),e=this;t.each(function(t,i){i.getSource().getParent().getComposite()===e.composite&&i.getTarget().getParent().getComposite()===e.composite&&i.getComposite()!==e.composite&&(e.assignedConnections.add({oldComposite:i.getComposite(),connection:i}),e.composite.assignFigure(i))})}},undo:function(){this.composite.unassignFigure(this.figure),this.assignedConnections.each(function(t,e){null!==e.oldComposite?e.oldComposite.assignFigure(e.connection):e.connection.getComposite().unassignFigure(e.connection)}),this.composite.stickFigures=!0,this.composite.setBoundingBox(this.oldBoundingBox),this.composite.stickFigures=!1},redo:function(){this.composite.setBoundingBox(this.oldBoundingBox),this.composite.assignFigure(this.figure);var t=this;this.assignedConnections.each(function(e,i){t.composite.assignFigure(i.connection)})}}),draw2d.command.CommandBoundingBox=draw2d.command.Command.extend({NAME:"draw2d.command.CommandResize",init:function(t,e){this._super(draw2d.Configuration.i18n.command.resizeShape),this.figure=t,this.oldBoundingBox=this.figure.getBoundingBox(),this.newBoundingBox=e},canExecute:function(){return!this.oldBoundingBox.equals(this.newBoundingBox)},execute:function(){this.redo()},undo:function(){this.figure.setBoundingBox(this.oldBoundingBox)},redo:function(){this.figure.setBoundingBox(this.newBoundingBox)}}),draw2d.command.CommandRemoveVertex=draw2d.command.Command.extend({NAME:"draw2d.command.CommandRemoveVertex",init:function(t,e){this._super(draw2d.Configuration.i18n.command.deleteVertex),this.line=t,this.index=e,this.oldPoint=t.getVertices().get(e).clone()},canExecute:function(){return!0},execute:function(){this.redo()},undo:function(){this.line.insertVertexAt(this.index,this.oldPoint.x,this.oldPoint.y)},redo:function(){this.line.removeVertexAt(this.index)}}),draw2d.command.CommandReplaceVertices=draw2d.command.Command.extend({NAME:"draw2d.command.CommandReplaceVertices",init:function(t,e,i){this._super(draw2d.Configuration.i18n.command.addSegment),this.line=t,this.originalVertices=e,this.newVertices=i},canExecute:function(){return!0},execute:function(){this.redo()},undo:function(){this.line.setVertices(this.originalVertices)},redo:function(){this.line.setVertices(this.newVertices)}}),draw2d.layout.connection.ConnectionRouter=Class.extend({NAME:"draw2d.layout.connection.ConnectionRouter",init:function(){},route:function(t,e){throw"subclasses must implement the method [ConnectionRouter.route]"},_paint:function(t){var e,i,n,s=t.getVertices(),r=s.get(0),o=t.getRadius(),a=["M",(0|r.x)+.5," ",(0|r.y)+.5],c=1;if(o>0){var h=r;for(e=s.getSize()-1;c<e;c++)r=s.get(c),i=draw2d.geo.Util.insetPoint(r,h,o),a.push("L",(0|i.x)+.5,",",(0|i.y)+.5),n=s.get(c+1),i=draw2d.geo.Util.insetPoint(r,n,o),a.push("Q",r.x,",",r.y," ",(0|i.x)+.5,", ",(0|i.y)+.5),h=r;r=s.get(c),a.push("L",(0|r.x)+.5,",",(0|r.y)+.5)}else for(e=s.getSize();c<e;c++)r=s.get(c),a.push("L",(0|r.x)+.5,",",(0|r.y)+.5);t.svgPathString=a.join("")},onInstall:function(t){},onUninstall:function(t){},canRemoveVertexAt:function(t){return!1},canRemoveSegmentAt:function(t){return!1},getPersistentAttributes:function(t,e){return e},setPersistentAttributes:function(t,e){},onDrag:function(t,e,i,n,s){},verticesSet:function(t){}}),draw2d.layout.connection.DirectRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.DirectRouter",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},invalidate:function(){},route:function(t,e){var i=t.getStartPoint(),n=t.getEndPoint();t.addPoint(i),t.addPoint(n);var s=["M",i.x," ",i.y];s.push("L",n.x," ",n.y),t.svgPathString=s.join("")}}),draw2d.layout.connection.RubberbandRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.RubberbandRouter",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},invalidate:function(){},route:function(t,e){var i=10,n=t.getStartPoint(),s=t.getEndPoint(),r=s.subtract(n),o=r.clone(),a=r.length(),c=1-Math.min(.75,.002*a),h=n.lerp(s,.25*c),l=n.lerp(s,.5),u=n.lerp(s,1-.25*c);i=Math.max(5,i*c),r.x=r.x/a*i,r.y=r.y/a*i,o.x=o.x/a*(i*c),o.y=o.y/a*(i*c);var d=new draw2d.geo.Point(-r.y+n.x,r.x+n.y),p=new draw2d.geo.Point(r.y+n.x,-r.x+n.y),f=new draw2d.geo.Point(-o.y+h.x,o.x+h.y),g=new draw2d.geo.Point(o.y+h.x,-o.x+h.y),m=new draw2d.geo.Point(-o.y+l.x,o.x+l.y),v=new draw2d.geo.Point(o.y+l.x,-o.x+l.y),y=new draw2d.geo.Point(-o.y+u.x,o.x+u.y),w=new draw2d.geo.Point(o.y+u.x,-o.x+u.y),x=new draw2d.geo.Point(-r.y+s.x,r.x+s.y),b=new draw2d.geo.Point(r.y+s.x,-r.x+s.y);t.addPoint(n),t.addPoint(s);var _=["M",d.x,",",d.y];_.push("A",i,",",i,"0 0 1 ",p.x,",",p.y),_.push("C",p.x,",",p.y,g.x,",",g.y,v.x,",",v.y),_.push("C",v.x,",",v.y,w.x,",",w.y,b.x,",",b.y),_.push("A",i,",",i,"0 0 1",x.x,",",x.y),_.push("C",x.x,",",x.y,y.x,",",y.y,m.x,",",m.y),_.push("C",m.x,",",m.y,f.x,",",f.y,d.x,",",d.y),t.svgPathString=_.join(" ")}}),draw2d.layout.connection.VertexRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.VertexRouter",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.VertexSelectionFeedbackPolicy)},invalidate:function(){},route:function(t,e){for(var i=e.oldVertices.getSize(),n=0;n<i;n++)t.addPoint(e.oldVertices.get(n));var s=t.getVertices(),r=t.getStartPoint(s.get(1)),o=t.getEndPoint(s.get(s.getSize()-2));s.first().setPosition(r),s.last().setPosition(o),this._paint(t)},canRemoveVertexAt:function(t,e){return!1},canRemoveSegmentAt:function(t,e){var i=t.getVertices().getSize()-1;return!(e<=0||e>=i)&&!(i<2)},getPersistentAttributes:function(t,e){return e.vertex=[],t.getVertices().each(function(t,i){e.vertex.push({x:i.x,y:i.y})}),e},setPersistentAttributes:function(t,e){$.isArray(e.vertex)&&e.vertex.length>1&&(t.oldPoint=null,t.lineSegments=new draw2d.util.ArrayList,t.setVertices(e.vertex))},onDrag:function(t,e,i,n,s){for(var r=t.getVertices().getSize()-1,o=1;o<r;o++)t.getVertex(o).translate(n,s)}}),draw2d.layout.connection.ManhattanConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanConnectionRouter",MINDIST:20,TOL:.1,TOLxTOL:.01,TOGGLE_DIST:20,init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},route:function(t,e){var i=t.getStartPoint(),n=t.getSource().getConnectionDirection(t.getTarget()),s=t.getEndPoint(),r=t.getTarget().getConnectionDirection(t.getSource());this._route(t,s,r,i,n),this._paint(t)},_route:function(t,e,i,n,s){var r,o,a,c=draw2d.geo.Rectangle.DIRECTION_UP,h=draw2d.geo.Rectangle.DIRECTION_RIGHT,l=draw2d.geo.Rectangle.DIRECTION_DOWN,u=draw2d.geo.Rectangle.DIRECTION_LEFT,d=e.x-n.x,p=e.y-n.y;return d*d<this.TOLxTOL&&p*p<this.TOLxTOL?void t.addPoint(new draw2d.geo.Point(n.x,n.y)):(i===u?d>0&&p*p<this.TOL&&s===h?(r=n,o=s):(d<0?r=new draw2d.geo.Point(e.x-this.MINDIST,e.y):p>0&&s===l||p<0&&s===c?r=new draw2d.geo.Point(n.x,e.y):i==s?(a=Math.min(e.x,n.x)-this.MINDIST,r=new draw2d.geo.Point(a,e.y)):r=new draw2d.geo.Point(e.x-d/2,e.y),o=p>0?c:l):i===h?d<0&&p*p<this.TOL&&s===u?(r=n,o=s):(d>0?r=new draw2d.geo.Point(e.x+this.MINDIST,e.y):p>0&&s===l||p<0&&s===c?r=new draw2d.geo.Point(n.x,e.y):i===s?(a=Math.max(e.x,n.x)+this.MINDIST,r=new draw2d.geo.Point(a,e.y)):r=new draw2d.geo.Point(e.x-d/2,e.y),o=p>0?c:l):i===l?d*d<this.TOL&&p<0&&s===c?(r=n,o=s):(p>0?r=new draw2d.geo.Point(e.x,e.y+this.MINDIST):d>0&&s===h||d<0&&s===u?r=new draw2d.geo.Point(e.x,n.y):i===s?(a=Math.max(e.y,n.y)+this.MINDIST,r=new draw2d.geo.Point(e.x,a)):r=new draw2d.geo.Point(e.x,e.y-p/2),o=d>0?u:h):i===c&&(d*d<this.TOL&&p>0&&s===l?(r=n,o=s):(p<0?r=new draw2d.geo.Point(e.x,e.y-this.MINDIST):d>0&&s===h||d<0&&s===u?r=new draw2d.geo.Point(e.x,n.y):i===s?(a=Math.min(e.y,n.y)-this.MINDIST,r=new draw2d.geo.Point(e.x,a)):r=new draw2d.geo.Point(e.x,e.y-p/2),o=d>0?u:h)),this._route(t,r,o,n,s),void t.addPoint(e))}}),draw2d.layout.connection.ManhattanBridgedConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanBridgedConnectionRouter",BRIDGE_HORIZONTAL_LR:" r 0 0 3 -4 7 -4 10 0 13 0 ",BRIDGE_HORIZONTAL_RL:" r 0 0 -3 -4 -7 -4 -10 0 -13 0 ",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},route:function(t,e){var i=t.getStartPoint(),n=t.getSource().getConnectionDirection(t.getTarget()),s=t.getEndPoint(),r=t.getTarget().getConnectionDirection(t.getSource());this._route(t,s,r,i,n);var o=t.getCanvas().getIntersection(t).sort("x"),a=o.clone().reverse(),c=o,h=0,l=t.getVertices(),u=l.get(0),d=["M",(0|u.x)+.5," ",(0|u.y)+.5],p=u;for(h=1;h<l.getSize();h++){u=l.get(h);var f=5,g=this.BRIDGE_HORIZONTAL_LR;p.x>u.x&&(c=a,g=this.BRIDGE_HORIZONTAL_RL,f=-f),c.each(function(t,e){0==e.justTouching&&draw2d.shape.basic.Line.hit(1,p.x,p.y,u.x,u.y,e.x,e.y)===!0&&u.y===e.y&&(d.push(" L",(e.x-f|0)+.5," ",(0|e.y)+.5),d.push(g))}),d.push(" L",(0|u.x)+.5," ",(0|u.y)+.5),p=u}t.svgPathString=d.join("")}}),draw2d.layout.connection.InteractiveManhattanConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.InteractiveManhattanConnectionRouter",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.OrthogonalSelectionFeedbackPolicy),t._routingMetaData||(t._routingMetaData={routedByUserInteraction:!1,fromDir:-1,toDir:-1})},onUninstall:function(t){delete t._routingMetaData},route:function(t,e){!e.oldVertices,0===e.oldVertices.getSize()||t._routingMetaData.routedByUserInteraction===!1?(this._super(t,e),t._routingMetaData.fromDir=t.getSource().getConnectionDirection(t.getTarget()),t._routingMetaData.toDir=t.getTarget().getConnectionDirection(t.getSource())):(this.halfRoute(t,e),this._paint(t))},halfRoute:function(t,e){var i=this.MINDIST,n=Math.max,s=Math.min;e=e||{};var r=e.oldVertices,o=r.getSize(),a=t.getStartPoint(),c=t.getSource().getConnectionDirection(t.getTarget()),h=t.getEndPoint(),l=t.getTarget().getConnectionDirection(t.getSource());if(t._routingMetaData.fromDir===c&&t._routingMetaData.toDir===l||(t._routingMetaData.routedByUserInteraction=!1,this.route(t,r)),c===draw2d.geo.Rectangle.DIRECTION_RIGHT&&l===draw2d.geo.Rectangle.DIRECTION_LEFT&&a.x>h.x&&o<=4&&(t._routingMetaData.routedByUserInteraction=!1,this.route(t,{oldVertices:r})),r.each(function(e,i){t.addPoint(i)}),!t.isInDragDrop){if(e.startMoved||!a.equals(r.get(0))){var u=r.get(1),d=r.get(2);switch(t.setVertex(0,a),c){case draw2d.geo.Rectangle.DIRECTION_RIGHT:t.setVertex(1,n(a.x+i,u.x),a.y),t.setVertex(2,n(a.x+i,u.x),d.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:t.setVertex(1,s(a.x-i,u.x),a.y),t.setVertex(2,s(a.x-i,u.x),d.y);break;case draw2d.geo.Rectangle.DIRECTION_UP:t.setVertex(1,a.x,s(a.y-i,u.y)),t.setVertex(2,d.x,s(a.y-i,u.y));break;case draw2d.geo.Rectangle.DIRECTION_DOWN:t.setVertex(1,a.x,n(a.y+i,u.y)),t.setVertex(2,d.x,n(a.y+i,u.y))}}if(e.endMoved||!h.equals(r.get(o-1))){var u=r.get(o-2),d=r.get(o-3);switch(t.setVertex(o-1,h),l){case draw2d.geo.Rectangle.DIRECTION_RIGHT:t.setVertex(o-2,n(h.x+i,u.x),h.y),t.setVertex(o-3,n(h.x+i,u.x),d.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:t.setVertex(o-2,s(h.x-i,u.x),h.y),t.setVertex(o-3,s(h.x-i,u.x),d.y);break;case draw2d.geo.Rectangle.DIRECTION_UP:t.setVertex(o-2,h.x,s(h.y-i,u.y)),t.setVertex(o-3,d.x,s(h.y-i,u.y));break;case draw2d.geo.Rectangle.DIRECTION_DOWN:t.setVertex(o-2,h.x,n(h.y+i,u.y)),t.setVertex(o-3,d.x,n(h.y+i,u.y))}}}},canRemoveSegmentAt:function(t,e){var i=t.getVertices().getSize()-1;if(e<=0||e+1>=i)return!1;if(i<4)return!1;var n=t.getStartPoint(),s=t.getSource().getConnectionDirection(t.getTarget()),r=t.getEndPoint(),o=t.getTarget().getConnectionDirection(t.getSource());if(i<=5){if(s===draw2d.geo.Rectangle.DIRECTION_RIGHT&&o===draw2d.geo.Rectangle.DIRECTION_LEFT&&n.x>=r.x)return!1;if(s==draw2d.geo.Rectangle.DIRECTION_LEFT&o==draw2d.geo.Rectangle.DIRECTION_RIGHT&&n.x<=r.x)return!1;if(s==draw2d.geo.Rectangle.DIRECTION_UP&o==draw2d.geo.Rectangle.DIRECTION_DOWN&&n.y<=r.y)return!1;if(s==draw2d.geo.Rectangle.DIRECTION_DOWN&o==draw2d.geo.Rectangle.DIRECTION_UP&&n.y>=r.y)return!1;var a=new draw2d.Connection;a.lineSegments=new draw2d.util.ArrayList,a.vertices=new draw2d.util.ArrayList,a.sourcePort=t.sourcePort,a.targetPort=t.targetPort,a._routingMetaData={routedByUserInteraction:!1,fromDir:-1,toDir:-1},this.route(a,{oldVertices:new draw2d.util.ArrayList});var c=t.getVertices().getSize()-1,h=a.getVertices().getSize()-1;if(c<=h)return!1}return!0},onDrag:function(t,e,i,n,s){var r=0;if(null!==t.draggedSegment){if(0!==t.draggedSegment.index&&t.draggedSegment.index!==t.getSegments().getSize()-1){t._routingMetaData.routedByUserInteraction=!0;var o=t.draggedSegment.start,a=t.draggedSegment.end;r=t.draggedSegment.index;var c=t.getVertices().first(),h=t.getVertices().last(),l=0;o.y===a.y?(1===r&&(l=o.y-c.y),r===t.getSegments().getSize()-2&&(l=a.y-h.y),l<0&&s>0?s=Math.min(s,-l-this.MINDIST):l>0&&s<0&&(s=-Math.min(-s,l-this.MINDIST)),t.getVertex(r).translate(0,s),t.getVertex(r+1).translate(0,s)):o.x===a.x&&(1===r&&(l=o.x-c.x,l<0&&n>0?n=Math.min(n,-l-this.MINDIST):l>0&&n<0&&(n=-Math.min(-n,l-this.MINDIST))),r===t.getSegments().getSize()-2&&(l=a.x-h.x,l<0&&n>0?n=Math.min(n,-l-this.MINDIST):l>0&&n<0&&(n=-Math.min(-n,l-this.MINDIST))),t.getVertex(r).translate(n,0),t.getVertex(r+1).translate(n,0))}}else{var u=t.getVertices().getSize()-1;for(r=1;r<u;r++)t.getVertex(r).translate(n,s)}},verticesSet:function(t){t._routingMetaData.routedByUserInteraction=!0,null!==t.getSource()&&null!==t.getTarget()&&(t._routingMetaData.fromDir=t.getSource().getConnectionDirection(t.getTarget()),t._routingMetaData.toDir=t.getTarget().getConnectionDirection(t.getSource()))},getPersistentAttributes:function(t,e){return e.vertex=[],t.getVertices().each(function(t,i){e.vertex.push({x:i.x,y:i.y})}),e.routingMetaData=$.extend({},t._routingMetaData),e},setPersistentAttributes:function(t,e){$.isArray(e.vertex)&&(t.oldPoint=null,t.lineSegments=new draw2d.util.ArrayList,t.setVertices(e.vertex)),"undefined"!=typeof e.routingMetaData&&(t._routingMetaData=$.extend({},e.routingMetaData))}}),draw2d.layout.connection.CircuitConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.CircuitConnectionRouter",init:function(){this._super(),this.setBridgeRadius(4),this.setVertexRadius(2),this.abortRoutingOnFirstVertexNode=!1},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},onUninstall:function(t){"undefined"!=typeof t.vertexNodes&&null!==t.vertexNodes&&(t.vertexNodes.remove(),t.vertexNodes=null)},setVertexRadius:function(t){return this.vertexRadius=t,this},setJunctionRadius:function(t){this.vertexRadius=t},setBridgeRadius:function(t){return this.bridgeRadius=t,this.bridge_LR=[" r",.5,-.5,t-t/2,-(t-t/4),t,-t,t+t/2,-(t-t/4),2*t,"0 "].join(" "),this.bridge_RL=[" r",-.5,-.5,-(t-t/2),-(t-t/4),-t,-t,-(t+t/2),-(t-t/4),2*-t,"0 "].join(" "),this},route:function(t,e){var i=t.getStartPoint(),n=t.getSource().getConnectionDirection(t.getTarget()),s=t.getEndPoint(),r=t.getTarget().getConnectionDirection(t.getSource());this._route(t,s,r,i,n);var o=t.getCanvas().getIntersection(t).sort("x"),a=o.clone().reverse(),c=o,h=0;"undefined"!=typeof t.vertexNodes&&null!==t.vertexNodes&&t.vertexNodes.remove(),t.vertexNodes=t.canvas.paper.set();var l=t.getVertices(),u=l.get(0),d=["M",(0|u.x)+.5," ",(0|u.y)+.5],p=u,f=null,g=null,m=null;for(h=1;h<l.getSize();h++)u=l.get(h),p.x>u.x?(c=a,g=this.bridge_RL,f=-this.bridgeRadius):(c=o,g=this.bridge_LR,f=this.bridgeRadius),c.each($.proxy(function(e,i){if(draw2d.shape.basic.Line.hit(1,p.x,p.y,u.x,u.y,i.x,i.y)===!0)if(t.sharingPorts(i.other)){var n=i.other,s=n.getZOrder(),r=t.getZOrder();if(r<s){var o=t.canvas.paper.ellipse(i.x,i.y,this.vertexRadius,this.vertexRadius).attr({fill:t.lineColor.hash()});t.vertexNodes.push(o),this.abortRoutingOnFirstVertexNode===!0&&(t.getSource()!=n.getSource()&&t.getSource()!=n.getTarget()||(d=["M",(0|i.x)+.5," ",(0|i.y)+.5],null!==m&&(m.remove(),t.vertexNodes.exclude(lastVerteNode))),m=o)}}else u.y===i.y&&(d.push(" L",(i.x-f|0)+.5," ",(0|i.y)+.5),d.push(g))},this)),d.push(" L",(0|u.x)+.5," ",(0|u.y)+.5),p=u;t.svgPathString=d.join("")}}),draw2d.layout.connection.SplineConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.SplineConnectionRouter",init:function(){this._super(),this.spline=new draw2d.util.spline.CubicSpline,this.MINDIST=50,this.cheapRouter=null},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},route:function(t,e){var i,n=t.getStartPoint(),s=t.getSource().getConnectionDirection(t.getTarget()),r=t.getEndPoint(),o=t.getTarget().getConnectionDirection(t.getSource());this._route(t,r,o,n,s);var a=t.getVertices();t.oldPoint=null,t.lineSegments=new draw2d.util.ArrayList,t.vertices=new draw2d.util.ArrayList;var c=this.spline.generate(a,8);c.each(function(e,i){t.addPoint(i)});var a=t.getVertices(),h=a.getSize(),l=a.get(0),u=["M",l.x," ",l.y];for(i=1;i<h;i++)l=a.get(i),u.push("L",l.x," ",l.y);t.svgPathString=u.join("")}}),draw2d.layout.connection.FanConnectionRouter=draw2d.layout.connection.DirectRouter.extend({NAME:"draw2d.layout.connection.FanConnectionRouter",init:function(){this._super()},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},route:function(t,e){var i=t.getSource().getConnections().clone();i.grep(function(e){return e.getTarget()===t.getTarget()||e.getSource()===t.getTarget()}),i.getSize()>1?this.routeCollision(t,i.indexOf(t)):this._super(t,e)},routeCollision:function(t,e){e+=1;var i,n=t.getStartPoint(),s=t.getEndPoint(),r=15,o=new draw2d.geo.Point((s.x+n.x)/2,(s.y+n.y)/2),a=s.getPosition(n);i=a==draw2d.geo.PositionConstants.SOUTH||a==draw2d.geo.PositionConstants.EAST?new draw2d.geo.Point(s.x-n.x,s.y-n.y):new draw2d.geo.Point(n.x-s.x,n.y-s.y);var c,h=Math.sqrt(i.x*i.x+i.y*i.y),l=r*i.x/h,u=r*i.y/h;c=e%2===0?new draw2d.geo.Point(o.x+e/2*(-1*u),o.y+e/2*l):new draw2d.geo.Point(o.x+e/2*u,o.y+e/2*(-1*l)),t.addPoint(n),t.addPoint(c),t.addPoint(s),this._paint(t)}});var ROUTER_RECTS=null;draw2d.layout.connection.MazeConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.MazeConnectionRouter",init:function(){this._super(),this.useSpline=!1,this.useSimplify=!0,this.useSimplifyValue=2,this.useDebug=!1,this.useShift=4,this.portOutletOffset=15,this.finder=new PF.JumpPointFinder({allowDiagonal:!1,dontCrossCorners:!0})},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},route:function(t,e){var i=t.getStartPoint(),n=t.getSource().getConnectionDirection(t.getTarget()),s=t.getEndPoint(),r=t.getTarget().getConnectionDirection(t.getSource());this._route(t,s,r,i,n),this._paint(t)},_route:function(t,e,i,n,s){var r=this.useShift,o=n,a=e;e=this.getAdjustedPoint(e,i,this.portOutletOffset),n=this.getAdjustedPoint(n,s,this.portOutletOffset);var c=this.generateNoGoGrid(t,e,i,n,s),h=this.finder.findPath(e.x>>r,e.y>>r,n.x>>r,n.y>>r,c);if($.each(h,function(t,e){e.x=e[0]=e[0]<<r,e.y=e[1]=e[1]<<r}),this.useDebug){null!==ROUTER_RECTS&&ROUTER_RECTS.remove(),ROUTER_RECTS=t.canvas.paper.set();for(var l=0;l<c.width;l++)for(var u=0;u<c.height;u++)c.isWalkableAt(l,u)||ROUTER_RECTS.push(t.canvas.paper.rect(l<<r,u<<r,1<<r,1<<r).attr({fill:"red",opacity:"0.1"}));ROUTER_RECTS.push(t.canvas.paper.rect(e.x-3,e.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"})),ROUTER_RECTS.push(t.canvas.paper.rect(n.x-3,n.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"})),$.each(h,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#0000ff",opacity:"0.8"}))});for(var d=h[0],p=["M",d.x," ",d.y],l=1;l<h.length;l++)d=h[l],p.push("L",d.x," ",d.y);p=p.join(""),ROUTER_RECTS.push(t.canvas.paper.path(p).attr({stroke:"#0000ff"}))}if(this.adjustPath(e,h,i),h.reverse(),this.adjustPath(n,h,s),h.reverse(),$.each(h,function(t,e){e.x=e[0],e.y=e[1]}),this.useSpline){var d=new draw2d.util.ArrayList;if(d.add(a),$.each(h,function(t,e){d.add(new draw2d.geo.Point(e[0],e[1]))}),d.add(o),this.useDebug){$.each(h,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});for(var f=h[0],p=["M",f.x," ",f.y],l=1;l<h.length;l++)f=h[l],p.push("L",f.x," ",f.y);p=p.join(""),ROUTER_RECTS.push(t.canvas.paper.path(p).attr({stroke:"#00ff00"}))}this.spline=new draw2d.util.spline.CubicSpline;var g=this.spline.generate(d,8);this.useSimplify?(h=[],g.each(function(t,e){h.push({x:e.x,y:e.y})}),h=this.simplify(h,this.useSimplifyValue,!0),$.each(h,function(e,i){t.addPoint(i.x,i.y)})):g.each(function(e,i){t.addPoint(i)})}else{if(this.useSimplify&&(h=this.simplify(h,this.useSimplifyValue,!0)),this.useDebug){$.each(h,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});for(var d=h[0],p=["M",d.x," ",d.y],l=1;l<h.length;l++)d=h[l],p.push("L",d.x," ",d.y);p=p.join(""),ROUTER_RECTS.push(t.canvas.paper.path(p).attr({stroke:"#00ff00"}))}t.addPoint(a),$.each(h,function(e,i){t.addPoint(i[0],i[1])}),t.addPoint(o)}},generateNoGoGrid:function(t,e,i,n,s){var r=this.useShift,o=(1<<r)/2,a=t.getCanvas().paper.width>>r,c=t.getCanvas().paper.height>>r,h=new PF.Grid(a,c),l=t.getCanvas().getFigures();l.each(function(t,i){var s=i.getBoundingBox();if(s.hitTest(e.x,e.y)!==!0&&!s.hitTest(n.x,n.y)){var a=s.x>>r,c=s.y>>r;if(!(a<1||c<1))for(var l=s.x+s.w+o>>r,u=s.y+s.h+o>>r,t=a;t<=l;t++)for(var d=c;d<=u;d++)h.setWalkableAt(t,d,!1)}});var u=t.getSource().getParent().getBoundingBox();if(1===s||3===s){var d=u.y>>r;if(d>0)for(var p=u.y+u.h,f=n.x>>r,g=d-1;g<<r<=p;g++)h.setWalkableAt(f,g,!0)}else{var m=u.x>>r;if(m>0)for(var v=u.x+u.w,g=n.x>>r,f=m-1;f<<r<=v;f++)h.setWalkableAt(f,g,!0)}if(u=t.getTarget().getParent().getBoundingBox(),1===i||3===i){var d=u.y>>r;if(d>0)for(var p=u.y+u.h,f=e.x>>r,g=d-1;g<<r<=p;g++)h.setWalkableAt(f,g,!0)}else{var m=u.x>>r;if(m>0)for(var v=u.x+u.w,g=e.x>>r,f=m-1;f<<r<=v;f++)h.setWalkableAt(f,g,!0)}return h},getAdjustedPoint:function(t,e,i){switch(e){case draw2d.geo.Rectangle.DIRECTION_UP:return new draw2d.geo.Point(t.x,t.y-i);case draw2d.geo.Rectangle.DIRECTION_RIGHT:return new draw2d.geo.Point(t.x+i,t.y);case draw2d.geo.Rectangle.DIRECTION_DOWN:return new draw2d.geo.Point(t.x,t.y+i);case draw2d.geo.Rectangle.DIRECTION_LEFT:return new draw2d.geo.Point(t.x-i,t.y)}},adjustPath:function(t,e,i){var n=this.useShift,s=t.x>>n,r=t.y>>n;$.each(e,function(e,i){return r===i[1]>>n&&void(i[1]=t.y)}),$.each(e,function(e,i){return s===i[0]>>n&&void(i[0]=t.x)})},getSquareDistance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},getSquareSegmentDistance:function(t,e,i){var n,s=e.x,r=e.y,o=i.x-s,a=i.y-r;return 0===o&&0===a||(n=((t.x-s)*o+(t.y-r)*a)/(o*o+a*a),n>1?(s=i.x,r=i.y):n>0&&(s+=o*n,r+=a*n)),o=t.x-s,a=t.y-r,o*o+a*a},simplifyRadialDistance:function(t,e){var i,n=t.length,s=null,r=t[0],o=[r];for(i=1;i<n;i++)s=t[i],this.getSquareDistance(s,r)>e&&(o.push(s),r=s);return r!==s&&o.push(s),o},simplifyDouglasPeucker:function(t,e){var i,n,s,r,o=t.length,a=typeof Uint8Array!=void 0+""?Uint8Array:Array,c=new a(o),h=0,l=o-1,u=[],d=[],p=[];for(c[h]=c[l]=1;l;){for(n=0,i=h+1;i<l;i++)s=this.getSquareSegmentDistance(t[i],t[h],t[l]),s>n&&(r=i,n=s);n>e&&(c[r]=1,u.push(h),d.push(r),u.push(r),d.push(l)),h=u.pop(),l=d.pop()}for(i=0;i<o;i++)c[i]&&p.push(t[i]);return p},simplify:function(t,e,i){var n=void 0!==e?e*e:1;return i||(t=this.simplifyRadialDistance(t,n)),t=this.simplifyDouglasPeucker(t,n)}}),draw2d.layout.connection.MuteableManhattanConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.MuteableManhattanConnectionRouter",UP:new draw2d.geo.Ray(0,(-1)),DOWN:new draw2d.geo.Ray(0,1),LEFT:new draw2d.geo.Ray((-1),0),RIGHT:new draw2d.geo.Ray(1,0),init:function(){this._super(),this.rowsUsed={},this.colsUsed={},this.constraints={},this.reservedInfo={}},route:function(t,e){this.rowsUsed={},this.colsUsed={},this.constraints={},this.reservedInfo={};var i,n=t.getCanvas(),s=t.getStartPoint(),r=t.getEndPoint(),o=new draw2d.geo.Ray(s),a=new draw2d.geo.Ray(r),c=new draw2d.geo.Ray((o.x+a.x)/2,(o.y+a.y)/2),h=new draw2d.geo.Ray(a.x-o.x,a.y-o.y),l=this.getStartDirection(t),u=this.getEndDirection(t),d=new draw2d.util.ArrayList,p=l.isHorizontal();if(p?d.add(o.y):d.add(o.x),p=!p,0===l.dot(u))l.dot(h)>=0&&u.dot(h)<=0||(i=l.dot(h)<0?l.similarity(o.translated(l.getScaled(10))):p?c.y:c.x,d.add(i),p=!p,i=u.dot(h)>0?u.similarity(a.translated(u.getScaled(10))):p?c.y:c.x,d.add(i),p=!p);else if(l.dot(u)>0)i=l.dot(h)>=0?l.similarity(o.translated(l.getScaled(10))):u.similarity(a.translated(u.getScaled(10))),d.add(i),p=!p;else{if(l.dot(h)<0&&(i=l.similarity(o.translated(l.getScaled(10))),d.add(i),p=!p),this.isCycle(t))i=p?t.getSource().getParent().getBoundingBox().getTop()-10:t.getSource().getParent().getBoundingBox().getRight()+10;else if(p){for(var f=c.y,g=u.similarity(a.translated(u.getScaled(10))),m=new draw2d.geo.Ray(d.get(d.getSize()-1),f),v=this.findFirstFigureAtStraightLine(n,m,this.LEFT,draw2d.util.ArrayList.EMPTY_LIST);null!=v&&v.getBoundingBox().x+v.getBoundingBox().width>g;)f=v.getBoundingBox().y+v.getBoundingBox().height+5,m.y=f,v=this.findFirstFigureAtStraightLine(n,m,this.LEFT,Collections.EMPTY_LIST);i=f}else{var v=this.findFirstFigureAtStraightLine(n,o,this.RIGHT,this.getExcludingFigures(t));null==v?i=c.x:(i=Math.min(c.x,o.translated(new draw2d.geo.Ray(3*(v.getBoundingBox().x-o.x)/4,0)).x),i=Math.max(o.x,i)),i=this.adjust(t,i)}d.add(i),p=!p}p?d.add(a.y):d.add(a.x),this.processPositions(o,a,d,l.isHorizontal(),t),this._paint(t)},getColumnNear:function(t,e,i,n){var s=Math.min(i,n),r=Math.max(i,n);s>e&&(r=s,s=e-(s-e)),r<e&&(s=r,r=e+(e-r));var o=0,a=-1;e%6!=0&&(e-=e%6);for(var c;o<e;){if(c=parseInt(e+o*a),!(c in this.colsUsed))return this.colsUsed[c]=c,this.reserveColumn(t,c),c;if(c<=s)return c+6;if(c>=r)return c-6;1===a?a=-1:(a=1,o+=6)}return e},getRowNear:function(t,e,i,n){var s=Math.min(i,n),r=Math.max(i,n);s>e&&(r=s,s=e-(s-e)),r<e&&(s=r,r=e+(e-r));var o=0,a=-1;e%6!=0&&(e-=e%6);for(var c;o<e;){if(c=parseInt(e+o*a),!(c in this.rowsUsed))return this.rowsUsed[c]=c,this.reserveRow(t,c),c;if(c<=s)return c+6;if(c>=r)return c-6;1==a?a=-1:(a=1,o+=6)}return e},getEndDirection:function(t){var e=t.getEndPoint(),i=t.getTarget().getParent().getBoundingBox();return this.getDirection(i,e)},getStartDirection:function(t){var e=t.getStartPoint(),i=t.getSource().getParent().getBoundingBox();return this.getDirection(i,e)},getDirection:function(t,e){var i=Math.abs(t.y-e.y),n=Math.abs(t.x-e.x),s=this.LEFT;return i<=n&&(n=i,s=this.UP),i=Math.abs(t.getBottom()-e.y),i<=n&&(n=i,s=this.DOWN),i=Math.abs(t.getRight()-e.x),i<n&&(n=i,s=this.RIGHT),s},processPositions:function(t,e,i,n,s){this.removeReservedLines(s);var r=[];n?r.push(t.x):r.oush(t.y);var o;for(o=0;o<i.getSize();o++)r.push(i.get(o));n==(i.getSize()%2==1)?r.push(e.x):r.push(e.y),s.addPoint(new draw2d.geo.Point(t.x,t.y));var a,c,h,l,u,d;for(o=2;o<r.length-1;o++)n=!n,h=r[o-1],c=r[o],d=o!==r.length-2,n?(d&&(l=r[o-2],u=r[o+2],r[o]=c=this.getRowNear(s,c,l,u)),a=new draw2d.geo.Point(h,c)):(d&&(l=r[o-2],u=r[o+2],r[o]=c=this.getColumnNear(s,c,l,u)),a=new draw2d.geo.Point(c,h)),s.addPoint(a);s.addPoint(new draw2d.geo.Point(e.x,e.y))},removeReservedLines:function(t){var e=this.reservedInfo[t];if("undefined"!=typeof e&&null!==e){for(var i=0;i<e.reservedRows.getSize();i++)delete this.rowsUsed[e.reservedRows.get(i)];for(var i=0;i<e.reservedCols.getSize();i++)delete this.colsUsed[e.reservedCols.get(i)];delete this.reservedInfo[t]}},reserveColumn:function(t,e){var i=this.reservedInfo[t];"undefined"!=typeof i&&null!==i||(i={reservedCols:new draw2d.util.ArrayList,reservedRows:new draw2d.util.ArrayList},this.reservedInfo[t]=i),i.reservedCols.add(e)},reserveRow:function(t,e){var i=this.reservedInfo[t];"undefined"!=typeof i&&null!==i||(i={reservedCols:new draw2d.util.ArrayList,reservedRows:new draw2d.util.ArrayList},this.reservedInfo[t]=i),i.reservedRows.add(e)},getConstraint:function(t){return this.constraints[t]},setConstraint:function(t,e){this.constraints[t]=e},isCycle:function(t){var e=t.getSource().getParent(),i=t.getTarget().getParent();return e.id===i.id},getExcludingFigures:function(t){var e=new draw2d.util.ArrayList;return e.add(t.getSource().getParent()),e.add(t.getTarget().getParent()),e},findFirstFigureAtStraightLine:function(t,e,i,n){
var s=null,r=t.getFigures(),o=this;return r.each(function(t,r){try{if(!n.contains(r)){var a=r.getBoundingBox();o.LEFT.equals(i)?e.x>a.x&&e.y>=a.y&&e.y<=a.y+a.h&&(null===s||a.x>s.getBoundingBox().x)&&(s=r):o.RIGHT.equals(i)?e.x<a.x+a.w&&e.y>=a.y&&e.y<=a.y+a.h&&(null==s||a.x<s.getBoundingBox().x)&&(s=r):o.UP.equals(i)?e.y>a.y&&e.x>=a.x&&e.x<=a.x+a.w&&(null===s||a.y>s.getBoundingBox().y)&&(s=r):o.DOWN.equals(i)&&e.y<a.y+a.h&&e.x>=a.x&&e.x<=a.x+a.w&&(null===s||a.y<s.getBoundingBox().y)&&(s=r)}}catch(t){console.log(t)}}),s},adjust:function(t,e){var i=e,n=t.getSource().getPosition(),s=t.getCanvas().getLines();return s.each(function(s,r){try{if(r===t)return;var o=r.getTarget().getPosition();n.x<o.x&&n.y==o.y&&r.getVertices().getMidpoint().x<=e&&(i=r.getVertices().getMidpoint().x-5)}catch(t){console.log(t)}}),i}}),draw2d.layout.connection.SketchConnectionRouter=draw2d.layout.connection.MazeConnectionRouter.extend({NAME:"draw2d.layout.connection.SketchConnectionRouter",init:function(){this._super(),this.useSpline=!0,this.useShift=5,this.useSimplifyValue=.2,this.finder=new PF.JumpPointFinder({allowDiagonal:!1,dontCrossCorners:!0})},onInstall:function(t){t.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)}}),draw2d.layout.mesh.MeshLayouter=Class.extend({init:function(){},add:function(t,e){return new draw2d.util.ArrayList}}),draw2d.layout.mesh.ExplodeLayouter=draw2d.layout.mesh.MeshLayouter.extend({MIN_MARGIN:40,init:function(){},add:function(t,e){var i=[];i[0]={x:0,y:0},i[1]={x:0,y:0},i[2]={x:0,y:0},i[3]={x:0,y:0},i[4]={x:0,y:0},i[5]={x:0,y:0},i[6]={x:0,y:0},i[7]={x:0,y:0},i[8]={x:0,y:0};var n=e.getBoundingBox(),s=t.getFigures(),r=null,o=0,a=0,c=null,h=0;for(h=0;h<s.getSize();h++)if(r=s.get(h),r!==e&&(o=r.getBoundingBox().getDistance(n),o<this.MIN_MARGIN))switch(a=this.determineOctant(n,r.getBoundingBox())){case 2:i[2].x=Math.max(i[2].x,this.MIN_MARGIN-o),i[3].x=Math.max(i[3].x,this.MIN_MARGIN-o),i[4].x=Math.max(i[4].x,this.MIN_MARGIN-o);break;case 3:i[2].x=Math.max(i[2].x,this.MIN_MARGIN-o),i[3].x=Math.max(i[3].x,this.MIN_MARGIN-o),i[4].x=Math.max(i[4].x,this.MIN_MARGIN-o);break;case 4:i[2].x=Math.max(i[2].x,this.MIN_MARGIN-o),i[3].x=Math.max(i[3].x,this.MIN_MARGIN-o),i[4].x=Math.max(i[4].x,this.MIN_MARGIN-o),i[4].y=Math.max(i[4].y,this.MIN_MARGIN-o),i[5].y=Math.max(i[5].y,this.MIN_MARGIN-o),i[6].y=Math.max(i[6].y,this.MIN_MARGIN-o);break;case 5:i[4].y=Math.max(i[4].y,this.MIN_MARGIN-o),i[5].y=Math.max(i[5].y,this.MIN_MARGIN-o),i[6].y=Math.max(i[6].y,this.MIN_MARGIN-o);break;case 6:i[4].y=Math.max(i[4].y,this.MIN_MARGIN-o),i[5].y=Math.max(i[5].y,this.MIN_MARGIN-o),i[6].y=Math.max(i[6].y,this.MIN_MARGIN-o);break;case 8:o=0|n.getBottomRight().getDistance(r.getBoundingBox().getTopLeft()),i[2].x=Math.max(i[2].x,this.MIN_MARGIN+o),i[3].x=Math.max(i[3].x,this.MIN_MARGIN+o),i[4].x=Math.max(i[4].x,this.MIN_MARGIN+o),i[4].y=Math.max(i[4].y,this.MIN_MARGIN+o),i[5].y=Math.max(i[5].y,this.MIN_MARGIN+o),i[6].y=Math.max(i[6].y,this.MIN_MARGIN+o),i[8].x=Math.max(i[8].x,this.MIN_MARGIN+o)}var l=new draw2d.util.ArrayList;for(h=0;h<s.getSize();h++)r=s.get(h),r!==e&&(a=this.determineOctant(n,r.getBoundingBox()),c=i[a],0===c.x&&0===c.y||l.add(new draw2d.layout.mesh.ProposedMeshChange(r,c.x,c.y)));return l},determineOctant:function(t,e){var i=t.x,n=t.y,s=t.w,r=t.h,o=e.x,a=e.y,c=e.w,h=e.h,l=0;return l=o+c<=i?a+h<=n?0:a>=n+r?6:7:o>=i+s?a+h<=n?2:a>=n+r?4:3:a+h<=n?1:a>=n+r?5:8}}),draw2d.layout.mesh.ProposedMeshChange=Class.extend({init:function(t,e,i){this.figure=t,this.x=e,this.y=i},getFigure:function(){return this.figure},getX:function(){return this.x},getY:function(){return this.y}}),draw2d.layout.locator.Locator=Class.extend({NAME:"draw2d.layout.locator.Locator",init:function(){},bind:function(t,e){e.setDraggable(!1),e.setSelectable(!1)},unbind:function(t,e){},relocate:function(t,e){e.repaint()},clone:function(){return eval("new "+this.NAME+"()")}}),draw2d.layout.locator.PortLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.PortLocator",init:function(){this._super()},applyConsiderRotation:function(t,e,i){var n=t.getParent(),s=n.getWidth()/2,r=n.getHeight()/2,o=n.getRotationAngle(),a=Raphael.matrix();if(a.rotate(o,s,r),90===o||270===o){var c=n.getHeight()/n.getWidth();a.scale(c,1/c,s,r)}t.setPosition(a.x(e,i),a.y(e,i))}}),draw2d.layout.locator.DraggableLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.DraggableLocator",init:function(){this._super()},bind:function(t,e){e.setSelectionAdapter(function(){return e})},unbind:function(t,e){e.setSelectionAdapter(null)}}),draw2d.layout.locator.SmartDraggableLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.SmartDraggableLocator",init:function(){this._super(),this.boundedCorners={init:!1,parent:0,child:0,dist:Number.MAX_SAFE_INTEGER,xOffset:0,yOffset:0}},bind:function(t,e){var i=this,n=function(){i.boundedCorners={init:!1,parent:0,child:0,dist:Number.MAX_SAFE_INTEGER,xOffset:0,yOffset:0};var t,n,s,r,o,a=e.getParent().getBoundingBox().getVertices(),c=e.getBoundingBox().getVertices();for(t=0;t<a.getSize();t++)for(n=0;n<c.getSize();n++)s=a.get(t),r=c.get(n),o=Math.abs(s.distance(r)),o<i.boundedCorners.dist&&(i.boundedCorners={parent:t,child:n,dist:o,xOffset:s.x-r.x,yOffset:s.y-r.y});i.boundedCorners.init=!0};e.setSelectionAdapter(function(){return e}),e.getParent().on("added",n),e.on("dragend",n)},unbind:function(t,e){e.setSelectionAdapter(null)},relocate:function(t,e){if(this._super(t,e),this.boundedCorners.init===!0){var i=e.getParent().getBoundingBox().getVertices(),n=e.getBoundingBox().getVertices(),s=i.get(this.boundedCorners.parent),r=n.get(this.boundedCorners.child),o=s.x-r.x,a=s.y-r.y;e.translate(o-this.boundedCorners.xOffset,a-this.boundedCorners.yOffset)}}}),draw2d.layout.locator.XYAbsPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.XYAbsPortLocator",init:function(t,e){this._super(),this.x=t,this.y=e},relocate:function(t,e){this.applyConsiderRotation(e,this.x,this.y)}}),draw2d.layout.locator.XYRelPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.XYRelPortLocator",init:function(t,e){this._super(),this.x=t,this.y=e},relocate:function(t,e){var i=e.getParent(),n=i.getWidth()/100*this.x,s=i.getHeight()/100*this.y;this.applyConsiderRotation(e,n,s)}}),draw2d.layout.locator.InputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.InputPortLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=1,s=this.NAME,r=1;i.getPorts().each(function(t,i){r=i===e?n:r,n+=i.getLocator().NAME===s?1:0}),this.applyConsiderRotation(e,0,i.getHeight()/n*r)}}),draw2d.layout.locator.OutputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.OutputPortLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=1,s=this.NAME,r=1;i.getPorts().each(function(t,i){r=i===e?n:r,n+=i.getLocator().NAME===s?1:0}),this.applyConsiderRotation(e,i.getWidth(),i.getHeight()/n*r)}}),draw2d.layout.locator.ConnectionLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.ConnectionLocator",init:function(){this._super()}}),draw2d.layout.locator.ManhattanMidpointLocator=draw2d.layout.locator.ConnectionLocator.extend({NAME:"draw2d.layout.locator.ManhattanMidpointLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=i.getVertices(),s=Math.floor((n.getSize()-2)/2);if(!(n.getSize()<=s+1)){var r=n.get(s),o=n.get(s+1),a=(o.x-r.x)/2+r.x-e.getWidth()/2|0,c=(o.y-r.y)/2+r.y-e.getHeight()/2|0;e.setPosition(a,c)}}}),draw2d.layout.locator.PolylineMidpointLocator=draw2d.layout.locator.ManhattanMidpointLocator.extend({NAME:"draw2d.layout.locator.PolylineMidpointLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=i.getVertices();if(n.getSize()%2===0)this._super(t,e);else{var t=Math.floor(n.getSize()/2),s=n.get(t);e.setPosition(s.x-e.getWidth()/2,s.y-e.getHeight()/2)}}}),draw2d.layout.locator.ParallelMidpointLocator=draw2d.layout.locator.ConnectionLocator.extend({NAME:"draw2d.layout.locator.ParallelMidpointLocator",init:function(t){this._super(),"undefined"!=typeof t?this.distanceFromConnection=parseFloat(t):this.distanceFromConnection=-5},relocate:function(t,e){var i=e.getParent(),n=i.getVertices(),s=Math.floor((n.getSize()-2)/2);if(!(n.getSize()<=s+1)){var r=n.get(s),o=n.get(s+1),a=this.distanceFromConnection<=0?this.distanceFromConnection-e.getHeight():this.distanceFromConnection,c=r.x-o.x,h=r.y-o.y,l=Math.sqrt(c*c+h*h),u=-Math.asin(h/l),d=180/Math.PI*u;u<0?o.x<r.x?(u=Math.abs(u)+Math.PI,d=360-d,a=-a-e.getHeight()):(u=2*Math.PI-Math.abs(u),d=360+d):o.x<r.x&&(u=Math.PI-u,d=360-d,a=-a-e.getHeight());var p=this.rotate(l/2-e.getWidth()/2,a,0,0,u),f=this.rotate(0,0,e.getWidth()/2,e.getHeight()/2,u);e.setRotationAngle(d),e.setPosition(p.x-f.x+r.x,p.y-f.y+r.y)}},rotate:function(t,e,i,n,s){var r=Math.cos,o=Math.sin;return{x:(t-i)*r(s)-(e-n)*o(s)+i,y:(t-i)*o(s)+(e-n)*r(s)+n}}}),draw2d.layout.locator.TopLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.TopLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=i.getBoundingBox(),s=i instanceof draw2d.Port?n.w/2:0,r=e.getBoundingBox();e instanceof draw2d.Port?e.setPosition(n.w/2-s,0):e.setPosition(n.w/2-r.w/2-s,-(r.h+2))}}),draw2d.layout.locator.BottomLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.BottomLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=i.getBoundingBox(),s=i instanceof draw2d.Port?n.w/2:0,r=e.getBoundingBox();e instanceof draw2d.Port?e.setPosition(n.w/2-s,n.h):e.setPosition(n.w/2-r.w/2-s,2+n.h)}}),draw2d.layout.locator.LeftLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.LeftLocator",init:function(t){this._super(),this.margin=t&&"margin"in t?t.margin:5},relocate:function(t,e){var i=e.getParent(),n=i.getBoundingBox(),s=i instanceof draw2d.Port?n.h/2:0;if(e instanceof draw2d.Port)e.setPosition(0,n.h/2-s);else{var r=e.getBoundingBox();e.setPosition(-r.w-this.margin,n.h/2-r.h/2-s)}}}),draw2d.layout.locator.RightLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.RightLocator",init:function(t){this._super(),this.margin=t&&"margin"in t?t.margin:5},relocate:function(t,e){var i=e.getParent(),n=i.getBoundingBox(),s=i instanceof draw2d.Port?n.h/2:0;if(e instanceof draw2d.Port)e.setPosition(n.w,n.h/2-s);else{var r=e.getBoundingBox();e.setPosition(n.w+this.margin,n.h/2-r.h/2-s)}}}),draw2d.layout.locator.CenterLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.CenterLocator",init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=i.getBoundingBox();if(e instanceof draw2d.Port)e.setPosition(n.w/2,n.h/2);else{var s=e.getBoundingBox();e.setPosition((n.w/2-s.w/2|0)+.5,(n.h/2-s.h/2|0)+.5)}}}),draw2d.policy.EditPolicy=Class.extend({NAME:"draw2d.policy.EditPolicy",init:function(t,e,i){this.setterWhitelist=$.extend({},e),this.getterWhitelist=$.extend({},i),this.attr(t)},attr:function(t,e){if($.isPlainObject(t))for(key in t){var i=this.setterWhitelist[key];i?i.call(this,t[key]):$.isFunction(t[key])&&(this[key]=$.proxy(t[key],this))}else if("string"==typeof t){if("undefined"==typeof e){var n=this.getterWhitelist[t];if($.isFunction(n))return n.call(this);return}$.isFunction(e)&&(e=e());var s=this.setterWhitelist[t];s&&s.call(this,e)}else if("undefined"==typeof t){var r={};for(key in this.getterWhitelist)r[key]=this.getterWhitelist[key].call(this);return r}return this},onInstall:function(t){},onUninstall:function(t){}}),draw2d.policy.canvas.CanvasPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.canvas.CanvasPolicy",init:function(t,e,i){this.canvas=null,this._super(t,e,i)},onInstall:function(t){this.canvas=t},onUninstall:function(t){this.canvas=null},onClick:function(t,e,i,n,s){},onMouseMove:function(t,e,i,n,s){},onDoubleClick:function(t,e,i,n,s){},onMouseDown:function(t,e,i,n,s){},onMouseDrag:function(t,e,i,n,s,r,o){},onMouseUp:function(t,e,i,n,s){},onRightMouseDown:function(t,e,i,n,s){},onMouseWheel:function(t,e,i,n,s){return!0},snap:function(t,e,i,n){return i},createMonochromGif:function(t,e,i,n){n=new draw2d.util.Color(n);for(var s=String.fromCharCode(t%256)+String.fromCharCode(t/256)+String.fromCharCode(e%256)+String.fromCharCode(e/256),r="GIF89a"+s+"ð\0\0ÿÿÿ"+String.fromCharCode(n.red)+String.fromCharCode(n.green)+String.fromCharCode(n.blue)+"!ù\0\0\0\0,\0\0\0\0"+s+"\0",o={bit:1,byte_:0,data:"",writeBit:function(t){t&&(this.byte_|=this.bit),this.bit<<=1,256==this.bit&&(this.bit=1,this.data+=String.fromCharCode(this.byte_),this.byte_=0)},get:function(){var t="",e=this.data;1!=this.bit&&(e+=String.fromCharCode(this.byte_));for(var i=0;i<e.length+1;i+=255)chunklen=e.length-i,chunklen<0&&(chunklen=0),chunklen>255&&(chunklen=255),t+=String.fromCharCode(chunklen)+e.substring(i,i+255);return t+"\0"}},a=0;a<e;a++)for(var c=0;c<t;c++)o.writeBit(i[c+t*a]),o.writeBit(0),o.writeBit(0),o.writeBit(0),o.writeBit(0),o.writeBit(1);return r+=o.get()+";","data:image/gif;base64,"+draw2d.util.Base64.encode(r)}}),draw2d.policy.canvas.ZoomPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.ZoomPolicy",init:function(){this._super()},onInstall:function(t){this._super(t),t.setZoom(1)},onUninstall:function(t){this._super(t)},setZoom:function(t,e){var i=this.canvas,n=function(t){i.zoomFactor=Math.min(Math.max(.01,t),10);var e=i.initialWidth*i.zoomFactor|0,n=i.initialHeight*i.zoomFactor|0;i.paper.setViewBox(0,0,e,n),i.fireEvent("zoom",{value:i.zoomFactor})};if(e){var s=new Tweenable;s.tween({from:{x:i.zoomFactor},to:{x:t},duration:300,easing:"easeOutSine",step:function(t){n(t.x)},finish:function(t){i.fireEvent("zoomed",{value:i.zoomFactor})}})}else n(t),i.fireEvent("zoomed",{value:i.zoomFactor})}}),draw2d.policy.canvas.WheelZoomPolicy=draw2d.policy.canvas.ZoomPolicy.extend({NAME:"draw2d.policy.canvas.WheelZoomPolicy",init:function(){this._super(),this.center=null;var t=this;this.debouncedZoomedCallback=this._debounce(function(){var e=t.canvas;null!==e&&e.fireEvent("zoomed",{value:e.zoomFactor}),t.center=null},200)},onInstall:function(t){this._super(t),t.setZoom(1),t.__wheelZoom=1},onUninstall:function(t){this._super(t),delete t.__wheelZoom},onMouseWheel:function(t,e,i,n,s){if(n===!1)return!0;t/=1024;var r=(1e4*Math.min(5,Math.max(.1,this.canvas.zoomFactor+t))|0)/1e4;if(null===this.center){var o=this.canvas.fromCanvasToDocumentCoordinate(e,i);this.center={x:e,y:i,clientX:o.x,clientY:o.y}}return this._zoom(r,this.center),this.debouncedZoomedCallback(),!1},setZoom:function(t,e){var i=this.canvas.getScrollTop(),n=this.canvas.getScrollLeft(),s=this.canvas.getScrollArea().width(),r=this.canvas.getScrollArea().width(),o=i+r/2*this.canvas.zoomFactor,a=n+s/2*this.canvas.zoomFactor,c=this;if(e){var h=new Tweenable;h.tween({from:{x:this.canvas.zoomFactor},to:{x:t},duration:300,easing:"easeOutSine",step:function(t){c._zoom(t.x,a,o)},finish:function(t){c.debouncedZoomedCallback()}})}else this._zoom(t,{x:a,y:o}),this.debouncedZoomedCallback()},_zoom:function(t,e){var i=this.canvas;if(t!==i.zoomFactor){if(i.zoomFactor=t,i.paper.setViewBox(0,0,i.initialWidth,i.initialHeight),$(i.html).find("svg").attr({width:i.initialWidth/t,height:i.initialHeight/t}),e.clientX){var n=i.fromCanvasToDocumentCoordinate(e.x,e.y);i.scrollTo(this.canvas.getScrollTop()-(e.clientY-n.y),i.getScrollLeft()-(e.clientX-n.x))}i.fireEvent("zoom",{value:i.zoomFactor})}},_debounce:function(t,e,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||t.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(s,r)}}}),draw2d.policy.canvas.KeyboardPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.KeyboardPolicy",init:function(t,e,i){this._super(t,e,i)},onKeyUp:function(t,e,i,n){},onKeyDown:function(t,e,i,n){}}),draw2d.policy.canvas.DefaultKeyboardPolicy=draw2d.policy.canvas.KeyboardPolicy.extend({NAME:"draw2d.policy.canvas.DefaultKeyboardPolicy",init:function(){this._super()},onKeyDown:function(t,e,i,n){if(46===e&&null!==t.getPrimarySelection()){t.getCommandStack().startTransaction(draw2d.Configuration.i18n.command.deleteShape);var s=t.getSelection();s.each(function(e,i){if(i instanceof draw2d.Connection){if(s.contains(i.getSource(),!0))return;if(s.contains(i.getTarget(),!0))return}var n=i.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE));null!==n&&t.getCommandStack().execute(n)}),t.getCommandStack().commitTransaction()}else this._super(t,e,i,n)}}),draw2d.policy.canvas.ExtendedKeyboardPolicy=draw2d.policy.canvas.KeyboardPolicy.extend({NAME:"draw2d.policy.canvas.ExtendedKeyboardPolicy",init:function(){this._super()},onKeyDown:function(t,e,i,n){if(null!==t.getPrimarySelection()&&n===!0)switch(e){case 71:t.getPrimarySelection()instanceof draw2d.shape.composite.Group&&1===t.getSelection().getSize()?t.getCommandStack().execute(new draw2d.command.CommandUngroup(t,t.getPrimarySelection())):t.getCommandStack().execute(new draw2d.command.CommandGroup(t,t.getSelection()));break;case 66:t.getPrimarySelection().toBack();break;case 70:t.getPrimarySelection().toFront()}else this._super(t,e,i,n)}}),draw2d.policy.canvas.SelectionPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SelectionPolicy",init:function(t,e,i){this._super(t,e,i)},select:function(t,e){},unselect:function(t,e){t.getSelection().remove(e),e.unselect(),t.fireEvent("unselect",{figure:e}),t.fireEvent("select",{figure:null})}}),draw2d.policy.canvas.SingleSelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.SingleSelectionPolicy",init:function(){this._super(),this.mouseMovedDuringMouseDown=!1,this.mouseDraggingElement=null,this.mouseDownElement=null},select:function(t,e){if(!t.getSelection().contains(e)){var i=t.getSelection().getPrimary();null!==t.getSelection().getPrimary()&&this.unselect(t,t.getSelection().getPrimary()),null!==e&&e.select(!0),t.getSelection().setPrimary(e),i!==e&&t.fireEvent("select",{figure:e})}},onMouseDown:function(t,e,i,n,s){this.mouseMovedDuringMouseDown=!1;for(var r=!0,o=t.getBestFigure(e,i);null!==o;){var a=o.getSelectionAdapter()();if(a===o)break;o=a}o instanceof draw2d.Port||(null!==o&&o.isDraggable()&&(r=o.onDragStart(e-o.getAbsoluteX(),i-o.getAbsoluteY(),n,s),this.mouseDraggingElement=r===!1?null:o),this.mouseDownElement=o,null!==this.mouseDownElement&&this.mouseDownElement.fireEvent("mousedown",{x:e,y:i,shiftKey:n,ctrlKey:s}),o!==t.getSelection().getPrimary()&&null!==o&&o.isSelectable()===!0&&(this.select(t,o),o instanceof draw2d.shape.basic.Line?o instanceof draw2d.Connection||(t.draggingLineCommand=o.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),null!==t.draggingLineCommand&&(t.draggingLine=o)):r===!1&&o.unselect()))},onMouseDrag:function(t,e,i,n,s,r,o){if(this.mouseMovedDuringMouseDown=!0,null!==this.mouseDraggingElement){var a=t.getSelection();a.contains(this.mouseDraggingElement)?a.each(function(t,a){a.onDrag(e,i,n,s,r,o)}):this.mouseDraggingElement.onDrag(e,i,n,s,r,o);var c=t.fromDocumentToCanvasCoordinate(t.mouseDownX+e/t.zoomFactor,t.mouseDownY+i/t.zoomFactor),h=t.getBestFigure(c.x,c.y,this.mouseDraggingElement);h!==t.currentDropTarget&&(null!==t.currentDropTarget&&(t.currentDropTarget.onDragLeave(this.mouseDraggingElement),t.currentDropTarget.fireEvent("dragLeave",{draggingElement:this.mouseDraggingElement}),t.currentDropTarget=null),null!==h&&(t.currentDropTarget=h.delegateTarget(this.mouseDraggingElement),null!==t.currentDropTarget&&(t.currentDropTarget.onDragEnter(this.mouseDraggingElement),t.currentDropTarget.fireEvent("dragEnter",{draggingElement:this.mouseDraggingElement}))))}else null===this.mouseDownElement||this.mouseDownElement instanceof draw2d.Connection||(null!==this.mouseDownElement.panningDelegate?(this.mouseDownElement.panningDelegate.fireEvent("panning",{dx:e,dy:i,dx2:n,dy2:s,shiftKey:r,ctrlKey:o}),this.mouseDownElement.panningDelegate.onPanning(e,i,n,s,r,o)):(this.mouseDownElement.fireEvent("panning",{dx:e,dy:i,dx2:n,dy2:s,shiftKey:r,ctrlKey:o}),this.mouseDownElement.onPanning(e,i,n,s,r,o)))},onMouseUp:function(t,e,i,n,s){if(null!==this.mouseDraggingElement){var r=new draw2d.util.ArrayList;this.mouseDraggingElement instanceof draw2d.shape.node.Node&&t.lineIntersections.each(function(t,e){r.contains(e.line)||r.add(e.line),r.contains(e.other)||r.add(e.other)}),t.getCommandStack().startTransaction();var o=t.getSelection().getAll();o.contains(this.mouseDraggingElement)?t.getSelection().getAll().each(function(t,r){r.onDragEnd(e,i,n,s)}):this.mouseDraggingElement.onDragEnd(e,i,n,s),null===t.currentDropTarget||this.mouseDraggingElement.isResizeHandle||(this.mouseDraggingElement.onDrop(t.currentDropTarget,e,i,n,s),t.currentDropTarget.onDragLeave(this.mouseDraggingElement),t.currentDropTarget.fireEvent("dragLeave",{draggingElement:this.mouseDraggingElement}),t.currentDropTarget.onCatch(this.mouseDraggingElement,e,i,n,s),t.currentDropTarget=null),t.getCommandStack().commitTransaction(),this.mouseDraggingElement instanceof draw2d.shape.node.Node&&(t.lineIntersections.each(function(t,e){r.contains(e.line)||r.add(e.line),r.contains(e.other)||r.add(e.other)}),r.each(function(t,e){e.svgPathString=null,e.repaint()})),this.mouseDraggingElement=null}else null===this.mouseDownElement||this.mouseDownElement instanceof draw2d.Connection||(null!==this.mouseDownElement.panningDelegate?(this.mouseDownElement.panningDelegate.fireEvent("panningEnd"),this.mouseDownElement.panningDelegate.onPanningEnd()):(this.mouseDownElement.fireEvent("panningEnd"),this.mouseDownElement.onPanningEnd()));null===this.mouseDownElement&&this.mouseMovedDuringMouseDown===!1&&this.select(t,null),null!==this.mouseDownElement&&this.mouseDownElement.fireEvent("mouseup",{x:e,y:i,shiftKey:n,ctrlKey:s}),this.mouseDownElement=null,this.mouseMovedDuringMouseDown=!1},onClick:function(t,e,i,n,s){null!==t&&(t.fireEvent("click",{figure:t,x:e,y:i,relX:e-t.getAbsoluteX(),relY:i-t.getAbsoluteY(),shiftKey:n,ctrlKey:s}),t.onClick())},onDoubleClick:function(t,e,i,n,s){null!==t&&(t.fireEvent("dblclick",{x:e,y:i,shiftKey:n,ctrlKey:s}),t.onDoubleClick())}}),draw2d.policy.canvas.GhostMoveSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.GhostMoveSelectionPolicy",init:function(){this.clone=null,this.ghostRectangle1=null,this.ghostRectangle2=null,this._super()},onMouseDrag:function(t,e,i,n,s,r,o){if(this.mouseMovedDuringMouseDown=!0,null!==this.mouseDraggingElement){var a=t.getSelection().getAll();a.contains(this.mouseDraggingElement)?(null===this.ghostRectangle1?(this.ghostRectangle1=new draw2d.shape.basic.Rectangle,this.ghostRectangle1.setBackgroundColor("#303030"),this.ghostRectangle1.setAlpha(.1),this.ghostRectangle2=new draw2d.shape.basic.Rectangle,this.ghostRectangle2.setDashArray("- "),this.ghostRectangle2.setStroke(1),this.ghostRectangle2.setColor("#5497DC"),this.ghostRectangle2.setBackgroundColor(null),this.ghostRectangle1.setBoundingBox(this.mouseDraggingElement.getBoundingBox()),this.ghostRectangle2.setBoundingBox(this.mouseDraggingElement.getBoundingBox()),this.ghostRectangle1.setCanvas(t),this.ghostRectangle1.toFront(),this.ghostRectangle2.setCanvas(t),this.ghostRectangle2.toFront(),this.clone=this.mouseDraggingElement.clone(),this.clone instanceof draw2d.shape.node.Node&&this.clone.resetPorts(),this.clone.setCanvas(t),this.clone.getShapeElement(),this.clone.setAlpha(.4),this.clone.repaint()):(this.ghostRectangle1.translate(n,s),this.ghostRectangle2.translate(n,s),this.clone.translate(n,s)),a.each(function(t,n){n._newPos=new draw2d.geo.Point(n.ox+e,n.oy+i)})):this.mouseDraggingElement.onDrag(e,i,n,s,r,o);var c=t.fromDocumentToCanvasCoordinate(t.mouseDownX+e/t.zoomFactor,t.mouseDownY+i/t.zoomFactor),h=t.getBestFigure(c.x,c.y,this.mouseDraggingElement);h!==t.currentDropTarget&&(null!==t.currentDropTarget&&(t.currentDropTarget.onDragLeave(this.mouseDraggingElement),t.currentDropTarget.fireEvent("dragLeave",{draggingElement:this.draggingElement}),t.currentDropTarget=null),null!==h&&(t.currentDropTarget=h.delegateTarget(this.mouseDraggingElement),null!==t.currentDropTarget&&(t.currentDropTarget.onDragEnter(this.mouseDraggingElement),t.currentDropTarget.fireEvent("dragEnter",{draggingElement:this.draggingElement}))))}else null===this.mouseDownElement||this.mouseDownElement instanceof draw2d.Connection||(null!==this.mouseDownElement.panningDelegate?(this.mouseDownElement.panningDelegate.fireEvent("panning",{dx:e,dy:i,dx2:n,dy2:s,shiftKey:r,ctrlKey:o}),this.mouseDownElement.panningDelegate.onPanning(e,i,n,s,r,o)):(this.mouseDownElement.fireEvent("panning",{dx:e,dy:i,dx2:n,dy2:s,shiftKey:r,ctrlKey:o}),this.mouseDownElement.onPanning(e,i,n,s,r,o)))},onMouseUp:function(t,e,i,n,s){if(null!==this.ghostRectangle1&&(this.ghostRectangle1.setCanvas(null),this.ghostRectangle1=null,this.ghostRectangle2.setCanvas(null),this.ghostRectangle2=null,this.clone.setCanvas(null),this.clone=null),null!==this.mouseDraggingElement){var r=new draw2d.util.ArrayList;this.mouseDraggingElement instanceof draw2d.shape.node.Node&&t.lineIntersections.each(function(t,e){r.contains(e.line)||r.add(e.line),r.contains(e.other)||r.add(e.other)}),t.getCommandStack().startTransaction();var o=t.getSelection().getAll();o.contains(this.mouseDraggingElement)?t.getSelection().getAll().each(function(t,r){r._newPos&&(r.setPosition(r._newPos),delete r._newPos),r.onDragEnd(e,i,n,s)}):this.mouseDraggingElement.onDragEnd(e,i,n,s),null===t.currentDropTarget||this.mouseDraggingElement.isResizeHandle||(this.mouseDraggingElement.onDrop(t.currentDropTarget,e,i,n,s),t.currentDropTarget.onDragLeave(this.mouseDraggingElement),t.currentDropTarget.onCatch(this.mouseDraggingElement,e,i,n,s),t.currentDropTarget=null),t.getCommandStack().commitTransaction(),this.mouseDraggingElement instanceof draw2d.shape.node.Node&&(t.lineIntersections.each(function(t,e){r.contains(e.line)||r.add(e.line),r.contains(e.other)||r.add(e.other)}),r.each(function(t,e){e.svgPathString=null,e.repaint()})),this.mouseDraggingElement=null}null===this.mouseDownElement&&this.mouseMovedDuringMouseDown===!1&&this.select(t,null),this.mouseDownElement=null,this.mouseMovedDuringMouseDown=!1}}),draw2d.policy.canvas.PanningSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.PanningSelectionPolicy",init:function(){this._super()},onMouseDrag:function(t,e,i,n,s,r,o){if(this._super(t,e,i,n,s,r,o),null===this.mouseDraggingElement&&null===this.mouseDownElement){var a=t.getScrollArea();a.scrollTop(a.scrollTop()-s),a.scrollLeft(a.scrollLeft()-n)}}}),draw2d.policy.canvas.BoundingboxSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.BoundingboxSelectionPolicy",init:function(){this.isInsideMode=function(t,e){return t.isInside(e)},this.intersectsMode=function(t,e){return t.intersects(e)},this.decision=this.isInsideMode,this._super(),this.boundingBoxFigure1=null,this.boundingBoxFigure2=null,this.x=0,this.y=0,this.canDrawBoundingBox=!1},select:function(t,e){if(!t.getSelection().contains(e)){var i=t.getSelection().getPrimary();null!==e&&e.select(!0),i!==e&&(t.getSelection().setPrimary(e),t.fireEvent("select",{figure:e}));var n=this,s=t.getSelection();t.getLines().each(function(e,i){i instanceof draw2d.Connection&&s.contains(i.getSource().getRoot())&&s.contains(i.getTarget().getRoot())&&n.select(t,i,!1)})}},setDecisionMode:function(t){return t===!0?this.decision=this.intersectsMode:this.decision=this.isInsideMode,this},onMouseDown:function(t,e,i,n,s){try{var r=this;this.x=e,this.y=i;var o=t.getSelection().getAll();this.mouseMovedDuringMouseDown=!1;var a=!0;this.canDrawBoundingBox=!1;for(var c=t.getBestFigure(e,i);null!==c;){var h=c.getSelectionAdapter()();if(h===c)break;c=h}if(c instanceof draw2d.Port)return;this.canDrawBoundingBox=!0,null!==c&&c.isDraggable()&&(a=c.onDragStart(e-c.getAbsoluteX(),i-c.getAbsoluteY(),n,s),this.mouseDraggingElement=a===!1?null:c),this.mouseDownElement=c,null!==this.mouseDownElement&&this.mouseDownElement.fireEvent("mousedown",{x:e,y:i,shiftKey:n,ctrlKey:s}),n===!1&&(null===this.mouseDownElement||this.mouseDownElement.isResizeHandle!==!1||o.contains(this.mouseDownElement)||o.each(function(e,i){r.unselect(t,i)})),c!==t.getSelection().getPrimary()&&null!==c&&c.isSelectable()===!0&&(this.select(t,c),c instanceof draw2d.shape.basic.Line?c instanceof draw2d.Connection||(t.draggingLineCommand=c.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),null!==t.draggingLineCommand&&(t.draggingLine=c)):a===!1&&c.unselect()),null!==this.mouseDownElement&&this.mouseDownElement.isResizeHandle===!1&&(o=t.getSelection().getAll(),o.each(function(e,i){var o=1,a=1,c=i.getHandleBBox();null!==c&&(c.translate(i.getAbsolutePosition().scale(-1)),o=c.x+1,a=c.y+1);var h=i.onDragStart(o,a,n,s,!0);i instanceof draw2d.shape.basic.Line||h===!1&&r.unselect(t,i)}))}catch(t){console.log(t)}},onMouseDrag:function(t,e,i,n,s,r,o){if(this.canDrawBoundingBox!==!1)try{this._super(t,e,i,n,s,r,o),null===this.mouseDraggingElement&&null===this.mouseDownElement&&null===this.boundingBoxFigure1&&(this.boundingBoxFigure1=new draw2d.shape.basic.Rectangle({width:1,height:1,x:this.x,y:this.y,bgColor:"#d4d1d4",alpha:.1}),this.boundingBoxFigure1.setCanvas(t),this.boundingBoxFigure2=new draw2d.shape.basic.Rectangle({width:1,height:1,x:this.x,y:this.y,dash:"--..",stroke:.5,color:"#37a8ff",bgColor:null}),this.boundingBoxFigure2.setCanvas(t)),null!==this.boundingBoxFigure1&&(this.boundingBoxFigure1.setDimension(Math.abs(e),Math.abs(i)),this.boundingBoxFigure1.setPosition(this.x+Math.min(0,e),this.y+Math.min(0,i)),this.boundingBoxFigure2.setDimension(Math.abs(e),Math.abs(i)),this.boundingBoxFigure2.setPosition(this.x+Math.min(0,e),this.y+Math.min(0,i)))}catch(t){console.log(t)}},onMouseUp:function(t,e,i,n,s){try{var r=this;if(null===this.mouseDownElement)t.getSelection().getAll().each(function(e,i){r.unselect(t,i)});else if(this.mouseDownElement instanceof draw2d.ResizeHandle||this.mouseDownElement instanceof draw2d.shape.basic.LineResizeHandle);else if(null!==this.mouseDownElement&&this.mouseMovedDuringMouseDown===!1){var o=t.getSelection().getAll();o.contains(this.mouseDownElement)||t.getSelection().getAll().each(function(e,i){r.unselect(t,i)})}if(this._super(t,e,i,n,s),null!==this.boundingBoxFigure1){var a=this.boundingBoxFigure1.getBoundingBox();t.getFigures().each(function(e,i){if(i.isSelectable()===!0&&r.decision(i.getBoundingBox(),a)){var o=1,c=1,h=i.getHandleBBox();null!==h&&(h.translate(i.getAbsolutePosition().scale(-1)),o=h.x+1,c=h.y+1);var l=i.onDragStart(o,c,n,s);l===!0&&r.select(t,i,!1)}}),this.boundingBoxFigure1.setCanvas(null),this.boundingBoxFigure1=null,this.boundingBoxFigure2.setCanvas(null),this.boundingBoxFigure2=null}}catch(t){console.log(t)}}}),draw2d.policy.canvas.ReadOnlySelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.ReadOnlySelectionPolicy",init:function(t,e,i){this._super(t,e,i)},onInstall:function(t){this._super(t),t.getAllPorts().each(function(t,e){e.setVisible(!1)})},onUninstall:function(t){t.getAllPorts().each(function(t,e){e.setVisible(!0)}),this._super(t)},onMouseDrag:function(t,e,i,n,s,r,o){var a=t.getScrollArea();a.scrollTop(a.scrollTop()-s),a.scrollLeft(a.scrollLeft()-n)}}),draw2d.policy.canvas.DecorationPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.DecorationPolicy",init:function(t,e,i){this._super(t,e,i)}}),draw2d.policy.canvas.FadeoutDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.FadeoutDecorationPolicy",DEFAULT_FADEOUT_DURATION:60,DEFAULT_ALPHA_DECREMENT:.05,init:function(){this._super(),this.alpha=1,this.alphaDec=this.DEFAULT_ALPHA_DECREMENT,this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION,this.portDragging=!1},onInstall:function(t){
this._super(t),this.timerId=window.setInterval($.proxy(this.onTimer,this),50),this.hidePortsCounter=1,this.alpha=.1},onUninstall:function(t){window.clearInterval(this.timerId),this.canvas.getAllPorts().each(function(t,e){e.setAlpha(1)}),this._super(t)},onTimer:function(){this.hidePortsCounter--;var t=this;this.hidePortsCounter<=0&&this.alpha>0?(this.alpha=Math.max(0,this.alpha-this.alphaDec),this.canvas.getAllPorts().each(function(e,i){i.setAlpha(t.alpha)}),this.canvas.getSelection().getAll().each(function(e,i){i.selectionHandles.each(function(e,i){i.setAlpha(t.alpha)})})):this.hidePortsCounter>0&&1!==this.alpha&&(this.alpha=1,this.alphaDec=this.DEFAULT_ALPHA_DECREMENT,this.duringHide=!1,this.canvas.getAllPorts().each(function(e,i){i.setAlpha(t.alpha)}),this.canvas.getSelection().getAll().each(function(e,i){i.selectionHandles.each(function(e,i){i.setAlpha(t.alpha)})}))},onMouseDown:function(t,e,i,n,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION,this.portDragging=t.getBestFigure(e,i)instanceof draw2d.Port},onMouseMove:function(t,e,i,n,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION,this.portDragging=!1},onMouseDrag:function(t,e,i,n,s,r,o){this.portDragging===!1&&(this.hidePortsCounter=0,this.alphaDec=.1,this.onTimer())},onMouseUp:function(t,e,i,n,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION,this.portDragging=!1}}),draw2d.policy.canvas.CoronaDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.CoronaDecorationPolicy",init:function(t,e,i){this.startDragX=0,this.startDragY=0,this.diameterToBeFullVisible=0,this.diameterToBeVisible=0,this.sumDiameter=0,this._super($.extend({diameterToBeVisible:200,diameterToBeFullVisible:20},t),$.extend({diameterToBeVisible:this.setDiameterToBeVisible,diameterToBeFullVisible:this.setDiameterToBeFullVisible},e),$.extend({diameterToBeVisible:this.getDiameterToBeVisible,diameterToBeFullVisible:this.getDiameterToBeFullVisible},i))},setDiameterToBeVisible:function(t){this.diameterToBeVisible=t,this.sumDiameter=this.diameterToBeFullVisible+this.diameterToBeVisible},getDiameterToBeVisible:function(){return this.diameterToBeVisible},setDiameterToBeFullVisible:function(t){this.diameterToBeFullVisible=t,this.sumDiameter=this.diameterToBeFullVisible+this.diameterToBeVisible},getDiameterToBeFullVisible:function(){return this.diameterToBeFullVisible},onInstall:function(t){this._super(t);var e=t.getFigures();e.each(function(t,e){e.getPorts().each(function(t,e){e.setVisible(!1)})})},onUninstall:function(t){this._super(t);var e=t.getFigures();e.each(function(t,e){e.getPorts().each(function(t,e){e.__origAlpha&&(e.setAlpha(e.__origAlpha),delete e.__origAlpha),e.setVisible(!0)})})},onMouseDown:function(t,e,i,n,s){this.startDragX=e,this.startDragY=i},onMouseMove:function(t,e,i,n,s){this.updatePorts(t,e,i)},onMouseDrag:function(t,e,i,n,s,r,o){this.updatePorts(t,this.startDragX+e,this.startDragY+i)},updatePorts:function(t,e,i){var n=t.getFigures(),s=this;n.each(function(t,n){n instanceof draw2d.shape.node.Node&&(n.isVisible()===!0&&n.hitTest(e,i,s.sumDiameter)===!0?n.getPorts().each(function(t,r){r.isVisible()===!1&&(r.__origAlpha=n.getAlpha());var o=n.getBoundingBox().getDistance(new draw2d.geo.Point(e,i)),a=1-100/(s.diameterToBeVisible-s.diameterToBeFullVisible)*o/100;r.setAlpha(a),r.setVisible(!0)}):n.getPorts().each(function(t,e){e.__origAlpha&&(e.setAlpha(e.__origAlpha),delete e.__origAlpha),e.setVisible(!1)}))})}}),draw2d.SnapToHelper={},draw2d.SnapToHelper.NORTH=1,draw2d.SnapToHelper.SOUTH=4,draw2d.SnapToHelper.WEST=8,draw2d.SnapToHelper.EAST=16,draw2d.SnapToHelper.CENTER_H=32,draw2d.SnapToHelper.CENTER_V=642,draw2d.SnapToHelper.NORTH_EAST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.EAST,draw2d.SnapToHelper.NORTH_WEST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.SOUTH_EAST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.EAST,draw2d.SnapToHelper.SOUTH_WEST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.NORTH_SOUTH=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.SOUTH,draw2d.SnapToHelper.EAST_WEST=draw2d.SnapToHelper.EAST|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.NSEW=draw2d.SnapToHelper.NORTH_SOUTH|draw2d.SnapToHelper.EAST_WEST,draw2d.policy.canvas.SnapToEditPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SnapToEditPolicy",init:function(t,e,i){this.lineColor=null,this._super($.extend({lineColor:"#51C1FC"},t),$.extend({lineColor:this.setLineColor},e),$.extend({lineColor:this.getLineColor},i))},setLineColor:function(t){return this.lineColor=new draw2d.util.Color(t),this},getLineColor:function(){return this.lineColor},snap:function(t,e,i,n){return i}}),draw2d.policy.canvas.ShowGridEditPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.ShowGridEditPolicy",GRID_COLOR:"#f0f0f0",GRID_WIDTH:20,init:function(t){this.color=new draw2d.util.Color(this.GRID_COLOR),this.zoom=1,this.svg=null,this._super(),"number"==typeof t?this.grid=t:this.grid=this.GRID_WIDTH},onInstall:function(t){this._super(t),this.zoom=t.getZoom(),this.setGrid(this.grid)},onUninstall:function(t){this._super(t),null!==this.svg&&this.svg.remove()},setGridColor:function(t){this.color=new draw2d.util.Color(t),this.setGrid(this.grid)},setGrid:function(t){if(this.grid=t,null!=this.canvas){null!==this.svg&&this.svg.remove();var e,i=this.canvas.paper,n=this.grid,s=i.width,r=i.height,o={stroke:this.color.hash()};for(i.setStart(),e=n+.5;e<r;e+=n)i.path([["M",0,e],["L",s,e]]).attr(o);for(e=n+.5;e<s;e+=n)i.path([["M",e,0],["L",e,r]]).attr(o);this.svg=i.setFinish(),this.svg.toBack()}}}),draw2d.policy.canvas.SnapToGridEditPolicy=draw2d.policy.canvas.ShowGridEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGridEditPolicy",init:function(t){this._super(t)},snap:function(t,e,i,n){if(e instanceof draw2d.shape.basic.Line)return i;var s=e.getSnapToGridAnchor();return i.x=i.x+s.x,i.y=i.y+s.y,i.x=this.grid*Math.floor((i.x+this.grid/2)/this.grid),i.y=this.grid*Math.floor((i.y+this.grid/2)/this.grid),i.x=i.x-s.x,i.y=i.y-s.y,i}}),draw2d.policy.canvas.ShowDotEditPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.ShowDotEditPolicy",DOT_COLOR:"#999999",DOT_RADIUS:1,DOT_DISTANCE:20,init:function(t,e,i){this._super(),this.dotDistance=t?t:this.DOT_DISTANCE,this.dotRadius=e?e:this.DOT_RADIUS,this.dotColor=new draw2d.util.Color(i?i:this.DOT_COLOR);var n=Array(this.dotDistance*this.dotDistance);n[0]=1,this.imageDataURL=this.createMonochromGif(this.dotDistance,this.dotDistance,n,this.dotColor)},onInstall:function(t){this._super(t),this.oldBg=this.canvas.html.css("background-image"),$(t.paper.canvas).css({"background-image":"url('"+this.imageDataURL+"')"})},onUninstall:function(t){this._super(t),$(t.paper.canvas).css({"background-image":this.oldBg})}}),draw2d.policy.canvas.ShowChessboardEditPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.ShowChessboardEditPolicy",GRID_COLOR:"#e0e0e0",GRID_WIDTH:20,init:function(t){this._super(),this.cells=null,t?this.grid=t:this.grid=this.GRID_WIDTH},onInstall:function(t){this._super(t),this.showGrid()},onUninstall:function(t){this.cells.remove(),this._super(t)},showGrid:function(){var t=this.canvas.initialWidth,e=this.canvas.initialHeight;this.cells=this.canvas.paper.set();for(var i=!1,n=i,s=0;s<t;s+=this.grid){for(var r=0;r<e;r+=this.grid){if(i){var o=this.canvas.paper.rect(s,r,this.grid,this.grid);o.attr({fill:this.GRID_COLOR,"stroke-width":0}),this.cells.push(o)}i=!i}n=!n,i=n}this.cells.toBack()}}),draw2d.policy.canvas.SnapToGeometryEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGeometryEditPolicy",SNAP_THRESHOLD:3,FADEOUT_DURATION:300,init:function(t,e,i){this._super(t,e,i),this.rows=null,this.cols=null,this.vline=null,this.hline=null},onMouseUp:function(t,e,i,n,s){this.rows=null,this.cols=null,this.hideVerticalLine(),this.hideHorizontalLine()},snap:function(t,e,i,n){if(e instanceof draw2d.shape.basic.Line)return i;var s,r=i.x===n.x,o=i.y===n.y;if(!r&&!o)return i;if(e instanceof draw2d.ResizeHandle){var a=e.getSnapToGridAnchor();i.x+=a.x,i.y+=a.y;var c=e.getSnapToDirection();return s=this.snapPoint(c,i),r&&c&draw2d.SnapToHelper.EAST_WEST&&!(s.edge&draw2d.SnapToHelper.EAST_WEST)?this.showVerticalLine(e,draw2d.SnapToHelper.WEST,s.point.x):this.hideVerticalLine(),o&&c&draw2d.SnapToHelper.NORTH_SOUTH&&!(s.edge&draw2d.SnapToHelper.NORTH_SOUTH)?this.showHorizontalLine(e,draw2d.SnapToHelper.NORTH,s.point.y):this.hideHorizontalLine(),s.point.x=r?s.point.x-a.x:i.x,s.point.y=o?s.point.y-a.y:i.y,s.point}var h=new draw2d.geo.Rectangle(i.x,i.y,e.getWidth(),e.getHeight());return s=this.snapRectangle(h),r||(s.bounds.x=i.x),o||(s.bounds.y=i.y),!r||s.edge&draw2d.SnapToHelper.WEST?!r||s.edge&draw2d.SnapToHelper.EAST?this.hideVerticalLine():this.showVerticalLine(e,draw2d.SnapToHelper.EAST,s.bounds.x+s.bounds.getWidth()):this.showVerticalLine(e,draw2d.SnapToHelper.WEST,s.bounds.x),!o||s.edge&draw2d.SnapToHelper.NORTH?!o||s.edge&draw2d.SnapToHelper.SOUTH?this.hideHorizontalLine():this.showHorizontalLine(e,draw2d.SnapToHelper.SOUTH,s.bounds.y+s.bounds.getHeight()):this.showHorizontalLine(e,draw2d.SnapToHelper.NORTH,s.bounds.y),s.bounds.getTopLeft()},snapRectangle:function(t){var e=t.clone(),i=this.snapPoint(draw2d.SnapToHelper.NORTH_WEST,t.getTopLeft());e.x=i.point.x,e.y=i.point.y;var n=this.snapPoint(draw2d.SnapToHelper.SOUTH_EAST,t.getBottomRight());return i.edge&draw2d.SnapToHelper.WEST&&(e.x=n.point.x-t.getWidth()),i.edge&draw2d.SnapToHelper.NORTH&&(e.y=n.point.y-t.getHeight()),{edge:i.edge|n.edge,bounds:e}},snapPoint:function(t,e){var i=e.clone();if(null!==this.rows&&null!==this.cols||this.populateRowsAndCols(),0!==(t&draw2d.SnapToHelper.EAST)){var n=this.getCorrectionFor(this.cols,e.x+1,1);n!==this.SNAP_THRESHOLD&&(t&=~draw2d.SnapToHelper.EAST,i.x+=n)}if(0!==(t&draw2d.SnapToHelper.WEST)){var s=this.getCorrectionFor(this.cols,e.x,-1);s!==this.SNAP_THRESHOLD&&(t&=~draw2d.SnapToHelper.WEST,i.x+=s)}if(0!==(t&draw2d.SnapToHelper.SOUTH)){var r=this.getCorrectionFor(this.rows,e.y+1,1);r!==this.SNAP_THRESHOLD&&(t&=~draw2d.SnapToHelper.SOUTH,i.y+=r)}if(0!==(t&draw2d.SnapToHelper.NORTH)){var o=this.getCorrectionFor(this.rows,e.y,-1);o!==this.SNAP_THRESHOLD&&(t&=~draw2d.SnapToHelper.NORTH,i.y+=o)}return{edge:t,point:i}},populateRowsAndCols:function(){var t=this.canvas.getSelection();this.rows=[],this.cols=[];for(var e=this.canvas.getFigures(),i=0;i<e.getSize();i++){var n=e.get(i);if(!t.contains(n,!0)){var s=n.getBoundingBox();this.cols.push({type:-1,location:s.x}),this.cols.push({type:0,location:s.x+(s.w-1)/2}),this.cols.push({type:1,location:s.getRight()+1}),this.rows.push({type:-1,location:s.y}),this.rows.push({type:0,location:s.y+(s.h-1)/2}),this.rows.push({type:1,location:s.getBottom()+1})}}},getCorrectionFor:function(t,e,i){for(var n=this.SNAP_THRESHOLD,s=this.SNAP_THRESHOLD,r=0;r<t.length;r++){var o,a=t[r];a.type===-1&&0!==i?(o=Math.abs(e-a.location),o<n&&(n=o,s=a.location-e)):0===a.type&&0===i?(o=Math.abs(e-a.location),o<n&&(n=o,s=a.location-e)):1===a.type&&0!==i&&(o=Math.abs(e-a.location),o<n&&(n=o,s=a.location-e))}return s},showVerticalLine:function(t,e,i){null!=this.vline&&(this.vline.stop(),this.vline.remove());var n=this.canvas.getFigures().clone();if(n.removeAll(this.canvas.getSelection().getAll(!0)),n.map(function(t){return t.getBoundingBox()}),n.grep(function(t){return Math.abs(t.x-i)<=1||Math.abs(t.getRight()-i)<=1}),0!==n.getSize()){var s=t.getBoundingBox(),r=s.getCenter();n.sort(function(t,e){var i=t.getCenter().getDistance(r),n=e.getCenter().getDistance(r);return i-n});var o=0,a=this.canvas.getHeight()*Math.max(1,this.canvas.getZoom()),c=a,h=n.get(0);s.y<h.y?(o=s.y,c=h.getBottom()-s.y):(o=h.y,c=s.getBottom()-h.y),i=(0|i)+.5,this.canvas.paper.setStart(),this.canvas.paper.path("M "+i+" 0 l 0 "+a).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+i+" "+o+" l 0 "+c).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.vline=this.canvas.paper.setFinish(),this.vline.toBack()}},hideVerticalLine:function(){null!=this.vline&&this.vline.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.vline&&(this.vline.remove(),this.vline=null)},this))},showHorizontalLine:function(t,e,i){null!=this.hline&&(this.hline.stop(),this.hline.remove());var n=this.canvas.getFigures().clone();if(n.removeAll(this.canvas.getSelection().getAll(!0)),n.map(function(t){return t.getBoundingBox()}),n.grep(function(t){return Math.abs(t.y-i)<=1||Math.abs(t.getBottom()-i)<=1}),0!==n.getSize()){var s=t.getBoundingBox(),r=s.getCenter();n.sort(function(t,e){var i=t.getCenter().getDistance(r),n=e.getCenter().getDistance(r);return i-n});var o,a=0,c=o=this.canvas.getWidth()*Math.max(1,this.canvas.getZoom()),h=n.get(0);s.x<h.x?(a=s.x,c=h.getRight()-s.x):(a=h.x,c=s.getRight()-h.x),i=(0|i)+.5,this.canvas.paper.setStart(),this.canvas.paper.path("M 0 "+i+" l "+o+" 0").attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+a+" "+i+" l "+c+" 0").attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.hline=this.canvas.paper.setFinish(),this.hline.toBack()}},hideHorizontalLine:function(){null!==this.hline&&this.hline.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.hline&&(this.hline.remove(),this.hline=null)},this))}}),draw2d.policy.canvas.SnapToVerticesEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToVerticesEditPolicy",SNAP_THRESHOLD:3,FADEOUT_DURATION:300,init:function(t,e,i){this._super(t,e,i),this.constraints=null,this.vline=null,this.hline=null},onMouseUp:function(t,e,i,n,s){this.constraints=null,this.hideVerticalLine(),this.hideHorizontalLine()},snap:function(t,e,i,n){if(!(e instanceof draw2d.shape.basic.VertexResizeHandle))return i;var s=i.x===n.x,r=i.y===n.y;if(!s&&!r)return i;var o=i.clone(),a=this.getCorrectionFor(e,n);return s&&a.vertical.x!==Number.MAX_SAFE_INTEGER?(o.x=a.vertical.x,this.showVerticalLine(n,a.vertical)):this.hideVerticalLine(),r&&a.horizontal.y!==Number.MAX_SAFE_INTEGER?(o.y=a.horizontal.y,this.showHorizontalLine(n,a.horizontal)):this.hideHorizontalLine(),o},getCorrectionFor:function(t,e){var i=this;if(null===this.constraints){this.constraints=[];var n=this.canvas.getLines();n.each(function(e,n){n.getVertices().each(function(e,s){t.index===e&&t.owner===n||i.constraints.push(s)})})}for(var s,r,o=this.SNAP_THRESHOLD,a={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER,diffy:Number.MAX_SAFE_INTEGER},c={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER,diffx:Number.MAX_SAFE_INTEGER},h=0;h<this.constraints.length;h++){var l=this.constraints[h];s=Math.abs(e.x-l.x),r=Math.abs(e.y-l.y),s<o&&r<a.diffy&&(a={x:l.x,y:l.y,diffy:r}),r<o&&s<c.diffx&&(c={x:l.x,y:l.y,diffx:s})}return{vertical:a,horizontal:c}},showVerticalLine:function(t,e){null!=this.vline&&(this.vline.stop(),this.vline.remove());var i=this.canvas.getHeight(),n=(0|e.x)+.5;this.canvas.paper.setStart(),this.canvas.paper.path("M "+n+" 0 l 0 "+i).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+n+" "+t.y+" L "+n+" "+e.y).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.vline=this.canvas.paper.setFinish(),this.vline.toBack()},hideVerticalLine:function(){null!=this.vline&&this.vline.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.vline&&(this.vline.remove(),this.vline=null)},this))},showHorizontalLine:function(t,e){null!=this.hline&&(this.hline.stop(),this.hline.remove());var i=this.canvas.getWidth(),n=(0|e.y)+.5;this.canvas.paper.setStart(),this.canvas.paper.path("M 0 "+n+" l "+i+" 0").attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+t.x+" "+n+" L "+e.x+" "+n).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.hline=this.canvas.paper.setFinish(),this.hline.toBack()},hideHorizontalLine:function(){null!==this.hline&&this.hline.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.hline&&(this.hline.remove(),this.hline=null)},this))}}),draw2d.policy.canvas.SnapToInBetweenEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToInBetweenEditPolicy",SNAP_THRESHOLD:5,FADEOUT_DURATION:500,init:function(t,e,i){this._super(t,e,i),this.bounds=null,this.horizontalGuideLines=null,this.verticalGuideLines=null},onMouseUp:function(t,e,i,n,s){this.bounds=null,this.hideHorizontalGuides(!1),this.hideVerticalGuides(!1)},snap:function(t,e,i,n){if(e instanceof draw2d.ResizeHandle)return i;if(e instanceof draw2d.shape.basic.Line)return i;var s=i.x===n.x,r=i.y===n.y,o=new draw2d.geo.Rectangle(i.x,i.y,e.getWidth(),e.getHeight());if(i=i.clone(),s===!0){var a=this.snapHorizontal(o);a.snapped?(this.showHorizontalGuides(e,a),i.x+=a.diff):this.hideHorizontalGuides(!0)}else this.hideHorizontalGuides(!0);if(r===!0){var c=this.snapVertical(o);c.snapped?(this.showVerticalGuides(e,c),i.y+=c.diff):this.hideVerticalGuides(!0)}else this.hideVerticalGuides(!0);return i},snapHorizontal:function(t){var e=t.getCenter();null===this.bounds&&this.populateBounds();var i={point:e,snapped:!1,snappedBox:t.clone()},n=null,s=[],r=e.clone();if(r.x=0,this.bounds.forEach(function(t,i){n=draw2d.shape.basic.Line.intersection(t.getTopRight(),t.getBottomRight(),e,r),null!==n&&(n.causedBBox=t,s.push(n))}),0===s.length)return i;s.sort(function(t,e){return e.x-t.x});var o=[],a=e.clone();if(a.x=Number.MAX_SAFE_INTEGER,this.bounds.forEach(function(t,i){n=draw2d.shape.basic.Line.intersection(t.getTopLeft(),t.getBottomLeft(),e,a),null!==n&&(n.causedBBox=t,o.push(n))}),0===o.length)return i;o.sort(function(t,e){return t.x-e.x});var c=t.clone(),h=(s[0].x+o[0].x)/2-e.x;return c.x+=h,{snapped:Math.abs(h)<this.SNAP_THRESHOLD,snappedRect:c,diff:h,leftSide:s[0],rightSide:o[0]}},snapVertical:function(t){var e=t.getCenter();null===this.bounds&&this.populateBounds();var i={point:e,snapped:!1,snappedBox:t.clone()},n=null,s=[],r=e.clone();if(r.y=0,this.bounds.forEach(function(t){n=draw2d.shape.basic.Line.intersection(t.getBottomLeft(),t.getBottomRight(),e,r),null!==n&&(n.causedBBox=t,s.push(n))}),0===s.length)return i;s.sort(function(t,e){return e.y-t.y});var o=[],a=e.clone();if(a.y=Number.MAX_SAFE_INTEGER,this.bounds.forEach(function(t){n=draw2d.shape.basic.Line.intersection(t.getTopLeft(),t.getTopRight(),e,a),null!==n&&(n.causedBBox=t,o.push(n))}),0===o.length)return i;o.sort(function(t,e){return t.y-e.y});var c=t.clone(),h=(s[0].y+o[0].y)/2-e.y;return c.y+=h,{snapped:Math.abs(h)<this.SNAP_THRESHOLD,snappedRect:c,diff:h,topSide:s[0],bottomSide:o[0]}},populateBounds:function(){var t=this.canvas.getSelection().getAll(!0),e=this.bounds=[],i=this.canvas.getFigures();i.each(function(i,n){t.contains(n)||e.push(n.getBoundingBox())})},showHorizontalGuides:function(t,e){null!=this.horizontalGuideLines&&(this.horizontalGuideLines.stop(),this.horizontalGuideLines.remove());var i=e.snappedRect.getTopLeft(),n=e.snappedRect.getTopRight(),s=(Math.min(e.leftSide.causedBBox.getTopRight().y,Math.min(e.rightSide.causedBBox.y,t.getY()))-50|0)+.5;this.canvas.paper.setStart(),this.canvas.paper.path("M "+((0|e.leftSide.x)+.5)+" "+s+" L "+((0|e.leftSide.x)+.5)+" "+e.leftSide.y).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+((0|i.x)+.5)+" "+s+" L "+((0|i.x)+.5)+" "+i.y).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+((0|n.x)+.5)+" "+s+" L "+((0|n.x)+.5)+" "+n.y).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+((0|e.rightSide.x)+.5)+" "+s+" L "+((0|e.rightSide.x)+.5)+" "+e.rightSide.y).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+e.leftSide.x+" "+(s+5)+" L "+i.x+" "+(s+5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path("M "+e.rightSide.x+" "+(s+5)+" L "+n.x+" "+(s+5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(e.leftSide.x+5)+" "+s+" L "+e.leftSide.x+" "+(s+5)+" L "+(e.leftSide.x+5)+" "+(s+10)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(i.x-5)+" "+s+" L "+i.x+" "+(s+5)+" L "+(i.x-5)+" "+(s+10)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(n.x+5)+" "+s+" L "+n.x+" "+(s+5)+" L "+(n.x+5)+" "+(s+10)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(e.rightSide.x-5)+" "+s+" L "+e.rightSide.x+" "+(s+5)+" L "+(e.rightSide.x-5)+" "+(s+10)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.horizontalGuideLines=this.canvas.paper.setFinish(),this.horizontalGuideLines.toFront()},hideHorizontalGuides:function(t){null!=this.horizontalGuideLines&&(t===!0?null!==this.horizontalGuideLines&&(this.horizontalGuideLines.remove(),this.horizontalGuideLines=null):this.horizontalGuideLines.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.horizontalGuideLines&&(this.horizontalGuideLines.remove(),this.horizontalGuideLines=null)},this)))},showVerticalGuides:function(t,e){null!=this.verticalGuideLines&&(this.verticalGuideLines.stop(),this.verticalGuideLines.remove());var i=e.snappedRect.getTopRight(),n=e.snappedRect.getBottomRight(),s=(Math.max(e.topSide.causedBBox.getRight(),Math.max(e.bottomSide.causedBBox.getRight(),t.getX()))+40|0)+.5;this.canvas.paper.setStart(),this.canvas.paper.path("M "+s+" "+((0|e.topSide.y)+.5)+" L "+((0|e.topSide.x)+.5)+" "+((0|e.topSide.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+s+" "+((0|i.y)+.5)+" L "+((0|i.x)+.5)+" "+((0|i.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+s+" "+((0|n.y)+.5)+" L "+((0|n.x)+.5)+" "+((0|n.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+s+" "+((0|e.bottomSide.y)+.5)+" L "+((0|e.bottomSide.x)+.5)+" "+((0|e.bottomSide.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1,"stroke-dasharray":". "}),this.canvas.paper.path("M "+(s-5)+" "+((0|e.topSide.y)+.5)+" L "+(s-5)+" "+((0|i.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path("M "+(s-5)+" "+((0|e.bottomSide.y)+.5)+" L "+(s-5)+" "+((0|n.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(s-10)+" "+(e.topSide.y+5)+" L "+(s-5)+" "+e.topSide.y+" L "+s+" "+(e.topSide.y+5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(s-10)+" "+(i.y-5)+" L "+(s-5)+" "+i.y+" L "+s+" "+(i.y-5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(s-10)+" "+(n.y+5)+" L "+(s-5)+" "+n.y+" L "+s+" "+(n.y+5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.canvas.paper.path(" M "+(s-10)+" "+(e.bottomSide.y-5)+" L "+(s-5)+" "+e.bottomSide.y+" L "+s+" "+(e.bottomSide.y-5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.verticalGuideLines=this.canvas.paper.setFinish(),this.verticalGuideLines.toFront()},hideVerticalGuides:function(){null!=this.verticalGuideLines&&this.verticalGuideLines.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.verticalGuideLines&&(this.verticalGuideLines.remove(),this.verticalGuideLines=null)},this))}}),draw2d.policy.canvas.SnapToCenterEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToCenterEditPolicy",SNAP_THRESHOLD:5,FADEOUT_DURATION:500,init:function(t,e,i){this._super(t,e,i),this.centers=null,this.horizontalGuideLines=null,this.verticalGuideLines=null},onMouseUp:function(t,e,i,n,s){this.centers=null,this.hideHorizontalGuides(!1),this.hideVerticalGuides(!1)},snap:function(t,e,i,n){if(e instanceof draw2d.ResizeHandle)return i;if(e instanceof draw2d.shape.basic.Line)return i;var s=i.x===n.x,r=i.y===n.y,o=new draw2d.geo.Rectangle(i.x,i.y,e.getWidth(),e.getHeight()),a=o.getCenter();if(i=i.clone(),s===!0){var c=this.snapHorizontal(a);c.snapped?(this.showHorizontalGuides(e,c),i.y+=c.diff):this.hideHorizontalGuides(!0)}else this.hideHorizontalGuides(!0);if(r===!0){var h=this.snapVertical(a);h.snapped?(this.showVerticalGuides(e,h),i.x+=h.diff):this.hideVerticalGuides(!0)}else this.hideVerticalGuides(!0);return i},snapVertical:function(t){var e=this;null===this.centers&&this.populateCenters();var i={point:t,snapped:!1,diff:0},n=[];if(this.centers.forEach(function(i){Math.abs(i.x-t.x)<e.SNAP_THRESHOLD&&n.push(i)}),0===n.length)return i;n.sort(function(t,e){return t.x-e.x});var s=n[0].x-t.x,r=t.clone();return r.x+=s,{snapped:!0,diff:s,point:n[0],snappedPoint:r}},snapHorizontal:function(t){var e=this;null===this.centers&&this.populateCenters();var i={point:t,snapped:!1,diff:0},n=[];if(this.centers.forEach(function(i){Math.abs(i.y-t.y)<e.SNAP_THRESHOLD&&n.push(i)}),0===n.length)return i;n.sort(function(t,e){return t.y-e.y});var s=n[0].y-t.y,r=t.clone();return r.y+=s,{snapped:!0,diff:s,point:n[0],snappedPoint:r}},populateCenters:function(){var t=this.canvas.getSelection().getAll(!0),e=this.centers=[],i=this.canvas.getFigures();i.each(function(i,n){t.contains(n)||e.push(n.getBoundingBox().getCenter())})},showHorizontalGuides:function(t,e){null!==this.horizontalGuideLines&&(this.horizontalGuideLines.stop(),this.horizontalGuideLines.remove());var i=e.point,n=e.snappedPoint;this.canvas.paper.setStart(),this.canvas.paper.path("M "+i.x+" "+((0|i.y)+.5)+" L "+n.x+" "+((0|n.y)+.5)).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.horizontalGuideLines=this.canvas.paper.setFinish(),this.horizontalGuideLines.toFront()},hideHorizontalGuides:function(t){null!==this.horizontalGuideLines&&(t===!0?null!==this.horizontalGuideLines&&(this.horizontalGuideLines.remove(),this.horizontalGuideLines=null):this.horizontalGuideLines.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.horizontalGuideLines&&(this.horizontalGuideLines.remove(),this.horizontalGuideLines=null)},this)))},showVerticalGuides:function(t,e){null!==this.verticalGuideLines&&(this.verticalGuideLines.stop(),this.verticalGuideLines.remove());var i=e.point,n=e.snappedPoint;this.canvas.paper.setStart(),this.canvas.paper.path("M "+((0|i.x)+.5)+" "+i.y+" L "+((0|n.x)+.5)+" "+n.y).attr({stroke:this.lineColor.hash(),"stroke-width":1}),this.verticalGuideLines=this.canvas.paper.setFinish(),this.verticalGuideLines.toFront()},hideVerticalGuides:function(t){null!==this.verticalGuideLines&&(t===!0?null!==this.verticalGuideLines&&(this.verticalGuideLines.remove(),this.verticalGuideLines=null):this.verticalGuideLines.animate({opacity:.1},this.FADEOUT_DURATION,$.proxy(function(){null!==this.verticalGuideLines&&(this.verticalGuideLines.remove(),this.verticalGuideLines=null)},this)))}}),draw2d.policy.canvas.DropInterceptorPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.DropInterceptorPolicy",init:function(t,e,i){this._super(t,e,i)},delegateTarget:function(t,e){return!(t instanceof draw2d.Port)&&e instanceof draw2d.shape.composite.StrongComposite?e:e instanceof draw2d.Port&&t instanceof draw2d.Port?e.getConnections().getSize()>=e.getMaxFanOut()?null:t instanceof draw2d.OutputPort&&e instanceof draw2d.OutputPort?null:t instanceof draw2d.InputPort&&e instanceof draw2d.InputPort?null:t instanceof draw2d.Port&&e instanceof draw2d.Port&&t.getParent()===e.getParent()?null:t instanceof draw2d.Port&&e instanceof draw2d.shape.node.Hub?e.getHybridPort(0):e:null}}),draw2d.policy.connection.ConnectionCreatePolicy=draw2d.policy.canvas.KeyboardPolicy.extend({NAME:"draw2d.policy.connection.ConnectionCreatePolicy",init:function(t,e,i){this._super(t,e,i)},createConnection:function(){return new draw2d.Connection({router:new draw2d.layout.connection.DirectRouter})},ripple:function(t,e,i){switch(i){case 0:var n=this.canvas.paper.circle(t,e,3,3).attr({fill:null,stroke:"#d0d0ff"}),s=Raphael.animation({transform:"s6",opacity:0,"stroke-width":3},500,"linear",function(){n.remove()});return n.animate(s),this.canvas.paper.set();case 1:var r=this.canvas.paper.circle(t,e,3,3).attr({fill:null,stroke:"#3f72bf"}),o=this.canvas.paper.circle(t,e,3,3).attr({fill:null,stroke:"#ff0000"}),a=Raphael.animation({transform:"s6",opacity:0,"stroke-width":1},1200,"linear").repeat(1/0);r.animate(a);var c=Raphael.animation({transform:"s12",opacity:0,"stroke-width":4},500,"linear",function(){o.remove()});return o.animate(c),r}}}),draw2d.policy.connection.ComposedConnectionCreatePolicy=draw2d.policy.connection.ConnectionCreatePolicy.extend({NAME:"draw2d.policy.connection.ComposedConnectionCreatePolicy",init:function(t){this.policies=t,this._super()},onMouseDown:function(){var t=arguments;$.each(this.policies,function(e,i){i.onMouseDown.apply(i,t)})},onMouseDrag:function(){var t=arguments;$.each(this.policies,function(e,i){i.onMouseDrag.apply(i,t)})},onMouseUp:function(){var t=arguments;$.each(this.policies,function(e,i){i.onMouseUp.apply(i,t)})},onClick:function(){var t=arguments;$.each(this.policies,function(e,i){i.onClick.apply(i,t)})},onMouseMove:function(){var t=arguments;$.each(this.policies,function(e,i){i.onMouseMove.apply(i,t)})},onKeyUp:function(t,e,i,n){var s=arguments;$.each(this.policies,function(t,e){e.onKeyUp.apply(e,s)})},onKeyDown:function(t,e,i,n){var s=arguments;$.each(this.policies,function(t,e){e.onKeyDown.apply(e,s)})},onInstall:function(t){var e=arguments;$.each(this.policies,function(t,i){i.onInstall.apply(i,e)})},onUninstall:function(t){var e=arguments;$.each(this.policies,function(t,i){i.onUninstall.apply(i,e)})}}),draw2d.policy.connection.ClickConnectionCreatePolicy=draw2d.policy.connection.ConnectionCreatePolicy.extend({NAME:"draw2d.policy.connection.ClickConnectionCreatePolicy",init:function(t,e,i){this._super(t,e,i),this.port1=null,this.beeline=null,this.pulse=null,this.tempConnection=null,this.vertices=[]},onClick:function(t,e,i,n,s){var r=this,o=t;if(null!==o||null!==this.port1){if(null===o)return this.vertices.push(new draw2d.geo.Point(e,i)),this.beeline.setStartPosition(e,i),this.tempConnection.setVertices(this.vertices),null!==this.pulse&&(this.pulse.remove(),this.pulse=null),void this.ripple(e,i,0);if(o instanceof draw2d.Port){if(null===this.port1){var a=o.getCanvas();this.port1=o,this.vertices.push(o.getAbsolutePosition()),this.beeline=new draw2d.shape.basic.Line({start:this.port1.getAbsolutePosition(),end:this.port1.getAbsolutePosition(),dasharray:"- ",color:"#2C70FF"}),this.beeline.hide=function(){r.beeline.setCanvas(null)},this.beeline.show=function(t){r.beeline.setCanvas(t),r.beeline.shape.toFront()},this.beeline.show(a),this.tempConnection=new draw2d.shape.basic.PolyLine({start:this.port1.getAbsolutePosition(),end:this.port1.getAbsolutePosition(),stroke:2,color:"#2C70FF"}),this.tempConnection.hide=function(){r.tempConnection.setCanvas(null)},this.tempConnection.show=function(t){r.tempConnection.setCanvas(t),r.tempConnection.shape.toFront()},this.tempConnection.show(a),this.tempConnection.setVertices([this.port1.getAbsolutePosition(),this.port1.getAbsolutePosition()]);var c=function(){r.tempConnection.shape.animate({"stroke-width":2},800,h)},h=function(){r.tempConnection.shape.animate({"stroke-width":1},800,c)};c();var l=o.getAbsolutePosition();return void(this.pulse=this.ripple(l.x,l.y,1))}var u=o.delegateTarget(this.port1);if(u instanceof draw2d.Port){var d=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);d.source=this.port1,d.target=o;var p=null;p=this.port1 instanceof draw2d.InputPort?this.port1.createCommand(d):o.createCommand(d),null!==p&&(this.vertices.push(o.getPosition()),p.setConnection(this.createConnection()),t.getCanvas().getCommandStack().execute(p),this.beeline.hide(),this.tempConnection.hide(),null!==this.pulse&&(this.pulse.remove(),this.pulse=null),this.beeline=null,
this.port1=null,this.vertices=[])}}}},onMouseMove:function(t,e,i,n,s){null!==this.beeline&&this.beeline.setEndPosition(e,i)},onKeyDown:function(t,e,i,n){var s=27;e===s&&null!==this.beeline&&(this.beeline.hide(),this.tempConnection.hide(),this.beeline=null,this.port1=null,this.vertices=[],null!=this.pulse&&(this.pulse.remove(),this.pulse=null))},createConnection:function(){var t=this._super();return 2===this.vertices.length?t.setRouter(new draw2d.layout.connection.DirectRouter):(t.setRouter(new draw2d.layout.connection.VertexRouter),t.setVertices(this.vertices)),t.setRadius(10),t}}),draw2d.policy.connection.OrthogonalConnectionCreatePolicy=draw2d.policy.connection.ConnectionCreatePolicy.extend({NAME:"draw2d.policy.connection.ClickConnectionCreatePolicy",init:function(t,e,i){this._super(t,e,i),this.port1=null,this.beeline=null,this.pulse=null,this.tempConnection=null,this.vertices=new draw2d.util.ArrayList},onClick:function(t,e,i,n,s){var r=draw2d.geo.Rectangle.DIRECTION_UP,o=draw2d.geo.Rectangle.DIRECTION_RIGHT,a=draw2d.geo.Rectangle.DIRECTION_DOWN,c=draw2d.geo.Rectangle.DIRECTION_LEFT,h=this,l=t;if(null!==l||null!==this.port1){if(null===l){var u=this.port1.getCanvas(),d=this.beeline.getEndPosition();return this.vertices.add(d),this.beeline.setStartPosition(this.beeline.getEndPosition()),this.tempConnection.setVertices(this.vertices),null!==this.pulse&&(this.pulse.remove(),this.pulse=null),void this.ripple(d.x,d.y,0)}if(l instanceof draw2d.Port)if(null===this.port1){var u=l.getCanvas();this.port1=l,this.vertices.add(l.getAbsolutePosition()),this.beeline=new draw2d.shape.basic.Line({start:this.port1.getAbsolutePosition(),end:this.port1.getAbsolutePosition(),dasharray:"- ",color:"#2C70FF"}),this.beeline.hide=function(){h.beeline.setCanvas(null)},this.beeline.show=function(t){h.beeline.setCanvas(t),h.beeline.shape.toFront()},this.beeline.show(u),this.tempConnection=new draw2d.shape.basic.PolyLine({start:this.port1.getAbsolutePosition(),end:this.port1.getAbsolutePosition(),stroke:2,color:"#2C70FF"}),this.tempConnection.hide=function(){h.tempConnection.setCanvas(null)},this.tempConnection.show=function(t){h.tempConnection.setCanvas(t),h.tempConnection.shape.toFront()},this.tempConnection.show(u),this.tempConnection.setVertices([this.port1.getAbsolutePosition(),this.port1.getAbsolutePosition()]);var p=function(){h.tempConnection.shape.animate({"stroke-width":2},800,f)},f=function(){h.tempConnection.shape.animate({"stroke-width":1},800,p)};p(),u.paper.setStart(),null!==this.pulse&&(this.pulse.remove(),this.pulse=null);var g=l.getAbsolutePosition();this.ripple(g.x,g.y,1),this.pulse=u.paper.setFinish()}else{var m=l.delegateTarget(this.port1);if(!(m instanceof draw2d.Port))return;var v=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);v.source=this.port1,v.target=l;var y=null;if(y=this.port1 instanceof draw2d.InputPort?this.port1.createCommand(v):l.createCommand(v),null!==y){var w=this.createConnection();if(y.setConnection(w),l.getCanvas().getCommandStack().execute(y),this.beeline.hide(),this.tempConnection.hide(),null!==this.pulse&&(this.pulse.remove(),this.pulse=null),this.beeline=null,this.port1=null,this.vertices.getSize()<=2)return;var x=y.getConnection().getRouter().MINDIST,b=this.vertices.get(this.vertices.getSize()-2),_=this.vertices.last(),C=l.getAbsolutePosition(),M=r;switch(M=_.x===b.x?_.y<b.y?r:a:_.x<b.x?c:o,l.getConnectionDirection(this.port1)){case r:switch(M){case r:_.y<C.y-x?(this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C)):(_.y=C.y-x,this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C));break;case o:_.y>C.y-x?(b.y=C.y-x,_.x=C.x,_.y=b.y,this.vertices.add(C)):(_.x=C.x,this.vertices.add(C));break;case a:_.y<C.y-x?(b.x=C.x,_.setPosition(C)):(_.y=C.y-x,this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C));break;case c:_.y>C.y-x?(b.y=C.y-x,_.x=C.x,_.y=b.y,this.vertices.add(C)):(_.x=C.x,this.vertices.add(C))}break;case o:switch(M){case r:_.x>C.x+x?(_.y=C.y,this.vertices.add(C)):(this.vertices.add(new draw2d.geo.Point(C.x+x,_.y)),this.vertices.add(new draw2d.geo.Point(C.x+x,C.y)),this.vertices.add(C));break;case o:_.x>C.x+x?(this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C)):(_.x=C.x+x,this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C));break;case a:_.x>C.x+x?(_.y=C.y,this.vertices.add(C)):(this.vertices.add(new draw2d.geo.Point(C.x+x,_.y)),this.vertices.add(new draw2d.geo.Point(C.x+x,C.y)),this.vertices.add(C));break;case c:_.x>C.x+x?(this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C)):(_.x=C.x+x,this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C))}break;case a:switch(M){case r:_.y<C.y+x?(_.y=C.y+x,this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C)):(_.x=C.x,_.y=C.y,b.x=C.x);break;case o:_.y<C.y+x?(this.vertices.add(new draw2d.geo.Point(_.x,C.y+x)),this.vertices.add(new draw2d.geo.Point(C.x,C.y+x)),this.vertices.add(C)):(_.x=C.x,this.vertices.add(C));break;case a:_.y<C.y+x?(_.y=C.y+x,this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C)):(this.vertices.add(new draw2d.geo.Point(C.x,_.y)),this.vertices.add(C));break;case c:_.y<C.y-x?(b.y=C.y-x,_.x=C.x,_.y=b.y,this.vertices.add(C)):(_.x=C.x,this.vertices.add(C))}break;case c:switch(M){case r:_.x>=C.x-x?(this.vertices.add(new draw2d.geo.Point(C.x-x,_.y)),this.vertices.add(new draw2d.geo.Point(C.x-x,C.y)),this.vertices.add(C)):_.y>C.y&&_.x<C.x-x?(_.y=C.y,this.vertices.add(C)):(this.vertices.add(new draw2d.geo.Point(C.x-x,_.y)),this.vertices.add(new draw2d.geo.Point(C.x-x,C.y)),this.vertices.add(C));break;case o:if(_.y<C.y&&_.x>C.x-x){var P=C.y-(C.y-_.y)/2;this.vertices.add(new draw2d.geo.Point(_.x,P)),this.vertices.add(new draw2d.geo.Point(C.x-x,P)),this.vertices.add(new draw2d.geo.Point(C.x-x,C.y)),this.vertices.add(C)}else if(_.y>C.y&&_.x>C.x-x){var P=C.y+(_.y-C.y)/2;this.vertices.add(new draw2d.geo.Point(_.x,P)),this.vertices.add(new draw2d.geo.Point(C.x-x,P)),this.vertices.add(new draw2d.geo.Point(C.x-x,C.y)),this.vertices.add(C)}else this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C);break;case a:_.x>=C.x-x?(this.vertices.add(new draw2d.geo.Point(C.x-x,_.y)),this.vertices.add(new draw2d.geo.Point(C.x-x,C.y)),this.vertices.add(C)):(_.y=C.y,this.vertices.add(C));break;case c:_.x<C.x-x?(this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C)):(_.x=C.x-x,this.vertices.add(new draw2d.geo.Point(_.x,C.y)),this.vertices.add(C))}}this.vertices.getSize()>3&&(w._routingMetaData.routedByUserInteraction=!0,w.setVertices(this.vertices)),this.vertices.clear()}}}},onMouseMove:function(t,e,i,n,s){null!==this.beeline&&this.beeline.setEndPosition(this.orthogonal(this.vertices.last(),{x:e,y:i}))},onKeyDown:function(t,e,i,n){var s=27;e===s&&null!==this.beeline&&(this.beeline.hide(),this.tempConnection.hide(),this.beeline=null,this.port1=null,this.vertices.clear(),null!=this.pulse&&(this.pulse.remove(),this.pulse=null))},orthogonal:function(t,e){var i=Math.abs(t.x-e.x)+10,n=draw2d.geo.Line.distance(t.x-i,t.y,t.x+i,t.y,e.x,e.y),s=Math.abs(t.y-e.y)+10,r=draw2d.geo.Line.distance(t.x,t.y-s,t.x,t.y+s,e.x,e.y);return r>n?{x:e.x,y:t.y}:{x:t.x,y:e.y}},createConnection:function(){var t=this._super();return t.attr({radius:7,stroke:3}),t.setRouter(new draw2d.layout.connection.InteractiveManhattanConnectionRouter),t}}),draw2d.policy.connection.DragConnectionCreatePolicy=draw2d.policy.connection.ConnectionCreatePolicy.extend({NAME:"draw2d.policy.connection.DragConnectionCreatePolicy",init:function(t,e,i){this._super(t,e,i),this.mouseDraggingElement=null,this.currentDropTarget=null,this.currentTarget=null},onMouseDown:function(t,e,i,n,s){var r=t.getBestFigure(e,i);if(null!==r&&r instanceof draw2d.Port&&(r.isInDragDrop===!0&&(r.onDragEnd(e,i,n,s),r.isInDragDrop=!1),r.isDraggable())){var o=r.onDragStart(e-r.getAbsoluteX(),i-r.getAbsoluteY(),n,s);o&&r.fireEvent("dragstart",{x:e-r.getAbsoluteX(),y:i-r.getAbsoluteY(),shiftKey:n,ctrlKey:s}),this.mouseDraggingElement=o===!1?null:r,this.mouseDownElement=r}},onMouseDrag:function(t,e,i,n,s,r,o){try{if(null!==this.mouseDraggingElement){var a=this.mouseDraggingElement,c=this.currentTarget;a.isInDragDrop=!0,a.onDrag(e,i,n,s,r,o);var h=t.getBestFigure(a.getAbsoluteX(),a.getAbsoluteY(),a);h!==c&&(null!==c&&(c.onDragLeave(a),c.fireEvent("dragLeave",{draggingElement:a}),a.editPolicy.each(function(e,i){i instanceof draw2d.policy.port.PortFeedbackPolicy&&i.onHoverLeave(t,a,c)})),null!==h?(this.currentTarget=c=h.delegateTarget(a),null!==c&&(c.onDragEnter(a),c.fireEvent("dragEnter",{draggingElement:a}),a.editPolicy.each(function(e,i){i instanceof draw2d.policy.port.PortFeedbackPolicy&&i.onHoverEnter(t,a,c)}))):this.currentTarget=null);var l=t.fromDocumentToCanvasCoordinate(t.mouseDownX+e/t.zoomFactor,t.mouseDownY+i/t.zoomFactor),h=t.getBestFigure(l.x,l.y,this.mouseDraggingElement);h!==this.currentDropTarget&&(null!==this.currentDropTarget&&(this.currentDropTarget.onDragLeave(this.mouseDraggingElement),this.currentDropTarget.fireEvent("dragLeave",{draggingElement:this.mouseDraggingElement}),this.currentDropTarget=null),null!==h&&(this.currentDropTarget=h.delegateTarget(this.mouseDraggingElement),null!==this.currentDropTarget&&(this.currentDropTarget.onDragEnter(this.mouseDraggingElement),this.currentDropTarget.fireEvent("dragEnter",{draggingElement:this.mouseDraggingElement}))))}}catch(t){console.log(t)}},onMouseUp:function(t,e,i,n,s){if(null!==this.mouseDraggingElement){var r=this.mouseDraggingElement,o=this.currentTarget;if(t.getCommandStack().startTransaction(),r.onDragEnd(e,i,n,s),o&&r.editPolicy.each(function(e,i){i instanceof draw2d.policy.port.PortFeedbackPolicy&&i.onHoverLeave(t,r,o)}),r.editPolicy.each(function(o,a){a instanceof draw2d.policy.figure.DragDropEditPolicy&&a.onDragEnd(t,r,e,i,n,s)}),this.currentTarget=null,r.isInDragDrop=!1,r.fireEvent("dragend",{x:e,y:i,shiftKey:n,ctrlKey:s}),null!==this.currentDropTarget&&(this.mouseDraggingElement.onDrop(this.currentDropTarget,e,i,n,s),this.currentDropTarget.onDragLeave(this.mouseDraggingElement),this.currentDropTarget.fireEvent("dragLeave",{draggingElement:this.mouseDraggingElement}),this.currentDropTarget instanceof draw2d.Port)){var a=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);a.source=this.currentDropTarget,a.target=this.mouseDraggingElement;var c=this.mouseDraggingElement.createCommand(a);null!==c&&(c.setConnection(this.createConnection()),t.getCommandStack().execute(c),this.currentDropTarget.onCatch(this.mouseDraggingElement,e,i,n,s))}t.getCommandStack().commitTransaction(),this.currentDropTarget=null,this.mouseDraggingElement=null}},createConnection:function(){var t=this._super();return t.setRouter(new draw2d.layout.connection.DirectRouter),t}}),draw2d.policy.figure.FigureEditPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.figure.FigureEditPolicy",init:function(t,e,i){this._super(t,e,i)},onRightMouseDown:function(t,e,i,n,s){}}),draw2d.policy.figure.DragDropEditPolicy=draw2d.policy.figure.FigureEditPolicy.extend({NAME:"draw2d.policy.figure.DragDropEditPolicy",init:function(t,e,i){this._super(t,e,i)},onDragStart:function(t,e,i,n,s,r){return e.shape.attr({cursor:"move"}),e.isMoving===!0&&e.setAlpha(e.originalAlpha),e.originalAlpha=e.getAlpha(),e.isMoving=!1,!0},onDrag:function(t,e){e.isMoving===!1&&(e.isMoving=!0,e.setAlpha(.4*e.originalAlpha))},onDragEnd:function(t,e,i,n,s,r){e.shape.attr({cursor:"default"}),e.isMoving=!1,e.setAlpha(e.originalAlpha)},adjustPosition:function(t,e,i){return e instanceof draw2d.geo.Point?e:new draw2d.geo.Point(e,i)},adjustDimension:function(t,e,i){return new draw2d.geo.Rectangle(0,0,e,i)},moved:function(t,e){}}),draw2d.policy.figure.RegionEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.RegionEditPolicy",init:function(t,e,i,n){if(this._super(),t instanceof draw2d.geo.Rectangle)this.constRect=t;else{if("number"!=typeof n)throw"Invalid parameter. RegionEditPolicy need a rectangle as parameter in the constructor";this.constRect=new draw2d.geo.Rectangle(t,e,i,n)}},setBoundingBox:function(t){return this.constRect=t,this},adjustPosition:function(t,e,i){var n=null;return n=e instanceof draw2d.geo.Point?new draw2d.geo.Rectangle(e.x,e.y,t.getWidth(),t.getHeight()):new draw2d.geo.Rectangle(e,i,t.getWidth(),t.getHeight()),n=this.constRect.moveInside(n),n.getTopLeft()},adjustDimension:function(t,e,i){var n=t.getAbsoluteX()+e-this.constRect.getRight(),s=t.getAbsoluteY()+i-this.constRect.getBottom();return n>0&&(e-=n),s>0&&(i-=s),{w:e,h:i}}}),draw2d.policy.figure.HorizontalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.HorizontalEditPolicy",init:function(t,e,i){this._super(t,e,i)},adjustPosition:function(t,e,i){return new draw2d.geo.Point(e,t.getY())}}),draw2d.policy.figure.VerticalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.VerticalEditPolicy",init:function(t,e,i){this._super(t,e,i)},adjustPosition:function(t,e,i){return new draw2d.geo.Point(t.getX(),i)}}),draw2d.policy.figure.SelectionPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.SelectionPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){},onUnselect:function(t,e){}}),draw2d.policy.figure.SelectionFeedbackPolicy=draw2d.policy.figure.SelectionPolicy.extend({NAME:"draw2d.policy.figure.SelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){this._super(t,e,i)},onUnselect:function(t,e){this._super(t,e),e.selectionHandles.each(function(t,e){e.hide()}),e.selectionHandles=new draw2d.util.ArrayList},onInstall:function(t){this._super(t);var e=t.getCanvas();null!==e&&e.getSelection().contains(t)&&this.onSelect(e,t,!0)},onUninstall:function(t){this._super(t),"undefined"!=typeof t.selectionHandles&&(t.selectionHandles.each(function(t,e){e.hide()}),t.selectionHandles=new draw2d.util.ArrayList)}}),draw2d.policy.figure.ResizeSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.ResizeSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){if(e.selectionHandles.isEmpty()){var n=draw2d.Configuration.factory.createResizeHandle(e,1),s=draw2d.Configuration.factory.createResizeHandle(e,3),r=draw2d.Configuration.factory.createResizeHandle(e,5),o=draw2d.Configuration.factory.createResizeHandle(e,7);if(e.selectionHandles.add(n),e.selectionHandles.add(s),e.selectionHandles.add(r),e.selectionHandles.add(o),n.show(t),s.show(t),r.show(t),o.show(t),e.isResizeable()===!1&&(n.setBackgroundColor(null),s.setBackgroundColor(null),r.setBackgroundColor(null),o.setBackgroundColor(null),n.setDraggable(!1),s.setDraggable(!1),r.setDraggable(!1),o.setDraggable(!1)),!e.getKeepAspectRatio()&&e.isResizeable()){var a=draw2d.Configuration.factory.createResizeHandle(e,2),c=draw2d.Configuration.factory.createResizeHandle(e,4),h=draw2d.Configuration.factory.createResizeHandle(e,6),l=draw2d.Configuration.factory.createResizeHandle(e,8);e.selectionHandles.add(a),e.selectionHandles.add(c),e.selectionHandles.add(h),e.selectionHandles.add(l),a.show(t),c.show(t),h.show(t),l.show(t)}}this.moved(t,e)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.getHeight(),n=e.getWidth(),s=e.getX(),r=e.getY(),o=e.selectionHandles.find(function(t){return 1===t.type}),a=e.selectionHandles.find(function(t){return 3===t.type}),c=e.selectionHandles.find(function(t){return 5===t.type}),h=e.selectionHandles.find(function(t){return 7===t.type});if(o.setPosition(s-o.getWidth(),r-o.getHeight()),a.setPosition(s+n,r-a.getHeight()),c.setPosition(s+n,r+i),h.setPosition(s-h.getWidth(),r+i),!e.getKeepAspectRatio()){var l=e.selectionHandles.find(function(t){return 2===t.type}),u=e.selectionHandles.find(function(t){return 4===t.type}),d=e.selectionHandles.find(function(t){return 6===t.type}),p=e.selectionHandles.find(function(t){return 8===t.type});l.setPosition(s+n/2-l.getWidth()/2,r-l.getHeight()),u.setPosition(s+n,r+i/2-u.getHeight()/2),d.setPosition(s+n/2-d.getWidth()/2,r+i),p.setPosition(s-p.getWidth(),r+i/2-p.getHeight()/2)}}}}),draw2d.policy.figure.RectangleSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RectangleSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){if(e.selectionHandles.isEmpty()){var n=new draw2d.shape.basic.Rectangle({bgColor:null,dashArray:"- ",color:"#2C70FF",stroke:.5});n.hide=function(){n.setCanvas(null)},n.show=function(t){n.setCanvas(t),n.toFront(e)};var s=draw2d.Configuration.factory.createResizeHandle(e,1),r=draw2d.Configuration.factory.createResizeHandle(e,3),o=draw2d.Configuration.factory.createResizeHandle(e,5),a=draw2d.Configuration.factory.createResizeHandle(e,7);if(e.selectionHandles.add(s),e.selectionHandles.add(r),e.selectionHandles.add(o),e.selectionHandles.add(a),s.show(t),r.show(t),o.show(t),a.show(t),e.isResizeable()===!1&&(s.setBackgroundColor(null),r.setBackgroundColor(null),o.setBackgroundColor(null),a.setBackgroundColor(null),s.setDraggable(!1),r.setDraggable(!1),o.setDraggable(!1),a.setDraggable(!1)),!e.getKeepAspectRatio()&&e.isResizeable()){var c=draw2d.Configuration.factory.createResizeHandle(e,2),h=draw2d.Configuration.factory.createResizeHandle(e,4),l=draw2d.Configuration.factory.createResizeHandle(e,6),u=draw2d.Configuration.factory.createResizeHandle(e,8);e.selectionHandles.add(c),e.selectionHandles.add(h),e.selectionHandles.add(l),e.selectionHandles.add(u),c.show(t),h.show(t),l.show(t),u.show(t)}e.selectionHandles.add(n),n.show(t)}this.moved(t,e)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.getHeight(),n=e.getWidth(),s=e.getAbsoluteX(),r=e.getAbsoluteY(),o=e.selectionHandles.find(function(t){return 1===t.type}),a=e.selectionHandles.find(function(t){return 3===t.type}),c=e.selectionHandles.find(function(t){return 5===t.type}),h=e.selectionHandles.find(function(t){return 7===t.type});if(o.setPosition(s-o.getWidth(),r-o.getHeight()),a.setPosition(s+n,r-a.getHeight()),c.setPosition(s+n,r+i),h.setPosition(s-h.getWidth(),r+i),!e.getKeepAspectRatio()&&e.isResizeable()){var l=e.selectionHandles.find(function(t){return 2===t.type}),u=e.selectionHandles.find(function(t){return 4===t.type}),d=e.selectionHandles.find(function(t){return 6===t.type}),p=e.selectionHandles.find(function(t){return 8===t.type});l.setPosition(s+n/2-l.getWidth()/2,r-l.getHeight()),u.setPosition(s+n,r+i/2-u.getHeight()/2),d.setPosition(s+n/2-d.getWidth()/2,r+i),p.setPosition(s-p.getWidth(),r+i/2-p.getHeight()/2)}var f=e.selectionHandles.last();f.setPosition(e.getAbsolutePosition().translate(-2.5,-2.5)),f.setDimension(e.getWidth()+4,e.getHeight()+4),f.setRotationAngle(e.getRotationAngle())}}}),draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){this._super(t,e,i),e.selectionHandles.isEmpty()||e.selectionHandles.each(function(t,e){e.setDimension(15,15)}),this.moved(t,e)}}),draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){this._super(t,e,i),e.selectionHandles.isEmpty()||e.selectionHandles.each(function(t,e){e.setDimension(12,12),e.setRadius(4)}),this.moved(t,e)}}),draw2d.policy.figure.BusSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BusSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){if(e.selectionHandles.isEmpty()){var n=draw2d.Configuration.factory.createResizeHandle(e,2),s=draw2d.Configuration.factory.createResizeHandle(e,4),r=draw2d.Configuration.factory.createResizeHandle(e,6),o=draw2d.Configuration.factory.createResizeHandle(e,8);e.selectionHandles.add(n),e.selectionHandles.add(s),e.selectionHandles.add(r),e.selectionHandles.add(o),n.setDraggable(e.isResizeable()),s.setDraggable(e.isResizeable()),r.setDraggable(e.isResizeable()),o.setDraggable(e.isResizeable()),n.show(t),s.show(t),r.show(t),o.show(t)}this.moved(t,e)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.selectionHandles.find(function(t){return 2===t.type}),n=e.selectionHandles.find(function(t){return 4===t.type}),s=e.selectionHandles.find(function(t){return 6===t.type}),r=e.selectionHandles.find(function(t){return 8===t.type}),o=e.getHeight(),a=e.getWidth(),c=e.getX(),h=e.getY();i.setPosition(c+a/2-i.getWidth()/2,h-i.getHeight()),n.setPosition(c+a,h+o/2-n.getHeight()/2),s.setPosition(c+a/2-s.getWidth()/2,h+o),r.setPosition(c-r.getWidth(),h+o/2-r.getHeight()/2)}}}),draw2d.policy.figure.WidthSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BusSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){if(e.selectionHandles.isEmpty()){var n=draw2d.Configuration.factory.createResizeHandle(e,4),s=draw2d.Configuration.factory.createResizeHandle(e,8);n.installEditPolicy(new draw2d.policy.figure.HorizontalEditPolicy),s.installEditPolicy(new draw2d.policy.figure.HorizontalEditPolicy),e.selectionHandles.add(n),e.selectionHandles.add(s),n.setDraggable(e.isResizeable()),s.setDraggable(e.isResizeable()),n.show(t),s.show(t)}this.moved(t,e)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.selectionHandles.find(function(t){return 4===t.type}),n=e.selectionHandles.find(function(t){return 8===t.type}),s=e.getWidth(),r=e.getX(),o=e.getY();i.setDimension(i.getWidth(),e.getHeight()),n.setDimension(n.getWidth(),e.getHeight()),i.setPosition(r+s,o),n.setPosition(r-n.getWidth(),o)}}}),draw2d.policy.figure.VBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.VBusSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.selectionHandles.find(function(t){return 2===t.type}),n=e.selectionHandles.find(function(t){return 6===t.type}),s=e.getWidth();i.setDimension(s,i.getHeight()),n.setDimension(s,n.getHeight()),this._super(t,e)}}}),draw2d.policy.figure.HBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.HBusSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.selectionHandles.find(function(t){return 4===t.type}),n=e.selectionHandles.find(function(t){return 8===t.type});i.setDimension(i.getWidth(),e.getHeight()),n.setDimension(i.getWidth(),e.getHeight()),this._super(t,e)}}}),draw2d.policy.figure.AntSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.AntSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){if(e.selectionHandles.isEmpty()){var n=new draw2d.shape.basic.Rectangle({bgColor:null,dasharray:"- ",color:"#2C70FF"});if(n.hide=function(){n.setCanvas(null)},n.show=function(t){n.setCanvas(t),n.shape.toFront()},n.show(t),e.selectionHandles.add(n),null!==e.getParent()){var s=new draw2d.shape.basic.Line({opacity:.5,bgColor:null,dasharray:"- ",color:"#2C70FF"});s.show=function(t){s.setCanvas(t)},s.hide=function(){s.setCanvas(null)},s.show(t),e.selectionHandles.add(s),this._updateBeeLine(s,e)}}this.moved(t,e)},moved:function(t,e){if(!e.selectionHandles.isEmpty()){var i=e.selectionHandles.first();if(i.setPosition(e.getAbsolutePosition().translate(-2.5,-2.5)),i.setDimension(e.getWidth()+4,e.getHeight()+4),i.setRotationAngle(e.getRotationAngle()),e.selectionHandles.getSize()>1){var n=e.selectionHandles.get(1);this._updateBeeLine(n,e)}}},_updateBeeLine:function(t,e){var i=e.getParent();if(null!==i)if(i instanceof draw2d.shape.basic.Line){var n=e.getBoundingBox().getCenter(),s=i.pointProjection(n);if(null===s){var r=t.getStartPosition(),o=t.getEndPosition(),a=n.distance(r),c=n.distance(r);s=a<c?r:o}var h=e.getBoundingBox().intersectionWithLine(n,s);h.getSize()>0?t.setStartPosition(e.getBoundingBox().intersectionWithLine(n,s).get(0)).setEndPosition(s):t.setStartPosition(e.getBoundingBox().getCenter()).setEndPosition(s)}else{var l=e.getBoundingBox(),u=i.getBoundingBox(),d=l.getCenter(),p=u.getCenter();l.intersects(u)?t.setStartPosition(d).setEndPosition(p):l.hitTest(p)||u.hitTest(d)?t.setStartPosition(d).setEndPosition(p):(l.scale(3,3),u.scale(3,3),t.setStartPosition(l.intersectionWithLine(d,p).get(0)).setEndPosition(u.intersectionWithLine(d,p).get(0)))}}}),draw2d.policy.figure.GlowSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.GlowSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){e.setGlow(!0),this.moved(t,e)},onUnselect:function(t,e){this._super(t,e),e.setGlow(!1)}}),draw2d.policy.figure.SlimSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.SlimSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){this._super(t,e,i),e.selectionHandles.isEmpty()||e.selectionHandles.each(function(t,e){e.setDimension(6,6),e.setRadius(0)}),this.moved(t,e)}}),draw2d.policy.figure.VertexSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.VertexSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){for(var n=e.getVertices(),s=0;s<n.getSize();s++){var r=new draw2d.shape.basic.VertexResizeHandle(e,s);if(e.selectionHandles.add(r),r.setDraggable(e.isResizeable()),r.show(t),0!==s){var r=new draw2d.shape.basic.GhostVertexResizeHandle(e,s-1);e.selectionHandles.add(r),r.setDraggable(e.isResizeable()),r.show(t)}}this.moved(t,e)},moved:function(t,e){e.selectionHandles.each(function(t,e){e.relocate()})}}),draw2d.policy.line.LineSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.line.LineSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){e.selectionHandles.isEmpty()&&(e.selectionHandles.add(new draw2d.shape.basic.LineStartResizeHandle(e)),e.selectionHandles.add(new draw2d.shape.basic.LineEndResizeHandle(e)),e.selectionHandles.each(function(i,n){n.setDraggable(e.isResizeable()),n.show(t)})),this.moved(t,e)},moved:function(t,e){e.selectionHandles.each(function(t,e){e.relocate()})}}),draw2d.policy.line.VertexSelectionFeedbackPolicy=draw2d.policy.line.LineSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.line.VertexSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onSelect:function(t,e,i){var n=new draw2d.shape.basic.LineStartResizeHandle(e),s=new draw2d.shape.basic.LineEndResizeHandle(e);e.selectionHandles.add(n),e.selectionHandles.add(s);for(var r=e.getVertices(),o=r.getSize()-1,a=1;a<o;a++)e.selectionHandles.add(new draw2d.shape.basic.VertexResizeHandle(e,a)),e.selectionHandles.add(new draw2d.shape.basic.GhostVertexResizeHandle(e,a-1));e.selectionHandles.add(new draw2d.shape.basic.GhostVertexResizeHandle(e,a-1)),e.selectionHandles.each(function(i,n){n.setDraggable(e.isResizeable()),n.show(t)}),this.moved(t,e)}}),draw2d.policy.line.OrthogonalSelectionFeedbackPolicy=draw2d.policy.line.LineSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.line.OrthogonalSelectionFeedbackPolicy",init:function(t,e,i){this._super(t,e,i),this.ResizeHandle=draw2d.ResizeHandle.extend({NAME:"draw2d.policy.line.OrthogonalSelectionFeedbackPolicy.ResizeHandle",init:function(t,e){this._super(t),this.index=e},onDragStart:function(t,e,i,n){this._super(t,e,i,n),this.command=this.getCanvas().getPrimarySelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_VERTICES)),this.vertex=this.owner.getVertex(this.index).clone()},onDrag:function(t,e,i,n){if(null==this.command)return!1;var s=this.owner.getRouter().MINDIST||10,r=this.owner.getSource().getConnectionDirection(this.owner.getTarget()),o=this.owner.getTarget().getConnectionDirection(this.owner.getSource());this.vertex.translate(i,n);var a=this.owner.getVertices(),c=a.getSize(),h=Math.max,l=Math.min;if(1===this.index){var u=a.get(this.index-1),d=a.get(this.index),p=a.get(this.index+1);if(d.x==p.x&&u.y==d.y)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:this.owner.setVertex(1,h(u.x+s,this.vertex.x),d.y),this.owner.setVertex(2,h(u.x+s,this.vertex.x),p.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:this.owner.setVertex(1,l(u.x-s,this.vertex.x),d.y),this.owner.setVertex(2,l(u.x-s,this.vertex.x),p.y)}else switch(r){case draw2d.geo.Rectangle.DIRECTION_UP:this.owner.setVertex(1,d.x,l(u.y-s,this.vertex.y)),this.owner.setVertex(2,p.x,l(u.y-s,this.vertex.y));break;case draw2d.geo.Rectangle.DIRECTION_DOWN:this.owner.setVertex(1,d.x,h(u.y+s,this.vertex.y)),this.owner.setVertex(2,p.x,h(u.y+s,this.vertex.y))}}else if(this.index===c-2){var p=a.get(this.index-1),d=a.get(this.index),u=a.get(this.index+1);if(u.x===d.x&&p.y===d.y)switch(o){case draw2d.geo.Rectangle.DIRECTION_UP:this.owner.setVertex(c-2,d.x,l(u.y-s,this.vertex.y)),this.owner.setVertex(c-3,p.x,l(u.y-s,this.vertex.y));break;case draw2d.geo.Rectangle.DIRECTION_DOWN:this.owner.setVertex(c-2,d.x,h(u.y+s,this.vertex.y)),this.owner.setVertex(c-3,p.x,h(u.y+s,this.vertex.y))}else switch(o){case draw2d.geo.Rectangle.DIRECTION_RIGHT:this.owner.setVertex(c-2,h(u.x+s,this.vertex.x),d.y),this.owner.setVertex(c-3,h(u.x+s,this.vertex.x),p.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:this.owner.setVertex(c-2,l(u.x-s,this.vertex.x),d.y),this.owner.setVertex(c-3,l(u.x-s,this.vertex.x),p.y)}}else{var f=a.get(this.index-2),u=a.get(this.index-1),d=a.get(this.index),p=a.get(this.index+1),g=a.get(this.index+2);if(d.x===p.x&&d.y===u.y)if(this.index-2===0)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:this.owner.setVertex(this.index-1,u.x,h(this.vertex.y,f.y-s)),this.owner.setVertex(this.index,this.vertex.x,h(this.vertex.y,f.y-s)),this.owner.setVertex(this.index+1,this.vertex.x,p.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:this.owner.setVertex(this.index-1,u.x,l(this.vertex.y,f.y+s)),this.owner.setVertex(this.index,this.vertex.x,this.vertex.y),this.owner.setVertex(this.index+1,this.vertex.x,p.y);break;case draw2d.geo.Rectangle.DIRECTION_UP:this.owner.setVertex(this.index-1,u.x,l(this.vertex.y,f.y-s)),this.owner.setVertex(this.index,this.vertex.x,l(this.vertex.y,f.y-s)),this.owner.setVertex(this.index+1,this.vertex.x,p.y);break;case draw2d.geo.Rectangle.DIRECTION_DOWN:this.owner.setVertex(this.index-1,u.x,h(this.vertex.y,f.y+s)),this.owner.setVertex(this.index,this.vertex.x,h(this.vertex.y,f.y+s)),this.owner.setVertex(this.index+1,this.vertex.x,p.y)}else if(this.index-c+3===0)switch(o){case draw2d.geo.Rectangle.DIRECTION_RIGHT:this.owner.setVertex(this.index-1,u.x,this.vertex.y),this.owner.setVertex(this.index,h(this.vertex.x,g.x+s),this.vertex.y),this.owner.setVertex(this.index+1,h(this.vertex.x,g.x+s),p.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:this.owner.setVertex(this.index-1,u.x,this.vertex.y),this.owner.setVertex(this.index,l(this.vertex.x,g.x-s),this.vertex.y),this.owner.setVertex(this.index+1,l(this.vertex.x,g.x-s),p.y)}else this.owner.setVertex(this.index-1,u.x,this.vertex.y),this.owner.setVertex(this.index,this.vertex),this.owner.setVertex(this.index+1,this.vertex.x,p.y);else if(u.x===d.x&&d.y===p.y)if(this.index-2===0)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:this.owner.setVertex(this.index-1,h(this.vertex.x,f.x+s),u.y),this.owner.setVertex(this.index,h(this.vertex.x,f.x+s),this.vertex.y),this.owner.setVertex(this.index+1,p.x,this.vertex.y);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:this.owner.setVertex(this.index-1,l(this.vertex.x,f.x-s),u.y),this.owner.setVertex(this.index,l(this.vertex.x,f.x-s),this.vertex.y),
this.owner.setVertex(this.index+1,p.x,this.vertex.y)}else if(this.index-c+3===0)switch(o){case draw2d.geo.Rectangle.DIRECTION_UP:this.owner.setVertex(this.index-1,this.vertex.x,h(this.vertex.y,u.y)),this.owner.setVertex(this.index,this.vertex.x,l(this.vertex.y,g.y-s)),this.owner.setVertex(this.index+1,p.x,l(this.vertex.y,g.y-s));break;case draw2d.geo.Rectangle.DIRECTION_DOWN:this.owner.setVertex(this.index-1,this.vertex.x,u.y),this.owner.setVertex(this.index,this.vertex.x,h(this.vertex.y,g.y+s)),this.owner.setVertex(this.index+1,p.x,h(this.vertex.y,g.y+s))}else this.owner.setVertex(this.index-1,this.vertex.x,u.y),this.owner.setVertex(this.index,this.vertex),this.owner.setVertex(this.index+1,p.x,this.vertex.y)}return this.relocate(),null!==this.command&&this.command.updateVertices(this.owner.getVertices().clone()),this.owner._routingMetaData.routedByUserInteraction=!0,!0},onDragEnd:function(t,e,i,n){var s=this.getCanvas().getCommandStack();return s.execute(this.command),this.command=null,!0},relocate:function(){var t=this.getWidth()/2,e=this.getHeight()/2,i=this.owner.getVertices().get(this.index);i&&this.setPosition(i.x-t,i.y-e)}})},onSelect:function(t,e,i){this._super(t,e,i);for(var n=e.getVertices(),s=1;s<n.getSize()-1;s++){var r=new this.ResizeHandle(e,s);e.selectionHandles.add(r),r.setDraggable(e.isResizeable()),r.show(t)}this.moved(t,e)},removeSegment:function(t,e){var i=10,n=t.getVertices().getSize()-1,s=t.getStartPoint(),r=t.getSource().getConnectionDirection(t.getTarget()),o=t.getEndPoint(),a=t.getTarget().getConnectionDirection(t.getSource()),c=t.getVertex(e-1),h=t.getVertex(e),l=t.getVertex(e+1),u=t.getVertex(e+2);if(h.y===l.y){var d=(h.x+l.x)/2;if(1===e)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:d=Math.max(d,s.x+i);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:d=Math.min(d,s.x-i);break;case draw2d.geo.Rectangle.DIRECTION_UP:d=s.x;break;case draw2d.geo.Rectangle.DIRECTION_DOWN:d=s.x}if(e===n-2)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:d=Math.max(d,o.x+i);break;case draw2d.geo.Rectangle.DIRECTION_LEFT:d=Math.min(d,o.x-i);break;case draw2d.geo.Rectangle.DIRECTION_UP:d=o.x;break;case draw2d.geo.Rectangle.DIRECTION_DOWN:d=o.x}t.setVertex(e-1,new draw2d.geo.Point(d,c.y)),t.setVertex(e+2,new draw2d.geo.Point(d,u.y)),t.removeVertexAt(e),t.removeVertexAt(e),t._routingMetaData.routedByUserInteraction=!0}else if(h.x===l.x){var p=(h.y+l.y)/2;if(1===e)switch(r){case draw2d.geo.Rectangle.DIRECTION_RIGHT:case draw2d.geo.Rectangle.DIRECTION_LEFT:p=s.y;break;case draw2d.geo.Rectangle.DIRECTION_UP:case draw2d.geo.Rectangle.DIRECTION_DOWN:d=s.x}if(e===n-2)switch(a){case draw2d.geo.Rectangle.DIRECTION_RIGHT:case draw2d.geo.Rectangle.DIRECTION_LEFT:p=o.y;break;case draw2d.geo.Rectangle.DIRECTION_UP:case draw2d.geo.Rectangle.DIRECTION_DOWN:d=o.x}t.setVertex(e-1,new draw2d.geo.Point(c.x,p)),t.setVertex(e+2,new draw2d.geo.Point(u.x,p)),t.removeVertexAt(e),t.removeVertexAt(e),t._routingMetaData.routedByUserInteraction=!0}},splitSegment:function(t,e,i,n){var s=t.getVertices().getSize()-1,r=t.getVertex(e),o=t.getVertex(e+1),a=40;if(r.x==o.x)if(t._routingMetaData.routedByUserInteraction=!0,1===s){var c=r.getDistance(o)/4/2,h=new draw2d.geo.Point(r.x,n-c),l=new draw2d.geo.Point(o.x+a,n-c),u=new draw2d.geo.Point(o.x+a,n+c),d=new draw2d.geo.Point(o.x,n+c);t.insertVertexAt(e+1,h),t.insertVertexAt(e+2,l),t.insertVertexAt(e+3,u),t.insertVertexAt(e+4,d)}else{var h=new draw2d.geo.Point(0,0),l=new draw2d.geo.Point(0,0);0===e?(h.y=n,h.x=r.x,l.y=n,l.x=o.x+a,t.setVertex(e+1,new draw2d.geo.Point(l.x,o.y))):e===s-1?(h.y=n,h.x=r.x-a,l.y=n,l.x=o.x,t.setVertex(e,new draw2d.geo.Point(h.x,r.y))):(h.y=n,h.x=r.x-a/2,l.y=n,l.x=o.x+a/2,t.setVertex(e,new draw2d.geo.Point(h.x,r.y)),t.setVertex(e+1,new draw2d.geo.Point(l.x,o.y))),t.insertVertexAt(e+1,h),t.insertVertexAt(e+2,l)}else if(r.y==o.y)if(t._routingMetaData.routedByUserInteraction=!0,1===s){var c=r.getDistance(o)/4/2,h=new draw2d.geo.Point(i-c,r.y),l=new draw2d.geo.Point(i-c,r.y-a),u=new draw2d.geo.Point(i+c,r.y-a),d=new draw2d.geo.Point(i+c,r.y);t.insertVertexAt(e+1,h),t.insertVertexAt(e+2,l),t.insertVertexAt(e+3,u),t.insertVertexAt(e+4,d)}else{var h=new draw2d.geo.Point(0,0),l=new draw2d.geo.Point(0,0);0===e?(h.x=i,h.y=r.y,l.x=i,l.y=o.y+a,t.setVertex(e+1,new draw2d.geo.Point(o.x,l.y))):e===s-1?(h.x=i,h.y=r.y-a,l.x=i,l.y=o.y,t.setVertex(e,new draw2d.geo.Point(r.x,h.y))):(h.x=i,h.y=r.y-a/2,l.x=i,l.y=o.y+a/2,t.setVertex(e,new draw2d.geo.Point(r.x,h.y)),t.setVertex(e+1,new draw2d.geo.Point(o.x,l.y))),t.insertVertexAt(e+1,h),t.insertVertexAt(e+2,l)}},onRightMouseDown:function(t,e,i,n,s){var r=t.hitSegment(e,i),o={split:{name:draw2d.Configuration.i18n.menu.addSegment}};null!==r&&(t.getRouter().canRemoveSegmentAt(t,r.index)&&(o.remove={name:draw2d.Configuration.i18n.menu.deleteSegment}),$.contextMenu({selector:"body",events:{hide:function(){$.contextMenu("destroy")}},callback:$.proxy(function(n,s){switch(n){case"remove":var o=t.getVertices().clone(!0);this.removeSegment(t,r.index);var a=t.getVertices().clone(!0);t.getCanvas().getCommandStack().execute(new draw2d.command.CommandReplaceVertices(t,o,a));break;case"split":var o=t.getVertices().clone(!0);this.splitSegment(t,r.index,e,i);var a=t.getVertices().clone(!0);t.getCanvas().getCommandStack().execute(new draw2d.command.CommandReplaceVertices(t,o,a))}},this),x:e,y:i,items:o}))}}),draw2d.policy.port.PortFeedbackPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.port.PortFeedbackPolicy",init:function(t,e,i){this._super(t,e,i)},onHoverEnter:function(t,e,i){},onHoverLeave:function(t,e,i){}}),draw2d.policy.port.ElasticStrapFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.ElasticStrapFeedbackPolicy",init:function(t,e,i){this._super(t,e,i),this.connectionLine=null},onDragStart:function(t,e,i,n,s,r){this.connectionLine=new draw2d.shape.basic.Line,this.connectionLine.setCanvas(t),this.connectionLine.getShapeElement(),this.onDrag(t,e)},onDrag:function(t,e){var i=e.ox+e.getParent().getAbsoluteX(),n=e.oy+e.getParent().getAbsoluteY();this.connectionLine.setStartPoint(i,n),this.connectionLine.setEndPoint(e.getAbsoluteX(),e.getAbsoluteY())},onDragEnd:function(t,e,i,n,s,r){this.connectionLine.setCanvas(null),this.connectionLine=null},onHoverEnter:function(t,e,i){this.connectionLine.setGlow(!0),i.setGlow(!0)},onHoverLeave:function(t,e,i){i.setGlow(!1),this.connectionLine.setGlow(!1)}}),draw2d.policy.port.IntrusivePortsFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.IntrusivePortsFeedbackPolicy",init:function(t,e,i){this._super(t,e,i),this.connectionLine=null,this.tweenable=null},onDragStart:function(t,e,i,n,s,r){var o=0,a=t.getAllPorts().clone();return a.each(function(t,e){"undefined"==typeof e.__beforeInflate&&(e.__beforeInflate=e.getWidth()),o=e.__beforeInflate}),a.grep(function(t){return t.NAME!=e.NAME&&t.parent!==e.parent||t instanceof draw2d.HybridPort||e instanceof draw2d.HybridPort}),this.tweenable=new Tweenable,this.tweenable.tween({from:{size:o/2},to:{size:o},duration:200,easing:"easeOutSine",step:function(t){a.each(function(e,i){i.shape.attr({rx:t.size,ry:t.size}),i.width=i.height=2*t.size})}}),this.connectionLine=new draw2d.shape.basic.Line,this.connectionLine.setCanvas(t),this.connectionLine.getShapeElement(),this.connectionLine.setDashArray("- "),this.connectionLine.setColor("#30c48a"),this.onDrag(t,e),!0},onDrag:function(t,e){var i=e.ox+e.getParent().getAbsoluteX(),n=e.oy+e.getParent().getAbsoluteY();this.connectionLine.setStartPoint(i,n),this.connectionLine.setEndPoint(e.getAbsoluteX(),e.getAbsoluteY())},onDragEnd:function(t,e,i,n,s,r){this.tweenable&&(this.tweenable.stop(!0),this.tweenable.dispose(),this.tweenable=null),t.getAllPorts().each(function(t,e){e.shape.attr({rx:e.__beforeInflate/2,ry:e.__beforeInflate/2}),e.width=e.height=e.__beforeInflate,delete e.__beforeInflate}),this.connectionLine.setCanvas(null),this.connectionLine=null},onHoverEnter:function(t,e,i){this.connectionLine.setGlow(!0),i.setGlow(!0)},onHoverLeave:function(t,e,i){i.setGlow(!1),null===this.connectionLine,this.connectionLine.setGlow(!1)}}),draw2d.Configuration={version:"6.1.66",i18n:{command:{move:"Move Shape",assignShape:"Add Shapes to Composite",groupShapes:"Group Shapes",ungroupShapes:"Ungroup Shapes",deleteShape:"Delete Shape",moveShape:"Move Shape",moveLine:"Move Line",addShape:"Add Shape",moveVertex:"Move Vertex",moveVertices:"Move Vertices",deleteVertex:"Delete Vertex",resizeShape:"Resize Shape",collection:"Execute Commands",addVertex:"Add Vertex",changeAttributes:"Change Attributes",connectPorts:"Connect Ports"},menu:{deleteSegment:"Delete Segment",addSegment:"Add Segment"},dialog:{filenamePrompt:"Enter Filename:"}},factory:{createResizeHandle:function(t,e){return new draw2d.ResizeHandle(t,e)},createConnection:function(t,e,i,n){return console.log("deprecated call factory.createConnection"),new draw2d.Connection},createInputPort:function(t){return new draw2d.InputPort},createOutputPort:function(t){return new draw2d.OutputPort},createHybridPort:function(t){return new draw2d.HybridPort}}},draw2d.HeadlessCanvas=Class.extend({NAME:"draw2d.HeadlessCanvas",init:function(){this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.eventSubscriptions={},this.commandStack=new draw2d.command.CommandStack},clear:function(){return this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.commandStack.markSaveLocation(),this},calculateConnectionIntersection:function(){},hideDecoration:function(){},showDecoration:function(){},add:function(t,e,i){if(t.getCanvas()!==this)return t instanceof draw2d.shape.basic.Line?this.lines.add(t):this.figures.add(t),t.canvas=this,this},getLines:function(){return this.lines},getFigures:function(){return this.figures},getLine:function(t){for(var e=this.lines.getSize(),i=0;i<e;i++){var n=this.lines.get(i);if(n.getId()===t)return n}return null},getFigure:function(t){var e=null;return this.figures.each(function(i,n){if(n.id===t)return e=n,!1}),e},registerPort:function(t){return this.commonPorts.contains(t)||this.commonPorts.add(t),this},getAllPorts:function(){return this.commonPorts},getCommandStack:function(){return this.commandStack},fireEvent:function(t,e){if("undefined"!=typeof this.eventSubscriptions[t])for(var i=this.eventSubscriptions[t],n=0;n<i.length;n++)try{i[n](this,e)}catch(t){console.log(t),console.log(i[n])}},on:function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)"undefined"==typeof this.eventSubscriptions[i[n]]&&(this.eventSubscriptions[i[n]]=[]),this.eventSubscriptions[i[n]].push(e);return this},off:function(t){if("undefined"==typeof t)this.eventSubscriptions={};else if("string"==typeof t)this.eventSubscriptions[t]=[];else for(var e in this.eventSubscriptions)this.eventSubscriptions[e]=$.grep(this.eventSubscriptions[e],function(e){return e!==t});return this}}),draw2d.Canvas=Class.extend({NAME:"draw2d.Canvas",init:function(t,e,i){var n=this;this.setScrollArea(document.body),this.canvasId=t,this.html=$("#"+t),this.html.css({cursor:"default"}),$.isNumeric(e)&&$.isNumeric(i)?(this.initialWidth=e,this.initialHeight=i):(this.initialWidth=this.getWidth(),this.initialHeight=this.getHeight()),this.html.css({"-webkit-tap-highlight-color":"rgba(0,0,0,0)"}),"undefined"!=typeof this.html.droppable&&(this.html.droppable({accept:".draw2d_droppable",over:function(t,e){n.onDragEnter(e.draggable)},out:function(t,e){n.onDragLeave(e.draggable)},drop:function(t,e){t=n._getEvent(t);var i=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);n.onDrop(e.draggable,i.getX(),i.getY(),t.shiftKey,t.ctrlKey)}}),$(".draw2d_droppable").draggable({appendTo:"body",stack:"body",zIndex:27e3,helper:"clone",drag:function(t,e){t=n._getEvent(t);var i=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);n.onDrag(e.draggable,i.getX(),i.getY(),t.shiftKey,t.ctrlKey)},stop:function(t,e){},start:function(t,e){$(e.helper).addClass("shadow")}})),$.isNumeric(i)?this.paper=Raphael(t,e,i):this.paper=Raphael(t,this.getWidth(),this.getHeight()),this.paper.canvas.style.position="absolute",this.zoomPolicy=null,this.zoomFactor=1,this.selection=new draw2d.Selection,this.currentDropTarget=null,this.currentHoverFigure=null,this.regionDragDropConstraint=new draw2d.policy.figure.RegionEditPolicy(0,0,this.getWidth(),this.getHeight()),this.eventSubscriptions={},this.editPolicy=new draw2d.util.ArrayList,this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.resizeHandles=new draw2d.util.ArrayList,this.commandStack=new draw2d.command.CommandStack,this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList,this.lineIntersections=new draw2d.util.ArrayList,this.installEditPolicy(new draw2d.policy.canvas.WheelZoomPolicy),this.installEditPolicy(new draw2d.policy.canvas.DefaultKeyboardPolicy),this.installEditPolicy(new draw2d.policy.canvas.BoundingboxSelectionPolicy),this.installEditPolicy(new draw2d.policy.canvas.DropInterceptorPolicy),this.installEditPolicy(new draw2d.policy.connection.ComposedConnectionCreatePolicy([new draw2d.policy.connection.DragConnectionCreatePolicy,new draw2d.policy.connection.ClickConnectionCreatePolicy])),this.commandStack.addEventListener(function(t){t.isPostChangeEvent()===!0&&(n.calculateConnectionIntersection(),n.linesToRepaintAfterDragDrop.each(function(t,e){e.svgPathString=null,e.repaint()}),n.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList)}),this.mouseDown=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseDragDiffX=0,this.mouseDragDiffY=0,this.html.bind("mouseup touchend",function(t){if(n.mouseDown!==!1){t=n._getEvent(t),n.calculateConnectionIntersection(),n.mouseDown=!1;var e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);n.editPolicy.each(function(i,s){s.onMouseUp(n,e.x,e.y,t.shiftKey,t.ctrlKey)}),n.mouseDragDiffX=0,n.mouseDragDiffY=0}}),this.html.bind("mousemove touchmove",function(t){t=n._getEvent(t);var e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);if(n.mouseDown===!1){try{var i=n.getBestFigure(e.x,e.y);i!==n.currentHoverFigure&&null!==n.currentHoverFigure&&(n.currentHoverFigure.onMouseLeave(),n.currentHoverFigure.fireEvent("mouseleave"),n.fireEvent("mouseleave",{figure:n.currentHoverFigure})),i!==n.currentHoverFigure&&null!==i&&(i.onMouseEnter(),i.fireEvent("mouseenter"),n.fireEvent("mouseenter",{figure:i})),n.currentHoverFigure=i}catch(t){console.log(t)}n.editPolicy.each(function(i,s){s.onMouseMove(n,e.x,e.y,t.shiftKey,t.ctrlKey)}),n.fireEvent("mousemove",{x:e.x,y:e.y,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,hoverFigure:n.currentHoverFigure})}else{var s=(t.clientX-n.mouseDownX)*n.zoomFactor,r=(t.clientY-n.mouseDownY)*n.zoomFactor;n.editPolicy.each(function(e,i){i.onMouseDrag(n,s,r,s-n.mouseDragDiffX,r-n.mouseDragDiffY,t.shiftKey,t.ctrlKey)}),n.mouseDragDiffX=s,n.mouseDragDiffY=r,n.fireEvent("mousemove",{x:e.x,y:e.y,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,hoverFigure:n.currentHoverFigure})}}),this.html.bind("mousedown touchstart",function(t){try{var e=null;switch(t.which){case 1:case 0:try{t.preventDefault(),t=n._getEvent(t),n.mouseDownX=t.clientX,n.mouseDownY=t.clientY,n.mouseDragDiffX=0,n.mouseDragDiffY=0,e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY),n.mouseDown=!0,n.editPolicy.each(function(i,s){s.onMouseDown(n,e.x,e.y,t.shiftKey,t.ctrlKey)})}catch(t){console.log(t)}break;case 3:t.preventDefault(),t=n._getEvent(t),e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY),n.onRightMouseDown(e.x,e.y,t.shiftKey,t.ctrlKey);break;case 2:}}catch(t){console.log(t)}}),this.html.on("dblclick",function(t){t=n._getEvent(t),n.mouseDownX=t.clientX,n.mouseDownY=t.clientY;var e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);n.onDoubleClick(e.x,e.y,t.shiftKey,t.ctrlKey)}),this.html.on("click",function(t){if(t=n._getEvent(t),n.mouseDownX===t.clientX||n.mouseDownY===t.clientY){var e=n.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);n.onClick(e.x,e.y,t.shiftKey,t.ctrlKey)}}),this.html.on("MozMousePixelScroll DOMMouseScroll mousewheel",function(t){var e=n._getEvent(t),i=n.fromDocumentToCanvasCoordinate(e.originalEvent.clientX,e.originalEvent.clientY),s=0;"mousewheel"==t.type?s=t.originalEvent.wheelDelta*-1:"DOMMouseScroll"==t.type&&(s=40*t.originalEvent.detail);var r=n.onMouseWheel(s,i.x,i.y,e.shiftKey,e.ctrlKey);r===!1&&t.preventDefault()}),this.keyupCallback=function(t){var e=$(t.target);e.is("input")||e.is("textarea")||n.editPolicy.each(function(e,i){i instanceof draw2d.policy.canvas.KeyboardPolicy&&i.onKeyUp(n,t.keyCode,t.shiftKey,t.ctrlKey)})},$(document).bind("keyup",this.keyupCallback),this.keydownCallback=function(t){var e=$(t.target);e.is("input")||e.is("textarea")||n.editPolicy.each(function(e,i){i instanceof draw2d.policy.canvas.KeyboardPolicy&&i.onKeyDown(n,t.keyCode,t.shiftKey,t.ctrlKey)})},$(document).bind("keydown",this.keydownCallback)},destroy:function(){this.clear(),$(document).unbind("keydown",this.keydownCallback),$(document).unbind("keyup",this.keyupCallback),this.eventSubscriptions={};try{this.paper.remove()}catch(t){}},clear:function(){this.fireEvent("clear");var t=this;return this.lines.clone().each(function(e,i){t.remove(i)}),this.figures.clone().each(function(e,i){t.remove(i)}),this.zoomFactor=1,this.selection.clear(),this.currentDropTarget=null,this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.commandStack.markSaveLocation(),this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList,this.lineIntersections=new draw2d.util.ArrayList,this.fireEvent("select",{figure:null}),this},hideDecoration:function(){},showDecoration:function(){},calculateConnectionIntersection:function(){var t=this;this.lineIntersections=new draw2d.util.ArrayList;for(var e=this.getLines().clone();e.getSize()>0;){var i=e.removeElementAt(0);e.each(function(e,n){var s=i.intersection(n);s.getSize()>0&&(t.lineIntersections.add({line:i,other:n,intersection:s}),t.lineIntersections.add({line:n,other:i,intersection:s}))})}return this},installEditPolicy:function(t){var e=this;return t instanceof draw2d.policy.canvas.SelectionPolicy?(this.getSelection().getAll().each(function(t,e){e.unselect()}),this.editPolicy.grep(function(t){var i=!(t instanceof draw2d.policy.canvas.SelectionPolicy);return i===!1&&t.onUninstall(e),i})):t instanceof draw2d.policy.canvas.ZoomPolicy?(this.editPolicy.grep(function(t){var i=!(t instanceof draw2d.policy.canvas.ZoomPolicy);return i===!1&&t.onUninstall(e),i}),this.zoomPolicy=t):t instanceof draw2d.policy.connection.ConnectionCreatePolicy?this.editPolicy.grep(function(t){var i=!(t instanceof draw2d.policy.connection.ConnectionCreatePolicy);return i===!1&&t.onUninstall(e),i}):t instanceof draw2d.policy.canvas.DropInterceptorPolicy,t.onInstall(this),this.editPolicy.add(t),this},uninstallEditPolicy:function(t){if(null!==t){var e=this.editPolicy.remove(t);if(null!==e)e.onUninstall(this),e instanceof draw2d.policy.canvas.ZoomPolicy&&(this.zoomPolicy=null);else{var i=this,n="string"==typeof t?t:t.NAME;this.editPolicy.grep(function(t){return t.NAME!==n||(t.onUninstall(i),t instanceof draw2d.policy.canvas.ZoomPolicy&&(i.zoomPolicy=null),!1)})}return this}},getDropInterceptorPolicies:function(){return this.editPolicy.clone().grep(function(t){return t instanceof draw2d.policy.canvas.DropInterceptorPolicy})},setZoom:function(t,e){this.zoomPolicy&&this.zoomPolicy.setZoom(t,e)},getZoom:function(){return this.zoomFactor},getDimension:function(){return new draw2d.geo.Rectangle(0,0,this.initialWidth,this.initialHeight)},setDimension:function(t,e){if("undefined"==typeof t){var i=this.getFigures().clone().map(function(t){return t.getAbsoluteX()+t.getWidth()}),n=this.getFigures().clone().map(function(t){return t.getAbsoluteY()+t.getHeight()});this.initialHeight=Math.max.apply(Math,n.asArray()),this.initialWidth=Math.max.apply(Math,i.asArray())}else t instanceof draw2d.geo.Rectangle?(this.initialWidth=t.w,this.initialHeight=t.h):"number"==typeof t.width&&"number"==typeof t.height?(this.initialWidth=t.width,this.initialHeight=t.height):"number"==typeof t&&"number"==typeof e&&(this.initialWidth=t,this.initialHeight=e);return this.html.css({width:this.initialWidth+"px",height:this.initialHeight+"px"}),this.paper.setSize(this.initialWidth,this.initialHeight),this.setZoom(this.zoomFactor,!1),this},fromDocumentToCanvasCoordinate:function(t,e){return new draw2d.geo.Point((t-this.getAbsoluteX()+this.getScrollLeft())*this.zoomFactor,(e-this.getAbsoluteY()+this.getScrollTop())*this.zoomFactor)},fromCanvasToDocumentCoordinate:function(t,e){return new draw2d.geo.Point(t*(1/this.zoomFactor)+this.getAbsoluteX()-this.getScrollLeft(),e*(1/this.zoomFactor)+this.getAbsoluteY()-this.getScrollTop())},getHtmlContainer:function(){return this.html},_getEvent:function(t){if("undefined"!=typeof t.originalEvent){if(t.originalEvent.touches&&t.originalEvent.touches.length)return t.originalEvent.touches[0];if(t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length)return t.originalEvent.changedTouches[0]}return t},setScrollArea:function(t){return this.scrollArea=$(t),this},getScrollArea:function(){return this.scrollArea},getScrollLeft:function(){return this.getScrollArea().scrollLeft()},getScrollTop:function(){return this.getScrollArea().scrollTop()},setScrollLeft:function(t){return this.getScrollArea().scrollLeft(),this},setScrollTop:function(t){return this.getScrollArea().scrollTop(),this},scrollTo:function(t,e){return this.getScrollArea().scrollTop(t),this.getScrollArea().scrollLeft(e),this},getAbsoluteX:function(){return this.html.offset().left},getAbsoluteY:function(){return this.html.offset().top},getWidth:function(){return this.html.width()},getHeight:function(){return this.html.height()},add:function(t,e,i){if(t.getCanvas()!==this)return t instanceof draw2d.shape.basic.Line?(this.lines.add(t),this.linesToRepaintAfterDragDrop=this.lines):(this.figures.add(t),"undefined"!=typeof i?t.setPosition(e,i):"undefined"!=typeof e&&t.setPosition(e)),t.setCanvas(this),t.installEditPolicy(this.regionDragDropConstraint),t.getShapeElement(),t.repaint(),this.fireEvent("figure:add",{figure:t,canvas:this}),t.fireEvent("added",{figure:t,canvas:this}),t.fireEvent("move",{figure:t,dx:0,dy:0}),t instanceof draw2d.shape.basic.PolyLine&&(this.calculateConnectionIntersection(),this.linesToRepaintAfterDragDrop.each(function(t,e){e.svgPathString=null,e.repaint()}),this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList),this},remove:function(t){if(t.getCanvas()!==this)return this;var e=this;return this.getSelection().contains(t)&&this.editPolicy.each(function(i,n){"function"==typeof n.unselect&&n.unselect(e,t)}),t instanceof draw2d.shape.basic.Line?this.lines.remove(t):this.figures.remove(t),t.setCanvas(null),t instanceof draw2d.Connection&&t.disconnect(),this.fireEvent("figure:remove",{figure:t}),t.fireEvent("removed",{figure:t,canvas:this}),this},getLines:function(){return this.lines},getFigures:function(){return this.figures},getLine:function(t){for(var e=this.lines.getSize(),i=0;i<e;i++){var n=this.lines.get(i);if(n.getId()===t)return n}return null},getFigure:function(t){var e=null;return this.figures.each(function(i,n){if(n.id===t)return e=n,!1}),e},getIntersection:function(t){var e=new draw2d.util.ArrayList;return this.lineIntersections.each(function(i,n){n.line===t&&n.intersection.each(function(t,i){e.add({x:i.x,y:i.y,justTouching:i.justTouching,other:n.other})})}),e},snapToHelper:function(t,e){if(this.getSelection().getSize()>1)return e;var i=this,n=e.clone();return this.editPolicy.each(function(s,r){e=r.snap(i,t,e,n)}),e},registerPort:function(t){return this.commonPorts.contains(t)||this.commonPorts.add(t),this},unregisterPort:function(t){return this.commonPorts.remove(t),this},getAllPorts:function(){return this.commonPorts},getCommandStack:function(){return this.commandStack},getPrimarySelection:function(){return this.selection.getPrimary()},getSelection:function(){return this.selection},setCurrentSelection:function(t){var e=this;return this.selection.each(function(t,i){e.editPolicy.each(function(t,n){"function"==typeof n.unselect&&n.unselect(e,i)})}),this.addSelection(t),this},addSelection:function(t){var e=this,i=function(t,i){e.editPolicy.each(function(t,n){"function"==typeof n.select&&n.select(e,i)})};return t instanceof draw2d.util.ArrayList?t.each(i):i(0,t),this},getBestFigure:function(t,e,i,n){$.isArray(i)||(i=i?[i]:[]),$.isArray(n)||(n=n?[n]:[]);var s,r,o=null,a=null,c=function(t,e){var i,n;for(i=0,n=e.length;i<n;i++){var s=e[i];if($.isFunction(s)){if(t instanceof s)return!0}else if(s===t||s.contains(t))return!0}return!1},h=function(t){return c(t,i)},l=0===n.length?function(){return!0}:function(t){return c(t,n)},u=function(i){i.each(function(i,n){var s=n.figure;return u(s.children),null===o&&s.isVisible()&&s.hitTest(t,e)&&!h(s)&&l(s)&&(o=s),null===o})};for(s=0,r=this.resizeHandles.getSize();s<r;s++)if(a=this.resizeHandles.get(s),a.isVisible()&&a.hitTest(t,e)&&!h(a)&&l(a))return a;for(s=0,r=this.commonPorts.getSize();s<r;s++)if(port=this.commonPorts.get(s),u(port.children),null===o&&port.isVisible()&&port.hitTest(t,e)&&!h(port)&&l(port)&&(o=port),null!==o)return o;for(s=this.figures.getSize()-1;s>=0;s--){var d=this.figures.get(s);if(u(d.children),null===o&&d.isVisible()&&d.hitTest(t,e)&&!h(d)&&l(d)&&(o=d),null!==o){var p=this.getBestLine(t,e,o);if(null!==p){var f=$(p.shape.node).index(),g=$(o.shape.node).index();if(g<f)return p}return o}}var m=this.lines.getSize();for(s=0;s<m;s++){var v=this.lines.get(s);if(u(v.children),null!==o)return o}return o=this.getBestLine(t,e,i,n),null!==o?o:o},getBestLine:function(t,e,i){$.isArray(i)||(i=i instanceof draw2d.Figure?[i]:[]);for(var n=this.lines.getSize(),s=0;s<n;s++){var r=this.lines.get(s);if(r.isVisible()===!0&&r.hitTest(t,e)===!0&&$.inArray(r,i)===-1)return r}return null},onDragEnter:function(t){},onDrag:function(t,e,i){},onDragLeave:function(t){},onDrop:function(t,e,i,n,s){},onDoubleClick:function(t,e,i,n){var s=this.getBestFigure(t,e);null===s&&(s=this.getBestLine(t,e)),this.fireEvent("dblclick",{figure:s,x:t,y:e,shiftKey:i,ctrlKey:n}),this.editPolicy.each(function(r,o){o.onDoubleClick(s,t,e,i,n)})},onClick:function(t,e,i,n){var s=this.getBestFigure(t,e);this.fireEvent("click",{figure:s,x:t,y:e,relX:null!==s?t-s.getAbsoluteX():0,relY:null!==s?e-s.getAbsoluteY():0,shiftKey:i,ctrlKey:n}),this.editPolicy.each(function(r,o){o.onClick(s,t,e,i,n)})},onRightMouseDown:function(t,e,i,n){var s=this.getBestFigure(t,e);this.fireEvent("contextmenu",{figure:s,x:t,y:e,shiftKey:i,ctrlKey:n}),null!==s&&(s.fireEvent("contextmenu",{figure:s,x:t,y:e,shiftKey:i,ctrlKey:n}),s.onContextMenu(t,e),s.editPolicy.each(function(r,o){o.onRightMouseDown(s,t,e,i,n)})),this.editPolicy.each(function(r,o){o.onRightMouseDown(s,t,e,i,n)})},onMouseWheel:function(t,e,i,n,s){var r=!0;return this.fireEvent("wheel",{wheelDelta:t,x:e,y:i,shiftKey:n,ctrlKey:s}),this.editPolicy.each(function(o,a){r=a.onMouseWheel(t,e,i,n,s)&&r}),r},fireEvent:function(t,e){if("undefined"!=typeof this.eventSubscriptions[t])for(var i=this.eventSubscriptions[t],n=0;n<i.length;n++)try{i[n](this,e)}catch(t){console.log(t),console.log(i[n])}},on:function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)"undefined"==typeof this.eventSubscriptions[i[n]]&&(this.eventSubscriptions[i[n]]=[]),this.eventSubscriptions[i[n]].push(e);return this},off:function(t){if("undefined"==typeof t)this.eventSubscriptions={};else if("string"==typeof t)this.eventSubscriptions[t]=[];else for(var e in this.eventSubscriptions)this.eventSubscriptions[e]=$.grep(this.eventSubscriptions[e],function(e){return e!==t});return this}}),draw2d.Selection=Class.extend({NAME:"draw2d.Selection",init:function(){this.primary=null,this.all=new draw2d.util.ArrayList},clear:function(){return this.primary=null,this.all=new draw2d.util.ArrayList,this},getPrimary:function(){return this.primary},setPrimary:function(t){return this.primary=t,this.add(t),this},remove:function(t){return this.all.remove(t),this.primary===t&&(this.primary=null),this},add:function(t){return null===t||this.all.contains(t)||this.all.add(t),this},contains:function(t,e){if(e){for(var i=0;i<this.all.getSize();i++){var n=this.all.get(i);if(n===t||n.contains(t))return!0}return!1}return this.all.contains(t)},getSize:function(){return this.all.getSize()},getAll:function(t){if(t===!0){var e=new draw2d.util.ArrayList,i=function(t){e.addAll(t,!0),t.each(function(t,e){e instanceof draw2d.shape.composite.StrongComposite&&i(e.getAssignedFigures())})};return i(this.all),e}return this.all.clone()},each:function(t,e){return this.all.each(t,e),this}}),draw2d.Figure=Class.extend({NAME:"draw2d.Figure",MIN_TIMER_INTERVAL:50,init:function(t,e,i){this.setterWhitelist=$.extend({id:this.setId,x:this.setX,y:this.setY,width:this.setWidth,height:this.setHeight,boundingBox:this.setBoundingBox,minWidth:this.setMinWidth,minHeight:this.setMinHeight,cssClass:this.setCssClass,userData:this.setUserData,resizeable:this.setResizeable,selectable:this.setSelectable,angle:this.setRotationAngle,alpha:this.setAlpha,opacity:this.setAlpha,glow:this.setGlow,visible:this.setVisible,keepAspectRatio:this.setKeepAspectRatio},e),this.getterWhitelist=$.extend({id:this.getId,visible:this.isVisible,angle:this.getRotationAngle,x:this.getX,y:this.getY,width:this.getWidth,height:this.getHeight,resizeable:this.isResizeable,selectable:this.isSelectable,alpha:this.getAlpha,opacity:this.getAlpha},i);var n=this;this.id=draw2d.util.UUID.create(),this.isResizeHandle=!1,this.command=null,this.canvas=null,this.shape=null,this.children=new draw2d.util.ArrayList,this.selectable=!0,this.deleteable=!0,this.resizeable=!0,this.draggable=!0,this.visible=!0,this.keepAspectRatio=!1,this.canSnapToHelper=!0,this.snapToGridAnchor=new draw2d.geo.Point(0,0),this.editPolicy=new draw2d.util.ArrayList,this.timerId=-1,this.timerInterval=0,this.parent=null,this.composite=null,this.userData=null,this.x=0,this.y=0,this.minHeight=5,this.minWidth=5,this.rotationAngle=0,this.cssClass=this.NAME.replace(new RegExp("[.]","g"),"_"),this.width=this.getMinWidth(),this.height=this.getMinHeight(),this.alpha=1,this.isInDragDrop=!1,this.ox=0,this.oy=0,this.repaintBlocked=!1,this.lastAppliedAttributes={},this.selectionHandles=new draw2d.util.ArrayList,this.panningDelegate=null,this.eventSubscriptions={},this.relocateChildrenEventCallback=function(){n.children.each(function(t,e){e.locator.relocate(t,e.figure)})},this.defaultSelectionAdapter=this.selectionAdapter=function(){return n},this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy),this.attr(t)},attr:function(t,e){var i=this,n=this.repaintBlocked;try{if($.isPlainObject(t))for(var s in t)if("userData."===s.substring(0,9))null===this.userData&&(this.userData={}),draw2d.util.JSON.set({userData:this.userData},s,t[s]),this.fireEvent("change:"+s,{value:t[s]});else{var r=this.setterWhitelist[s];r?r.call(this,t[s]):$.isFunction(t[s])&&(this[s]=$.proxy(t[s],this))}else if("string"==typeof t){if("undefined"==typeof e){var o=this.getterWhitelist[t];if($.isFunction(o))return o.call(this);if("userData."===t.substring(0,9)){var a={userData:this.userData};return draw2d.util.JSON.get(a,t)}return}if($.isFunction(e)&&(e=e()),"userData."===t.substring(0,9))null===this.userData&&(this.userData={}),draw2d.util.JSON.set({userData:this.userData},t,e),this.fireEvent("change:"+t,{value:e});else{var c=this.setterWhitelist[t];c&&c.call(this,e)}}else{if($.isArray(t))return h={},$.each(t,function(t,e){h[e]=i.attr(e)}),h;if("undefined"==typeof t){var h={};for(s in this.getterWhitelist)h[s]=this.getterWhitelist[s].call(this);return h}}}finally{this.repaintBlocked=n}return this},pick:function(t,e){var i,n="string"!=typeof arguments[1]?arguments[1]:Array.prototype.slice.call(arguments,1),s={};
for(i in n)"undefined"!=typeof t[i]&&(s[i]=t[i]);return s},select:function(t){"undefined"==typeof t&&(t=!0);var e=this;return this.editPolicy.each(function(i,n){n instanceof draw2d.policy.figure.SelectionPolicy&&n.onSelect(e.canvas,e,t)}),null!==this.canvas&&this.canvas.getSelection().add(this),this},unselect:function(){var t=this;return this.editPolicy.each(function(e,i){i instanceof draw2d.policy.figure.SelectionPolicy&&i.onUnselect(t.canvas,t)}),null!==this.canvas&&this.canvas.getSelection().remove(this),this},setSelectionAdapter:function(t){return null==t?this.selectionAdapter=this.defaultSelectionAdapter:this.selectionAdapter=t,this},getSelectionAdapter:function(){return this.selectionAdapter},isSelected:function(){return null!==this.canvas&&this.canvas.getSelection().contains(this)},setUserData:function(t){return this.userData=t,this.fireEvent("change:userData",{value:t}),this},getUserData:function(){return this.userData},getId:function(){return this.id},setId:function(t){return this.id=t,this},getCssClass:function(){return this.cssClass},setCssClass:function(t){return this.cssClass=null===t?null:$.trim(t),null===this.shape?this:(null===this.cssClass?this.shape.node.removeAttribute("class"):this.shape.node.setAttribute("class",this.cssClass),this.fireEvent("change:cssClass",{value:this.cssClass}),this)},hasCssClass:function(t){return null!==this.cssClass&&new RegExp(" "+$.trim(t)+" ").test(" "+this.cssClass+" ")},addCssClass:function(t){return t=$.trim(t),this.hasCssClass(t)||(null===this.cssClass?this.setCssClass(t):this.setCssClass(this.cssClass+" "+t),this.fireEvent("change:cssClass",{value:this.cssClass})),this},removeCssClass:function(t){t=$.trim(t);var e=" "+this.cssClass.replace(/[\t\r\n]/g," ")+" ";if(this.hasCssClass(t)){for(;e.indexOf(" "+t+" ")>=0;)e=e.replace(" "+t+" "," ");this.setCssClass(e.replace(/^\s+|\s+$/g,"")),this.fireEvent("change:cssClass",{value:this.cssClass})}return this},toggleCssClass:function(t){t=$.trim(t);var e=" "+this.cssClass.replace(/[\t\r\n]/g," ")+" ";if(this.hasCssClass(t)){for(;e.indexOf(" "+t+" ")>=0;)e=e.replace(" "+t+" "," ");this.setCssClass(e.replace(/^\s+|\s+$/g,""))}else this.setCssClass(this.cssClass+" "+t);return this.fireEvent("change:cssClass",{value:this.cssClass}),this},setCanvas:function(t){return null===t&&null!==this.shape&&(this.isSelected()&&this.unselect(),this.shape.remove(),this.shape=null),this.canvas=t,null!==this.canvas&&this.getShapeElement(),this.lastAppliedAttributes={},null===t?this.stopTimer():this.timerInterval>=this.MIN_TIMER_INTERVAL&&this.startTimer(this.timerInterval),this.children.each(function(e,i){i.figure.setCanvas(t)}),this},getCanvas:function(){return this.canvas},startTimer:function(t){return this.stopTimer(),this.timerInterval=Math.max(this.MIN_TIMER_INTERVAL,t),null!==this.canvas&&(this.timerId=window.setInterval($.proxy(function(){this.onTimer(),this.fireEvent("timer")},this),this.timerInterval)),this},stopTimer:function(){return this.timerId>=0&&(window.clearInterval(this.timerId),this.timerId=-1),this},onTimer:function(){},toFront:function(t){if(this.composite instanceof draw2d.shape.composite.StrongComposite&&"undefined"!=typeof t){var e=t.getZOrder(),i=this.composite.getZOrder();e<i&&(t=this.composite)}if("undefined"==typeof t){if(this.getShapeElement().toFront(),null!==this.canvas){var n=this.canvas.getFigures(),s=this.canvas.getLines();null!==n.remove(this)?n.add(this):null!==s.remove(this)&&s.add(this)}}else if(this.getShapeElement().insertAfter(t.getTopLevelShapeElement()),null!==this.canvas){var n=this.canvas.getFigures(),s=this.canvas.getLines();if(null!==n.remove(this)){var r=n.indexOf(t);n.insertElementAt(this,r+1)}else null!==s.remove(this)&&s.add(this)}var o=this;return this.children.each(function(t,e){e.figure.toFront(o)}),this.selectionHandles.each(function(t,e){e.toFront()}),this},toBack:function(t){if(this.composite instanceof draw2d.shape.composite.StrongComposite)return void this.toFront(this.composite);if(null!==this.canvas){var e=this.canvas.getFigures(),i=this.canvas.getLines();null!==e.remove(this)?e.insertElementAt(this,0):null!==i.remove(this)&&i.insertElementAt(this,0),"undefined"!=typeof t?this.getShapeElement().insertBefore(t.getShapeElement()):this.getShapeElement().toBack()}var n=this;return this.children.each(function(t,e){e.figure.toFront(n)},!0),this},installEditPolicy:function(t){if(t instanceof draw2d.policy.figure.SelectionFeedbackPolicy){var e=this;this.editPolicy.grep(function(t){var i=!(t instanceof draw2d.policy.figure.SelectionFeedbackPolicy);return i||t.onUninstall(e),i})}return t.onInstall(this),this.editPolicy.add(t),this},uninstallEditPolicy:function(t){var e=this.editPolicy.remove(t);if(null!==e)return void e.onUninstall(this);var i=this,n="string"==typeof t?t:t.NAME;this.editPolicy.grep(function(t){return t.NAME!==n||(t.onUninstall(i),!1)})},add:function(t,e,i){if("undefined"==typeof e||null===e)throw"Second parameter 'locator' is required for method 'Figure#add'";return t.setParent(this),e.bind(this,t),t.on("resize",this.relocateChildrenEventCallback),$.isNumeric(i)?this.children.insertElementAt({figure:t,locator:e},i):this.children.add({figure:t,locator:e}),null!==this.canvas&&t.setCanvas(this.canvas),this.repaint(),this},remove:function(t){if("undefined"==typeof t||null===t)return debug.warn("The parameter child is required for Figure.remove"),null;var e=null;return this.children.grep(function(i){var n=i.figure!==t;return n||(e=i),n}),null!==e?(t.setParent(null),t.setCanvas(null),e.locator.unbind(this,t),t.off(this.relocateChildrenEventCallback),this.repaint(),e):null},getChildren:function(){return this.children.clone().map(function(t){return t.figure})},resetChildren:function(){return this.children.each(function(t,e){e.figure.setCanvas(null)}),this.children=new draw2d.util.ArrayList,this.repaint(),this},getShapeElement:function(){return null!==this.shape?this.shape:(this.shape=this.createShapeElement(),this.isVisible()||this.shape.hide(),null!==this.cssClass&&this.shape.node.setAttribute("class",this.cssClass),this.shape)},getTopLevelShapeElement:function(){return this.getShapeElement()},createShapeElement:function(){throw"Inherited class ["+this.NAME+"] must override the abstract method createShapeElement"},repaint:function(t){if(this.repaintBlocked===!0||null===this.shape)return this;var e=this;return t=t||{},this.visible!==!0?(this.shape.isVisible()===!0&&($.isNumeric(t.visibleDuration)?$(this.shape.node).fadeOut(t.visibleDuration,function(){e.shape.hide()}):this.shape.hide()),this):(this.shape.isVisible()===!1&&($.isNumeric(t.visibleDuration)?$(this.shape.node).fadeIn(t.visibleDuration,function(){e.shape.show()}):this.shape.show()),t.opacity=this.alpha,t=draw2d.util.JSON.flatDiff(t,this.lastAppliedAttributes),this.lastAppliedAttributes=t,$.isEmptyObject(t)||this.shape.attr(t),this.applyTransformation(),this.children.each(function(t,e){e.locator.relocate(t,e.figure)}),this)},applyTransformation:function(){return this},setGlow:function(t){return this},getHandleBBox:function(){return null},onDragStart:function(t,e,i,n){this.isInDragDrop=!1;var s=this.getHandleBBox();if(null!==s&&s.translate(this.getAbsolutePosition().scale(-1)).hitTest(t,e)===!1)return this.panningDelegate=this.getBestChild(this.getX()+t,this.getY()+e),null!==this.panningDelegate&&this.panningDelegate.onDragStart(t-this.panningDelegate.x,e-this.panningDelegate.y,i,n),!1;if(this.command=this.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),null!==this.command){this.ox=this.getX(),this.oy=this.getY(),this.isInDragDrop=!0;var r=this,o=!0;return this.editPolicy.each(function(s,a){a instanceof draw2d.policy.figure.DragDropEditPolicy&&(o=o&&a.onDragStart(r.canvas,r,t,e,i,n))}),o&&this.fireEvent("dragstart",{x:t,y:e,shiftKey:i,ctrlKey:n}),o}return!1},onDrag:function(t,e,i,n,s,r){var o=this;this.editPolicy.each(function(i,n){if(n instanceof draw2d.policy.figure.DragDropEditPolicy){var s=n.adjustPosition(o,o.ox+t,o.oy+e);s&&(t=s.x-o.ox,e=s.y-o.oy)}});var a=new draw2d.geo.Point(this.ox+t,this.oy+e);this.getCanSnapToHelper()&&(a=this.getCanvas().snapToHelper(this,a)),this.setPosition(a),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.onDrag(o.canvas,o)}),this.fireEvent("drag",{dx:t,dy:e,dx2:i,dy2:n,shiftKey:s,ctrlKey:r})},onPanning:function(t,e,i,n,s,r){},onPanningEnd:function(){},onDragEnd:function(t,e,i,n){var s=this;null!==this.command&&(this.command.setPosition(this.x,this.y),this.canvas.getCommandStack().execute(this.command),this.command=null),this.isInDragDrop=!1,this.panningDelegate=null,this.editPolicy.each(function(r,o){o instanceof draw2d.policy.figure.DragDropEditPolicy&&o.onDragEnd(s.canvas,s,t,e,i,n)}),this.fireEvent("move",{figure:this,dx:0,dy:0}),this.fireEvent("change:x",{figure:this,dx:0}),this.fireEvent("change:y",{figure:this,dy:0}),this.fireEvent("dragend",{x:t,y:e,shiftKey:i,ctrlKey:n})},delegateTarget:function(t){var e=this,i=t;return this.getCanvas().getDropInterceptorPolicies().each(function(n,s){if(i=s.delegateTarget(t,e),null!==i)return!1}),i},onDragEnter:function(t){},onDragLeave:function(t){},onDrop:function(t,e,i,n,s){},onCatch:function(t,e,i,n,s){},onMouseEnter:function(){},onMouseLeave:function(){},onDoubleClick:function(){},onClick:function(){},onContextMenu:function(t,e){},setAlpha:function(t){if(t=Math.min(1,Math.max(0,parseFloat(t))),t!==this.alpha)return this.alpha=t,this.repaint(),this.fireEvent("change:opacity",{value:this.alpha}),this},getAlpha:function(){return this.alpha},setRotationAngle:function(t){var e=this;return this.rotationAngle=t,this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(e.canvas,e)}),this.fireEvent("change:angle",{value:this.rotationAngle}),this.repaint(),this},getRotationAngle:function(){return this.rotationAngle},setVisible:function(t,e){if(t=!!t,t!==this.visible)return this.visible=t,this.repaint({visibleDuration:e}),this.visible?this.fireEvent("show"):this.fireEvent("hide"),this.fireEvent("change:visibility",{value:this.visible}),this},isVisible:function(){return this.visible&&null!==this.shape},setKeepAspectRatio:function(t){return this.keepAspectRatio=t,this},getKeepAspectRatio:function(){return this.keepAspectRatio},getZOrder:function(){if(null===this.shape)return-1;for(var t=0,e=this.shape.node;null!==(e=e.previousSibling);)t++;return t},setCanSnapToHelper:function(t){return this.canSnapToHelper=!!t,this},getCanSnapToHelper:function(){return this.canSnapToHelper},getSnapToGridAnchor:function(){return this.snapToGridAnchor},setSnapToGridAnchor:function(t){return this.snapToGridAnchor=t,this},setWidth:function(t){return this.setDimension(parseFloat(t),this.getHeight()),this.fireEvent("change:width",{value:this.width}),this},getWidth:function(){return this.width},setHeight:function(t){return this.setDimension(this.getWidth(),parseFloat(t)),this.fireEvent("change:height",{value:this.height}),this},getHeight:function(){return this.height},getMinWidth:function(){return this.minWidth},setMinWidth:function(t){return this.minWidth=parseFloat(t),this.fireEvent("change:minWidth",{value:this.minWidth}),this.setWidth(this.getWidth()),this},getMinHeight:function(){return this.minHeight},setMinHeight:function(t){return this.minHeight=parseFloat(t),this.fireEvent("change:minHeight",{value:this.minHeight}),this.setHeight(this.getHeight()),this},setX:function(t){return this.setPosition(parseFloat(t),this.y),this.fireEvent("change:x",{value:this.x}),this},getX:function(){return this.x},setY:function(t){return this.setPosition(this.x,parseFloat(t)),this.fireEvent("change:y",{value:this.y}),this},getY:function(){return this.y},getAbsoluteX:function(){return this.parent?this.getX()+this.parent.getAbsoluteX():this.getX()},getAbsoluteY:function(){return this.parent?this.getY()+this.parent.getAbsoluteY():this.getY()},getAbsolutePosition:function(){return new draw2d.geo.Point(this.getAbsoluteX(),this.getAbsoluteY())},getAbsoluteBounds:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setPosition:function(t,e){var i={x:this.x,y:this.y};t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e);var n=this;this.editPolicy.each(function(t,e){if(e instanceof draw2d.policy.figure.DragDropEditPolicy){var i=e.adjustPosition(n,n.x,n.y);n.x=i.x,n.y=i.y}}),this.repaint(),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(n.canvas,n)});var s=this.x-i.x,r=this.y-i.y;return this.fireEvent("move",{figure:this,dx:s,dy:r}),this.fireEvent("change:x",{figure:this,dx:s}),this.fireEvent("change:y",{figure:this,dy:r}),this},getPosition:function(){return new draw2d.geo.Point(this.getX(),this.getY())},translate:function(t,e){return this.setPosition(this.getX()+t,this.getY()+e),this},setDimension:function(t,e){var i={width:this.width,height:this.height},n=this;return t=Math.max(this.getMinWidth(),t),e=Math.max(this.getMinHeight(),e),this.width===t&&this.height===e?(this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(n.canvas,n)}),this):(this.editPolicy.each(function(i,s){if(s instanceof draw2d.policy.figure.DragDropEditPolicy){var r=s.adjustDimension(n,t,e);t=r.w,e=r.h}}),this.keepAspectRatio===!0?t>=this.getMinWidth()&&(e=this.getHeight()*(t/this.getWidth()),e>=this.getMinHeight()&&(this.width=t,this.height=e)):(this.width=Math.max(this.getMinWidth(),t),this.height=Math.max(this.getMinHeight(),e)),this.repaint(),this.fireEvent("resize"),this.fireEvent("change:dimension",{value:{height:this.height,width:this.width,old:i}}),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(n.canvas,n)}),this)},setBoundingBox:function(t){t=new draw2d.geo.Rectangle(t);var e=this.repaintBlocked;return this.repaintBlocked=!0,this.setPosition(t.x,t.y),this.repaintBlocked=e,this.setDimension(t.w,t.h),this},getBoundingBox:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},hitTest:function(t,e,i){return"number"==typeof i?this.getBoundingBox().scale(i,i).hitTest(t,e):this.getBoundingBox().hitTest(t,e)},setDraggable:function(t){return this.draggable=!!t,this},isDraggable:function(){return null!==this.composite?this.composite.isMemberDraggable(this,this.draggable):this.draggable},isResizeable:function(){return this.resizeable},setResizeable:function(t){return this.resizeable=!!t,this.fireEvent("change:resizeable",{value:this.resizeable}),this},isSelectable:function(){return null!==this.composite?this.composite.isMemberSelectable(this,this.selectable):this.selectable},setSelectable:function(t){return this.selectable=!!t,this.fireEvent("change:selectable",{value:this.selectable}),this},isStrechable:function(){return!this.getKeepAspectRatio()},isDeleteable:function(){return this.deleteable},setDeleteable:function(t){return this.deleteable=!!t,this.fireEvent("change:deleteable",{value:this.deleteable}),this},setParent:function(t){return this.parent=t,null!==t?this.setSelectionAdapter(t.getSelectionAdapter()):this.setSelectionAdapter(null),this},getParent:function(){return this.parent},contains:function(t){if(t.getParent()===this)return!0;for(var e=0,i=this.children.getSize();e<i;e++){var n=this.children.get(e).figure;if(n.contains(t))return!0}return!1},getRoot:function(){for(var t=this.parent;null!==t&&null!==t.parent;)t=t.parent;return t},setComposite:function(t){if(null!==t&&!(t instanceof draw2d.shape.composite.StrongComposite))throw"'composite must inherit from 'draw2d.shape.composite.StrongComposite'";return this.composite=t,this},getComposite:function(){return this.composite},fireEvent:function(t,e){try{if("undefined"==typeof this.eventSubscriptions[t])return;if(this._inEvent===!0)return;this._inEvent=!0;for(var i=this.eventSubscriptions[t],n=0;n<i.length;n++)i[n](this,e)}finally{this._inEvent=!1,"change:"===t.substring(0,7)&&this.fireEvent("change",t.substring(7))}},on:function(t,e,i){var n=t.split(" ");i&&(e=$.proxy(e,i),e.___originalCallback=e);for(var s=0;s<n.length;s++)"undefined"==typeof this.eventSubscriptions[n[s]]&&(this.eventSubscriptions[n[s]]=[]),-1!==$.inArray(e,this.eventSubscriptions[n[s]])||this.eventSubscriptions[n[s]].push(e);return this},off:function(t){if("undefined"==typeof t)this.eventSubscriptions={};else if("string"==typeof t)this.eventSubscriptions[t]=[];else for(var e in this.eventSubscriptions)this.eventSubscriptions[e]=$.grep(this.eventSubscriptions[e],function(e){return"undefined"!=typeof e.___originalCallback?e.___originalCallback!==t:e!==t});return this},getBestChild:function(t,e,i){$.isArray(i)||(i=i instanceof draw2d.Figure?[i]:[]);var n=null,s=function(r){r.each(function(r,o){var a=o.figure;return s(a.children),null===n&&a.isVisible()===!0&&a.hitTest(t,e)===!0&&$.inArray(a,i)===-1&&(n=a),null===n})};return s(this.children),n},createCommand:function(t){return null===t?null:t.getPolicy()===draw2d.command.CommandType.MOVE?this.isDraggable()?new draw2d.command.CommandMove(this):null:t.getPolicy()===draw2d.command.CommandType.DELETE?this.isDeleteable()?new draw2d.command.CommandDelete(this):null:t.getPolicy()===draw2d.command.CommandType.RESIZE&&this.isResizeable()?new draw2d.command.CommandResize(this):null},clone:function(cloneMetaData){cloneMetaData=$.extend({exludeChildren:!1},cloneMetaData);var clone=eval("new "+this.NAME+"();"),initialId=clone.id;return clone.setPersistentAttributes(this.getPersistentAttributes()),clone.id=initialId,cloneMetaData.exludeChildren===!1&&(clone.resetChildren(),this.children.each(function(i,entry){var child=entry.figure.clone(),locator=entry.locator.NAME?eval("new "+entry.locator.NAME+"();"):null;clone.add(child,locator)})),clone},getPersistentAttributes:function(){var t={type:this.NAME,id:this.id,x:this.getX(),y:this.getY(),width:this.width,height:this.height,alpha:this.alpha,angle:this.rotationAngle,userData:$.extend(!0,{},this.userData)};return null!==this.cssClass&&(t.cssClass=this.cssClass),null!==this.composite&&(t.composite=this.composite.getId()),t},setPersistentAttributes:function(t){return this.id=t.id,this.setPosition(parseFloat(t.x),parseFloat(t.y)),"undefined"!=typeof t.width&&(this.width=parseFloat(t.width)),"undefined"!=typeof t.height&&(this.height=parseFloat(t.height)),"undefined"!=typeof t.userData&&(this.userData=t.userData),"undefined"!=typeof t.cssClass&&this.setCssClass(t.cssClass),"undefined"!=typeof t.alpha&&this.setAlpha(parseFloat(t.alpha)),"undefined"!=typeof t.angle&&(this.rotationAngle=parseFloat(t.angle)),this}}),draw2d.shape.node.Node=draw2d.Figure.extend({NAME:"draw2d.shape.node.Node",init:function(t,e,i){this.inputPorts=new draw2d.util.ArrayList,this.outputPorts=new draw2d.util.ArrayList,this.hybridPorts=new draw2d.util.ArrayList,this.persistPorts=!0,this.portRelayoutRequired=!0,this.cachedPorts=null,this._super($.extend({width:50,height:50},t),$.extend({persistPorts:this.setPersistPorts},e),$.extend({persistPorts:this.getPersistPorts},i))},setPersistPorts:function(t){return this.persistPorts=t,this.fireEvent("change:persistPorts",{value:this.persistPorts}),this},getPersistPorts:function(){return this.persistPorts},toFront:function(t){this._super(t);var e=this;return this.getPorts().each(function(i,n){n.getConnections().each(function(e,i){i.toFront(t)}),n.toFront(e)}),this},toBack:function(t){return this.getPorts().each(function(e,i){i.getConnections().each(function(e,i){i.toBack(t)}),i.toBack(t)}),this._super(t),this},setVisible:function(t,e){t?this.getPorts().each(function(t,i){"undefined"!=typeof i.__initialVisibilityState?i.setVisible(i.__initialVisibilityState,e):i.setVisible(!0,e),delete i.__initialVisibilityState}):this.getPorts().each(function(t,i){i.__initialVisibilityState=i.isVisible(),i.setVisible(!1,e)}),this._super(t,e)},getPorts:function(t){if("boolean"==typeof t&&t===!1){var e=new draw2d.util.ArrayList;return e.addAll(this.inputPorts),e.addAll(this.outputPorts),e.addAll(this.hybridPorts),e}if(null===this.cachedPorts){this.cachedPorts=new draw2d.util.ArrayList,this.cachedPorts.addAll(this.inputPorts),this.cachedPorts.addAll(this.outputPorts),this.cachedPorts.addAll(this.hybridPorts);var i=this;this.children.each(function(t,e){i.cachedPorts.addAll(e.figure.getPorts())})}return this.cachedPorts},getInputPorts:function(){return this.inputPorts.clone().addAll(this.hybridPorts)},getOutputPorts:function(){return this.outputPorts.clone().addAll(this.hybridPorts)},clone:function(t){t=$.extend({excludePorts:!1},t);var e=this._super(t);if(t.excludePorts===!1){e.resetPorts();var i=this.getPorts(!1);i.each(function(t,i){var n=i.clone(),s=i.getLocator().clone();e.addPort(n,s)})}return e},getPort:function(t){var e=null;return this.getPorts().each(function(i,n){if(n.getName()===t)return e=n,!1}),e},getInputPort:function(t){if("number"==typeof t)return this.inputPorts.get(t);for(var e=0;e<this.inputPorts.getSize();e++){var i=this.inputPorts.get(e);if(i.getName()===t)return i}return null},getOutputPort:function(t){if("number"==typeof t)return this.outputPorts.get(t);for(var e=0;e<this.outputPorts.getSize();e++){var i=this.outputPorts.get(e);if(i.getName()===t)return i}return null},getHybridPort:function(t){if("number"==typeof t)return this.hybridPorts.get(t);for(var e=0;e<this.hybridPorts.getSize();e++){var i=this.hybridPorts.get(e);if(i.getName()===t)return i}return null},addPort:function(t,e){if(!(t instanceof draw2d.Port))throw"Argument is not typeof 'draw2d.Port'. \nFunction: draw2d.shape.node.Node#addPort";null!==this.cachedPorts&&this.cachedPorts.add(t),this.portRelayoutRequired=!0,t instanceof draw2d.InputPort?this.inputPorts.add(t):t instanceof draw2d.OutputPort?this.outputPorts.add(t):t instanceof draw2d.HybridPort&&this.hybridPorts.add(t),"undefined"!=typeof e&&e instanceof draw2d.layout.locator.Locator&&t.setLocator(e),t.setParent(this),t.setCanvas(this.canvas),t.setDeleteable(!1),null!==this.canvas&&(t.getShapeElement(),this.canvas.registerPort(t))},resetPorts:function(){var t=this;return this.getPorts().each(function(e,i){t.removePort(i)}),this},removePort:function(t){if(this.portRelayoutRequired=!0,this.cachedPorts=null,this.inputPorts.remove(t),this.outputPorts.remove(t),this.hybridPorts.remove(t),null!==t.getCanvas()){t.getCanvas().unregisterPort(t);for(var e=t.getConnections(),i=0;i<e.getSize();++i)t.getCanvas().remove(e.get(i))}t.setCanvas(null)},createPort:function(t,e){var i=null,n=0;switch(t){case"input":i=draw2d.Configuration.factory.createInputPort(this),n=this.inputPorts.getSize();break;case"output":i=draw2d.Configuration.factory.createOutputPort(this),n=this.outputPorts.getSize();break;case"hybrid":i=draw2d.Configuration.factory.createHybridPort(this),n=this.hybridPorts.getSize();break;default:throw"Unknown type ["+t+"] of port requested"}return i.setName(t+n),this.addPort(i,e),this.setDimension(this.width,this.height),i},getConnections:function(){for(var t=new draw2d.util.ArrayList,e=this.getPorts(),i=0;i<e.getSize();i++)for(var n=e.get(i),s=0,r=n.getConnections().getSize();s<r;s++)t.contains(n.getConnections().get(s))||t.add(n.getConnections().get(s));return t},setCanvas:function(t){var e=this.canvas;this._super(t);var i=this.getPorts();null!==e&&i.each(function(t,i){e.unregisterPort(i)}),null!==t?(i.each(function(e,i){i.setCanvas(t),t.registerPort(i)}),this.setDimension(this.width,this.height)):i.each(function(t,e){e.setCanvas(null)})},setRotationAngle:function(t){this.portRelayoutRequired=!0,this._super(t),this.layoutPorts()},setDimension:function(t,e){this.portRelayoutRequired=!0,this._super(t,e)},onPortValueChanged:function(t){},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(this._super(t),this.layoutPorts())},layoutPorts:function(){this.portRelayoutRequired!==!1&&(this.portRelayoutRequired=!1,this.outputPorts.each(function(t,e){e.locator.relocate(t,e)}),this.inputPorts.each(function(t,e){e.locator.relocate(t,e)}),this.hybridPorts.each(function(t,e){e.locator.relocate(t,e)}))},createCommand:function(t){return null===t?null:t.getPolicy()===draw2d.command.CommandType.ROTATE?new draw2d.command.CommandRotate(this,(this.getRotationAngle()+90)%360):this._super(t)},getPersistentAttributes:function(){var t=this._super();return this.persistPorts===!0&&(t.ports=[],this.getPorts().each(function(e,i){t.ports.push($.extend(i.getPersistentAttributes(),{name:i.getName(),port:i.NAME,locator:i.getLocator().NAME}))})),t},setPersistentAttributes:function(memento){this._super(memento),"undefined"!=typeof memento.ports&&(this.persistPorts=!0,this.resetPorts(),$.each(memento.ports,$.proxy(function(i,e){var port=eval("new "+e.port+"()"),locator=eval("new "+e.locator+"()");port.setPersistentAttributes(e),this.addPort(port,locator),port.setName(e.name)},this)))}}),draw2d.VectorFigure=draw2d.shape.node.Node.extend({NAME:"draw2d.VectorFigure",init:function(t,e,i){this.stroke=1,this.radius=0,this.bgColor=new draw2d.util.Color("#ffffff"),this.color=new draw2d.util.Color("#303030"),this.dasharray=null,this.strokeBeforeGlow=this.stroke,this.glowIsActive=!1,this._super(t,$.extend({dasharray:this.setDashArray,radius:this.setRadius,bgColor:this.setBackgroundColor,color:this.setColor,stroke:this.setStroke},e),$.extend({dasharray:this.getDashArray,radius:this.getRadius,bgColor:this.getBackgroundColor,color:this.getColor,stroke:this.getStroke},i))},setRadius:function(t){return this.radius=t,this.repaint(),this.fireEvent("change:radius",{value:this.radius}),this},getRadius:function(){return this.radius},setDashArray:function(t){return this.dasharray=t,this.repaint(),this.fireEvent("change:dashArray",{value:this.dasharray}),this},getDashArray:function(){return this.dasharray},setGlow:function(t){return t===this.glowIsActive?this:(this.glowIsActive=t,t===!0?(this.strokeBeforeGlow=this.getStroke(),this.setStroke(2.5*this.strokeBeforeGlow)):this.setStroke(this.strokeBeforeGlow),this)},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape)return t=t||{},t.x=this.getAbsoluteX(),t.y=this.getAbsoluteY(),"undefined"==typeof t.stroke&&(null===this.color||0===this.stroke?t.stroke="none":t.stroke=this.color.hash()),draw2d.util.JSON.ensureDefault(t,"stroke-width",this.stroke),draw2d.util.JSON.ensureDefault(t,"fill",this.bgColor.hash()),draw2d.util.JSON.ensureDefault(t,"dasharray",this.dasharray),this._super(t),this},setBackgroundColor:function(t){return this.bgColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:bgColor",{value:this.bgColor}),this},getBackgroundColor:function(){return this.bgColor},setStroke:function(t){return this.stroke=t,this.repaint(),this.fireEvent("change:stroke",{value:this.stroke}),this},getStroke:function(){return this.stroke},setColor:function(t){return this.color=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:color",{value:this.color}),this},getColor:function(){return this.color},getPersistentAttributes:function(){var t=$.extend(this._super(),{bgColor:this.bgColor.hash(),color:this.color.hash(),stroke:this.stroke,radius:this.radius,dasharray:this.dasharray});return t},setPersistentAttributes:function(t){return this._super(t),"undefined"!=typeof t.radius&&this.setRadius(t.radius),"undefined"!=typeof t.bgColor&&this.setBackgroundColor(t.bgColor),"undefined"!=typeof t.color&&this.setColor(t.color),"undefined"!=typeof t.stroke&&this.setStroke(null===t.stroke?0:parseFloat(t.stroke)),"string"==typeof t.dasharray&&(this.dasharray=t.dasharray),this}}),draw2d.shape.basic.Rectangle=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Rectangle",init:function(t,e,i){this.dasharray=null,this._super($.extend({bgColor:"#a0a0a0",color:"#1B1B1B"},t),$.extend({},{dash:this.setDashArray,dasharray:this.setDashArray},e),$.extend({},{dash:this.getDashArray,dasharray:this.getDashArray},i)),this.lastAppliedTransformation=""},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape)return t=$.extend({},{width:this.getWidth(),height:this.getHeight(),r:this.getRadius()},t),null!==this.dasharray&&(t["stroke-dasharray"]=this.dasharray),this._super(t),this},applyTransformation:function(){var t="R"+this.rotationAngle;if(90===this.getRotationAngle()||270===this.getRotationAngle()){var e=this.getHeight()/this.getWidth();t=t+"S"+e+","+1/e+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2)}return this.shape.transform(t),this.lastAppliedTransformation=t,this},createShapeElement:function(){return this.canvas.paper.rect(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setDashArray:function(t){return this.dasharray=t,this.repaint(),this.fireEvent("change:dashArray",{value:this.dasharray}),this},getDashArray:function(t){return this.dasharray},getPersistentAttributes:function(){var t=this._super();return null!==this.dasharray&&(t.dasharray=this.dasharray),t},setPersistentAttributes:function(t){return this._super(t),"string"==typeof t.dasharray&&(this.dasharray=t.dasharray),this}}),draw2d.SetFigure=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.SetFigure",init:function(t,e,i){this.svgNodes=null,this.originalWidth=null,this.originalHeight=null,this.scaleX=1,this.scaleY=1,this.strokeScale=!0,this._super($.extend({stroke:0,bgColor:null},t),e,i)},setCanvas:function(t){null===t&&null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=null),this._super(t)},setCssClass:function(t){return this._super(t),null===this.svgNodes?this:(null===this.cssClass?this.svgNodes.forEach(function(t){t.node.removeAttribute("class")}):this.svgNodes.forEach(function(e){e.node.setAttribute("class",t)}),this)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.originalWidth&&(this.scaleX=this.width/this.originalWidth,this.scaleY=this.height/this.originalHeight),t=t||{},this.applyAlpha(),this._super(t))},setVisible:function(t,e){this._super(t,e),null!==this.svgNodes&&(e?this.visible===!0?this.svgNodes.forEach(function(t){$(t.node).fadeIn(e,function(){t.show()})}):this.svgNodes.forEach(function(t){$(t.node).fadeOut(e,function(){t.hide()})}):this.visible===!0?this.svgNodes.show():this.svgNodes.hide())},applyAlpha:function(){this.svgNodes.attr({opacity:this.alpha})},applyTransformation:function(){var t="S"+this.scaleX+","+this.scaleY+",0,0 R"+this.rotationAngle+","+(this.getWidth()/2|0)+","+(this.getHeight()/2|0)+"T"+this.getAbsoluteX()+","+this.getAbsoluteY();if(this.svgNodes.transform(t),90===this.rotationAngle||270===this.rotationAngle){var e=this.svgNodes.getBBox(!0),i=e.height/e.width,n=e.width/e.height,s="...S"+i+","+n+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2);this.svgNodes.transform(s)}},toFront:function(t){if(this.composite instanceof draw2d.shape.composite.StrongComposite&&"undefined"!=typeof t){var e=t.getZOrder(),i=this.composite.getZOrder();e<i&&(t=this.composite)}if("undefined"==typeof t){if(this.getShapeElement().toFront(),null!==this.svgNodes&&this.svgNodes.toFront(),null!==this.canvas){var n=this.canvas.getFigures(),s=this.canvas.getLines();null!==n.remove(this)?n.add(this):null!==s.remove(this)&&s.add(this)}}else if(null!==this.svgNodes&&this.svgNodes.insertAfter(t.getTopLevelShapeElement()),this.getShapeElement().insertAfter(t.getTopLevelShapeElement()),null!==this.canvas){var n=this.canvas.getFigures(),s=this.canvas.getLines();if(null!==n.remove(this)){var r=n.indexOf(t);n.insertElementAt(this,r+1)}else null!==s.remove(this)&&s.add(this)}this.children.each(function(e,i){i.figure.toFront(t)});var o=this;return this.getPorts().each(function(e,i){i.getConnections().each(function(e,i){i.toFront(t)}),i.toFront(o)}),this.selectionHandles.each(function(t,e){e.toFront()}),this},toBack:function(t){if(this.composite instanceof draw2d.shape.composite.StrongComposite)return void this.toFront(this.composite);if(null!==this.canvas){var e=this.canvas.getFigures(),i=this.canvas.getLines();null!==e.remove(this)?e.insertElementAt(this,0):null!==i.remove(this)&&i.insertElementAt(this,0);
}this.children.each(function(e,i){i.figure.toBack(t)},!0),null!==this.svgNodes&&("undefined"!=typeof t?this.svgNodes.insertBefore(t.getShapeElement()):this.svgNodes.toBack()),null!==this.canvas&&("undefined"!=typeof t?this.getShapeElement().insertBefore(t.getShapeElement()):this.getShapeElement().toBack());var n=this;return this.getPorts().each(function(t,e){e.getConnections().each(function(t,e){e.toFront(n)}),e.toFront(n)}),this},getTopLevelShapeElement:function(){return 0===this.svgNodes.length?this.shape:this.svgNodes},createShapeElement:function(){var t=this.canvas.paper.rect(this.getX(),this.getY(),this.getWidth(),this.getHeight());if(this.svgNodes=this.createSet(),"undefined"==typeof this.svgNodes.forEach){var e=this.canvas.paper.set();e.push(this.svgNodes),this.svgNodes=e}this.svgNodes.attr({"stroke-scale":this.strokeScale}),this.setVisible(this.visible),this.setCssClass(this.cssClass);var i=this.svgNodes.getBBox();return this.originalWidth=i.width,this.originalHeight=i.height,t},createSet:function(){return this.canvas.paper.set()}}),draw2d.SVGFigure=draw2d.SetFigure.extend({NAME:"draw2d.SVGFigure",init:function(t,e,i){this.svg=null,this._super($.extend({},t),$.extend({svg:this.setSVG},e),$.extend({svg:this.getSVG},i))},createSet:function(){return null===this.svg&&(this.svg=this.getSVG()),this.importSVG(this.canvas,this.svg)},getSVG:function(){return this.svg},setSVG:function(t,e){if(this.svg=t,null!==this.canvas&&null!==this.svgNodes){var i=this.createSet();if($.isNumeric(e)){i.hide(),i.insertAfter(this.svgNodes);var n=this.svgNodes;this.svgNodes=i,this.applyTransformation(),n.forEach(function(t){$(t.node).fadeOut(e,function(){t.remove()})}),i.forEach(function(t){$(t.node).fadeIn(e)})}else i.insertAfter(this.svgNodes),this.svgNodes.remove(),this.svgNodes=i,this.applyTransformation()}return this},importSVG:function(t,e){var i=t.paper.set();try{if("undefined"==typeof e)throw"No data was provided.";var n=$(e);"undefined"==typeof this._dimensionReadFromJSON&&(n.attr("width")&&n.attr("height")&&this.setDimension(parseFloat(n.attr("width")),parseFloat(n.attr("height"))),delete this._dimensionReadFromJSON);var s=new RegExp("([a-z0-9-]+) ?: ?([^ ;]+)[ ;]?","gi");n.children().each(function(e,n){var r=null,o=null,a={},c=n.tagName,h=c.indexOf(":");if(h!=-1&&(c=c.substr(h+1)),$(n.attributes).each(function(){switch(this.nodeName){case"stroke-dasharray":a[this.nodeName]="- ";break;case"style":o=this.nodeValue;break;case"id":case"xml:space":break;default:this.value?a[this.nodeName]=this.value:a[this.nodeName]=this.nodeValue}}),null!==o)for(;s.exec(o);)a[RegExp.$1]=RegExp.$2;switch("undefined"==typeof a["stroke-width"]&&(a["stroke-width"]="undefined"==typeof a.stroke?0:1.2),c){case"rect":r=t.paper.rect(),"undefined"!=typeof a.rx&&(a.r=parseInt(a.rx),delete a.rx);break;case"circle":r=t.paper.circle();break;case"ellipse":r=t.paper.ellipse();break;case"path":a.fill="none",r=t.paper.path(a.d);break;case"line":a.d="M "+a.x1+" "+a.y1+"L"+a.x2+" "+a.y2,a.fill="none",r=t.paper.path(a.d);break;case"polyline":var l=a.points;a.d="M "+l.replace(" "," L"),r=t.paper.path(a.d);break;case"polygon":r=t.paper.polygon(a.points);break;case"image":r=t.paper.image();break;case"tspan":case"text":if(n.childNodes.length>0){var u=n.firstChild;do{switch(u.nodeType){case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return;case 3:u=n;break;case 1:}var d=t.paper.text(0,0,$(u).text()),p={x:parseFloat(u.attributes.x.value),y:parseFloat(u.attributes.y.value)};p["text-anchor"]="start","undefined"!=typeof u.attributes["text-anchor"]?p["text-anchor"]=u.attributes["text-anchor"].value:"undefined"!=typeof a["text-anchor"]&&(p["text-anchor"]=a["text-anchor"]),"undefined"!=typeof u.attributes["font-size"]?p["font-size"]=parseInt(u.attributes["font-size"].value):"undefined"!=typeof a["font-size"]&&(p["font-size"]=parseInt(a["font-size"])),"undefined"!=typeof u.attributes["font-family"]?p["font-family"]=u.attributes["font-family"].value:"undefined"!=typeof a["font-family"]&&(p["font-family"]=a["font-family"]),p.fill="#000000","undefined"!=typeof u.attributes.fill?p.fill=u.attributes.fill.value:"undefined"!=typeof a.fill&&(p.fill=a.fill),p.y=p.y+d.getBBox().height/2,d.attr(p),i.push(d),u=u.nextSibling}while(u&&3===u.nodeType)}else r=t.paper.text(0,0,$(n).html()),"undefined"==typeof a.fill&&(a.fill="#000000"),"undefined"==typeof a["text-anchor"]&&(a["text-anchor"]="start"),"undefined"!=typeof a["font-size"]&&(a["font-size"]=parseInt(a["font-size"])),"undefined"!=typeof a["font-family"]&&(a["font-family"]=parseInt(a["font-family"])),a.y=parseFloat(a.y)+r.getBBox().height/2}null!==r&&(r.attr(a),i.push(r))})}catch(t){alert("The SVG data you entered was invalid! ("+t+")")}return i},setPersistentAttributes:function(t){return this._super(t),"undefined"!=typeof t.width?this._dimensionReadFromJSON=!0:"undefined"!=typeof t.height&&(this._dimensionReadFromJSON=!0),this}}),draw2d.shape.node.Hub=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Hub",DEFAULT_COLOR:new draw2d.util.Color("#4DF0FE"),BACKGROUND_COLOR:new draw2d.util.Color("#29AA77"),init:function(t,e,i){this.label=null,this._super($.extend({color:this.DEFAULT_COLOR.darker(),bgColor:this.BACKGROUND_COLOR},t),$.extend({label:this.setLabel,text:this.setLabel},e),$.extend({label:this.getLabel,text:this.getLabel},i));var n=this.port=this.createPort("hybrid",new draw2d.layout.locator.CenterLocator),s=draw2d.geo.Rectangle;this.CONNECTION_DIR_STRATEGY=[function(t){return n.getParent().getBoundingBox().getDirection(t.getAbsolutePosition())},function(t){return n.getAbsoluteY()>t.getAbsoluteY()?s.DIRECTION_UP:s.DIRECTION_DOWN},function(t){return n.getAbsoluteX()>t.getAbsoluteX()?s.DIRECTION_LEFT:s.DIRECTION_RIGHT}],this.port.setGlow=$.proxy(this.setGlow,this),this.port._orig_hitTest=this.port.hitTest,this.port.hitTest=$.proxy(this.hitTest,this),this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port)),this.port.setVisible(!1),this.port.setVisible=function(){},this.setConnectionDirStrategy(0)},delegateTarget:function(t){return this.getHybridPort(0).delegateTarget(t)},getMinWidth:function(){return null!==this.label?Math.max(this.label.getMinWidth(),this._super()):this._super()},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},"undefined"==typeof t.fill&&(null!==this.bgColor?t.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(.3).hash()+":95":t.fill="none"),this._super(t))},setLabel:function(t){if(null===this.label){var e=this;this.label=new draw2d.shape.basic.Label({text:t,color:"#0d0d0d",fontColor:"#0d0d0d",stroke:0}),this.add(this.label,new draw2d.layout.locator.CenterLocator),this.label.setSelectionAdapter(function(){return e}),this.label.delegateTarget=function(){return e.port}}else this.label.setText(t)},setConnectionDirStrategy:function(t){switch(t){case 0:case 1:case 2:this.port.getConnectionDirection=this.CONNECTION_DIR_STRATEGY[t]}},getPersistentAttributes:function(){var t=this._super();return t.dirStrategy=this.CONNECTION_DIR_STRATEGY.indexOf(this.port.getConnectionDirection),null!==this.label&&(t.label=this.label.getText()),t},setPersistentAttributes:function(t){this._super(t),"number"==typeof t.dirStrategy&&this.setConnectionDirStrategy(t.dirStrategy),"undefined"!=typeof t.label&&this.setLabel(t.label)}}),draw2d.shape.node.HorizontalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.HorizontalBus",init:function(t,e,i){this._super(t,e,i),this.setConnectionDirStrategy(1),this.installEditPolicy(new draw2d.policy.figure.HBusSelectionFeedbackPolicy)}}),draw2d.shape.node.VerticalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.VerticalBus",init:function(t,e,i){this._super(t,e,i),this.setConnectionDirStrategy(2),this.installEditPolicy(new draw2d.policy.figure.VBusSelectionFeedbackPolicy)},setLabel:function(t){var e=null===this.label;this._super(t),e===!0&&null!==this.label&&this.label.setRotationAngle(90)},getMinHeight:function(){return null===this.shape&&null===this.label?0:null!==this.label?this.label.getMinWidth():this._super()},getMinWidth:function(){return null===this.shape&&null===this.label?0:null!==this.label?this.label.getMinHeight():this._super()}}),draw2d.shape.node.Fulcrum=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.Fulcrum",init:function(t,e,i){this._super($.extend({width:40,height:40},t),e,i),this.port.setConnectionAnchor(new draw2d.layout.anchor.ConnectionAnchor(this.port)),this.port.setVisible(!0),this.port.hitTest=this.port._orig_hitTest,this.setConnectionDirStrategy(0),this.setColor(null),this.setRadius(10),this.setBackgroundColor(null),this.setStroke(0),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy)},repaint:function(t){return this.repaintBlocked===!0||null===this.shape?this:(t=t||{},draw2d.util.JSON.ensureDefault(t,"fill",this.bgColor.hash()),this._super(t))}}),draw2d.shape.basic.Arc=draw2d.SetFigure.extend({NAME:"draw2d.shape.basic.Arc",init:function(t,e,i){this.startAngle=180,this.endAngle=360,this._super($.extend({width:80,height:50,bgColor:null,color:"#1B1B1B"},t),e,i),this.strokeScale=!1},createSet:function(){this.canvas.paper.setStart();var t=this.endAngle-this.startAngle>180,e=this.startAngle%360*Math.PI/180,i=this.endAngle%360*Math.PI/180,n=this.getWidth()/2,s=this.getHeight()/2;return this.canvas.paper.path([["M",n,s,"l",n*Math.cos(e),s*Math.sin(e),"A",n,s,0,+t,1,n+n*Math.cos(i),s+s*Math.sin(i),"z"]].join("")).attr({fill:"#fff0f0"}),this.canvas.paper.setFinish()}}),draw2d.shape.basic.Oval=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Oval",init:function(t,e,i){this._super($.extend({bgColor:"#C02B1D",color:"#1B1B1B"},t),$.extend({center:this.setCenter},e),i)},createShapeElement:function(){var t=this.getWidth()/2,e=this.getHeight()/2;return this.canvas.paper.ellipse(this.getAbsoluteX()+t,this.getAbsoluteY()+e,t,e)},getCenter:function(){var t=this.getWidth()/2,e=this.getHeight()/2;return this.getPosition().translate(t,e)},setCenter:function(t,e){var i=new draw2d.geo.Point(t,e),n=this.getWidth()/2,s=this.getHeight()/2;return i.translate(-n,-s),this.setPosition(i),this.fireEvent("change:center",{value:{x:t,y:e}}),this},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},"undefined"==typeof t.rx&&(t.rx=this.width/2,t.ry=this.height/2),"undefined"==typeof t.cx&&(t.cx=this.getAbsoluteX()+t.rx,t.cy=this.getAbsoluteY()+t.ry),this._super(t))},intersectionWithLine:function(t,e){var i=this.getWidth()/2,n=this.getHeight()/2,s=new draw2d.util.ArrayList,r=new draw2d.geo.Point(t.x,t.y),o=e.subtract(t),a=new draw2d.geo.Point(this.getAbsoluteX()+i,this.getAbsoluteY()+n),c=r.subtract(a),h=new draw2d.geo.Point(o.x/(i*i),o.y/(n*n)),l=new draw2d.geo.Point(c.x/(i*i),c.y/(n*n)),u=o.dot(h),d=o.dot(l),p=c.dot(l)-1,f=d*d-u*p;if(f<0);else if(f>0){var g=Math.sqrt(f),m=(-d-g)/u,v=(-d+g)/u;(m<0||1<m)&&(v<0||1<v)||(0<=m&&m<=1&&s.add(t.lerp(e,m)),0<=v&&v<=1&&s.add(t.lerp(e,v)))}else{var y=-d/u;0<=y&&y<=1&&s.add(t.lerp(e,y))}return s}}),draw2d.shape.basic.Circle=draw2d.shape.basic.Oval.extend({NAME:"draw2d.shape.basic.Circle",init:function(t,e,i){this._super(t,$.extend({diameter:this.setDiameter,radius:this.setRadius},e),$.extend({diameter:this.getDiameter,radius:this.getRadius},i)),this.setKeepAspectRatio(!0)},setDiameter:function(t){var e=this.getCenter();return this.setDimension(t,t),this.setCenter(e),this.fireEvent("change:diameter",{value:t}),this},getDiameter:function(){return this.getWidth()},setRadius:function(t){return this.setDiameter(2*t),this.fireEvent("change:radius",{value:t}),this},getPersistentAttributes:function(){var t=this._super();return delete t.radius,t}}),draw2d.shape.basic.Label=draw2d.SetFigure.extend({NAME:"draw2d.shape.basic.Label",FONT_FALLBACK:{Georgia:"Georgia, serif","Palatino Linotype":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Times New Roman":'"Times New Roman", Times, serif',Arial:"Arial, Helvetica, sans-serif","Arial Black":'"Arial Black", Gadget, sans-serif',"Comic Sans MS":'"Comic Sans MS", cursive, sans-serif',Impact:"Impact, Charcoal, sans-serif","Lucida Sans Unicode":'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva":"Tahoma, Geneva, sans-seri","Trebuchet MS":'"Trebuchet MS", Helvetica, sans-serif',Verdana:"Verdana, Geneva, sans-serif","Courier New":'"Courier New", Courier, monospace',"Lucida Console":'"Lucida Console", Monaco, monospace'},init:function(t,e,i){this.text="",this.cachedWidth=null,this.cachedHeight=null,this.cachedMinWidth=null,this.cachedMinHeight=null,this.fontSize=12,this.fontColor=new draw2d.util.Color("#080808"),this.fontFamily=null,this.padding={top:4,right:4,bottom:4,left:4},this.outlineStroke=0,this.outlineColor=new draw2d.util.Color(null),this.bold=!1,this.editor=null,this._super($.extend({stroke:1,width:1,height:1,resizeable:!1},t),$.extend({text:this.setText,editor:this.installEditor,outlineStroke:this.setOutlineStroke,outlineColor:this.setOutlineColor,fontFamily:this.setFontFamily,fontSize:this.setFontSize,fontColor:this.setFontColor,padding:this.setPadding,bold:this.setBold},e),$.extend({text:this.getText,outlineStroke:this.getOutlineStroke,outlineColor:this.getOutlineColor,fontFamily:this.getFontFamily,fontSize:this.getFontSize,fontColor:this.getFontColor,padding:this.getPadding,bold:this.isBold},i)),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy),this.lastAppliedLabelRotation="",this.lastAppliedTextAttributes={}},createSet:function(){return this.canvas.paper.text(0,0,this.text)},setCanvas:function(t){this.clearCache(),this._super(t),this.clearCache()},repaint:function(t){if(!(this.repaintBlocked===!0||null===this.shape||this.parent&&this.parent.repaintBlocked===!0)){var e=this.calculateTextAttr();e.text=this.text;var i=draw2d.util.JSON.flatDiff(e,this.lastAppliedTextAttributes);this.lastAppliedTextAttributes=e,$.isEmptyObject(i)||(this.svgNodes.attr(e),this.svgNodes.attr({x:this.padding.left+this.stroke,y:this.svgNodes.getBBox(!0).height/2+this.padding.top+this.getStroke()})),this._super(t)}},calculateTextAttr:function(){var t={"text-anchor":"start","font-size":this.fontSize,"font-weight":this.bold===!0?"bold":"normal",fill:this.fontColor.hash(),stroke:this.outlineColor.hash(),"stroke-width":this.outlineStroke};return null!==this.fontFamily&&(t["font-family"]=this.fontFamily),t},applyTransformation:function(){var t="R"+this.rotationAngle;return this.shape.transform(t),this.lastAppliedLabelRotation=t,this.svgNodes.transform("R"+this.rotationAngle+"T"+this.getAbsoluteX()+","+this.getAbsoluteY()),this},setFontSize:function(t){this.clearCache(),this.fontSize=t,this.repaint(),this.fireEvent("change:fontSize",{value:this.fontSize}),this.fireEvent("resize");var e=this;return this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(e.canvas,e)}),this},getFontSize:function(){return this.fontSize},setBold:function(t){this.clearCache(),this.bold=t,this.repaint(),this.fireEvent("change:bold",{value:this.bold}),this.fireEvent("resize");var e=this;return this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(e.canvas,e)}),this},isBold:function(){return this.bold},setOutlineColor:function(t){return this.outlineColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:outlineColor",{value:this.outlineColor}),this},getOutlineColor:function(){return this.outlineColor},setOutlineStroke:function(t){return this.outlineStroke=t,this.repaint(),this.fireEvent("change:outlineStroke",{value:this.outlineStroke}),this},getOutlineStroke:function(){return this.outlineStroke},setFontColor:function(t){return this.fontColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:fontColor",{value:this.fontColor}),this},getFontColor:function(){return this.fontColor},setPadding:function(t){return this.clearCache(),"number"==typeof t?this.padding={top:t,right:t,bottom:t,left:t}:$.extend(this.padding,t),this.repaint(),this.fireEvent("change:padding",{value:this.padding}),this},getPadding:function(){return this.padding},setFontFamily:function(t){return this.clearCache(),"undefined"!=typeof t&&null!==t&&"undefined"!=typeof this.FONT_FALLBACK[t]&&(t=this.FONT_FALLBACK[t]),this.fontFamily=t,this.repaint(),this.fireEvent("change:fontFamily",{value:this.fontFamily}),this},getFontFamily:function(){return this.fontFamily},setDimension:function(t,e){return this.clearCache(),this._super(t,e),this},clearCache:function(){return this.portRelayoutRequired=!0,this.cachedMinWidth=null,this.cachedMinHeight=null,this.cachedWidth=null,this.cachedHeight=null,this.lastAppliedTextAttributes={},this},getMinWidth:function(){return null===this.shape?0:(null===this.cachedMinWidth&&(this.cachedMinWidth=this.svgNodes.getBBox(!0).width+this.padding.left+this.padding.right+2*this.getStroke()),this.cachedMinWidth)},getMinHeight:function(){return null===this.shape?0:(null===this.cachedMinHeight&&(this.cachedMinHeight=this.svgNodes.getBBox(!0).height+this.padding.top+this.padding.bottom+2*this.getStroke()),this.cachedMinHeight)},getWidth:function(){return null===this.shape?0:(null===this.cachedWidth&&(this.resizeable===!0?this.cachedWidth=Math.max(this.width,this.getMinWidth()):this.cachedWidth=this.getMinWidth()),this.cachedWidth)},getHeight:function(){return null===this.shape?0:(null===this.cachedHeight&&(this.cachedHeight=Math.max(this.height,this.getMinHeight())),this.cachedHeight)},installEditor:function(editor){return"string"==typeof editor&&(editor=eval("new "+editor+"()")),this.editor=editor,this},onDoubleClick:function(){null!==this.editor&&this.editor.start(this)},getText:function(){return this.text},setText:function(t){this.clearCache(),this.text=t,this.repaint();var e=this;return this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(e.canvas,e)}),this.fireEvent("resize"),this.fireEvent("change:text",{value:this.text}),null!==this.parent&&this.parent.repaint(),this},hitTest:function(t,e){if(0===this.rotationAngle)return this._super(t,e);var i=this.shape.matrix,n=this.getBoundingBox().getVertices();n.each(function(t,e){var n=i.x(e.x,e.y),s=i.y(e.x,e.y);e.x=n,e.y=s});var s=4,r=0,o=s-1,a=!1;for(r=0;r<s;r++){var c=n.get(r),h=n.get(o);(c.y<e&&h.y>=e||h.y<e&&c.y>=e)&&(c.x<=t||h.x<=t)&&c.x+(e-c.y)/(h.y-c.y)*(h.x-c.x)<t&&(a=!a),o=r}return a},getPersistentAttributes:function(){var t=this._super();return t.text=this.text,t.outlineStroke=this.outlineStroke,t.outlineColor=this.outlineColor.hash(),t.fontSize=this.fontSize,t.fontColor=this.fontColor.hash(),t.fontFamily=this.fontFamily,null!==this.editor&&(t.editor=this.editor.NAME),t},setPersistentAttributes:function(memento){this._super(memento),"undefined"!=typeof memento.text&&this.setText(memento.text),"undefined"!=typeof memento.outlineStroke&&this.setOutlineStroke(memento.outlineStroke),"undefined"!=typeof memento.outlineColor&&this.setOutlineColor(memento.outlineColor),"undefined"!=typeof memento.fontFamily&&this.setFontFamily(memento.fontFamily),"undefined"!=typeof memento.fontSize&&this.setFontSize(memento.fontSize),"undefined"!=typeof memento.fontColor&&this.setFontColor(memento.fontColor),"string"==typeof memento.editor&&this.installEditor(eval("new "+memento.editor+"()"))}}),draw2d.shape.basic.Text=draw2d.shape.basic.Label.extend({NAME:"draw2d.shape.basic.Text",init:function(t,e,i){this.cachedWrappedAttr=null,this._super($.extend({width:100,height:50,resizeable:!0},t),e,i),this.installEditPolicy(new draw2d.policy.figure.WidthSelectionFeedbackPolicy)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(this.svgNodes.attr($.extend({},this.calculateTextAttr(),this.wrappedTextAttr(this.text,this.getWidth()-this.padding.left-this.padding.right))),this.svgNodes.attr({x:this.padding.left,y:this.getHeight()/2}),draw2d.SetFigure.prototype.repaint.call(this,t))},setDimension:function(t,e){this.clearCache();var i=this.wrappedTextAttr(this.text,t);return this.cachedMinWidth=Math.max(t,i.width),this.cachedMinHeight=i.height,draw2d.shape.node.Node.prototype.setDimension.call(this,this.cachedMinWidth,this.cachedMinHeight),this.fireEvent("change:dimension",{value:{width:this.cachedMinWidth,height:this.cachedMinHeight}}),this},clearCache:function(){return this._super(),this.cachedWrappedAttr=null,this},getMinWidth:function(){if(null===this.shape)return 0;if(null===this.cachedMinWidth){var t=this.text.split(" ").reduce(function(t,e){return t.length>e.length?t:e}),e=this.canvas.paper.text(0,0,t).attr($.extend({},this.calculateTextAttr(),{text:t}));this.cachedMinWidth=e.getBBox(!0).width+this.padding.left+this.padding.right+2*this.getStroke(),e.remove()}return this.cachedMinWidth},wrappedTextAttr:function(t,e){var i=t.split(" ");if(null===this.canvas||0===i.length)return{text:t,width:e,height:20};if(null===this.cachedWrappedAttr){for(var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s=this.canvas.paper.text(0,0,"").attr($.extend({},this.calculateTextAttr(),{text:n})),r=s.getBBox(!0).width/n.length,o=[i[0]],a=o[0].length*r,c=null,h=1;h<i.length;h++){c=i[h];var l=c.length*r;a+l>e?(o.push("\n"),a=l):(o.push(" "),a+=l),o.push(c)}s.attr({text:o.join("")});var u=s.getBBox(!0);s.remove(),this.cachedWrappedAttr={text:o.join(""),width:Math.max(e,u.width)+this.padding.left+this.padding.right,height:u.height+this.padding.top+this.padding.bottom}}return this.cachedWrappedAttr},getPersistentAttributes:function(){var t=this._super();return t},setPersistentAttributes:function(t){return this._super(t),this}}),draw2d.shape.basic.Line=draw2d.Figure.extend({NAME:"draw2d.shape.basic.Line",DEFAULT_COLOR:new draw2d.util.Color(0,0,0),init:function(t,e,i){this.corona=10,this.isGlowing=!1,this.lineColor=this.DEFAULT_COLOR,this.stroke=1,this.outlineStroke=0,this.outlineColor=new draw2d.util.Color(null),this.outlineVisible=!1,this.draggedSegment=null,this.dasharray=null,this.start=new draw2d.geo.Point(30,30),this.end=new draw2d.geo.Point(100,100),this.vertices=new draw2d.util.ArrayList,this.vertices.add(this.start.clone()),this.vertices.add(this.end.clone()),this._super($.extend({deleteable:!1,selectable:!0},t),$.extend({},{start:this.setStartPosition,startX:this.setStartX,startY:this.setStartY,end:this.setEndPosition,endX:this.setEndX,endY:this.setEndY,vertices:this.setVertices,outlineColor:this.setOutlineColor,outlineStroke:this.setOutlineStroke,color:this.setColor,stroke:this.setStroke,dasharray:this.setDashArray,glow:this.setGlow},e),$.extend({},{start:this.getStartPosition,end:this.getEndPosition,outlineColor:this.getOutlineColor,outlineStroke:this.getOutlineStroke,stroke:this.getStroke,color:this.getColor,dasharray:this.getDashArray,vertices:this.getVertices},i)),0===this.editPolicy.getSize()&&this.installEditPolicy(new draw2d.policy.line.LineSelectionFeedbackPolicy)},setOutlineColor:function(t){return this.outlineColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:outlineColor",{value:this.outlineColor}),this},getOutlineColor:function(){return this.outlineColor},setOutlineStroke:function(t){return this.outlineStroke=t,this.repaint(),this.fireEvent("change:outlineStroke",{value:this.outlineStroke}),this},getOutlineStroke:function(){return this.outlineStroke},onDragStart:function(t,e,i,n,s){var r=this._super(t,e,i,n);return r===!0&&s!==!0&&(this.draggedSegment={index:0,start:this.start,end:this.end}),r},onDrag:function(t,e,i,n){null!==this.command&&(this.vertices.each(function(t,e){e.translate(i,n)}),this.command.updateVertices(this.vertices.clone()),this.start.translate(i,n),this.end.translate(i,n),this.svgPathString=null,this._super(t,e,i,n))},onDragEnd:function(t,e,i,n){if(this.isInDragDrop=!1,this.draggedSegment=null,null!==this.command){var s=this;this.canvas.getCommandStack().execute(this.command),this.command=null,this.isMoving=!1,this.editPolicy.each(function(r,o){o instanceof draw2d.policy.figure.DragDropEditPolicy&&o.onDragEnd(s.canvas,s,t,e,i,n)}),this.fireEvent("move",{figure:this,dx:0,dy:0}),this.fireEvent("dragend",{x:t,y:e,shiftKey:i,ctrlKey:n})}},onClick:function(){},setDashArray:function(t){return this.dasharray=t,this.repaint(),this.fireEvent("change:dashArray",{value:this.dasharray}),this},getDashArray:function(){return this.dasharray},setCoronaWidth:function(t){return this.corona=t,this},createShapeElement:function(){var t=this.canvas.paper.set();return t.push(this.canvas.paper.path("M"+this.start.x+" "+this.start.y+"L"+this.end.x+" "+this.end.y)),t.push(this.canvas.paper.path("M"+this.start.x+" "+this.start.y+"L"+this.end.x+" "+this.end.y)),t.node=t.items[1].node,this.outlineVisible=!0,t},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t?t={stroke:this.lineColor.hash(),"stroke-width":this.stroke,path:["M",this.start.x,this.start.y,"L",this.end.x,this.end.y].join(" ")}:("undefined"==typeof t.path&&(t.path=["M",this.start.x,this.start.y,"L",this.end.x,this.end.y].join(" ")),draw2d.util.JSON.ensureDefault(t,"stroke",this.lineColor.hash()),draw2d.util.JSON.ensureDefault(t,"stroke-width",this.stroke)),draw2d.util.JSON.ensureDefault(t,"stroke-dasharray",this.dasharray),this._super(t),this.outlineStroke>0?(this.shape.items[0].attr({"stroke-width":this.outlineStroke+this.stroke,stroke:this.outlineColor.hash()}),this.outlineVisible===!1&&this.shape.items[0].show(),this.outlineVisible=!0):this.outlineVisible===!0&&(this.shape.items[0].attr({"stroke-width":0,stroke:"none"}),this.shape.items[0].hide()))},toBack:function(t){return this._super(t),this.outlineVisible===!0&&this.shape.items[0].insertBefore(this.shape.items[1]),this},setGlow:function(t){if(this.isGlowing!==t)return t===!0?(this._lineColor=this.lineColor,this._stroke=this.stroke,this.setColor(new draw2d.util.Color("#3f72bf")),this.setStroke(4*this.stroke|0)):(this.setColor(this._lineColor),this.setStroke(this._stroke)),this.isGlowing=t,this},isResizeable:function(){return!0},setStroke:function(t){return this.stroke=parseFloat(t),this.repaint(),this.fireEvent("change:stroke",{value:this.stroke}),this},getStroke:function(){return this.stroke},setColor:function(t){return this.lineColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:color",{value:this.lineColor}),this},getColor:function(){return this.lineColor},translate:function(t,e){this.vertices.each(function(i,n){n.translate(t,e)}),this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone();var i=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(i.canvas,i)}),this.svgPathString=null,this.repaint(),this},getBoundingBox:function(){var t=Math.min.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.x})),e=Math.min.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.y})),i=Math.max.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.x})),n=Math.max.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.y})),s=i-t,r=n-e;return new draw2d.geo.Rectangle(t,e,s,r)},setStartPosition:function(t,e){var i=new draw2d.geo.Point(t,e);if(this.start.equals(i))return this;this.start.setPosition(i),this.vertices.first().setPosition(i),this.repaint();var n=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(n.canvas,n)}),this.fireEvent("change:start",{value:this.start}),this},setStartPoint:function(t,e){return this.setStartPosition(t,e)},setStartX:function(t){this.setStartPoint(t,this.start.y)},setStartY:function(t){this.setStartPoint(this.start.x,t)},setEndX:function(t){this.setEndPoint(t,this.end.y)},setEndY:function(t){this.setEndPoint(this.end.x,t)},setEndPosition:function(t,e){var i=new draw2d.geo.Point(t,e);if(this.end.equals(i))return this;this.end.setPosition(i),this.vertices.last().setPosition(i),this.repaint();var n=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(n.canvas,n)}),this.fireEvent("change:end",{value:this.end}),this},setEndPoint:function(t,e){return this.setEndPosition(t,e)},getStartX:function(){return this.start.x},getStartY:function(){return this.start.y},getStartPosition:function(){return this.start.clone()},getStartPoint:function(){return this.getStartPosition()},getEndX:function(){return this.end.x},getEndY:function(){return this.end.y},getEndPosition:function(){return this.end.clone()},getEndPoint:function(){return this.getEndPosition()},getX:function(){return this.getBoundingBox().x},getY:function(){return this.getBoundingBox().y},getVertex:function(t){return this.vertices.get(t)},setVertex:function(t,e,i){e instanceof draw2d.geo.Point&&(i=e.y,e=e.x);var n=this.vertices.get(t);if(null!==n&&(n.x!==e||n.y!==i)){n.x=parseFloat(e),n.y=parseFloat(i),this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone(),this.svgPathString=null,this.routingRequired=!0,this.repaint();var s=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(s.canvas,s)}),this.fireEvent("change:vertices",{value:this.vertices}),this}},getVertices:function(){return this.vertices},setVertices:function(t){var e=this;if($.isArray(t))this.vertices=new draw2d.util.ArrayList,$.each(t,function(t,i){e.vertices.add(new draw2d.geo.Point(i))});else{if(!(t instanceof draw2d.util.ArrayList))throw"invalid argument for Line.setVertices";this.vertices=t.clone(!0)}return this.vertices.getSize()>1&&(this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone()),this.svgPathString=null,this.repaint(),this.selectionHandles.isEmpty()||this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(i.onUnselect(e.canvas,e),i.onSelect(e.canvas,e))}),this.editPolicy.each(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(e.canvas,e)}),this.fireEvent("change:vertices",{value:this.vertices}),this},getSegments:function(){var t=new draw2d.util.ArrayList;return t.add({start:this.getStartPosition(),end:this.getEndPosition()}),t},getLength:function(){return Math.sqrt((this.start.x-this.end.x)*(this.start.x-this.end.x)+(this.start.y-this.end.y)*(this.start.y-this.end.y))},getAngle:function(){var t=this.getLength(),e=-(180/Math.PI)*Math.asin((this.start.y-this.end.y)/t);return e<0?e=this.end.x<this.start.x?Math.abs(e)+180:360-Math.abs(e):this.end.x<this.start.x&&(e=180-e),e},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE&&this.isDraggable()?new draw2d.command.CommandMoveVertices(this):t.getPolicy()===draw2d.command.CommandType.DELETE&&this.isDeleteable()?new draw2d.command.CommandDelete(this):t.getPolicy()===draw2d.command.CommandType.MOVE_BASEPOINT&&this.isDraggable()?new draw2d.command.CommandMoveVertex(this):null},installEditPolicy:function(t){!(t instanceof draw2d.policy.line.LineSelectionFeedbackPolicy)&&t instanceof draw2d.policy.figure.SelectionFeedbackPolicy||this._super(t)},hitTest:function(t,e){return draw2d.shape.basic.Line.hit(this.corona+this.stroke,this.start.x,this.start.y,this.end.x,this.end.y,t,e)},pointProjection:function(t,e){var i=new draw2d.geo.Point(t,e),n=this.getStartPosition(),s=this.getEndPosition();return draw2d.geo.Line.pointProjection(n.x,n.y,s.x,s.y,i.x,i.y)},lerp:function(t){var e=this.getStartPosition(),i=this.getEndPosition();return t=Math.min(1,Math.max(0,t)),new draw2d.geo.Point(e.x+(i.x-e.x)*t,e.y+(i.y-e.y)*t)},intersection:function(t){var e=new draw2d.util.ArrayList;if(t===this)return e;var i=this.getSegments(),n=t.getSegments();return i.each(function(t,i){n.each(function(t,n){var s=draw2d.shape.basic.Line.intersection(i.start,i.end,n.start,n.end);null!==s&&e.add(s)})}),e},getPersistentAttributes:function(){var t=this._super();return delete t.x,delete t.y,delete t.width,delete t.height,t.stroke=this.stroke,t.color=this.getColor().hash(),t.outlineStroke=this.outlineStroke,t.outlineColor=this.outlineColor.hash(),null!==this.dasharray&&(t.dasharray=this.dasharray),this.editPolicy.getSize()>0&&(t.policy=this.editPolicy.first().NAME),
t.vertex=[],this.getVertices().each(function(e,i){t.vertex.push({x:i.x,y:i.y})}),t},setPersistentAttributes:function(memento){if(this._super(memento),"string"==typeof memento.dasharray&&(this.dasharray=memento.dasharray),"undefined"!=typeof memento.stroke&&this.setStroke(parseFloat(memento.stroke)),"undefined"!=typeof memento.color&&this.setColor(memento.color),"undefined"!=typeof memento.outlineStroke&&this.setOutlineStroke(memento.outlineStroke),"undefined"!=typeof memento.outlineColor&&this.setOutlineColor(memento.outlineColor),"undefined"!=typeof memento.policy)try{this.installEditPolicy(eval("new "+memento.policy+"()"))}catch(t){debug.warn("Unable to install edit policy '"+memento.policy+"' forced by "+this.NAME+".setPersistendAttributes. Using default.")}$.isArray(memento.vertex)&&memento.vertex.length>1&&this.setVertices(memento.vertex)}}),draw2d.shape.basic.Line.intersection=function(t,e,i,n){var s=null,r=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),o=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),a=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!=a){var c=r/a,h=o/a;0<=c&&c<=1&&0<=h&&h<=1&&(s=new draw2d.geo.Point(t.x+c*(e.x-t.x)|0,t.y+c*(e.y-t.y)|0),s.justTouching=0==c||1==c||0==h||1==h)}return s},draw2d.shape.basic.Line.hit=function(t,e,i,n,s,r,o){return draw2d.geo.Line.distance(e,i,n,s,r,o)<t},draw2d.shape.basic.PolyLine=draw2d.shape.basic.Line.extend({NAME:"draw2d.shape.basic.PolyLine",init:function(t,e,i){this.svgPathString=null,this.oldPoint=null,this.router=null,this.routingRequired=!0,this.lineSegments=new draw2d.util.ArrayList,this.radius="",this._super($.extend({router:new draw2d.layout.connection.VertexRouter},t),$.extend({},{router:this.setRouter,radius:this.setRadius},e),$.extend({},{router:this.getRouter,radius:this.getRadius},i))},setRadius:function(t){return this.radius=t,this.svgPathString=null,this.repaint(),this.fireEvent("change:radius",{value:this.radius}),this},getRadius:function(){return this.radius},setStartPoint:function(t,e){this.vertices.getSize()>0?this.vertices.first().setPosition(t,e):this.vertices.add(new draw2d.geo.Point(t,e)),this.start=this.vertices.first().clone(),this.calculatePath({startMoved:!0,endMoved:!1}),this.repaint();var i=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(i.canvas,i)}),this.fireEvent("change:start",{value:this.start}),this},setEndPoint:function(t,e){this.vertices.getSize()>1?this.vertices.last().setPosition(t,e):this.vertices.add(new draw2d.geo.Point(t,e)),this.end=this.vertices.last().clone(),this.isInDragDrop===!1&&this.calculatePath({startMoved:!1,endMoved:!0}),this.repaint();var i=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(i.canvas,i)}),this.fireEvent("change:end",{value:this.end}),this},addVertex:function(t,e){if(this.vertices.add(new draw2d.geo.Point(t,e)),this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone(),this.svgPathString=null,this.repaint(),!this.selectionHandles.isEmpty()){var i=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(e.onUnselect(i.canvas,i),e.onSelect(i.canvas,i))})}return this.fireEvent("change:vertices",{value:this.vertices}),this},insertVertexAt:function(t,e,i){var n=new draw2d.geo.Point(e,i);if(this.vertices.insertElementAt(n,t),this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone(),this.svgPathString=null,this.repaint(),!this.selectionHandles.isEmpty()){var s=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(e.onUnselect(s.canvas,s),e.onSelect(s.canvas,s))})}return this.fireEvent("change:vertices",{value:this.vertices}),this},removeVertexAt:function(t){var e=this.vertices.removeElementAt(t);if(this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone(),this.svgPathString=null,this.repaint(),!this.selectionHandles.isEmpty()){var i=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(e.onUnselect(i.canvas,i),e.onSelect(i.canvas,i))})}return this.fireEvent("change:vertices",{value:this.vertices}),e},setRouter:function(t){return null!==this.router&&this.router.onUninstall(this),"undefined"==typeof t||null===t?this.router=new draw2d.layout.connection.DirectRouter:this.router=t,this.router.onInstall(this),this.routingRequired=!0,this.repaint(),this.fireEvent("change:router",{value:this.router}),this},getRouter:function(){return this.router},calculatePath:function(t){t=t||{},null!==this.shape&&(this.svgPathString=null,t.oldVertices=this.vertices,this.oldPoint=null,this.lineSegments=new draw2d.util.ArrayList,this.vertices=new draw2d.util.ArrayList,this.router.route(this,t),this.routingRequired=!1,this.fireEvent("routed"),this.fireEvent("change:route",{}))},repaint:function(t){return this.repaintBlocked===!0||null===this.shape?this:(null!==this.svgPathString&&this.routingRequired!==!0||this.calculatePath(),"undefined"==typeof t&&(t={}),t.path=this.svgPathString,draw2d.util.JSON.ensureDefault(t,"stroke-linecap","round"),draw2d.util.JSON.ensureDefault(t,"stroke-linejoin","round"),this._super(t))},getSegments:function(){return this.lineSegments},addPoint:function(t,e){"undefined"!=typeof e&&(t=new draw2d.geo.Point(t,e)),this.vertices.add(t),null!==this.oldPoint&&this.lineSegments.add({start:this.oldPoint,end:t}),this.svgPathString=null,this.oldPoint=t},onDragStart:function(t,e,i,n,s){var r=this._super(t,e,i,n,s);return r===!0&&s!==!0&&(this.draggedSegment=this.hitSegment(t,e)),r},getLength:function(){for(var t=0,e=0;e<this.lineSegments.getSize();e++){var i=this.lineSegments.get(e),n=i.start,s=i.end;t+=Math.sqrt((n.x-s.x)*(n.x-s.x)+(n.y-s.y)*(n.y-s.y))}return t},setVertices:function(t){this.router.verticesSet(this),this._super(t)},pointProjection:function(t,e){for(var i=null,n=null,s=null,r=null,o=null,a=Number.MAX_SAFE_INTEGER,c=new draw2d.geo.Point(t,e),h=0;h<this.lineSegments.getSize();h++)if(o=this.lineSegments.get(h),s=o.start,r=o.end,n=draw2d.geo.Line.pointProjection(s.x,s.y,r.x,r.y,c.x,c.y),null!==n){var l=n.distance(c);(null==i||l<a)&&(i=n,i.index=h,a=l)}if(null!==i){for(var o,u=0,h=0;h<i.index;h++)o=this.lineSegments.get(h),u+=o.start.distance(o.end);o=this.lineSegments.get(i.index),s=o.start,r=o.end,u+=s.distance(r)*draw2d.geo.Line.inverseLerp(r.x,r.y,s.x,s.y,i.x,i.y),i.percentage=1/this.getLength()*u}return i},lerp:function(t){for(var e=this.getLength()*t,i=e,n=null,s=null,r=null,o=0;o<this.lineSegments.getSize();o++){if(n=this.lineSegments.get(o),s=n.start,r=n.end,e-=s.distance(r),e<=0)return t=1/s.distance(r)*i,new draw2d.geo.Point(s.x+(r.x-s.x)*t,s.y+(r.y-s.y)*t);i=e}return r},hitSegment:function(t,e){for(var i=0;i<this.lineSegments.getSize();i++){var n=this.lineSegments.get(i);if(draw2d.shape.basic.Line.hit(this.corona+this.stroke,n.start.x,n.start.y,n.end.x,n.end.y,t,e))return{index:i,start:n.start,end:n.end}}return null},hitTest:function(t,e){return null!==this.hitSegment(t,e)},createCommand:function(t){if(t.getPolicy()===draw2d.command.CommandType.DELETE){if(this.isDeleteable()===!0)return new draw2d.command.CommandDelete(this)}else if(t.getPolicy()===draw2d.command.CommandType.MOVE_VERTEX){if(this.isResizeable()===!0)return new draw2d.command.CommandMoveVertex(this)}else if(t.getPolicy()===draw2d.command.CommandType.MOVE_VERTICES&&this.isResizeable()===!0)return new draw2d.command.CommandMoveVertices(this);return this._super(t)},getPersistentAttributes:function(){var t=$.extend(this._super(),{router:this.router.NAME,radius:this.radius});return t=this.router.getPersistentAttributes(this,t)},setPersistentAttributes:function(memento){if(this._super(memento),"undefined"!=typeof memento.router)try{this.setRouter(eval("new "+memento.router+"()"))}catch(t){debug.warn("Unable to install router '"+memento.router+"' forced by "+this.NAME+".setPersistendAttributes. Using default")}"undefined"!=typeof memento.radius&&this.setRadius(memento.radius),this.router.setPersistentAttributes(this,memento),this.vertices.getSize()>1&&(this.start=this.vertices.first().clone(),this.end=this.vertices.last().clone())}}),draw2d.shape.basic.Image=draw2d.shape.node.Node.extend({NAME:"draw2d.shape.basic.Image",init:function(t,e,i){this._super(t,$.extend({path:this.setPath},e),$.extend({path:this.getPath},i))},setPath:function(t){return this.path=t,null!==this.shape&&this.shape.attr({src:this.path}),this.fireEvent("change:path",{value:this.path}),this},getPath:function(){return this.path},repaint:function(t){return this.repaintBlocked===!0||null===this.shape?this:(t=t||{},t.x=this.getAbsoluteX(),t.y=this.getAbsoluteY(),t.width=this.getWidth(),t.height=this.getHeight(),t.src=this.path,$(this.shape.node).css({display:"inline-block",width:t.width,height:t.height}),this._super(t),this)},createShapeElement:function(){return this.canvas.paper.image(this.path,this.getX(),this.getY(),this.getWidth(),this.getHeight())},getPersistentAttributes:function(){return $.extend(this._super(),{path:this.path})},setPersistentAttributes:function(t){this._super(t),"undefined"!=typeof t.path&&this.setPath(t.path)}}),draw2d.shape.basic.Polygon=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Polygon",init:function(t,e,i){if(this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.vertices=new draw2d.util.ArrayList,this._super(t,e,i),0===this.vertices.getSize()){var n=this.width,s=this.height,r=this.getPosition();this.addVertex(new draw2d.geo.Point(0,0)),this.addVertex(new draw2d.geo.Point(n,0)),this.addVertex(new draw2d.geo.Point(n,s)),this.setPosition(r)}this.svgPathString=null,this.installEditPolicy(new draw2d.policy.figure.VertexSelectionFeedbackPolicy)},setRadius:function(t){return this.svgPathString=null,this._super(t),this.fireEvent("change:radius",{value:t}),this},createShapeElement:function(){return this.canvas.paper.path("M0 10L100 100")},calculatePath:function(){var t=this.getRadius(),e=[];if(0===t){var i=this.vertices.getSize(),n=this.vertices.get(0);e.push("M",n.x," ",n.y);for(var s=1;s<i;s++)n=this.vertices.get(s),e.push("L",n.x," ",n.y);e.push("Z")}else{i=this.vertices.getSize();var r=this.vertices.first(),o=this.vertices.last();r.equals(o)&&(i-=1,o=this.vertices.get(i-1));var a=draw2d.geo.Util.insetPoint(r,o,t);e.push("M",a.x,",",a.y);for(var s=0;s<i;s++)r=this.vertices.get(s),o=this.vertices.get((s+1)%i),modStart=draw2d.geo.Util.insetPoint(r,o,t),modEnd=draw2d.geo.Util.insetPoint(o,r,t),e.push("Q",r.x,",",r.y," ",modStart.x,", ",modStart.y),e.push("L",modEnd.x,",",modEnd.y)}return this.svgPathString=e.join(""),this},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(null===this.svgPathString&&this.calculatePath(),t=t||{},draw2d.util.JSON.ensureDefault(t,"path",this.svgPathString),this._super(t))},translate:function(t,e){var i=this;return t=this.x+t,e=this.y+e,this.editPolicy.each(function(n,s){if(s instanceof draw2d.policy.figure.DragDropEditPolicy){var r=s.adjustPosition(i,t,e);t=r.x,e=r.y}}),t-=this.x,e-=this.y,this.vertices.each(function(i,n){n.translate(t,e)}),this.svgPathString=null,this.updateBoundingBox(),this.repaint(),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(i.canvas,i)}),this.fireEvent("move",{figure:this,dx:t,dy:e}),this.fireEvent("change:x",{value:this.x}),this.fireEvent("change:y",{value:this.y}),this},setPosition:function(t,e){t instanceof draw2d.geo.Point&&(e=t.y,t=t.x),this.svgPathString=null;var i=t-this.minX,n=e-this.minY;return this.translate(i,n),this.x=t,this.y=e,this},setDimension:function(t,e){var i=this.width,n=this.height;this._super(t,e);var s=1/i*this.width,r=1/n*this.height,o=this.x,a=this.y;return this.vertices.each(function(t,e){var i=(e.getX()-o)*s,n=(e.getY()-a)*r;e.setPosition(o+i,a+n)}),this.svgPathString=null,this.repaint(),this.fireEvent("change:dimension",{value:{width:this.width,height:this.height}}),this},getVertices:function(){return this.vertices},getVertex:function(t){return this.vertices.get(t)},resetVertices:function(){this.vertices=new draw2d.util.ArrayList,this.svgPathString=null,this.repaint(),this.updateBoundingBox();var t=this;this.editPolicy.each(function(e,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(t.canvas,t)})},setVertex:function(t,e,i){var n=this.vertices.get(t);if(null===n||n.x===e&&n.y===i)return this;n.x=parseFloat(e),n.y=parseFloat(i),this.svgPathString=null,this.repaint(),this.updateBoundingBox();var s=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(s.canvas,s)}),this.fireEvent("change:vertices",{value:this.vertices}),this},addVertex:function(t,e){this.vertices.add(new draw2d.geo.Point(t,e)),this.svgPathString=null,this.repaint(),this.updateBoundingBox();var i=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(i.canvas,i)}),this.fireEvent("change:vertices",{value:this.vertices}),this},insertVertexAt:function(t,e,i){if(this.vertices.insertElementAt(new draw2d.geo.Point(e,i),t),this.svgPathString=null,this.repaint(),this.updateBoundingBox(),!this.selectionHandles.isEmpty()){var n=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(e.onUnselect(n.canvas,n),e.onSelect(n.canvas,n))})}return this.fireEvent("change:vertices",{value:this.vertices}),this},removeVertexAt:function(t){if(this.vertices.getSize()<=3)return null;var e=this.vertices.removeElementAt(t);if(this.svgPathString=null,this.repaint(),this.updateBoundingBox(),!this.selectionHandles.isEmpty()){var i=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&(e.onUnselect(i.canvas,i),e.onSelect(i.canvas,i))})}return this.fireEvent("change:vertices",{value:this.vertices}),e},setRotationAngle:function(t){this.rotationAngle=360%t;var e=t/(180/Math.PI),i=this.getBoundingBox().getCenter(),n=function(t,e,i,n,s){var r=Math.cos,o=Math.sin;return{x:(t-i)*r(s)-(e-n)*o(s)+i,y:(t-i)*o(s)+(e-n)*r(s)+n}};this.vertices.each(function(t,s){var r=n(s.x,s.y,i.x,i.y,e);s.setPosition(r.x,r.y)}),this.updateBoundingBox();var s=this;return this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(s.canvas,s)}),this.repaint(),this.fireEvent("change:angle",{value:this.rotationAngle}),this},updateBoundingBox:function(){this.vertices.isEmpty()?(this.minX=this.x,this.minY=this.y,this.maxX=this.x+this.width,this.maxY=this.y+this.height):(this.minX=this.x=Math.min.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.x})),this.minY=this.y=Math.min.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.y})),this.maxX=Math.max.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.x})),this.maxY=Math.max.apply(Math,$.map(this.vertices.asArray(),function(t,e){return t.y})),this.width=this.maxX-this.minX,this.height=this.maxY-this.minY)},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE_VERTEX&&this.isResizeable()===!0?new draw2d.command.CommandMoveVertex(this):this._super(t)},getPersistentAttributes:function(){var t=this._super();return t.vertices=[],this.vertices.each(function(e,i){t.vertices.push({x:i.x,y:i.y})}),t},setPersistentAttributes:function(t){if(this._super(t),"undefined"!=typeof t.vertices){this.vertices=new draw2d.util.ArrayList;var e=this;$.each(t.vertices,function(t,i){e.addVertex(i)})}}}),draw2d.shape.basic.Diamond=draw2d.shape.basic.Polygon.extend({NAME:"draw2d.shape.basic.Diamond",init:function(t,e,i){this._super($.extend({bgColor:"#00a3f6",color:"#1B1B1B"},t),e,i);var n=this.getPosition();this.resetVertices();var s=this.getBoundingBox();this.addVertex(s.w/2,0),this.addVertex(s.w,s.h/2),this.addVertex(s.w/2,s.h),this.addVertex(0,s.h/2),this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy),this.setPosition(n)}}),draw2d.shape.composite.Composite=draw2d.SetFigure.extend({NAME:"draw2d.shape.composite.Composite",init:function(t,e,i){this._super($.extend({stroke:1,color:"#f0f0f0"},t),e,i)},onDoubleClick:function(){},isMemberSelectable:function(t,e){return e},isMemberDraggable:function(t,e){return e},setCanvas:function(t){this._super(t),null!==t&&this.toBack()}}),draw2d.shape.composite.StrongComposite=draw2d.shape.composite.Composite.extend({NAME:"draw2d.shape.composite.StrongComposite",init:function(t,e,i){this.assignedFigures=new draw2d.util.ArrayList,this._super(t,e,i)},contains:function(t){for(var e=0,i=this.assignedFigures.getSize();e<i;e++){var n=this.assignedFigures.get(e);if(n===t||n.contains(t))return!0}return this._super(t)},assignFigure:function(t){return this},unassignFigure:function(t){return this},getAssignedFigures:function(){return this.assignedFigures},onDrop:function(t,e,i,n,s){},onCatch:function(t,e,i,n,s){},toFront:function(t){this._super(t);var e=this.getAssignedFigures().clone();e.sort(function(t,e){return t.getZOrder()>e.getZOrder()?-1:1});var i=this;return e.each(function(t,e){e.toFront(i)}),this},toBack:function(t){this._super(t);var e=this.getAssignedFigures().clone();e.sort(function(t,e){return t.getZOrder()>e.getZOrder()?-1:1});var i=this;return e.each(function(t,e){e.toBack(i)}),this}}),draw2d.shape.composite.Group=draw2d.shape.composite.StrongComposite.extend({NAME:"draw2d.shape.composite.Group",init:function(t,e,i){this._super($.extend({bgColor:null,color:null,resizeable:!1},t),e,i),this.stickFigures=!1},isMemberSelectable:function(t,e){return!1},isMemberDraggable:function(t,e){return!1},setPosition:function(t,e){var i=this.x,n=this.y;this._super(t,e);var s=this.x-i,r=this.y-n;return 0===s&&0===r?this:(this.stickFigures===!1&&this.assignedFigures.each(function(t,e){e.translate(s,r)}),this)},assignFigure:function(t){if(!this.assignedFigures.contains(t)){var e=this;this.stickFigures=!0,this.assignedFigures.isEmpty()===!0?this.setBoundingBox(t.getBoundingBox()):this.setBoundingBox(this.getBoundingBox().merge(t.getBoundingBox())),this.assignedFigures.add(t),t.setComposite(this),t.setSelectionAdapter(function(){return e}),this.stickFigures=!1}return this},unassignFigure:function(t){if(this.assignedFigures.contains(t)){if(this.stickFigures=!0,t.setComposite(null),t.setSelectionAdapter(null),this.assignedFigures.remove(t),!this.assignedFigures.isEmpty()){var e=this.assignedFigures.first().getBoundingBox();this.assignedFigures.each(function(t,i){e.merge(i.getBoundingBox())}),this.setBoundingBox(e)}this.stickFigures=!1}return this},createCommand:function(t){return null===t?null:t.getPolicy()===draw2d.command.CommandType.DELETE?this.isDeleteable()?new draw2d.command.CommandDeleteGroup(this):null:this._super(t)}}),draw2d.shape.composite.Jailhouse=draw2d.shape.composite.StrongComposite.extend({NAME:"draw2d.shape.composite.Jailhouse",init:function(t,e,i){this.policy=new draw2d.policy.figure.RegionEditPolicy(0,0,10,10),this._super($.extend({bgColor:"#f0f0f0",color:"#333333"},t),e,i),this.stickFigures=!1},setDimension:function(t,e){this._super(t,e),this.policy.setBoundingBox(this.getAbsoluteBounds())},setPosition:function(t,e){var i=this.x,n=this.y;this._super(t,e);var s=this.x-i,r=this.y-n;return 0===s&&0===r?this:(this.policy.setBoundingBox(this.getAbsoluteBounds()),this.stickFigures===!1&&this.assignedFigures.each(function(t,e){e.translate(s,r)}),this)},assignFigure:function(t){return this.assignedFigures.contains(t)||t===this||(this.stickFigures=!0,this.setBoundingBox(this.getBoundingBox().merge(t.getBoundingBox())),this.assignedFigures.add(t),t.setComposite(this),t.installEditPolicy(this.policy),t.toFront(this),this.stickFigures=!1),this},unassignFigure:function(t){if(this.assignedFigures.contains(t)){if(this.stickFigures=!0,t.setComposite(null),t.uninstallEditPolicy(this.policy),this.assignedFigures.remove(t),!this.assignedFigures.isEmpty()){var e=this.assignedFigures.first().getBoundingBox();this.assignedFigures.each(function(t,i){e.merge(i.getBoundingBox())}),this.setBoundingBox(e)}this.stickFigures=!1}return this},onCatch:function(t,e,i,n,s){this.getCanvas().getCommandStack().execute(new draw2d.command.CommandAssignFigure(t,this))},getMinWidth:function(){var t=0;return this.assignedFigures.each(function(e,i){t=Math.max(t,i.getBoundingBox().getRight())}),t-this.getAbsoluteX()},getMinHeight:function(){var t=0;return this.assignedFigures.each(function(e,i){t=Math.max(t,i.getBoundingBox().getBottom())}),t-this.getAbsoluteY()}}),draw2d.shape.composite.WeakComposite=draw2d.shape.composite.Composite.extend({NAME:"draw2d.shape.composite.WeakComposite",init:function(t,e,i){this._super(t,e,i)}}),draw2d.shape.composite.Raft=draw2d.shape.composite.WeakComposite.extend({NAME:"draw2d.shape.composite.Raft",init:function(t,e,i){this.aboardFigures=new draw2d.util.ArrayList,this._super($.extend({bgColor:"#f0f0f0",color:"#1B1B1B"},t),e,i)},onDragStart:function(t,e,i,n){return this._super(t,e,i,n),this.aboardFigures=new draw2d.util.ArrayList,this.getAboardFigures(this.isInDragDrop),!0},setPosition:function(t,e,i){var n=this.x,s=this.y,r=i?draw2d.util.ArrayList.EMPTY_LIST:this.getAboardFigures(this.isInDragDrop===!1);this._super(t,e);var o=this.x-n,a=this.y-s;return 0===o&&0===a?this:(null!==this.canvas&&(r=r.clone(),this.canvas.getLines().each(function(t,e){e instanceof draw2d.Connection&&r.contains(e.getSource().getRoot())&&r.contains(e.getTarget().getRoot())&&r.add(e)})),r.each(function(t,e){e.translate(o,a)}),this)},onDrag:function(t,e,i,n,s,r){var o=this;this.editPolicy.each(function(i,n){if(n instanceof draw2d.policy.figure.DragDropEditPolicy){var s=n.adjustPosition(o,o.ox+t,o.oy+e);s&&(t=s.x-o.ox,e=s.y-o.oy)}});var a=new draw2d.geo.Point(this.ox+t,this.oy+e);this.getCanSnapToHelper()&&(a=this.getCanvas().snapToHelper(this,a)),this.setPosition(a.x,a.y,s),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.onDrag(o.canvas,o)}),this.fireEvent("drag",{dx:t,dy:e,dx2:i,dy2:n,shiftKey:s,ctrlKey:r})},getAboardFigures:function(t){if(t===!0&&null!==this.canvas){var e=this.getBoundingBox(),i=this.getZOrder();this.aboardFigures=new draw2d.util.ArrayList;var n=this;this.getCanvas().getFigures().each(function(t,s){if(s!==n&&s.isSelectable()===!0&&s.getBoundingBox().isInside(e)){if(n.getNextComposite(s)!==n)return;s.getZOrder()>i&&n.aboardFigures.add(s)}})}return this.aboardFigures},getNextComposite:function(t){var e=null;return this.getCanvas().getFigures().each(function(i,n){if(t!==n&&n instanceof draw2d.shape.composite.Composite){if(null!==e&&e.getZOrder()>n.getZOrder())return;n.getBoundingBox().contains(t.getBoundingBox())&&(e=n)}}),e}}),draw2d.Connection=draw2d.shape.basic.PolyLine.extend({NAME:"draw2d.Connection",init:function(t,e,i){this.sourcePort=null,this.targetPort=null,this.oldPoint=null,this.sourceDecorator=null,this.targetDecorator=null,this.sourceDecoratorNode=null,this.targetDecoratorNode=null,this.isMoving=!1;var n=this;this.moveListener=function(t){t===n.sourcePort?n.setStartPoint(n.sourcePort.getAbsoluteX(),n.sourcePort.getAbsoluteY()):n.setEndPoint(n.targetPort.getAbsoluteX(),n.targetPort.getAbsoluteY())},this._super($.extend({color:"#129CE4",stroke:2,radius:3},t),$.extend({sourceDecorator:this.setSourceDecorator,targetDecorator:this.setTargetDecorator,source:this.setSource,target:this.setTarget},e),$.extend({sourceDecorator:this.getSourceDecorator,targetDecorator:this.getTargetDecorator,source:this.getSource,target:this.getTarget},i))},disconnect:function(){null!==this.sourcePort&&(this.sourcePort.off(this.moveListener),this.sourcePort.connections.remove(this),this.sourcePort.fireEvent("disconnect",{port:this.sourcePort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("disconnect",{port:this.sourcePort,connection:this}),this.sourcePort.onDisconnect(this),this.fireSourcePortRouteEvent()),null!==this.targetPort&&(this.targetPort.off(this.moveListener),this.targetPort.connections.remove(this),this.targetPort.fireEvent("disconnect",{port:this.targetPort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("disconnect",{port:this.targetPort,connection:this}),this.targetPort.onDisconnect(this),this.fireTargetPortRouteEvent())},reconnect:function(){null!==this.sourcePort&&(this.sourcePort.on("move",this.moveListener),this.sourcePort.connections.add(this),this.sourcePort.fireEvent("connect",{port:this.sourcePort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("connect",{port:this.sourcePort,connection:this}),this.sourcePort.onConnect(this),this.fireSourcePortRouteEvent()),null!==this.targetPort&&(this.targetPort.on("move",this.moveListener),this.targetPort.connections.add(this),this.targetPort.fireEvent("connect",{port:this.targetPort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("connect",{port:this.targetPort,connection:this}),this.targetPort.onConnect(this),this.fireTargetPortRouteEvent()),this.routingRequired=!0,this.repaint()},isResizeable:function(){return this.isDraggable()},add:function(t,e,i){if(!(e instanceof draw2d.layout.locator.ConnectionLocator))throw"Locator must implement the class draw2d.layout.locator.ConnectionLocator";this._super(t,e,i)},setSourceDecorator:function(t){this.sourceDecorator=t,this.routingRequired=!0,null!==this.sourceDecoratorNode&&(this.sourceDecoratorNode.remove(),this.sourceDecoratorNode=null),this.repaint()},getSourceDecorator:function(){return this.sourceDecorator},setTargetDecorator:function(t){this.targetDecorator=t,this.routingRequired=!0,null!==this.targetDecoratorNode&&(this.targetDecoratorNode.remove(),this.targetDecoratorNode=null),this.repaint()},getTargetDecorator:function(){return this.targetDecorator},calculatePath:function(t){if(null===this.sourcePort||null===this.targetPort)return this;if(this._super(t),null!==this.shape){var e=this.sourcePort.getZOrder(),i=this.targetPort.getZOrder();e<i?this.toBack(this.sourcePort):this.toBack(this.targetPort)}return this},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape&&null!==this.sourcePort&&null!==this.targetPort){this._super(t),null!==this.targetDecorator&&null===this.targetDecoratorNode&&(this.targetDecoratorNode=this.targetDecorator.paint(this.getCanvas().paper)),null!==this.sourceDecorator&&null===this.sourceDecoratorNode&&(this.sourceDecoratorNode=this.sourceDecorator.paint(this.getCanvas().paper));var e=this;if(null!==this.sourceDecoratorNode){var i=this.getVertices().first();this.sourceDecoratorNode.transform("r"+this.getStartAngle()+","+i.x+","+i.y+" t"+i.x+","+i.y),this.sourceDecoratorNode.attr({stroke:"#"+this.lineColor.hex(),opacity:this.alpha}),this.sourceDecoratorNode.forEach(function(t){t.node.setAttribute("class",null!==e.cssClass?e.cssClass:"")})}if(null!==this.targetDecoratorNode){var n=this.getVertices().last();this.targetDecoratorNode.transform("r"+this.getEndAngle()+","+n.x+","+n.y+" t"+n.x+","+n.y),this.targetDecoratorNode.attr({stroke:"#"+this.lineColor.hex(),opacity:this.alpha}),this.targetDecoratorNode.forEach(function(t){t.node.setAttribute("class",null!==e.cssClass?e.cssClass:"")})}}},getAbsoluteX:function(){return 0},getAbsoluteY:function(){return 0},postProcess:function(t){this.router.postProcess(this,this.getCanvas(),t)},onDrag:function(t,e,i,n){if(null!==this.command){this.router.onDrag(this,t,e,i,n),this.command.updateVertices(this.getVertices().clone());var s=this;this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.onDrag(s.canvas,s)}),this.svgPathString=null,this.repaint(),this.editPolicy.each(function(t,e){e instanceof draw2d.policy.figure.DragDropEditPolicy&&e.moved(s.canvas,s)}),this.fireEvent("move",{figure:this,dx:t,dy:t})}},toFront:function(t){return this._super(t),null!==this.shape&&(null!==this.targetDecoratorNode&&this.targetDecoratorNode.insertAfter(this.shape),null!==this.sourceDecoratorNode&&this.sourceDecoratorNode.insertAfter(this.shape)),this},toBack:function(t){return this._super(t),null!==this.shape&&(null!==this.targetDecoratorNode&&this.targetDecoratorNode.insertAfter(this.shape),null!==this.sourceDecoratorNode&&this.sourceDecoratorNode.insertAfter(this.shape)),this},getStartPoint:function(t){return this.isMoving===!1?t?this.sourcePort.getConnectionAnchorLocation(t,this):this.sourcePort.getConnectionAnchorLocation(this.targetPort.getConnectionAnchorReferencePoint(this),this):this._super()},getEndPoint:function(t){return this.isMoving===!1?t?this.targetPort.getConnectionAnchorLocation(t,this):this.targetPort.getConnectionAnchorLocation(this.sourcePort.getConnectionAnchorReferencePoint(this),this):this._super()},setSource:function(t){null!==this.sourcePort&&(this.sourcePort.off(this.moveListener),this.sourcePort.connections.remove(this),this.sourcePort.fireEvent("disconnect",{port:this.sourcePort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("disconnect",{port:this.sourcePort,connection:this}),this.sourcePort.onDisconnect(this)),this.sourcePort=t,null!==this.sourcePort&&(this.routingRequired=!0,this.fireSourcePortRouteEvent(),this.sourcePort.connections.add(this),this.sourcePort.on("move",this.moveListener),null!==this.canvas&&this.canvas.fireEvent("connect",{port:this.sourcePort,connection:this}),this.sourcePort.fireEvent("connect",{port:this.sourcePort,connection:this}),this.sourcePort.onConnect(this),this.setStartPoint(t.getAbsoluteX(),t.getAbsoluteY()),this.fireEvent("connect",{port:this.sourcePort,connection:this}))},getSource:function(){return this.sourcePort},setTarget:function(t){null!==this.targetPort&&(this.targetPort.off(this.moveListener),this.targetPort.connections.remove(this),this.targetPort.fireEvent("disconnect",{port:this.targetPort,connection:this}),null!==this.canvas&&this.canvas.fireEvent("disconnect",{port:this.targetPort,connection:this}),this.targetPort.onDisconnect(this)),this.targetPort=t,null!==this.targetPort&&(this.routingRequired=!0,this.fireTargetPortRouteEvent(),this.targetPort.connections.add(this),this.targetPort.on("move",this.moveListener),null!==this.canvas&&this.canvas.fireEvent("connect",{port:this.targetPort,connection:this}),this.targetPort.fireEvent("connect",{port:this.targetPort,connection:this}),this.targetPort.onConnect(this),this.setEndPoint(t.getAbsoluteX(),t.getAbsoluteY()),this.fireEvent("connect",{port:this.targetPort,connection:this}))},getTarget:function(){return this.targetPort},sharingPorts:function(t){return this.sourcePort==t.sourcePort||this.sourcePort==t.targetPort||this.targetPort==t.sourcePort||this.targetPort==t.targetPort},setCanvas:function(t){if(this.canvas!==t){var e=null==this.canvas?t:this.canvas;this._super(t),null!==t&&null===draw2d.Connection.DROP_FILTER&&(draw2d.Connection.DROP_FILTER=t.paper.createFilter(),draw2d.Connection.DROP_FILTER.element.setAttribute("width","250%"),draw2d.Connection.DROP_FILTER.element.setAttribute("height","250%"),draw2d.Connection.DROP_FILTER.createShadow(1,1,2,.3)),null!==this.sourceDecoratorNode&&(this.sourceDecoratorNode.remove(),this.sourceDecoratorNode=null),null!==this.targetDecoratorNode&&(this.targetDecoratorNode.remove(),this.targetDecoratorNode=null),null===this.canvas?(null!==this.sourcePort&&(this.sourcePort.off(this.moveListener),e.fireEvent("disconnect",{port:this.sourcePort,connection:this}),this.sourcePort.onDisconnect(this)),null!==this.targetPort&&(this.targetPort.off(this.moveListener),e.fireEvent("disconnect",{port:this.targetPort,connection:this}),this.targetPort.onDisconnect(this))):(this.shape.items[0].filter(draw2d.Connection.DROP_FILTER),null!==this.sourcePort&&(this.sourcePort.on("move",this.moveListener),this.canvas.fireEvent("connect",{port:this.sourcePort,connection:this}),this.sourcePort.onConnect(this)),null!==this.targetPort&&(this.targetPort.on("move",this.moveListener),this.canvas.fireEvent("connect",{port:this.targetPort,connection:this}),this.targetPort.onConnect(this)))}},getStartAngle:function(){if(0===this.lineSegments.getSize())return 0;var t=this.lineSegments.get(0).start,e=this.lineSegments.get(0).end;this.router instanceof draw2d.layout.connection.SplineConnectionRouter&&(e=this.lineSegments.get(5).end);
var i=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),n=-(180/Math.PI)*Math.asin((t.y-e.y)/i);return n<0?n=e.x<t.x?Math.abs(n)+180:360-Math.abs(n):e.x<t.x&&(n=180-n),n},getEndAngle:function(){if(0===this.lineSegments.getSize())return 90;var t=this.lineSegments.get(this.lineSegments.getSize()-1).end,e=this.lineSegments.get(this.lineSegments.getSize()-1).start;this.router instanceof draw2d.layout.connection.SplineConnectionRouter&&(e=this.lineSegments.get(this.lineSegments.getSize()-5).end);var i=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),n=-(180/Math.PI)*Math.asin((t.y-e.y)/i);return n<0?n=e.x<t.x?Math.abs(n)+180:360-Math.abs(n):e.x<t.x&&(n=180-n),n},fireSourcePortRouteEvent:function(){this.sourcePort.getConnections().each(function(t,e){e.routingRequired=!0,e.repaint()})},fireTargetPortRouteEvent:function(){this.targetPort.getConnections().each(function(t,e){e.routingRequired=!0,e.repaint()})},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE&&this.isDraggable()?new draw2d.command.CommandMoveVertices(this):t.getPolicy()===draw2d.command.CommandType.MOVE_BASEPOINT?new draw2d.command.CommandReconnect(this):this._super(t)},getPersistentAttributes:function(){for(var t=this._super(),e=this.getSource().getParent();null!==e.getParent();)e=e.getParent();for(t.source={node:e.getId(),port:this.getSource().getName()},e=this.getTarget().getParent();null!==e.getParent();)e=e.getParent();return t.target={node:e.getId(),port:this.getTarget().getName()},null!==this.sourceDecorator&&(t.source.decoration=this.sourceDecorator.NAME),null!==this.targetDecorator&&(t.target.decoration=this.targetDecorator.NAME),t},setPersistentAttributes:function(memento){this._super(memento),"undefined"!=typeof memento.target.decoration&&null!=memento.target.decoration&&this.setTargetDecorator(eval("new "+memento.target.decoration)),"undefined"!=typeof memento.source.decoration&&null!=memento.source.decoration&&this.setSourceDecorator(eval("new "+memento.source.decoration))}}),draw2d.Connection.DROP_FILTER=null,draw2d.VectorFigure=draw2d.shape.node.Node.extend({NAME:"draw2d.VectorFigure",init:function(t,e,i){this.stroke=1,this.radius=0,this.bgColor=new draw2d.util.Color("#ffffff"),this.color=new draw2d.util.Color("#303030"),this.dasharray=null,this.strokeBeforeGlow=this.stroke,this.glowIsActive=!1,this._super(t,$.extend({dasharray:this.setDashArray,radius:this.setRadius,bgColor:this.setBackgroundColor,color:this.setColor,stroke:this.setStroke},e),$.extend({dasharray:this.getDashArray,radius:this.getRadius,bgColor:this.getBackgroundColor,color:this.getColor,stroke:this.getStroke},i))},setRadius:function(t){return this.radius=t,this.repaint(),this.fireEvent("change:radius",{value:this.radius}),this},getRadius:function(){return this.radius},setDashArray:function(t){return this.dasharray=t,this.repaint(),this.fireEvent("change:dashArray",{value:this.dasharray}),this},getDashArray:function(){return this.dasharray},setGlow:function(t){return t===this.glowIsActive?this:(this.glowIsActive=t,t===!0?(this.strokeBeforeGlow=this.getStroke(),this.setStroke(2.5*this.strokeBeforeGlow)):this.setStroke(this.strokeBeforeGlow),this)},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape)return t=t||{},t.x=this.getAbsoluteX(),t.y=this.getAbsoluteY(),"undefined"==typeof t.stroke&&(null===this.color||0===this.stroke?t.stroke="none":t.stroke=this.color.hash()),draw2d.util.JSON.ensureDefault(t,"stroke-width",this.stroke),draw2d.util.JSON.ensureDefault(t,"fill",this.bgColor.hash()),draw2d.util.JSON.ensureDefault(t,"dasharray",this.dasharray),this._super(t),this},setBackgroundColor:function(t){return this.bgColor=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:bgColor",{value:this.bgColor}),this},getBackgroundColor:function(){return this.bgColor},setStroke:function(t){return this.stroke=t,this.repaint(),this.fireEvent("change:stroke",{value:this.stroke}),this},getStroke:function(){return this.stroke},setColor:function(t){return this.color=new draw2d.util.Color(t),this.repaint(),this.fireEvent("change:color",{value:this.color}),this},getColor:function(){return this.color},getPersistentAttributes:function(){var t=$.extend(this._super(),{bgColor:this.bgColor.hash(),color:this.color.hash(),stroke:this.stroke,radius:this.radius,dasharray:this.dasharray});return t},setPersistentAttributes:function(t){return this._super(t),"undefined"!=typeof t.radius&&this.setRadius(t.radius),"undefined"!=typeof t.bgColor&&this.setBackgroundColor(t.bgColor),"undefined"!=typeof t.color&&this.setColor(t.color),"undefined"!=typeof t.stroke&&this.setStroke(null===t.stroke?0:parseFloat(t.stroke)),"string"==typeof t.dasharray&&(this.dasharray=t.dasharray),this}}),draw2d.ResizeHandle=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.ResizeHandle",init:function(t,e){this._super({bgColor:"#FDFDFD",stroke:.5,color:"#a0a0a0",radius:1}),this.isResizeHandle=!0,this.owner=t,this.type=e,this.command=null,this.commandMove=null,this.commandResize=null,this.useGradient=!0,this.setSelectable(!1),this.setDimension()},getSnapToDirection:function(){switch(this.type){case 1:return draw2d.SnapToHelper.NORTH_WEST;case 2:return draw2d.SnapToHelper.NORTH;case 3:return draw2d.SnapToHelper.NORTH_EAST;case 4:return draw2d.SnapToHelper.EAST;case 5:return draw2d.SnapToHelper.SOUTH_EAST;case 6:return draw2d.SnapToHelper.SOUTH;case 7:return draw2d.SnapToHelper.SOUTH_WEST;case 8:return draw2d.SnapToHelper.WEST;case 9:return draw2d.SnapToHelper.NSEW;default:return draw2d.SnapToHelper.EAST}},createShapeElement:function(){var t=this._super();return t.node.setAttribute("type",this.type),this.updateCursor(t),t},updateCursor:function(t){if(null===t)return this;if(this.isDraggable()===!1)return t.attr({cursor:"default"}),this;switch(this.type){case 1:t.attr({cursor:"nw-resize"});break;case 2:t.attr({cursor:"n-resize"});break;case 3:t.attr({cursor:"ne-resize"});break;case 4:t.attr({cursor:"e-resize"});break;case 5:t.attr({cursor:"se-resize"});break;case 6:t.attr({cursor:"s-resize"});break;case 7:t.attr({cursor:"sw-resize"});break;case 8:t.attr({cursor:"w-resize"});break;default:t.attr({cursor:"move"})}return this},setDraggable:function(t){return this._super(t),this.updateCursor(this.shape),this},onDragStart:function(t,e,i,n){return!!this.isDraggable()&&(this.ox=this.getAbsoluteX(),this.oy=this.getAbsoluteY(),this.commandMove=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),this.commandResize=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.RESIZE)),!0)},onDrag:function(t,e,i,n){if(this.isDraggable()!==!1){var s=this.getAbsoluteX(),r=this.getAbsoluteY();this._super(t,e,i,n);var o=this.getAbsoluteX()-s,a=this.getAbsoluteY()-r,c=this.owner,h=c.getAbsoluteX(),l=c.getAbsoluteY(),u=c.getWidth(),d=c.getHeight(),p=null,f=null,g=null;switch(this.type){case 1:c.setDimension(u-o,d-a),p=h+(u-c.getWidth()),f=l+(d-c.getHeight()),c.setPosition(p,f);break;case 2:c.setDimension(u,d-a),p=h,f=l+(d-c.getHeight()),c.setPosition(p,f);break;case 3:c.setDimension(u+o,d-a),p=h,f=l+(d-c.getHeight()),c.setPosition(p,f);break;case 4:c.setDimension(u+o,d);break;case 5:c.setDimension(u+o,d+a);break;case 6:c.setDimension(u,d+a);break;case 7:c.setDimension(u-o,d+a),p=h+(u-c.getWidth()),f=l,c.setPosition(p,f);break;case 8:c.setDimension(u-o,d),p=h+(u-c.getWidth()),f=l,c.setPosition(p,f)}null!==p&&(g=c.getPosition(),g.x===p&&g.y===f||c.setDimension(c.getWidth()-(g.x-p),c.getHeight()-(g.y-f)))}},onDragEnd:function(t,e,i,n){this.isDraggable()&&(null!==this.commandMove&&(this.commandMove.setPosition(this.owner.getX(),this.owner.getY()),this.canvas.getCommandStack().execute(this.commandMove),this.commandMove=null),null!==this.commandResize&&(this.commandResize.setDimension(this.owner.getWidth(),this.owner.getHeight()),this.canvas.getCommandStack().execute(this.commandResize),this.commandResize=null))},setPosition:function(t,e){return t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this.repaintBlocked===!0||null===this.shape?this:void this.shape.attr({x:this.x,y:this.y})},setDimension:function(t,e){"undefined"!=typeof e?this._super(t,e):draw2d.isTouchDevice?this._super(15,15):this._super(8,8);var i=this.getWidth(),n=i/2;switch(this.type){case 1:this.setSnapToGridAnchor(new draw2d.geo.Point(i,i));break;case 2:this.setSnapToGridAnchor(new draw2d.geo.Point(n,i));break;case 3:this.setSnapToGridAnchor(new draw2d.geo.Point(0,i));break;case 4:this.setSnapToGridAnchor(new draw2d.geo.Point(0,n));break;case 5:this.setSnapToGridAnchor(new draw2d.geo.Point(0,0));break;case 6:this.setSnapToGridAnchor(new draw2d.geo.Point(n,0));break;case 7:this.setSnapToGridAnchor(new draw2d.geo.Point(i,0));break;case 8:this.setSnapToGridAnchor(new draw2d.geo.Point(i,n));break;case 9:this.setSnapToGridAnchor(new draw2d.geo.Point(n,n))}return this},show:function(t){return this.setCanvas(t),null!==t&&null===draw2d.ResizeHandle.DROP_FILTER&&(draw2d.ResizeHandle.DROP_FILTER=t.paper.createFilter(),draw2d.ResizeHandle.DROP_FILTER.element.setAttribute("width","250%"),draw2d.ResizeHandle.DROP_FILTER.element.setAttribute("height","250%"),draw2d.ResizeHandle.DROP_FILTER.createShadow(1,1,2,.3)),this.shape.filter(draw2d.ResizeHandle.DROP_FILTER),this.canvas.resizeHandles.add(this),this.shape.insertAfter(this.owner.getShapeElement()),this.repaint(),this},hide:function(){if(null!==this.shape)return this.canvas.resizeHandles.remove(this),this.setCanvas(null),this},setBackgroundColor:function(t){return t=new draw2d.util.Color(t),this.bgGradient="90-"+t.darker(.2).hash()+"-"+t.hash(),this._super(t),this},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},"none"===this.bgColor.hash()?t.fill="none":this.getAlpha()<.9||this.useGradient===!1?t.fill=this.bgColor.hash():t.fill=this.bgGradient,this._super(t))},supportsSnapToHelper:function(){return!0},onKeyDown:function(t,e){this.canvas.onKeyDown(t,e)},fireEvent:function(t,e){}}),draw2d.ResizeHandle.DROP_FILTER=null,draw2d.shape.basic.LineResizeHandle=draw2d.shape.basic.Circle.extend({NAME:"draw2d.shape.basic.LineResizeHandle",init:function(t,e){this._super(),this.owner=t,this.index=e,this.isResizeHandle=!0,draw2d.isTouchDevice?this.setDimension(20,20):this.setDimension(10,10),this.setBackgroundColor("#5bcaff"),this.setStroke(1),this.setSelectable(!1),this.currentTarget=null},createShapeElement:function(){var t=this._super();return t.attr({cursor:"move"}),t},setBackgroundColor:function(t){return t=new draw2d.util.Color(t),this.bgGradient="r(.4,.3)"+t.hash()+"-"+t.darker(.1).hash()+":60-"+t.darker(.2).hash(),this._super(t),this.setColor(t.darker(.3)),this},getRelatedPort:function(){return null},getOppositePort:function(){return null},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},"none"===this.bgColor.hash()?t.fill=this.bgColor.hash():this.getAlpha()<.9?t.fill=this.bgColor.hash():t.fill=this.bgGradient,this._super(t))},onDragStart:function(t,e,i,n){return this.command=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_BASEPOINT)),null!==this.command&&this.command.setIndex(this.index),this.setAlpha(.2),this.shape.attr({cursor:"crosshair"}),this.fireEvent("dragstart",{x:t,y:e,shiftKey:i,ctrlKey:n}),!0},onDrag:function(t,e,i,n){this.setPosition(this.x+i,this.y+n);var s=this.getOppositePort(),r=null!==s?s.getCanvas().getBestFigure(this.getX(),this.getY(),[this,this.owner]):null;return r!==this.currentTarget&&(null!==this.currentTarget&&(this.currentTarget.onDragLeave(s),this.currentTarget.setGlow(!1),this.currentTarget.fireEvent("dragLeave",{draggingElement:s})),null!==r&&(this.currentTarget=r.delegateTarget(s),null!==this.currentTarget&&(this.currentTarget.setGlow(!0),this.currentTarget.onDragEnter(s),this.currentTarget.fireEvent("dragEnter",{draggingElement:s})))),!0},onDragEnd:function(t,e,i,n){if(!this.isDraggable())return!1;this.shape.attr({cursor:"move"});var s=this.getOppositePort();null!==s&&null!==this.currentTarget&&(this.onDrop(this.currentTarget,t,e,i,n),this.currentTarget.onDragLeave(s),this.currentTarget.setGlow(!1),this.currentTarget.fireEvent("dragLeave",{draggingElement:s}),this.currentTarget.onCatch(this,t,e,i,n),this.currentTarget=null),this.owner.isMoving=!1,this.owner instanceof draw2d.Connection?null!==this.command&&this.command.cancel():null!==this.command&&this.getCanvas().getCommandStack().execute(this.command),this.command=null,this.setAlpha(1),this.fireEvent("dragend",{x:t,y:e,shiftKey:i,ctrlKey:n})},relocate:function(){return this},supportsSnapToHelper:function(){return!(this.owner instanceof draw2d.Connection)},show:function(t,e,i){this.setCanvas(t),this.shape.toFront(),this.canvas.resizeHandles.add(this)},hide:function(){null!==this.shape&&(this.canvas.resizeHandles.remove(this),this.setCanvas(null))},onKeyDown:function(t,e){this.canvas.onKeyDown(t,e)}}),draw2d.shape.basic.LineStartResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineStartResizeHandle",init:function(t){this._super(t,0)},getRelatedPort:function(){return this.owner instanceof draw2d.Connection?this.owner.getSource():null},getOppositePort:function(){return this.owner instanceof draw2d.Connection?this.owner.getTarget():null},onDrag:function(t,e,i,n){this._super(t,e,i,n);var s=this.owner.getStartPoint();return s.translate(i,n),null!==this.command&&this.command.updatePosition(s),this.owner.setStartPoint(s),this.owner.isMoving=!0,!0},onDrop:function(t,e,i,n,s){this.owner.isMoving=!1,this.owner instanceof draw2d.Connection&&null!==this.command&&(this.command.setNewPorts(t,this.owner.getTarget()),this.getCanvas().getCommandStack().execute(this.command)),this.command=null},relocate:function(){var t=this.getWidth()/2,e=this.getHeight()/2,i=this.owner.getStartPoint();return this.setPosition(i.x-t,i.y-e),this}}),draw2d.shape.basic.LineEndResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineEndResizeHandle",init:function(t){this._super(t,t.getVertices().getSize()-1)},getRelatedPort:function(){return this.owner instanceof draw2d.Connection?this.owner.getTarget():null},getOppositePort:function(){return this.owner instanceof draw2d.Connection?this.owner.getSource():null},onDrag:function(t,e,i,n){this._super(t,e,i,n);var s=this.owner.getEndPoint().clone();return s.translate(i,n),null!==this.command&&this.command.updatePosition(s),this.owner.setEndPoint(s),this.owner.isMoving=!0,!0},onDrop:function(t,e,i,n,s){this.owner.isMoving=!1,this.owner instanceof draw2d.Connection&&null!==this.command&&(this.command.setNewPorts(this.owner.getSource(),t),this.getCanvas().getCommandStack().execute(this.command)),this.command=null},relocate:function(){var t=this.getWidth()/2,e=this.getHeight()/2,i=this.owner.getEndPoint();return this.setPosition(i.x-t,i.y-e),this}}),draw2d.shape.basic.VertexResizeHandle=draw2d.ResizeHandle.extend({NAME:"draw2d.shape.basic.VertexResizeHandle",SNAP_THRESHOLD:3,LINE_COLOR:"#1387E6",FADEOUT_DURATION:300,init:function(t,e){this._super(t),this.index=e,this.isDead=!1},onDoubleClick:function(){var t=new draw2d.command.CommandRemoveVertex(this.owner,this.index);this.getCanvas().getCommandStack().execute(t),this.isDead=!0},onDragStart:function(t,e,i,n){if(this.isDead!==!0)return this._super(),this.command=this.getCanvas().getPrimarySelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_VERTEX)),null!=this.command&&(this.command.setIndex(this.index),this.setAlpha(.2),this.shape.attr({cursor:"crosshair"})),this.vertex=this.owner.getVertex(this.index).clone(),this.fireEvent("dragstart",{x:t,y:e,shiftKey:i,ctrlKey:n}),!0},onDrag:function(t,e,i,n){if(this.isDead!==!0&&null!=this.command){this.setPosition(this.x+i,this.y+n),this.vertex.translate(i,n);var s=this.vertex.clone();this.getCanSnapToHelper()&&(s=this.getCanvas().snapToHelper(this,s)),this.owner.setVertex(this.index,s.x,s.y),this.command.updatePosition(this.vertex.x,this.vertex.y)}},onDragEnd:function(t,e,i,n){if(this.isDead!==!0&&null!==this.command){this.shape.attr({cursor:"move"});var s=this.getCanvas().getCommandStack();s.startTransaction();try{s.execute(this.command),this.command=null;var r=this.getEnclosingAngle();if(r>178){var o=new draw2d.command.CommandRemoveVertex(this.owner,this.index);s.execute(o)}}finally{s.commitTransaction()}this.setAlpha(1),this.fireEvent("dragend",{x:t,y:e,shiftKey:i,ctrlKey:n})}},relocate:function(){var t=this.getWidth()/2,e=this.getHeight()/2,i=this.owner.getVertex(this.index);this.setPosition(i.x-t,i.y-e)},getEnclosingAngle:function(){var t=this.owner.getVertices(),e=this.vertex.getScaled(-1),i=t.getSize(),n=t.get((this.index-1+i)%i).translated(e),s=t.get((this.index+1)%i).translated(e),r=n.dot(s),o=Math.acos(r/(n.length()*s.length()));return 180*o/Math.PI}}),draw2d.shape.basic.GhostVertexResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.GhostVertexResizeHandle",init:function(t,e){this.maxOpacity=.35,this._super(t),this.precursorIndex=e,this.setAlpha(this.maxOpacity)},createShapeElement:function(){var t=this._super();return t.attr({cursor:"pointer"}),t},setAlpha:function(t){return t=Math.min(this.maxOpacity,Math.max(0,parseFloat(t))),this._super(t),this},onClick:function(){var t=new draw2d.command.CommandAddVertex(this.owner,this.precursorIndex+1,this.getAbsoluteX()+this.getWidth()/2,this.getAbsoluteY()+this.getHeight()/2);this.getCanvas().getCommandStack().execute(t)},onDragStart:function(t,e,i,n){return!0},onDrag:function(t,e,i,n){return!0},onDragEnd:function(t,e,i,n){return this.fireEvent("dragend",{x:t,y:e,shiftKey:i,ctrlKey:n}),!0},relocate:function(){var t=this.owner.getVertices().get(this.precursorIndex),e=this.owner.getVertices().get(this.precursorIndex+1),i=(e.x-t.x)/2+t.x-this.getWidth()/2,n=(e.y-t.y)/2+t.y-this.getHeight()/2;this.setPosition(i,n)}}),draw2d.Port=draw2d.shape.basic.Circle.extend({NAME:"draw2d.Port",DEFAULT_BORDER_COLOR:new draw2d.util.Color("#1B1B1B"),MAX_SAFE_INTEGER:9007199254740991,init:function(t,e,i){var n=this;this.locator=null,this.lighterBgColor=null,this.name=null,this._super($.extend({bgColor:"#4f6870",stroke:1,diameter:draw2d.isTouchDevice?25:10,color:"#1B1B1B",selectable:!1},t),e,i),this.ox=this.x,this.oy=this.y,this.coronaWidth=5,this.corona=null,this.useGradient=!0,this.preferredConnectionDirection=null,this.connections=new draw2d.util.ArrayList,this.moveListener=function(t,e){n.repaint(),n.fireEvent("move",{figure:n,dx:0,dy:0})},this.connectionAnchor=new draw2d.layout.anchor.ConnectionAnchor(this),this.value=null,this.maxFanOut=this.MAX_SAFE_INTEGER,this.setCanSnapToHelper(!1),this.editPolicy.each(function(t,e){n.uninstallEditPolicy(e)}),this.installEditPolicy(new draw2d.policy.port.IntrusivePortsFeedbackPolicy),this.portSelectionAdapter=function(){return n}},getSelectionAdapter:function(){return this.portSelectionAdapter},setMaxFanOut:function(t){return this.maxFanOut=Math.max(1,t),this.fireEvent("change:maxFanOut",{value:this.maxFanOut}),this},getMaxFanOut:function(){return this.maxFanOut},setConnectionAnchor:function(t){return"undefined"!=typeof t&&null!==t||(t=new draw2d.layout.anchor.ConnectionAnchor),this.connectionAnchor=t,this.connectionAnchor.setOwner(this),this.fireEvent("move",{figure:this,dx:0,dy:0}),this},getConnectionAnchorLocation:function(t,e){return this.connectionAnchor.getLocation(t,e)},getConnectionAnchorReferencePoint:function(t){return this.connectionAnchor.getReferencePoint(t)},getConnectionDirection:function(t){return"undefined"==typeof this.preferredConnectionDirection||null===this.preferredConnectionDirection?this.getParent().getBoundingBox().getDirection(this.getAbsolutePosition()):this.preferredConnectionDirection},setConnectionDirection:function(t){return this.preferredConnectionDirection=t,this.fireEvent("move",{figure:this,dx:0,dy:0}),this},setLocator:function(t){return this.locator=t,this},getLocator:function(){return this.locator},setBackgroundColor:function(t){return this._super(t),this.lighterBgColor=this.bgColor.lighter(.3).hash(),this},setValue:function(t){return this.value=t,null!==this.getParent()&&this.getParent().onPortValueChanged(this),this.fireEvent("change:value",{value:this.value}),this},getValue:function(){return this.value},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},t.cx=this.getAbsoluteX(),t.cy=this.getAbsoluteY(),t.rx=this.width/2,t.ry=t.rx,t.cursor="move",this.getAlpha()<.9||this.useGradient===!1?t.fill=this.bgColor.hash():t.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-"),this._super(t))},onMouseEnter:function(){this._oldstroke=this.getStroke(),this.setStroke(2)},onMouseLeave:function(){this.setStroke(this._oldstroke)},getConnections:function(){return this.connections},setParent:function(t){null!==this.parent&&this.parent.off(this.moveListener),this._super(t),null!==this.parent&&this.parent.on("move",this.moveListener)},getCoronaWidth:function(){return this.coronaWidth},setCoronaWidth:function(t){this.coronaWidth=t},onDragStart:function(t,e,i,n){if(this.getConnections().getSize()>=this.maxFanOut)return!1;var s=this;this.ox=this.x,this.oy=this.y;var r=!0;return this.editPolicy.each(function(o,a){a instanceof draw2d.policy.figure.DragDropEditPolicy&&(r=r&&a.onDragStart(s.canvas,s,t,e,i,n))}),r},onDrag:function(t,e,i,n,s,r){this._super(t,e)},onDragEnd:function(t,e,i,n){this.setAlpha(1),this.setPosition(this.ox,this.oy)},onDrop:function(t,e,i,n,s){},onConnect:function(t){},onDisconnect:function(t){},getName:function(){return this.name},setName:function(t){this.name=t},hitTest:function(t,e,i){var n=this.getAbsoluteX()-this.coronaWidth-this.getWidth()/2,s=this.getAbsoluteY()-this.coronaWidth-this.getHeight()/2,r=n+this.getWidth()+2*this.coronaWidth,o=s+this.getHeight()+2*this.coronaWidth;return t>=n&&t<=r&&e>=s&&e<=o},setGlow:function(t){return t===!0&&null===this.corona?(this.corona=new draw2d.Corona,this.corona.setDimension(this.getWidth()+2*this.getCoronaWidth(),this.getWidth()+2*this.getCoronaWidth()),this.corona.setPosition(this.getAbsoluteX()-this.getCoronaWidth()-this.getWidth()/2,this.getAbsoluteY()-this.getCoronaWidth()-this.getHeight()/2),this.corona.setCanvas(this.getCanvas()),this.corona.getShapeElement(),this.corona.repaint()):t===!1&&null!==this.corona&&(this.corona.setCanvas(null),this.corona=null),this},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE&&this.isDraggable()?new draw2d.command.CommandMovePort(this):null},fireEvent:function(t,e){this.isInDragDrop===!0&&"drag"!==t||this._super(t,e)},getPersistentAttributes:function(){var t=this._super();return t.maxFanOut=this.maxFanOut,t.name=this.name,delete t.x,delete t.y,delete t.ports,t},setPersistentAttributes:function(t){return this._super(t),"undefined"!=typeof t.maxFanOut&&("number"==typeof t.maxFanOut?this.maxFanOut=t.maxFanOut:this.maxFanOut=Math.max(1,parseInt(t.maxFanOut))),"undefined"!=typeof t.name&&this.setName(t.name),this}}),draw2d.Corona=draw2d.shape.basic.Circle.extend({init:function(){this._super(),this.setAlpha(.3),this.setBackgroundColor(new draw2d.util.Color(178,225,255)),this.setColor(new draw2d.util.Color(102,182,252))},setAlpha:function(t){return this._super(Math.min(.3,t)),this.setDeleteable(!1),this.setDraggable(!1),this.setResizeable(!1),this.setSelectable(!1),this}}),draw2d.InputPort=draw2d.Port.extend({NAME:"draw2d.InputPort",init:function(t,e,i){this._super(t,e,i),this.locator=new draw2d.layout.locator.InputPortLocator},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.CONNECT?new draw2d.command.CommandConnect(t.source,t.target,t.source,t.router):this._super(t)}}),draw2d.OutputPort=draw2d.Port.extend({NAME:"draw2d.OutputPort",init:function(t,e,i){this._super(t,e,i),this.locator=new draw2d.layout.locator.OutputPortLocator},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.CONNECT?new draw2d.command.CommandConnect(t.target,t.source,t.source,t.router):this._super(t)}}),draw2d.HybridPort=draw2d.Port.extend({NAME:"draw2d.HybridPort",init:function(t,e,i){this._super(t,e,i),this.locator=new draw2d.layout.locator.InputPortLocator},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.CONNECT?t.source.getParent().getId()===t.target.getParent().getId()?null:t.source instanceof draw2d.InputPort?new draw2d.command.CommandConnect(t.target,t.source,t.source,t.router):t.source instanceof draw2d.OutputPort?new draw2d.command.CommandConnect(t.source,t.target,t.source,t.router):t.source instanceof draw2d.HybridPort?new draw2d.command.CommandConnect(t.target,t.source,t.source,t.router):null:this._super(t)}}),draw2d.layout.anchor.ConnectionAnchor=Class.extend({NAME:"draw2d.layout.anchor.ConnectionAnchor",init:function(t){this.owner=t},getLocation:function(t,e){return this.getReferencePoint(e)},getOwner:function(){return this.owner},setOwner:function(t){if("undefined"==typeof t)throw"Missing parameter for 'owner' in ConnectionAnchor.setOwner";this.owner=t},getBox:function(){return this.getOwner().getAbsoluteBounds()},getReferencePoint:function(t){return this.getOwner().getAbsolutePosition()}}),draw2d.layout.anchor.ChopboxConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ChopboxConnectionAnchor",init:function(t){this._super(t)},getLocation:function(t,e){var i=new draw2d.geo.Rectangle(0,0);i.setBounds(this.getBox()),i.translate(-1,-1),i.resize(1,1);var n=i.getCenter();if(i.isEmpty()||t.x===n.x&&t.y===n.y)return n;var s=t.x-n.x,r=t.y-n.y,o=.5/Math.max(Math.abs(s)/i.w,Math.abs(r)/i.h);return s*=o,r*=o,n.translate(s,r),n},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(t){return this.getBox().getCenter()}}),draw2d.layout.anchor.FanConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.FanConnectionAnchor",init:function(t,e){this._super(t),e?this.separation=parseInt(e):this.separation=10},getLocation:function(t,e){var i=new draw2d.geo.Rectangle(0,0);i.setBounds(this.getBox()),i.translate(-1,-1),i.resize(1,1);var n=i.getCenter();if(i.isEmpty()||t.x===n.x&&t.y===n.y)return n;var s=e.getSource(),r=e.getTarget(),o=this.getOwner().getConnections().clone();o.grep(function(t){return t.getTarget()===r&&t.getSource()===s||t.getTarget()===s&&t.getSource()===r});var a,c=o.indexOf(e)+1,h=n.getPosition(t);a=h==draw2d.geo.PositionConstants.SOUTH||h==draw2d.geo.PositionConstants.EAST?new draw2d.geo.Point(t.x-n.x,t.y-n.y):new draw2d.geo.Point(n.x-t.x,n.y-t.y);var l=Math.sqrt(a.x*a.x+a.y*a.y);c<=2&&(l*=1.5);var u=this.separation*a.x/l,d=this.separation*a.y/l;n=c%2===0?new draw2d.geo.Point(n.x+c/2*(-1*d),n.y+c/2*u):new draw2d.geo.Point(n.x+c/2*d,n.y+c/2*(-1*u));var p=this.getBox().intersectionWithLine(n,t);switch(p.getSize()){case 0:var f=this.getBox().getVertices(),g=f.first();return g.distance=t.getDistance(g),f.asArray().reduce(function(e,i){return i.distance=t.getDistance(i),i.distance<e.distance?i:e});case 1:return p.get(0);case 2:var m=p.get(0),v=p.get(1),y=t.getDistance(m),w=t.getDistance(v);return y<w?m:v}},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(t){return this.getBox().getCenter()}}),draw2d.layout.anchor.ShortesPathConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ShortesPathConnectionAnchor",init:function(t){this._super(t)},getLocation:function(t,e){var i=this.getOwner().getParent().getBoundingBox(),n=i.getCenter();if(this.getOwner().getParent()instanceof draw2d.shape.basic.Oval){var s=this.getOwner().getParent().intersectionWithLine(t,n);if(1==s.getSize())return s.get(0)}var r=i.determineOctant(new draw2d.geo.Rectangle(t.x,t.y,2,2));switch(r){case 0:return i.getTopLeft();case 1:return new draw2d.geo.Point(t.x,i.getTop());case 2:return i.getTopRight();case 3:return new draw2d.geo.Point(i.getRight(),t.y);case 4:return i.getBottomRight();case 5:return new draw2d.geo.Point(t.x,i.getBottom());case 6:return i.getBottomLeft();case 7:return new draw2d.geo.Point(i.getLeft(),t.y)}return i.getTopLeft()},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(t){return this.getBox().getCenter()}}),draw2d.layout.anchor.CenterEdgeConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.CenterEdgeConnectionAnchor",init:function(t){this._super(t)},getLocation:function(t,e){var i=this.getOwner().getParent().getBoundingBox(),n=i.getDirection(t),s=i.getCenter();switch(n){case 0:s.y=i.y;break;case 1:s.x=i.x+i.w;break;case 2:s.y=i.y+i.h;break;case 3:s.x=i.x}return s},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(t){return this.getBox().getCenter()}}),draw2d.shape.arrow.CalligrapherArrowLeft=draw2d.SVGFigure.extend({NAME:"draw2d.shape.arrow.CalligrapherArrowLeft",init:function(t,e,i){this._super(t)},getSVG:function(){return'<svg width="230" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1">  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3024" d="m 218.87943,27.464763 c -1.21088,-0.0563 -2.42064,-0.14616 -3.63262,-0.16893 c -5.82495,-0.10948 -18.61676,-0.0226 -22.97385,0.0122 c -7.12848,0.057 -14.25673,0.14021 -21.38495,0.22333 c -9.03765,0.10539 -18.07511,0.22813 -27.11266,0.3422 c -10.2269,0.11878 -20.4538,0.23756 -30.6807,0.35634 c -35.488759,0.4089 -70.975849,0.82793 -106.4669238,0.95195 c 0,0 7.9718628,-5.70244 7.9718628,-5.70244 l 0,0 c 6.374241,0.28694 12.745594,0.64561 19.122722,0.86083 c 28.09499,0.94816 56.21338,0.92473 84.315959,0.32205 c 10.51273,-0.32805 21.0288,-0.56402 31.53819,-0.98412 c 27.47361,-1.09824 54.91405,-2.91665 82.28177,-5.53697 c 0,0 -12.9788,9.32351 -12.9788,9.32351 z" inkscape:connector-curvature="0" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3026" d="m 100.75066,1.6309831 c -7.165239,3.9571 -14.284929,7.47866 -22.036659,10.2707299 c -5.00195,1.80163 -10.10374,3.31886 -15.2402,4.79424 c -8.25878,2.37815 -16.55626,4.65805 -24.9012,6.79479 c -2.89107,0.71593 -5.74687,1.56407 -8.66266,2.20424 c -3.211679,0.70512 -6.49468,1.17333 -9.752959,1.6747 c -5.447101,0.92112 -10.9044008,1.81762 -16.3983488,2.50082 c -1.608931,0.0814 -0.850754,0.10697 -2.275834,-0.0365 C 20.004071,21.041553 19.256899,21.517873 32.515691,19.216243 c 6.21537,-1.05913 12.34875,-2.37668 18.3945,-4.03234 c 8.12719,-2.02803 16.23765,-4.1157 24.26421,-6.4321199 c 5.23574,-1.55053 10.41682,-3.15473 15.46857,-5.12875 c 1.38953,-0.54295 2.7579,-1.12682 4.12253,-1.71603 c 0.98421,-0.42496 3.86537,-1.81801999 2.92296,-1.32600999 C 93.642191,2.6934931 89.529511,4.7073031 85.450031,6.7704531 l 15.300629,-5.1394 z" inkscape:connector-curvature="0" sodipodi:nodetypes="csccsccccccsssccc" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3028" d="m 80.764281,58.068863 c -2.45498,-3.50762 -6.58178,-6.10525 -10.40324,-8.66732 c -4.30614,-2.72676 -7.93958,-6.28283 -12.6021,-8.28702 c -7.39912,-4.50257 -11.70055,-7.85592 -20.85866,-9.23429 c -4.9257,-0.85706 -17.294247,-1.32043 -22.226462,-2.15427 c -3.445882,-0.42869 -6.2035918,0.70541 -9.6845138,0.57715 c -1.496337,-0.0586 -2.99355,-0.0965 -4.491229,-0.12472 l 13.9525278,-6.24562 l 3.25,-1.17153 c 1.441459,0.0813 -1.116338,0.15309 0.325505,0.23016 c 3.574557,0.17902 7.211864,0.0695 10.712655,0.73822 c 4.723107,1.08097 9.443947,2.1624 14.234177,3.05317 c 2.76739,0.64203 3.92627,0.87082 6.64127,1.66289 c 4.42146,1.28993 8.60075,3.01513 12.86503,4.58129 c 1.90199,0.73446 5.05193,1.93181 6.89302,2.7216 c 4.92005,2.11061 9.5916,4.57045 13.9716,7.31023 c 4.16708,2.62011 8.48023,5.20033 11.72012,8.56863 z" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccscsccc" /></svg>'},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.svgNodes&&this.svgNodes.attr({fill:this.color.hash()}),this._super(t))}}),draw2d.shape.arrow.CalligrapherArrowDownLeft=draw2d.SVGFigure.extend({
NAME:"draw2d.shape.arrow.CalligrapherArrowDownLeft",init:function(t,e,i){this._super(t)},getSVG:function(){return'<svg width="180" height="300" xmlns="http://www.w3.org/2000/svg" version="1.1">     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3084" d="m 159.63578,17.846597 c 0.43137,9.44641 -0.0636,18.88035 -0.8284,28.30165 c -1.73211,18.38336 -4.05381,36.71698 -6.08253,55.075313 c -1.61738,13.7075 -3.03402,27.43467 -3.97611,41.19113 c -1.09101,11.16584 -1.31019,22.36559 -1.28541,33.56466 c -0.1328,4.82188 0.3218,9.6468 0.14332,14.46812 c -0.0888,2.39977 -0.28315,3.73625 -0.55012,6.12095 c -0.85848,4.73147 -2.27416,9.40019 -4.7769,13.68272 c -1.47003,2.51544 -3.78493,5.6647 -5.47739,8.05048 c -5.02888,6.66256 -11.08555,12.65652 -18.10552,17.75963 c -4.23302,3.07716 -7.74942,5.12065 -12.22081,7.86298 c -13.253319,6.72606 -25.889792,15.11686 -40.84124,18.60576 c -3.016829,0.7039 -4.431417,0.8157 -7.450859,1.2076 c -6.983246,0.5774 -14.009174,0.3375 -21.010676,0.2509 c -3.278795,-0.033 -6.55749,0.01 -9.835897,0.045 c 0,0 20.838833,-13.2364 20.838833,-13.2364 l 0,0 c 3.147056,0.093 6.294483,0.1852 9.443646,0.2007 c 6.966697,0.011 13.971433,0.1301 20.897176,-0.6344 c 3.732439,-0.5577 7.321215,-1.2431 10.881203,-2.4145 c 1.517208,-0.4992 5.830867,-2.43339 4.487902,-1.6386 c -6.098183,3.6088 -25.104875,12.8748 -9.52514,5.223 c 4.40875,-2.5927 8.262057,-4.7459 12.425175,-7.65986 c 6.839117,-4.78709 12.633657,-10.50427 17.500607,-16.86761 c 2.53518,-3.56692 5.24684,-7.12748 7.07617,-11.03446 c 1.42357,-3.0404 2.21532,-6.28727 2.91146,-9.50152 c 0.91919,-6.88822 1.03991,-13.81392 1.25118,-20.74151 c 0.47683,-11.27871 0.96259,-22.55877 1.61689,-33.83062 c 1.21127,-14.03392 3.64191,-27.94339 5.46543,-41.92167 c 2.26899,-18.186603 4.6835,-36.384373 5.4487,-54.679643 c 0.0788,-2.46092 0.23808,-4.92087 0.23618,-7.38276 c -0.005,-6.45916 -0.62194,-13.00218 -2.13821,-19.32664 c 0,0 23.48134,-10.73998 23.48134,-10.73998 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3086" d="m 41.271518,252.40239 c 2.465518,-0.7264 4.879503,-1.7726 7.145328,-2.9859 c 0.955597,-0.5117 3.736822,-2.1986 2.791991,-1.6673 c -5.218817,2.9348 -10.409826,5.9187 -15.61474,8.878 c 5.366557,-3.4898 10.227818,-7.6685 14.119927,-12.75576 c 3.507157,-5.09382 4.097613,-11.17122 4.301158,-17.17644 c 0.02635,-3.95844 -0.31227,-7.90612 -0.635377,-11.84752 c 0,0 19.920693,-10.3059 19.920693,-10.3059 l 0,0 c 0.171761,4.05015 0.409899,8.09777 0.50079,12.15101 c -0.185739,6.23619 -0.347804,12.66862 -3.492579,18.24747 c -0.503375,0.75197 -0.961922,1.53596 -1.510126,2.25591 c -3.478528,4.56826 -8.226837,8.04586 -12.757403,11.47443 c -7.345206,4.3297 -14.671333,8.692 -22.035619,12.9891 c -3.551305,2.0723 -7.368692,3.8726 -11.394645,4.7773 c 0,0 18.660602,-14.0344 18.660602,-14.0344 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3088" d="m 37.815923,255.49919 c 3.41111,0.1581 6.814569,0.2213 10.182693,0.8184 c 6.92998,2.6928 13.533527,6.2357 20.043462,9.8162 c 3.912139,2.1362 7.91195,4.4644 10.690321,8.0298 c 1.039962,1.2802 1.510411,2.7604 1.893523,4.3313 c 0,0 -20.370847,10.9259 -20.370847,10.9259 l 0,0 c -0.225419,-1.2711 -0.55067,-2.4558 -1.329618,-3.5184 c -2.332229,-3.3633 -5.869056,-5.6279 -9.247191,-7.8233 c -6.335066,-3.7106 -12.98611,-7.1834 -20.232784,-8.6836 c -3.497247,-0.3814 -7.011372,-0.4307 -10.521829,-0.1703 c 0,0 18.89227,-13.726 18.89227,-13.726 z" inkscape:connector-curvature="0" /></svg>'},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.svgNodes&&this.svgNodes.attr({fill:this.color.hash()}),this._super(t))}}),draw2d.shape.node.Start=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Start",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(t,e,i){this._super($.extend({bgColor:this.DEFAULT_COLOR,color:this.DEFAULT_COLOR.darker(),width:50,height:50},t),e,i),this.createPort("output")}}),draw2d.shape.node.End=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.End",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(t,e,i){this._super($.extend({bgColor:this.DEFAULT_COLOR,color:this.DEFAULT_COLOR.darker(),width:50,height:50},t),e,i),this.createPort("input")}}),draw2d.shape.node.Between=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Between",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(t,e,i){this._super($.extend({bgColor:this.DEFAULT_COLOR,color:this.DEFAULT_COLOR.darker(),width:50,height:50},t),e,i),this.createPort("output"),this.createPort("input")}}),draw2d.shape.note.PostIt=draw2d.shape.basic.Label.extend({NAME:"draw2d.shape.note.PostIt",init:function(t,e,i){this._super(t,e,i),this.setStroke(1),this.setBackgroundColor("#5b5b5b"),this.setColor("#FFFFFF"),this.setFontColor("#ffffff"),this.setFontSize(14),this.setPadding(5),this.setRadius(5)}}),draw2d.shape.flowchart.Document=draw2d.VectorFigure.extend({NAME:"draw2d.shape.flowchart.Document",init:function(t,e,i){this.amplitude=.08,this._super($.extend({width:80,height:50,bgColor:"#2196f3",color:"#1B1B1B",stroke:1},t),e,i)},createShapeElement:function(){return this.canvas.paper.path(this.calcPath())},calcPath:function(){var t=this.getWidth(),e=this.getHeight(),i=t/2,n=t/4,s=e*this.amplitude|0;return["M",this.getAbsoluteX(),",",this.getAbsoluteY(),"l",t,",",0,"l",0,",",e-s,"q",-n,",",-s,-i,",",0,"q",-n,",",s,-i,",",0,"z"].join(" ")},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape)return t=$.extend({},{path:this.calcPath()},t),this._super(t),this}}),draw2d.shape.widget.Widget=draw2d.SetFigure.extend({init:function(t,e,i){this._super(t,e,i)}}),draw2d.shape.widget.Slider=draw2d.shape.widget.Widget.extend({NAME:"draw2d.shape.widget.Slider",DEFAULT_COLOR_THUMB:new draw2d.util.Color("#bddf69"),DEFAULT_COLOR_BG:new draw2d.util.Color("#d3d3d3"),init:function(t,e,i){this.currentValue=0,this.slideBoundingBox=new draw2d.geo.Rectangle(0,0,10,20),this.padding={top:4,right:4,bottom:4,left:4},this.panning=!1,this.thumbGrow=0,this._super($.extend({width:150,height:15,stroke:1,radius:4,resizeable:!0,color:this.DEFAULT_COLOR_THUMB,bgColor:this.DEFAULT_COLOR_BG,value:50},t),$.extend({padding:this.setPadding,value:this.setValue},e),$.extend({padding:this.getPadding,value:this.getValue},i)),this.setMinHeight(15),this.setMinWidth(80)},createSet:function(){var t=this.canvas.paper.set(),e=this.canvas.paper.rect(0,0,10,20);return e.node.style.cursor="col-resize",t.push(e),t},setDimension:function(t,e){this._super(t,e),this.slideBoundingBox.setBoundary(this.padding.left,0,this.getWidth()-this.padding.right,this.getHeight()),this.slideBoundingBox.setHeight(this.getHeight()+1),this.repaint()},setPadding:function(t){return this.clearCache(),"number"==typeof t?this.padding={top:t,right:t,bottom:t,left:t}:$.extend(this.padding,t),this.repaint(),this.fireEvent("change:padding",{value:this.padding}),this},getPadding:function(){return this.padding},onValueChange:function(t){},onDragStart:function(t,e,i,n){if(this.slideBoundingBox.hitTest(t,e)){this.panningX=t,this.panningY=e,this.panning=!0;var s=new Tweenable;return s.tween({from:{grow:this.thumbGrow},to:{grow:10},duration:500,easing:"easeOutQuart",step:$.proxy(function(t){this.thumbGrow=t.grow,this.repaint()},this),finish:function(){s.dispose()}}),!1}return this._super(t,e,i,n)},onPanning:function(t,e,i,n){var s=this.slideBoundingBox.w/2,r=this.getWidth(),o=r-this.padding.left-this.padding.right,a=Math.min(r,Math.max(0,this.panningX+t)),c=Math.min(r-this.padding.left-this.padding.right,a-this.padding.left)-s;this.setValue(100/o*c)},onPanningEnd:function(){this.panning=!1;var t=new Tweenable;t.tween({from:{grow:this.thumbGrow},to:{grow:0},duration:300,easing:"easeOutQuart",step:$.proxy(function(t){this.thumbGrow=t.grow,this.repaint()},this),finish:function(){t.dispose()}}),this.thumbGrow=0,this.repaint()},setValue:function(t){return this.currentValue=Math.min(Math.max(0,0|t),100),this.repaint(),this.onValueChange(this.currentValue),this.fireEvent("change:value",{value:this.currentValue}),this},getValue:function(){return this.currentValue},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape){t=t||{};var e=(this.getWidth()-this.padding.left-this.padding.right)/100*this.currentValue+this.padding.left|0;if(this.slideBoundingBox.setX(e),null!==this.svgNodes){var i=this.slideBoundingBox.toJSON();i.y-=this.thumbGrow/2,i.height+=this.thumbGrow,i.fill=this.getColor().hash(),i.stroke=this.getColor().darker(.2).hash(),i.r=4,this.svgNodes.attr(i)}t.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(.3).hash()+":95",t.stroke=this.bgColor.darker(.1).hash(),this._super(t)}},applyTransformation:function(){this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}}),draw2d.shape.diagram.Diagram=draw2d.SetFigure.extend({init:function(t,e,i){this.data=[],this.cache={},this._super($.extend({data:[],bgColor:"#8dabf2",stroke:1,color:"#f0f0f0",radius:2,resizeable:!0},t),$.extend({},{data:this.setData},e),$.extend({},{data:this.getData},i))},setData:function(t){this.data=t,this.cache={},null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=this.createSet()),this.repaint(),this.fireEvent("change:data",{value:t})},getData:function(){return this.data},setDimension:function(t,e){return this.cache={},this._super(t,e),this},getWidth:function(){return this.width},getHeight:function(){return this.height},repaint:function(t){return this.repaintBlocked===!0||null==this.shape?this:(t=t||{},draw2d.util.JSON.ensureDefault(t,"fill","none"),this._super(t))},applyTransformation:function(){return this.isResizeable()===!0?this.svgNodes.transform("S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()+"t"+this.getAbsoluteX()+","+this.getAbsoluteY()):this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY()),this}}),draw2d.shape.diagram.Pie=draw2d.shape.diagram.Diagram.extend({COLORS:["#00A8F0","#b9dd69","#f3546a","#4DA74D","#9440ED"],TWO_PI:2*Math.PI,init:function(t,e,i){this._super($.extend({stroke:0},t),$.extend({diameter:this.setDiameter,radius:this.setRadius},e),$.extend({diameter:this.getDiameter,radius:this.getRadius},i))},setDiameter:function(t){var e=this.getCenter();return this.setDimension(t,t),this.setCenter(e),this.fireEvent("change:diameter",{value:this.width}),this},getDiameter:function(){return this.getWidth()},setRadius:function(t){return this.setDiameter(2*t),this.fireEvent("change:radius",{value:this.width/2}),this},getCenter:function(){var t=this.getDiameter()/2;return this.getPosition().translate(t,t)},setCenter:function(t,e){var i=new draw2d.geo.Point(t,e),n=this.getDiameter()/2;return i.translate(-n,-n),this.setPosition(i),this.fireEvent("change:center",{value:{x:t,y:e}}),this},setData:function(t){this.sum=0;var e=this;$.each(t,function(t,i){e.sum+=i});var i=1/this.sum;return $.each(t,function(e,n){t[e]=i*n}),this._super(t),this.fireEvent("change:data",{value:t}),this},createSet:function(){for(var t=this.getWidth()/2,e=this.data.length,i=this.canvas.paper.set(),n=0,s=0;s<e;s++){var r=this.TWO_PI*this.data[s],o=this.COLORS[s%e],a=this.drawSegment(t,r,n,.1);a.attr({stroke:this.color.hash(),fill:o}),i.push(a),n+=r}return i},setDimension:function(t,e){return t>e?this._super(t,t):this._super(e,e),null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=this.createSet()),this.repaint(),this},polarPath:function(t,e,i){var n,s;return n=t*Math.cos(e+i)+t,s=t*Math.sin(e+i)+t,"L "+n+" "+s+" "},drawSegment:function(t,e,i,n){for(var s="M "+t+" "+t,r=0;r<e;r+=n)s+=this.polarPath(t,r,i);return s+=this.polarPath(t,e,i),s+="L "+t+" "+t,this.getCanvas().paper.path(s)},applyTransformation:function(){return this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY()),this}}),draw2d.shape.diagram.Sparkline=draw2d.shape.diagram.Diagram.extend({init:function(t,e,i){this.min=0,this.max=10,this.padding=4,this._super($.extend({width:180,height:50},t),e,i)},setData:function(t){return t.length>0?(this.min=Math.min.apply(Math,t),this.max=Math.max.apply(Math,t)):(this.min=0,this.max=1),this.max==this.min&&(this.max=this.min+1),this._super(t),this.fireEvent("change:data",{value:t}),this},createSet:function(){return this.canvas.paper.path("M0 0 l0 0")},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape){t=t||{},t.fill="90-#000:5-#4d4d4d:95";var e=this.padding,i=this.getWidth()-2*e,n=this.getHeight()-2*e,s=this.data.length,r=this.min,o=this.max,a=function(t,a){var c=1;return s>1&&(c=i/(s-1)),{y:-((t-r)/(o-r)*n)+n+e,x:e+a*c}};if(null!==this.svgNodes&&"undefined"==typeof this.cache.pathString){var c=null;$.each(this.data,$.proxy(function(t,e){var i=a(e,t);null===c?this.cache.pathString=["M",i.x,i.y].join(" "):this.cache.pathString=[this.cache.pathString,"L",i.x,i.y].join(" "),c=i},this)),this.svgNodes.attr({path:this.cache.pathString,stroke:"#f0f0f0"})}return this._super(t),this}}}),draw2d.shape.analog.OpAmp=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.OpAmp",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent(),n=(8+18.5*t)*i.scaleY;this.applyConsiderRotation(e,1,n)}}),init:function(t,e,i){this._super($.extend({stroke:0,bgColor:"#f0f0ff"},t),e,i),this.inputLocator=new this.MyInputPortLocator,this.createPort("input",this.inputLocator),this.createPort("input",this.inputLocator),this.createPort("output")},getSVG:function(){return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="50"  height="50"><path d="m8.2627,0l0,35.36035l31.23926,-17.76025l-31.23926,-17.60011l0,0l0,0.00001zm2.27832,27.36719l4.08105,0m-2.10449,-2.20703l0,4.27979m2.26367,-21.35938l-4.15918,0"  stroke="#1B1B1B" fill="none"/><line x1="0.53516"  y1="8"  x2="8.21191"  y2="8"  stroke="#010101"/><line x1="39.14941" y1="18" x2="45.81055" y2="18" stroke="#010101" /><line x1="0.53516"  y1="27" x2="8.21191"  y2="27" stroke="#010101" /></svg>'},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape)return t=t||{},t.fill="none",null!=this.bgColor&&this.svgNodes[0].attr({fill:this.bgColor.hash()}),this._super(t),this}}),draw2d.shape.analog.ResistorBridge=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.ResistorBridge",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth(),n=e.getParent().getHeight();this.applyConsiderRotation(e,i/2+1,n*t)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth(),n=e.getParent().getHeight();this.applyConsiderRotation(e,i*(t-2),n/2)}}),init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator),this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12322" d="m47.62207,22.71094l0,0c0.73145,0.73242 0.71777,1.93359 -0.03027,2.68164c-0.74805,0.74951 -1.94922,0.76123 -2.68073,0.0293c-0.73138,-0.73242 -0.71967,-1.93211 0.03033,-2.68115c0.74707,-0.74803 1.94727,-0.76219 2.68066,-0.02979l0,0z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12324" d="m25.84082,0.93115l0,0c0.73145,0.73096 0.71875,1.93359 -0.02832,2.68066c-0.75,0.74951 -1.94922,0.76123 -2.68164,0.0293c-0.73242,-0.73241 -0.71973,-1.93164 0.0293,-2.68065c0.74805,-0.74756 1.94922,-0.76172 2.68066,-0.0293l0,0l0,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12326" d="m25.75098,44.58203l0,0c0.73145,0.73193 0.71875,1.93311 -0.02832,2.68115c-0.75,0.74902 -1.94922,0.76074 -2.68262,0.0293c-0.73145,-0.73193 -0.71973,-1.93262 0.03033,-2.68164c0.74707,-0.74756 1.94922,-0.76123 2.68066,-0.02879l0,0l-0.00006,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12328" d="m3.9707,22.80127l0,0c0.73242,0.73193 0.71777,1.93359 -0.0293,2.68115c-0.74902,0.74951 -1.94922,0.76172 -2.68164,0.0293c-0.73145,-0.73242 -0.71973,-1.93164 0.03027,-2.68115c0.74707,-0.74707 1.94922,-0.76074 2.68066,-0.0293l0,0z"/><polyline fill="none" stroke="#010101" id="polyline12334" points="24.908203125,45.49267578125 31.71875,38.68310546875 31.2119140625,36.98876953125 34.892578125,37.95703125 33.953125,34.22265625 37.6650390625,35.18359375 36.6767578125,31.52490234375 40.3759765625,32.47314453125 39.873046875,30.52783203125 45.884765625,24.51708984375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12338" points="36.3408203125,23.98876953125 38.146484375,29.55810546875 33.630859375,29.55810546875 35.435546875,23.98779296875 "/><line fill="none" stroke="#010101" id="line12340" y2="28.90967" x2="35.8877" y1="41.13428" x1="35.88867" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12346" points="3.2109375,23.79248046875 10.01953125,16.98388671875 9.513671875,15.2890625 13.193359375,16.25732421875 12.251953125,12.5234375 15.9658203125,13.48486328125 14.9775390625,9.82568359375 18.6767578125,10.7734375 18.173828125,8.82958984375 24.185546875,2.81787109375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12350" points="13.126953125,23.80419921875 11.3212890625,18.236328125 15.8369140625,18.236328125 14.0322265625,23.806640625 "/><line fill="none" stroke="#010101" id="line12352" y2="18.8833" x2="13.58008" y1="6.65967" x1="13.5791" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12358" points="46.65625,24.33642578125 39.84765625,17.52783203125 38.154296875,18.033203125 39.1220703125,14.353515625 35.3876953125,15.29345703125 36.34765625,11.58056640625 32.689453125,12.56884765625 33.6376953125,8.86865234375 31.6923828125,9.373046875 24.322265625,2.00341796875 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12362" points="36.578125,1.87109375 38.3828125,7.439453125 33.8681640625,7.439453125 35.6728515625,1.869140625 "/><line fill="none" stroke="#010101" id="line12364" y2="6.7915" x2="36.125" y1="19.01758" x1="36.125" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12370" points="24.494140625,46.49951171875 17.685546875,39.69091796875 15.9921875,40.1953125 16.958984375,36.515625 13.2265625,37.45556640625 14.185546875,33.7421875 10.52734375,34.73193359375 11.474609375,31.03125 9.529296875,31.53515625 2.1611328125,24.166015625 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12374" points="12.150390625,44.80029296875 10.34765625,39.23193359375 14.861328125,39.23095703125 13.0556640625,44.80224609375 "/><line fill="none" stroke="#010101" id="line12376" y2="39.87891" x2="12.60352" y1="27.6543" x1="12.60352" stroke-miterlimit="14.3"/></svg>'}}),draw2d.shape.analog.ResistorVertical=draw2d.SetFigure.extend({NAME:"draw2d.shape.analog.ResistorVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth(),n=e.getParent().getHeight();this.applyConsiderRotation(e,i/2,n)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth();this.applyConsiderRotation(e,i/2,0)}}),init:function(t,e,i){this._super($.extend({width:30,height:50,bgColor:null},t),e,i),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator)},createSet:function(){var t=this._super();return t.push(this.canvas.paper.path("M15,0 L15,5 L0,7.5 L30,10 L0,15 L30,20 L0,25 L30,30 L15,32.5 L15,40")),t}}),draw2d.shape.analog.VoltageSupplyHorizontal=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyHorizontal",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getHeight();this.applyConsiderRotation(e,0,i/2)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth(),n=e.getParent().getHeight();this.applyConsiderRotation(e,i,n/2)}}),init:function(t,e,i){this._super($.extend({width:50,height:30},t),e,i),this.createPort("hybrid",new this.MyInputPortLocator),this.createPort("hybrid",new this.MyOutputPortLocator)},getSVG:function(){return'<svg width="49" height="28" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m24.99933,18.95592l0,-9.54576m-5.78374,-9.40907l0,28.35939m-5.78718,-9.40457l0,-9.54576m-5.78374,-9.40907l0,28.35939" id="path10566" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m26.79878,14.13039l6.90583,0m-33.22691,0l6.90583,0" id="path10568" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}}),draw2d.shape.analog.VoltageSupplyVertical=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth(),n=e.getParent().getHeight();this.applyConsiderRotation(e,i/2,n)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,e){var i=e.getParent().getWidth();this.applyConsiderRotation(e,i/2,0)}}),init:function(t,e,i){this._super($.extend({width:30,height:50},t),e,i),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m19.62398,12.37594l-9.87926,0m-9.74355,8.22145l29.36289,0m-9.74007,8.22469l-9.87927,0m-9.74355,8.22145l29.36289,0" id="path10560" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m14.63157,9.81646l0,-9.81646m0,47.2328l0,-9.81646" id="path10562" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}}),draw2d.shape.layout.Layout=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.layout.Layout",init:function(t,e,i){this.padding={top:0,right:0,bottom:0,left:0},this._super($.extend({bgColor:null,radius:0,stroke:0},t),$.extend({padding:this.setPadding},e),$.extend({padding:this.getPadding},i));var n=this;this.resizeListener=function(t){n.getParent()instanceof draw2d.shape.layout.Layout?n.fireEvent("resize"):(n.setDimension(1,1),n.fireEvent("resize"))},this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy)},add:function(t,e,i){return this._super(t,e,i),t.on("resize",this.resizeListener),t.on("change:visibility",this.resizeListener),t.visible=t.visible&&this.visible,this},remove:function(t){var e=this._super(t);return t.off(this.resizeListener),this.setDimension(1,1),e},setPadding:function(t){return"number"==typeof t?this.padding={top:t,right:t,bottom:t,left:t}:$.extend(this.padding,t),this.fireEvent("change:padding",{value:this.padding}),this.setDimension(1,1),this},getPadding:function(){return this.padding},setVisible:function(t){return this.children.each(function(e,i){i.figure.setVisible(t)}),this._super(t),this.setDimension(1,1),this},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.ROTATE?null:this._super(t)}}),draw2d.shape.layout.HorizontalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.HorizontalLayout",init:function(t,e,i){this.gap=0;var n=this;this.locator={translate:function(t,e){t.setPosition(t.x+e.x,t.y+e.y)},bind:function(){},unbind:function(){},relocate:function(t,e){for(var i=n.getStroke(),s=i+n.padding.top,r=i+n.padding.left,o=0;o<t;o++){var a=n.children.get(o).figure;a.isVisible()&&(r+=a.getWidth()+n.gap)}e.setPosition(r,s)}},this._super($.extend({width:1,height:1,gap:0},t),$.extend({gap:this.setGap},e),$.extend({gap:this.getGap},i))},add:function(t,e,i){return this._super(t,this.locator,i),this.setDimension(1,1),this},setGap:function(t){return this.gap=t,this.setDimension(1,1),this},getGap:function(){return this.gap},getMinWidth:function(){var t=this,e=2*this.stroke+this.padding.left+this.padding.right,i=0;return this.children.each(function(n,s){s.figure.isVisible()&&(e+=s.figure.isResizeable()?s.figure.getMinWidth():s.figure.getWidth()+i,i=t.gap)}),e},getMinHeight:function(){var t=2*this.stroke+this.padding.top+this.padding.bottom,e=0;return this.children.each(function(t,i){e=Math.max(e,i.figure.isResizeable()?i.figure.getMinHeight():i.figure.getHeight())}),e+t},setDimension:function(t,e){this._super(t,e);var i=this.width-this.getMinWidth();if(i>0)i=i/this.children.getSize()|0,this.children.each(function(t,e){e.figure.isResizeable()===!0&&e.figure.setDimension(e.figure.getMinWidth()+i,e.figure.getHeight())});else{var n=this.getMinHeight();this.children.each(function(t,e){e.figure.isResizeable()===!0&&e.figure.setDimension(1,n)})}return this},getPersistentAttributes:function(){var t=this._super();return t.gap=this.gap,t},setPersistentAttributes:function(t){return this._super(t),"number"==typeof t.gap&&(this.gap=t.gap),this}}),draw2d.shape.layout.VerticalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.VerticalLayout",init:function(t,e,i){this.gap=0;var n=this;this.locator={translate:function(t,e){t.setPosition(t.x+e.x,t.y+e.y)},bind:function(){},unbind:function(){},relocate:function(t,e){for(var i=n.getStroke(),s=i+n.padding.top,r=n.padding.left,o=0;o<t;o++){var a=n.children.get(o).figure;a.isVisible()&&(s+=a.getHeight()+n.gap)}e.setPosition(r,s)}},this._super($.extend({width:10,height:10},t),$.extend({gap:this.setGap},e),$.extend({gap:this.getGap},i))},add:function(t,e,i){return this._super(t,this.locator,i),this.setDimension(1,1),this},setGap:function(t){this.gap=t,this.setDimension(1,1)},getMinWidth:function(){var t=2*this.stroke+this.padding.left+this.padding.right,e=10;return this.children.each(function(t,i){i.figure.isVisible()&&(e=Math.max(e,i.figure.isResizeable()?i.figure.getMinWidth():i.figure.getWidth()))}),e+t},getMinHeight:function(){var t=this,e=0,i=2*this.stroke+this.padding.top+this.padding.bottom,n=0;return this.children.each(function(i,s){s.figure.isVisible()&&(n+=(s.figure.isResizeable()?s.figure.getMinHeight():s.figure.getHeight())+e,e=t.gap)}),n+i},setDimension:function(t,e){this._super(t,e);var i=this.width-this.padding.left-this.padding.right;return i===this._recursiveWidth?this:(this._recursiveWidth=i,this.children.each(function(t,e){e.figure.isResizeable()&&e.figure.isVisible()&&e.figure.setDimension(i,e.figure.getMinHeight())}),delete this._recursiveWidth,this)},getPersistentAttributes:function(){var t=this._super();return t.gap=this.gap,t},setPersistentAttributes:function(t){return this._super(t),"number"==typeof t.gap&&(this.gap=t.gap),this}}),draw2d.shape.layout.TableLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.TableLayout",DUMMY_CELL:{getMinHeight:function(){return 1},getMinWidth:function(){return 1},off:function(){}},init:function(t,e,i){var n=this;this.cellLocator={relocate:function(t,e){if(n.repaintBlocked!==!0){var i=e.__cell,s=n.getCellLayout(i.row,i.column),r=n.getWidth(),o=n.getMinWidth(),a=0;r!=o&&(a=(r-o)/n.layoutInfos[0].length*i.column);var c=e.getWidth(),h=e.getHeight(),l=s.x+n.padding.left+s.padding.left+a,u=s.y+n.padding.top+s.padding.top;if(e.isResizeable()){var d=Math.max(e.getMinWidth(),s.w-(s.padding.left+s.padding.right)+a),p=Math.max(e.getMinHeight(),s.h-(s.padding.top+s.padding.bottom));e.setDimension(d,p)}else{switch(s.valign){case"middle":u+=(s.h-(h+s.padding.top+s.padding.bottom))/2;break;case"bottom":u+=s.h-(h+s.padding.top+s.padding.bottom)}switch(s.align){case"center":l=l+(s.w-(c+s.padding.left+s.padding.right))/2+a/2;break;case"right":l=l+(s.w-(c+s.padding.left+s.padding.right))+a}}e.setPosition(l,u)}},bind:function(){},unbind:function(){},translate:function(t,e){t.setPosition(t.x+e.x,t.y+e.y)}},this.padding={top:4,right:4,bottom:4,left:4},this.grid=[],this.layoutInfos=[],this.layoutInfos[0]=[],this.layoutInfos[0][0]={x:0,y:0,w:1,h:1,valign:"top",align:"left"},this._super($.extend({stroke:1,resizeable:!1},t),$.extend({padding:this.setPadding},e),$.extend({padding:this.getPadding},i))},setCellPadding:function(t,e,i){var n=this.getCellLayout(t,e);return null===n?this:("number"==typeof i?n.padding={top:i,right:i,bottom:i,left:i}:$.extend(n.padding,i),this.calculateLayout(),this.setDimension(1,1),this)},getCellPadding:function(t,e){var i=this.getCellLayout(t,e);return null===i||"undefined"==typeof i.padding?{top:0,right:0,bottom:0,left:0}:i.padding},setPadding:function(t){return"number"==typeof t?this.padding={top:t,right:t,bottom:t,left:t}:$.extend(this.padding,t),this.calculateLayout(),this.setDimension(1,1),this.fireEvent("change:padding",{value:this.padding}),this},getPadding:function(){return this.padding},setCanvas:function(t){return this._super(t),this.calculateLayout(),this.setDimension(2,2),this},add:function(t,e,i){return this._super(t,e,i),this.setDimension(1,1),this},removeRow:function(t){var e=this,i=this.grid.splice(t,1);return i[0].forEach(function(t){e.remove(t)}),this.calculateLayout(),this.setDimension(2,2),i},addRow:function(){var t=[],e=this,i=Array.prototype.slice.call(arguments),n=(this.grid.length+1,this.grid.length>0?Math.max(this.grid[0].length,i.length):i.length),s=[];i.forEach(function(e,i){"string"==typeof e&&(e=new draw2d.shape.basic.Label({text:e})),s.push(e),t.push(e)}),this.grid.push(s),this.grid.forEach(function(t,i){for(var s=n-t.length,r=0;r<s;r++)t.push(e.DUMMY_CELL)});var r=this.repaintBlocked;return this.repaintBlocked=!0,t.forEach(function(t){e.add(t,e.cellLocator)}),this.repaintBlocked=r,this.calculateLayout(),this.setDimension(1,1),this},getMinWidth:function(){if(null===this.canvas||0===this.layoutInfos.length)return 10;var t=this.layoutInfos[this.layoutInfos.length-1],e=t[t.length-1];return e.w+e.x+this.padding.left+this.padding.right},getMinHeight:function(){if(null===this.canvas||0===this.layoutInfos.length)return 10;var t=this.layoutInfos[this.layoutInfos.length-1],e=t[t.length-1];return e.h+e.y+this.padding.top+this.padding.bottom},setCellVerticalAlign:function(t,e,i){var n=this.getCellLayout(t,e);if(null!==n){switch(i){case"top":case"middle":case"bottom":n.valign=i,this.calculateLayout(),this.setDimension(1,1)}return this}},getCellVerticalAlign:function(t,e){var i=this.getCellLayout(t,e);return null===i?"top":i.valign},setCellAlign:function(t,e,i){var n=this.getCellLayout(t,e);if(null!==n){switch(i){case"left":case"center":case"right":n.align=i,this.calculateLayout(),this.setDimension(1,1)}return this}},getCellAlign:function(t,e){var i=this.getCellLayout(t,e);return null===i?"left":i.align},getCellLayout:function(t,e){if(t<0||e<0)return null;if(t>=this.layoutInfos.length)return null;var i=this.layoutInfos[t];return e>=i.length?null:i[e]},calculateLayout:function(){for(var t=this.grid.length,e=this.grid.length>0?this.grid[0].length:0,i=[],n=0;n<t;n++){i[n]=[];for(var s=0;s<e;s++)i[n][s]={width:0,height:0,x:0,y:0,valign:this.getCellVerticalAlign(n,s),align:this.getCellAlign(n,s),padding:this.getCellPadding(n,s)}}var r=new Array(e+1).join("0").split("").map(parseFloat),o=new Array(t+1).join("0").split("").map(parseFloat);this.grid.forEach(function(t,n){for(var s=0;s<e;s++){var a=i[n][s],c=t[s];c.__cell={row:n,column:s},o[n]=Math.max(o[n],c.getMinHeight()+a.padding.top+a.padding.bottom),r[s]=Math.max(r[s],c.getMinWidth()+a.padding.left+a.padding.right)}});var a=0,c=0;for(n=0;n<t;n++){for(s=0;s<e;s++){var h=i[n][s];h.w=r[s],h.h=o[n],h.x=a,h.y=c,a+=h.w}c+=o[n],a=0}return this.layoutInfos=i,this}}),draw2d.shape.layout.FlexGridLayout=draw2d.shape.layout.Layout.extend({
NAME:"draw2d.shape.layout.FlexGridLayout",init:function(t,e,i){var n=this;this.cellLocator={relocate:function(t,e){n.gridDef.layoutRequired===!0&&n._layout();var i=e.__cellConstraint,s=i.x,r=i.y;if(e.isResizeable())e.setDimension(Math.max(e.getMinWidth(),i.width),Math.max(e.getMinHeight(),i.height));else{switch(i.valign){case"middle":r+=(i.height-e.getHeight())/2;break;case"bottom":r+=i.height-e.getHeight()}switch(i.align){case"center":s+=(i.width-e.getWidth())/2;break;case"right":s+=i.width-e.getWidth()}}e.setPosition(s,r)},bind:function(){},unbind:function(){},translate:function(t,e){t.setPosition(t.x+e.x,t.y+e.y)}},this.debug=!1,this.gridDef={debugLines:[],def_cols:[],def_rows:[],min_height:[],min_width:[],minGridWidth:10,minGridHeight:10,hResizeable:!1,vResizeable:!1,layoutRequired:!0},this._super($.extend({stroke:2},t),$.extend({},e),$.extend({},i)),this.resizeListener=function(t){n.gridDef.layoutRequired=!0,n.getParent()instanceof draw2d.shape.layout.Layout?n.fireEvent("resize"):n.setDimension(n.gridDef.hResizeable===!0?n.getWidth():1,n.gridDef.vResizeable===!0?n.getHeight():1)};for(var s=t.rows.split(","),r=t.columns.split(","),o=0;o<r.length;o++)this.gridDef.def_cols[o]=this.cellWidthFromDef(r[o]);for(var o=0;o<s.length;o++)this.gridDef.def_rows[o]=this.cellWidthFromDef(s[o]);this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy)},add:function(t,e){t.__cellConstraint=$.extend({},{row:0,col:0,rowspan:1,colspan:1,align:"left",valign:"top",width:1,height:1},e),this.gridDef.layoutRequired=!0,this._super(t,this.cellLocator),this._layout()},getMinWidth:function(){return this.gridDef.minGridWidth},getMinHeight:function(){return this.gridDef.minGridHeight},setCanvas:function(t){return this.gridDef.layoutRequired=!0,this._super(t),this},repaint:function(t){return this.repaintBlocked===!0||null===this.shape?this:(this._super(t),this.debug&&this.paintDebugGrid(),this)},setDimension:function(t,e){return this.gridDef.layoutRequired===!0&&this._layout(),this._super(t,e),this.gridDef.layoutRequired=!0,this.repaint(),this},_layout:function(){this.gridDef.layoutRequired=!1;var t=this.getChildren();this.gridDef.min_height=this.gridDef.def_rows.slice(0),this.gridDef.min_width=this.gridDef.def_cols.slice(0);for(var e=0;e<t.getSize();e++){var i=t.get(e),n=i.__cellConstraint;if(this.gridDef.min_width[n.col]=Math.max(this.gridDef.min_width[n.col],i.getMinWidth()),n.rowspan>1){var s=i.getMinHeight(),r=this.cellHeight(n.row,n.row+n.rowspan);if(r<s){var o=s-r;this.gridDef.min_height[n.row+n.rowspan-1]=this.gridDef.min_height[n.row+n.rowspan-1]+o}}else this.gridDef.min_height[n.row]=Math.max(this.gridDef.min_height[n.row],i.getMinHeight())}this.gridDef.minGridWidth=this._getGridWidth(),this.gridDef.minGridHeight=this._getGridHeight();for(var a=this._getGridHeight(),e=0;e<this.gridDef.def_rows.length;e++)if(this.gridDef.def_rows[e]===-1){this.gridDef.min_height[e]=this.gridDef.min_height[e]+Math.max(0,this.getHeight()-a),this.gridDef.vResizeable=!0;break}for(var c=this._getGridWidth(),e=0;e<this.gridDef.def_cols.length;e++)if(this.gridDef.def_cols[e]===-1){this.gridDef.min_width[e]=this.gridDef.min_width[e]+Math.max(0,this.getWidth()-c),this.gridDef.hResizeable=!0;break}for(var e=0;e<t.getSize();e++){var n=t.get(e).__cellConstraint;n.width=this.cellWidth(n.col,n.col+n.colspan),n.height=this.cellHeight(n.row,n.row+n.rowspan),n.x=this.cellX(n.col),n.y=this.cellY(n.row)}return this},cellX:function(t){for(var e=0,i=0;i<t;i++)e+=this.gridDef.min_width[i];return e},cellY:function(t){for(var e=0,i=0;i<t;i++)e+=this.gridDef.min_height[i];return e},cellWidth:function(t,e){for(var i=0,n=t;n<e;n++)i+=this.gridDef.min_width[n];return i},cellHeight:function(t,e){for(var i=0,n=t;n<e;n++)i+=this.gridDef.min_height[n];return i},paintDebugGrid:function(){for(var t=0;t<this.gridDef.debugLines.length;t++)this.gridDef.debugLines[t].remove();this.gridDef.debugLines=[];for(var e=this._getGridHeight(),i=this._getGridWidth(),n=this.getAbsoluteX(),s=this.getAbsoluteY(),r=n,t=0;t<=this.gridDef.min_width.length;t++){var o=this.canvas.paper.path("M "+r+" "+s+" l 0 "+e).attr({stroke:"#FF0000","stroke-width":1});this.gridDef.debugLines.push(o),t<this.gridDef.min_width.length&&(r+=this.gridDef.min_width[t])}for(var a=s,t=0;t<=this.gridDef.min_height.length;t++){var o=this.canvas.paper.path("M "+n+" "+a+" l "+i+" 0").attr({stroke:"#FF0000","stroke-width":1});this.gridDef.debugLines.push(o),t<this.gridDef.min_height.length&&(a+=this.gridDef.min_height[t])}},_getGridWidth:function(){for(var t=0,e=0;e<this.gridDef.min_width.length;e++)t+=this.gridDef.min_width[e];return t},_getGridHeight:function(){for(var t=0,e=0;e<this.gridDef.min_height.length;e++)t+=this.gridDef.min_height[e];return t},cellWidthFromDef:function(t){var e=new RegExp("(\\d+)(?:px)?"),i=t.match(e);return null!=i?parseInt(i[1]):(e=new RegExp("p(?:ref)?"),i=t.match(e),null!=i?0:(e=new RegExp("g(?:row)?"),i=t.match(e),null!=i?(this.autoResize=!1,-1):0))}}),draw2d.shape.layout.StackLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.StackLayout",init:function(t,e,i){this.visibleLayer=0,this.locator=new draw2d.layout.locator.XYAbsPortLocator(0,0),this._super($.extend({resizeable:!0,width:10,height:10},t),$.extend({},e),$.extend({},i)),this.resizeListener=function(t){},this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy)},setVisibleLayer:function(t,e){return this.getChildren().get(this.visibleLayer).setVisible(!1,e),this.visibleLayer=Math.min(this.getChildren().getSize()-1,Math.max(0,t)),this.getChildren().get(this.visibleLayer).setVisible(!0,e),this},getVisibleLayer:function(){return this.visibleLayer},add:function(t,e,i){return t.hitTest=function(){return!1},this.getChildren().each(function(t,e){e.setVisible(!1)}),this.visibleLayer=this.getChildren().getSize(),this._super(t,this.locator,i)},setVisible:function(t){return draw2d.shape.basic.Rectangle.prototype.setVisible.call(this,t),this},getMinWidth:function(){var t=2*this.stroke+this.padding.left+this.padding.right,e=10;return this.children.each(function(t,i){e=Math.max(e,i.figure.isResizeable()?i.figure.getMinWidth():i.figure.getWidth())}),e+t},getMinHeight:function(){var t=2*this.stroke+this.padding.top+this.padding.bottom,e=10;return this.children.each(function(t,i){e=Math.max(e,i.figure.isResizeable()?i.figure.getMinHeight():i.figure.getHeight())}),e+t},setDimension:function(t,e){this._super(t,e);var i=this.width-this.padding.left-this.padding.right,n=this.height-this.padding.top-this.padding.bottom;return i===this._recursiveWidth&&n===this._recursiveHeight?this:(this._recursiveHeight=n,this._recursiveWidth=i,this.children.each(function(t,e){e.figure.isResizeable()&&e.figure.setDimension(i,n)}),delete this._recursiveHeight,delete this._recursiveWidth,this)}}),draw2d.shape.icon.Icon=draw2d.SetFigure.extend({NAME:"draw2d.shape.icon.Icon",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i),this.setBackgroundColor("#333333"),this.keepAspectRatio=!1},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},t.fill="none",null!==this.svgNodes&&this.svgNodes.attr({fill:this.bgColor.hash(),stroke:"none"}),this._super(t))},applyTransformation:function(){var t=[];if(0!==this.rotationAngle&&t.push("R"+this.rotationAngle),90===this.getRotationAngle()||270===this.getRotationAngle()){var e=this.getHeight()/this.getWidth();t.push("T"+-this.offsetY+","+-this.offsetX),t.push("S"+e+","+1/e+",0,0")}else t.push("T"+-this.offsetX+","+-this.offsetY);this.isResizeable()===!0?t.push("T"+this.getAbsoluteX()+","+this.getAbsoluteY()+"S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()):t.push("T"+this.getAbsoluteX()+","+this.getAbsoluteY()),this.svgNodes.transform(t.join(" "))},createShapeElement:function(){var t=this._super(),e=this.svgNodes.getBBox();return this.offsetX=e.x,this.offsetY=e.y,t}}),draw2d.shape.icon.Thunder=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Thunder",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.371,7.306c-0.092-3.924-3.301-7.077-7.248-7.079c-2.638,0.001-4.942,1.412-6.208,3.517c-0.595-0.327-1.28-0.517-2.01-0.517C7.626,3.229,5.772,5.033,5.689,7.293c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h5.271l-2.166,3.398l1.977-0.411L10,30.875l9.138-10.102L17,21l2.167-2.023h4.269c3.312,0,6-2.688,6-6C29.434,10.34,27.732,8.11,25.371,7.306zM23.436,16.979H7.561c-2.209-0.006-3.997-1.792-4.001-4.001c-0.002-1.982,1.45-3.618,3.35-3.931c0.265-0.043,0.502-0.191,0.657-0.414C7.722,8.41,7.779,8.136,7.73,7.87C7.702,7.722,7.685,7.582,7.685,7.446C7.689,6.221,8.68,5.23,9.905,5.228c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.309c0.342-0.066,0.626-0.307,0.748-0.63c0.749-1.992,2.662-3.412,4.911-3.41c2.899,0.004,5.244,2.35,5.251,5.249c0,0.161-0.009,0.326-0.027,0.497c-0.049,0.517,0.305,0.984,0.815,1.079c1.86,0.344,3.274,1.966,3.271,3.923C27.43,15.186,25.645,16.973,23.436,16.979z")}}),draw2d.shape.icon.Snow=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Snow",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.372,6.912c-0.093-3.925-3.302-7.078-7.248-7.08c-2.638,0.002-4.942,1.412-6.208,3.518c-0.595-0.327-1.28-0.518-2.01-0.518C7.627,2.834,5.773,4.639,5.69,6.898c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.875c3.312,0,6-2.688,6-6C29.434,9.944,27.732,7.715,25.372,6.912zM23.436,16.584H7.562c-2.209-0.006-3.997-1.793-4.001-4c-0.002-1.983,1.45-3.619,3.35-3.933c0.265-0.043,0.502-0.19,0.657-0.414C7.723,8.015,7.78,7.74,7.731,7.475C7.703,7.326,7.686,7.187,7.686,7.051c0.004-1.225,0.995-2.217,2.22-2.219c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.31c0.342-0.066,0.626-0.308,0.748-0.631c0.749-1.992,2.662-3.412,4.911-3.41c2.898,0.004,5.244,2.351,5.251,5.25c0,0.16-0.009,0.325-0.026,0.496c-0.05,0.518,0.305,0.984,0.814,1.079c1.859,0.345,3.273,1.966,3.271,3.923C27.43,14.791,25.645,16.578,23.436,16.584zM16.667,24.09l1.119-1.119c0.389-0.391,0.389-1.025,0-1.416c-0.392-0.391-1.025-0.391-1.415,0l-1.119,1.119l-1.119-1.119c-0.391-0.391-1.025-0.391-1.415,0c-0.391,0.391-0.391,1.025,0,1.416l1.118,1.117l-1.12,1.121c-0.389,0.393-0.389,1.021,0,1.414c0.195,0.188,0.451,0.293,0.707,0.293c0.256,0,0.512-0.104,0.708-0.293l1.12-1.119l1.12,1.119c0.195,0.188,0.451,0.293,0.708,0.293c0.256,0,0.512-0.104,0.707-0.293c0.391-0.396,0.391-1.021,0-1.414L16.667,24.09zM25.119,21.817c-0.393-0.392-1.025-0.392-1.415,0l-1.12,1.121l-1.12-1.121c-0.391-0.392-1.022-0.392-1.414,0c-0.39,0.392-0.39,1.022,0,1.416l1.119,1.119l-1.119,1.119c-0.39,0.391-0.39,1.022,0,1.413c0.195,0.195,0.451,0.294,0.707,0.294c0.257,0,0.513-0.099,0.707-0.294l1.12-1.118l1.12,1.118c0.194,0.195,0.45,0.294,0.707,0.294c0.256,0,0.513-0.099,0.708-0.294c0.389-0.391,0.389-1.022,0-1.413l-1.12-1.119l1.12-1.119C25.507,22.842,25.507,22.209,25.119,21.817zM9.334,23.953l1.119-1.119c0.389-0.394,0.389-1.021,0-1.414c-0.391-0.394-1.025-0.394-1.415,0l-1.119,1.119l-1.12-1.121c-0.391-0.39-1.023-0.39-1.415,0c-0.391,0.396-0.391,1.024,0,1.418l1.119,1.117l-1.12,1.118c-0.391,0.394-0.391,1.025,0,1.414c0.196,0.195,0.452,0.293,0.708,0.293c0.256,0,0.511-0.098,0.707-0.293l1.12-1.119l1.121,1.121c0.195,0.195,0.451,0.293,0.707,0.293s0.513-0.098,0.708-0.293c0.389-0.391,0.389-1.022,0-1.416L9.334,23.953z")}}),draw2d.shape.icon.Hail=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Hail",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.372,6.912c-0.093-3.925-3.302-7.078-7.248-7.08c-2.638,0.002-4.942,1.412-6.208,3.518c-0.595-0.327-1.28-0.518-2.01-0.518C7.627,2.834,5.773,4.639,5.69,6.898c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.875c3.312,0,6-2.688,6-6C29.434,9.944,27.732,7.715,25.372,6.912zM23.436,16.584H7.562c-2.209-0.006-3.997-1.793-4.001-4c-0.002-1.983,1.45-3.619,3.35-3.933c0.265-0.043,0.502-0.19,0.657-0.414C7.723,8.015,7.78,7.74,7.731,7.475C7.703,7.326,7.686,7.187,7.686,7.051c0.004-1.225,0.995-2.217,2.22-2.219c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.31c0.342-0.066,0.626-0.308,0.748-0.631c0.749-1.992,2.662-3.412,4.911-3.41c2.898,0.004,5.244,2.351,5.251,5.25c0,0.16-0.009,0.325-0.026,0.496c-0.05,0.518,0.305,0.984,0.814,1.079c1.859,0.345,3.273,1.966,3.271,3.923C27.43,14.791,25.645,16.578,23.436,16.584zM11.503,23.709c-0.784-0.002-1.418-0.636-1.418-1.416c0-0.785,0.634-1.416,1.418-1.418c0.78,0.002,1.413,0.633,1.416,1.418C12.917,23.073,12.284,23.707,11.503,23.709zM19.002,23.709c-0.783-0.002-1.418-0.636-1.418-1.416c0-0.785,0.635-1.416,1.418-1.418c0.779,0.002,1.414,0.633,1.414,1.418C20.417,23.073,19.784,23.707,19.002,23.709zM7.503,28.771c-0.783-0.002-1.417-0.637-1.417-1.418s0.634-1.414,1.417-1.416c0.78,0.002,1.415,0.635,1.415,1.416C8.917,28.135,8.284,28.77,7.503,28.771zM15.001,28.771c-0.782-0.002-1.417-0.637-1.417-1.418s0.634-1.414,1.417-1.416c0.78,0.002,1.413,0.635,1.415,1.416C16.415,28.135,15.784,28.77,15.001,28.771zM22.5,28.771c-0.782-0.002-1.416-0.634-1.416-1.416c0-0.785,0.634-1.418,1.416-1.42c0.781,0.002,1.414,0.635,1.418,1.42C23.915,28.138,23.282,28.77,22.5,28.771z")}}),draw2d.shape.icon.Rain=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Rain",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.371,7.306c-0.092-3.924-3.301-7.077-7.248-7.079c-2.638,0.001-4.942,1.412-6.208,3.517c-0.595-0.327-1.28-0.517-2.01-0.517C7.626,3.229,5.772,5.033,5.689,7.293c-2.393,0.786-4.125,3.025-4.127,5.686c0,3.312,2.687,6,6,6v-0.002h15.874c3.312,0,6-2.688,6-6C29.434,10.34,27.732,8.11,25.371,7.306zM23.436,16.979H7.561c-2.209-0.006-3.997-1.792-4.001-4.001c-0.002-1.982,1.45-3.618,3.35-3.931c0.265-0.043,0.502-0.191,0.657-0.414C7.722,8.41,7.779,8.136,7.73,7.87C7.702,7.722,7.685,7.582,7.685,7.446C7.689,6.221,8.68,5.23,9.905,5.228c0.647,0,1.217,0.278,1.633,0.731c0.233,0.257,0.587,0.375,0.927,0.309c0.342-0.066,0.626-0.307,0.748-0.63c0.749-1.992,2.662-3.412,4.911-3.41c2.899,0.004,5.244,2.35,5.251,5.249c0,0.161-0.009,0.326-0.027,0.497c-0.049,0.517,0.305,0.984,0.815,1.079c1.86,0.344,3.274,1.966,3.271,3.923C27.43,15.186,25.645,16.973,23.436,16.979zM9.029,26.682c0-1.115,0.021-5.425,0.021-5.432c0.002-0.409-0.247-0.779-0.628-0.932c-0.38-0.152-0.815-0.059-1.099,0.24c-0.006,0.008-1.037,1.098-2.081,2.342c-0.523,0.627-1.048,1.287-1.463,1.896c-0.399,0.648-0.753,1.066-0.811,1.885C2.971,28.355,4.324,29.711,6,29.714C7.672,29.71,9.029,28.354,9.029,26.682zM4.971,26.727c0.091-0.349,1.081-1.719,1.993-2.764c0.025-0.029,0.051-0.061,0.076-0.089c-0.005,1.124-0.01,2.294-0.01,2.808c0,0.567-0.461,1.028-1.029,1.03C5.447,27.71,4.997,27.273,4.971,26.727zM16.425,26.682c0-1.115,0.021-5.424,0.021-5.43c0.002-0.41-0.247-0.779-0.628-0.934c-0.381-0.152-0.814-0.058-1.1,0.242c-0.006,0.008-1.035,1.094-2.08,2.342c-0.522,0.623-1.047,1.285-1.463,1.894c-0.399,0.649-0.753,1.068-0.809,1.888c0,1.672,1.354,3.028,3.029,3.028C15.068,29.711,16.425,28.354,16.425,26.682zM12.365,26.729c0.092-0.349,1.081-1.72,1.993-2.765c0.025-0.03,0.05-0.06,0.075-0.089c-0.005,1.123-0.011,2.294-0.011,2.807c-0.002,0.568-0.461,1.027-1.028,1.029C12.84,27.709,12.392,27.273,12.365,26.729zM23.271,20.317c-0.38-0.153-0.816-0.06-1.099,0.24c-0.009,0.008-1.037,1.097-2.08,2.342c-0.523,0.625-1.049,1.285-1.462,1.896c-0.402,0.649-0.754,1.067-0.812,1.886c0,1.672,1.354,3.029,3.03,3.029c1.673,0,3.027-1.357,3.027-3.029c0-1.115,0.022-5.425,0.022-5.431C23.9,20.84,23.651,20.47,23.271,20.317zM21.879,26.681c-0.004,0.568-0.463,1.027-1.031,1.029c-0.553-0.002-1.002-0.438-1.028-0.982c0.092-0.349,1.081-1.72,1.993-2.765c0.025-0.028,0.05-0.059,0.074-0.088C21.883,24.998,21.879,26.167,21.879,26.681z")}}),draw2d.shape.icon.Cloudy=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cloudy",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.378,6.781c0.41,0.988,1.938,0.346,1.524-0.648C15.708,5.667,15.515,5.2,15.32,4.734c-0.289-0.695-0.875-3.233-2.042-2.747c-1.03,0.433-0.128,1.846,0.142,2.494C13.739,5.248,14.059,6.015,14.378,6.781M20.8,7.223c1.094,0.453,1.538-1.551,1.813-2.216c0.281-0.677,1.478-2.565,0.357-3.029c-1.092-0.453-1.537,1.548-1.813,2.216C20.876,4.872,19.68,6.757,20.8,7.223M18.137,6.692c1.183,0,0.829-2.019,0.829-2.742c0-0.732,0.383-2.935-0.829-2.935c-1.183,0-0.828,2.019-0.828,2.742C17.309,4.49,16.926,6.692,18.137,6.692M23.058,8.729c0.852,0.85,2.142-0.972,2.659-1.49c0.512-0.513,2.187-1.687,1.352-2.524c-0.834-0.836-2.013,0.843-2.522,1.353C24.028,6.585,22.198,7.874,23.058,8.729M24.565,10.986c0.448,1.091,2.183-0.01,2.849-0.286c0.676-0.28,2.858-0.771,2.394-1.89c-0.455-1.091-2.181,0.008-2.849,0.285C26.281,9.377,24.102,9.866,24.565,10.986M12.036,8.742c0.752,0.75,1.932-0.415,1.17-1.173c-0.253-0.347-0.646-0.645-0.949-0.946c-0.541-0.539-2.162-2.799-3.068-1.889c-0.79,0.791,0.586,1.755,1.083,2.25C10.859,7.57,11.447,8.156,12.036,8.742M29.365,17.397c-0.768-0.317-1.534-0.635-2.302-0.952c-0.646-0.268-2.07-1.169-2.495-0.135c-0.481,1.168,2.054,1.747,2.751,2.035c0.455,0.188,0.911,0.377,1.367,0.565C29.7,19.331,30.379,17.816,29.365,17.397M29.942,12.817c-0.83,0-1.66,0-2.49,0c-0.701,0-2.357-0.288-2.355,0.83c0,1.262,2.567,0.827,3.319,0.827c0.493,0,0.986,0,1.479-0.001C30.99,14.473,31.043,12.815,29.942,12.817M24.234,18.568c-0.673-0.673-1.773,0.189-1.281,1.007c-0.295-0.264-0.614-0.499-0.961-0.69c3.894-2.866,3.328-9.006-1.021-11.107c-2.024-0.978-4.481-0.828-6.368,0.394c-0.871,0.564-1.603,1.336-2.119,2.236c-0.262,0.456-0.468,0.943-0.612,1.449c-0.074,0.258-0.131,0.521-0.172,0.786c-0.083,0.534-0.109,0.553-0.553,0.871c-0.182-0.957-1.64-0.675-2.326-0.674c-0.815,0.001-1.963-0.217-2.752,0.046c-0.867,0.289-0.652,1.615,0.263,1.613c0.324,0.052,0.701-0.001,1.028-0.001c0.904-0.001,1.809-0.002,2.713-0.003c-0.308,0.352-0.496,0.969-0.94,0.77c-0.467-0.209-0.978-0.319-1.49-0.319c-0.951,0-1.877,0.375-2.561,1.036c-0.681,0.658-1.088,1.569-1.123,2.516c-0.944,0.31-1.791,0.891-2.421,1.658c-2.756,3.354-0.265,8.554,4.058,8.554v-0.002c3.597,0,7.194,0,10.792,0c1.341,0,2.843,0.167,4.168-0.113c3.652-0.772,5.361-5.21,3.133-8.229c0.548,0.547,1.096,1.094,1.644,1.641c0.183,0.183,0.364,0.424,0.575,0.574c0.552,0.552,1.524,0.066,1.403-0.713c-0.097-0.622-1.042-1.267-1.448-1.673C25.319,19.652,24.776,19.11,24.234,18.568M18.137,8.787c4.559,0.009,6.576,5.979,2.912,8.734c-0.637-3.505-4.161-5.824-7.629-5.03C13.943,10.367,15.852,8.792,18.137,8.787M22.895,24.08c-0.633,3.346-4.149,2.879-6.68,2.879c-3.017,0-6.033,0-9.049,0c-0.767,0-1.62,0.084-2.373-0.095c-2.274-0.538-3.416-3.242-2.172-5.235c0.678-1.087,1.568-1.19,2.626-1.67c0.604-0.273,0.456-0.807,0.456-1.331c0.002-0.597,0.284-1.169,0.756-1.533c0.787-0.608,1.943-0.497,2.611,0.234c1.098,1.205,1.96-1.346,2.507-1.893c2.025-2.025,5.475-1.708,7.068,0.684c0.344,0.516,0.581,1.102,0.693,1.712c0.097,0.529-0.115,1.341,0.188,1.796c0.291,0.47,0.943,0.463,1.397,0.68c0.508,0.23,0.963,0.591,1.304,1.034C22.834,22.125,23.064,23.107,22.895,24.08M6.906,9.917c0.881,0.364,1.763,0.727,2.644,1.091c0.353,0.146,0.707,0.292,1.06,0.437c0.997,0.412,1.637-1.119,0.642-1.526C10.47,9.441,9.456,9.177,8.609,8.828c-0.354-0.146-0.707-0.292-1.06-0.437C6.554,7.98,5.912,9.505,6.906,9.917")}}),draw2d.shape.icon.Sun=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Sun",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.502,7.504c-4.35,0-7.873,3.523-7.873,7.873c0,4.347,3.523,7.872,7.873,7.872c4.346,0,7.871-3.525,7.871-7.872C23.374,11.027,19.85,7.504,15.502,7.504zM15.502,21.25c-3.244-0.008-5.866-2.63-5.874-5.872c0.007-3.243,2.63-5.866,5.874-5.874c3.242,0.008,5.864,2.631,5.871,5.874C21.366,18.62,18.744,21.242,15.502,21.25zM15.502,6.977c0.553,0,1-0.448,1-1.001V1.125c-0.002-0.553-0.448-1-1-1c-0.553,0-1.001,0.449-1,1.002v4.85C14.502,6.528,14.949,6.977,15.502,6.977zM18.715,7.615c0.125,0.053,0.255,0.076,0.382,0.077c0.394,0,0.765-0.233,0.925-0.618l1.856-4.483c0.21-0.511-0.031-1.095-0.541-1.306c-0.511-0.211-1.096,0.031-1.308,0.541L18.174,6.31C17.963,6.82,18.205,7.405,18.715,7.615zM21.44,9.436c0.195,0.194,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293l3.43-3.433c0.391-0.39,0.39-1.023,0-1.415c-0.392-0.39-1.025-0.39-1.415,0.002L21.44,8.021C21.049,8.412,21.049,9.045,21.44,9.436zM23.263,12.16c0.158,0.385,0.531,0.617,0.923,0.617c0.127,0,0.257-0.025,0.383-0.078l4.48-1.857c0.511-0.211,0.753-0.797,0.541-1.307s-0.796-0.752-1.307-0.54l-4.481,1.857C23.292,11.064,23.051,11.65,23.263,12.16zM29.752,14.371l-4.851,0.001c-0.552,0-1,0.448-0.998,1.001c0,0.553,0.447,0.999,0.998,0.999l4.852-0.002c0.553,0,0.999-0.449,0.999-1C30.752,14.817,30.304,14.369,29.752,14.371zM29.054,19.899l-4.482-1.854c-0.512-0.212-1.097,0.03-1.307,0.541c-0.211,0.511,0.031,1.096,0.541,1.308l4.482,1.854c0.126,0.051,0.256,0.075,0.383,0.075c0.393,0,0.765-0.232,0.925-0.617C29.806,20.695,29.563,20.109,29.054,19.899zM22.86,21.312c-0.391-0.391-1.023-0.391-1.414,0.001c-0.391,0.39-0.39,1.022,0,1.413l3.434,3.429c0.195,0.195,0.45,0.293,0.706,0.293s0.513-0.098,0.708-0.293c0.391-0.392,0.389-1.025,0-1.415L22.86,21.312zM20.029,23.675c-0.211-0.511-0.796-0.752-1.307-0.541c-0.51,0.212-0.752,0.797-0.54,1.308l1.86,4.48c0.159,0.385,0.531,0.617,0.925,0.617c0.128,0,0.258-0.024,0.383-0.076c0.511-0.211,0.752-0.797,0.54-1.309L20.029,23.675zM15.512,23.778c-0.553,0-1,0.448-1,1l0.004,4.851c0,0.553,0.449,0.999,1,0.999c0.553,0,1-0.448,0.998-1l-0.003-4.852C16.511,24.226,16.062,23.777,15.512,23.778zM12.296,23.142c-0.51-0.21-1.094,0.031-1.306,0.543l-1.852,4.483c-0.21,0.511,0.033,1.096,0.543,1.307c0.125,0.052,0.254,0.076,0.382,0.076c0.392,0,0.765-0.234,0.924-0.619l1.853-4.485C13.051,23.937,12.807,23.353,12.296,23.142zM9.57,21.325c-0.392-0.391-1.025-0.389-1.415,0.002L4.729,24.76c-0.391,0.392-0.389,1.023,0.002,1.415c0.195,0.194,0.45,0.292,0.706,0.292c0.257,0,0.513-0.098,0.708-0.293l3.427-3.434C9.961,22.349,9.961,21.716,9.57,21.325zM7.746,18.604c-0.213-0.509-0.797-0.751-1.307-0.54L1.96,19.925c-0.511,0.212-0.752,0.798-0.54,1.308c0.16,0.385,0.531,0.616,0.924,0.616c0.127,0,0.258-0.024,0.383-0.076l4.479-1.861C7.715,19.698,7.957,19.113,7.746,18.604zM7.1,15.392c0-0.553-0.447-0.999-1-0.999l-4.851,0.006c-0.553,0-1.001,0.448-0.999,1.001c0.001,0.551,0.449,1,1,0.998l4.852-0.006C6.654,16.392,7.102,15.942,7.1,15.392zM1.944,10.869l4.485,1.85c0.125,0.053,0.254,0.076,0.381,0.076c0.393,0,0.766-0.232,0.925-0.618c0.212-0.511-0.032-1.097-0.544-1.306L2.708,9.021c-0.511-0.21-1.095,0.032-1.306,0.542C1.19,10.074,1.435,10.657,1.944,10.869zM8.137,9.451c0.195,0.193,0.449,0.291,0.705,0.291s0.513-0.098,0.709-0.295c0.391-0.389,0.389-1.023-0.004-1.414L6.113,4.609C5.723,4.219,5.088,4.221,4.699,4.612c-0.391,0.39-0.389,1.024,0.002,1.414L8.137,9.451zM10.964,7.084c0.16,0.384,0.532,0.615,0.923,0.615c0.128,0,0.258-0.025,0.384-0.077c0.51-0.212,0.753-0.798,0.54-1.307l-1.864-4.479c-0.212-0.51-0.798-0.751-1.308-0.539C9.129,1.51,8.888,2.096,9.1,2.605L10.964,7.084z")}}),draw2d.shape.icon.Undo=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Undo",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M12.981,9.073V6.817l-12.106,6.99l12.106,6.99v-2.422c3.285-0.002,9.052,0.28,9.052,2.269c0,2.78-6.023,4.263-6.023,4.263v2.132c0,0,13.53,0.463,13.53-9.823C29.54,9.134,17.952,8.831,12.981,9.073z")}}),draw2d.shape.icon.Detour=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Detour",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.342,15.5l-7.556-4.363v2.614H18.75c-1.441-0.004-2.423,1.002-2.875,1.784c-0.735,1.222-1.056,2.561-1.441,3.522c-0.135,0.361-0.278,0.655-0.376,0.817c-1.626,0-0.998,0-2.768,0c-0.213-0.398-0.571-1.557-0.923-2.692c-0.237-0.676-0.5-1.381-1.013-2.071C8.878,14.43,7.89,13.726,6.75,13.75H2.812v3.499c0,0,0.358,0,1.031,0h2.741c0.008,0.013,0.018,0.028,0.029,0.046c0.291,0.401,0.634,1.663,1.031,2.888c0.218,0.623,0.455,1.262,0.92,1.897c0.417,0.614,1.319,1.293,2.383,1.293H11c2.25,0,1.249,0,3.374,0c0.696,0.01,1.371-0.286,1.809-0.657c1.439-1.338,1.608-2.886,2.13-4.127c0.218-0.608,0.453-1.115,0.605-1.314c0.006-0.01,0.012-0.018,0.018-0.025h2.85v2.614L29.342,15.5zM10.173,14.539c0.568,0.76,0.874,1.559,1.137,2.311c0.04,0.128,0.082,0.264,0.125,0.399h2.58c0.246-0.697,0.553-1.479,1.005-2.228c0.252-0.438,0.621-0.887,1.08-1.272H9.43C9.735,14.003,9.99,14.277,10.173,14.539z")}}),draw2d.shape.icon.Merge=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Merge",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.342,15.5l-7.556-4.363v2.613h-1.411c-0.788-0.01-1.331-0.241-2.019-0.743c-1.021-0.745-2.094-2.181-3.551-3.568C13.367,8.06,11.291,6.73,8.5,6.749H2.812v3.5H8.5c2.231,0.012,3.441,1.185,5.07,2.934c0.697,0.753,1.428,1.58,2.324,2.323c-1.396,1.165-2.412,2.516-3.484,3.501c-1.183,1.081-2.202,1.723-3.912,1.741H2.813v3.5h5.716c3.752,0.001,6.035-2.319,7.619-4.066c0.817-0.895,1.537-1.691,2.209-2.191c0.686-0.502,1.23-0.732,2.017-0.742h1.412v2.614L29.342,15.5z")}}),draw2d.shape.icon.Split=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Split",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.786,20.698c-1.792-0.237-2.912-1.331-4.358-2.886c-0.697-0.751-1.428-1.577-2.324-2.319c1.396-1.165,2.411-2.519,3.483-3.503c1.01-0.92,1.901-1.519,3.199-1.688v2.574l7.556-4.363L21.786,4.15v2.652c-3.34,0.266-5.45,2.378-6.934,4.013c-0.819,0.896-1.537,1.692-2.212,2.192c-0.685,0.501-1.227,0.731-2.013,0.742c-0.001,0-0.002,0-0.003,0H2.812v3.5h0.001v0.001c0,0,0.046-0.001,0.136-0.001h7.677c0.786,0.011,1.33,0.241,2.017,0.743c1.021,0.743,2.095,2.181,3.552,3.568c1.312,1.258,3.162,2.46,5.592,2.649v2.664l7.556-4.36l-7.556-4.361V20.698z")}}),draw2d.shape.icon.Fork=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Fork",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M13.741,10.249h8.045v2.627l7.556-4.363l-7.556-4.363v2.598H9.826C11.369,7.612,12.616,8.922,13.741,10.249zM21.786,20.654c-0.618-0.195-1.407-0.703-2.291-1.587c-1.79-1.756-3.712-4.675-5.731-7.227c-2.049-2.486-4.159-4.972-7.451-5.091h-3.5v3.5h3.5c0.656-0.027,1.683,0.486,2.879,1.683c1.788,1.753,3.712,4.674,5.731,7.226c1.921,2.331,3.907,4.639,6.863,5.016v2.702l7.556-4.362l-7.556-4.362V20.654z")}}),draw2d.shape.icon.ForkAlt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ForkAlt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.786,12.873l7.556-4.361l-7.556-4.362v2.701c-2.929,0.374-4.905,2.64-6.809,4.952c0.545,0.703,1.08,1.418,1.604,2.127c0.192,0.26,0.383,0.514,0.573,0.77c0.802-1.043,1.584-1.999,2.341-2.74c0.884-0.885,1.673-1.393,2.291-1.588V12.873zM17.661,17.006c-1.893-2.371-3.815-5.354-6.009-7.537c-1.461-1.428-3.155-2.664-5.34-2.693h-3.5v3.5h3.5c0.971-0.119,2.845,1.333,4.712,3.771c1.895,2.371,3.815,5.354,6.011,7.537c1.326,1.297,2.847,2.426,4.751,2.645v2.646l7.556-4.363l-7.556-4.362v2.535C20.746,20.346,19.205,19.022,17.661,17.006z")}}),draw2d.shape.icon.Exchange=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Exchange",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.786,12.876l7.556-4.363l-7.556-4.363v2.598H2.813v3.5h18.973V12.876zM10.368,18.124l-7.556,4.362l7.556,4.362V24.25h18.974v-3.501H10.368V18.124z")}}),draw2d.shape.icon.Shuffle=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Shuffle",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.786,20.654c-0.618-0.195-1.407-0.703-2.291-1.587c-0.757-0.742-1.539-1.698-2.34-2.741c-0.191,0.256-0.382,0.51-0.574,0.77c-0.524,0.709-1.059,1.424-1.604,2.127c1.904,2.31,3.88,4.578,6.809,4.952v2.701l7.556-4.362l-7.556-4.362V20.654zM9.192,11.933c0.756,0.741,1.538,1.697,2.339,2.739c0.195-0.262,0.39-0.521,0.587-0.788c0.52-0.703,1.051-1.412,1.592-2.11c-2.032-2.463-4.133-4.907-7.396-5.025h-3.5v3.5h3.5C6.969,10.223,7.996,10.735,9.192,11.933zM21.786,10.341v2.535l7.556-4.363l-7.556-4.363v2.647c-1.904,0.219-3.425,1.348-4.751,2.644c-2.196,2.183-4.116,5.167-6.011,7.538c-1.867,2.438-3.741,3.888-4.712,3.771h-3.5v3.5h3.5c2.185-0.029,3.879-1.266,5.34-2.693c2.194-2.184,4.116-5.167,6.009-7.538C19.205,12.003,20.746,10.679,21.786,10.341z")}}),draw2d.shape.icon.Refresh=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Refresh",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.083,15.5c-0.009,4.739-3.844,8.574-8.583,8.583c-4.741-0.009-8.577-3.844-8.585-8.583c0.008-4.741,3.844-8.577,8.585-8.585c1.913,0,3.665,0.629,5.09,1.686l-1.782,1.783l8.429,2.256l-2.26-8.427l-1.89,1.89c-2.072-1.677-4.717-2.688-7.587-2.688C8.826,3.418,3.418,8.826,3.416,15.5C3.418,22.175,8.826,27.583,15.5,27.583S27.583,22.175,27.583,15.5H24.083z")}}),draw2d.shape.icon.Ccw=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ccw",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z")}}),draw2d.shape.icon.Acw=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Acw",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M19.275,3.849l1.695,8.56l1.875-1.642c2.311,3.59,1.72,8.415-1.584,11.317c-2.24,1.96-5.186,2.57-7.875,1.908l-0.84,3.396c3.75,0.931,7.891,0.066,11.02-2.672c4.768-4.173,5.521-11.219,1.94-16.279l2.028-1.775L19.275,3.849zM8.154,20.232c-2.312-3.589-1.721-8.416,1.582-11.317c2.239-1.959,5.186-2.572,7.875-1.909l0.842-3.398c-3.752-0.93-7.893-0.067-11.022,2.672c-4.765,4.174-5.519,11.223-1.939,16.283l-2.026,1.772l8.26,2.812l-1.693-8.559L8.154,20.232z")}}),draw2d.shape.icon.Contract=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Contract",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.083,18.895l-8.428-2.259l2.258,8.428l1.838-1.837l7.053,7.053l2.476-2.476l-7.053-7.053L25.083,18.895zM5.542,11.731l8.428,2.258l-2.258-8.428L9.874,7.398L3.196,0.72L0.72,3.196l6.678,6.678L5.542,11.731zM7.589,20.935l-6.87,6.869l2.476,2.476l6.869-6.869l1.858,1.857l2.258-8.428l-8.428,2.258L7.589,20.935zM23.412,10.064l6.867-6.87l-2.476-2.476l-6.868,6.869l-1.856-1.856l-2.258,8.428l8.428-2.259L23.412,10.064z")}}),draw2d.shape.icon.Expand=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Expand",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.545,23.328,17.918,15.623,25.534,8.007,27.391,9.864,29.649,1.436,21.222,3.694,23.058,5.53,15.455,13.134,7.942,5.543,9.809,3.696,1.393,1.394,3.608,9.833,5.456,8.005,12.98,15.608,5.465,23.123,3.609,21.268,1.351,29.695,9.779,27.438,7.941,25.6,15.443,18.098,23.057,25.791,21.19,27.638,29.606,29.939,27.393,21.5z")}}),draw2d.shape.icon.Stop=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Stop",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M5.5,5.5h20v20h-20z")}}),draw2d.shape.icon.End=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.End",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.167,5.5,21.167,13.681,6.684,5.318,6.684,25.682,21.167,17.318,21.167,25.5,25.5,25.5,25.5,5.5z");
}}),draw2d.shape.icon.Start=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Start",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z")}}),draw2d.shape.icon.Ff=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ff",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.5,15.5,15.2,9.552,15.2,15.153,5.5,9.552,5.5,21.447,15.2,15.847,15.2,21.447z")}}),draw2d.shape.icon.Rw=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Rw",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M5.5,15.499,15.8,21.447,15.8,15.846,25.5,21.447,25.5,9.552,15.8,15.152,15.8,9.552z")}}),draw2d.shape.icon.ArrowRight=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowRight",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M6.684,25.682L24.316,15.5L6.684,5.318V25.682z")}}),draw2d.shape.icon.ArrowLeft=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowLeft",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.316,5.318L6.684,15.5l17.632,10.182V5.318L24.316,5.318z")}}),draw2d.shape.icon.ArrowUp=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowUp",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.682,24.316L15.5,6.684L5.318,24.316H25.682z")}}),draw2d.shape.icon.ArrowDown=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowDown",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M5.318,6.684L15.5,24.316L25.682,6.684H5.318z")}}),draw2d.shape.icon.ArrowLeft2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowLeft2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.871,9.814 15.684,16.001 21.871,22.188 18.335,25.725 8.612,16.001 18.335,6.276z")}}),draw2d.shape.icon.ArrowRight2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowRight2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.129,22.186 16.316,15.999 10.129,9.812 13.665,6.276 23.389,15.999 13.665,25.725z")}}),draw2d.shape.icon.Smile2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Smile2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM16,29.534C8.539,29.534,2.466,23.462,2.466,16C2.466,8.539,8.539,2.466,16,2.466c7.462,0,13.535,6.072,13.535,13.533C29.534,23.462,23.462,29.534,16,29.534zM11.104,14c0.932,0,1.688-1.483,1.688-3.312s-0.755-3.312-1.688-3.312s-1.688,1.483-1.688,3.312S10.172,14,11.104,14zM20.729,14c0.934,0,1.688-1.483,1.688-3.312s-0.756-3.312-1.688-3.312c-0.932,0-1.688,1.483-1.688,3.312S19.798,14,20.729,14zM8.143,21.189C10.458,24.243,13.148,26,16.021,26c2.969,0,5.745-1.868,8.11-5.109c-2.515,1.754-5.292,2.734-8.215,2.734C13.164,23.625,10.54,22.756,8.143,21.189z")}});draw2d.shape.icon.Smile=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Smile",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM20.729,7.375c0.934,0,1.688,1.483,1.688,3.312S21.661,14,20.729,14c-0.932,0-1.688-1.483-1.688-3.312S19.798,7.375,20.729,7.375zM11.104,7.375c0.932,0,1.688,1.483,1.688,3.312S12.037,14,11.104,14s-1.688-1.483-1.688-3.312S10.172,7.375,11.104,7.375zM16.021,26c-2.873,0-5.563-1.757-7.879-4.811c2.397,1.564,5.021,2.436,7.774,2.436c2.923,0,5.701-0.98,8.215-2.734C21.766,24.132,18.99,26,16.021,26z")}});draw2d.shape.icon.Alarm=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Alarm",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M8.179,20.115c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366c0.479-0.275,0.643-0.888,0.367-1.367C9.27,20.004,8.658,19.84,8.179,20.115zM9.18,12.239c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,13.126,9.657,12.516,9.18,12.239zM8.625,17.043c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,18.043,8.624,17.596,8.625,17.043zM16.312,3.957V3.031h1c0.275,0,0.5-0.225,0.5-0.5v-0.5c0-0.275-0.225-0.5-0.5-0.5h-3.625c-0.275,0-0.5,0.225-0.5,0.5v0.5c0,0.275,0.225,0.5,0.5,0.5h1v0.926C7.819,4.381,2.376,10.068,2.374,17.042C2.376,24.291,8.251,30.166,15.5,30.169c7.249-0.003,13.124-5.878,13.125-13.127C28.624,10.067,23.181,4.38,16.312,3.957zM15.5,27.166C9.909,27.157,5.385,22.633,5.375,17.042C5.385,11.451,9.909,6.927,15.5,6.917c5.59,0.01,10.115,4.535,10.124,10.125C25.615,22.633,21.091,27.157,15.5,27.166zM12.062,22.998c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,23.887,12.54,23.275,12.062,22.998zM12.062,11.088c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,11.2,11.584,11.364,12.062,11.088zM22.822,13.971c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,14.083,22.344,14.247,22.822,13.971zM15.501,23.92c-0.552,0-1,0.447-1,1c0,0.552,0.448,1,1,1s1-0.448,1-1C16.501,24.367,16.053,23.92,15.501,23.92zM19.938,9.355c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,10.245,20.418,9.632,19.938,9.355zM23.378,16.042c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,16.492,23.929,16.042,23.378,16.042zM22.823,20.115c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.091,0.367,1.367c0.477,0.275,1.089,0.112,1.365-0.366C23.464,21.004,23.3,20.391,22.823,20.115zM15.501,8.167c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366l3.305-1.676c0.055,0.006,0.109,0.017,0.166,0.017c0.828,0,1.5-0.672,1.5-1.5l-0.5-7.876C16.501,8.614,16.053,8.167,15.501,8.167zM18.939,22.998c-0.479,0.276-0.643,0.888-0.366,1.367c0.275,0.477,0.888,0.642,1.366,0.365c0.478-0.276,0.642-0.889,0.366-1.365C20.028,22.886,19.417,22.723,18.939,22.998zM11.197,3.593c-0.836-1.04-2.103-1.718-3.541-1.718c-2.52,0-4.562,2.042-4.562,4.562c0,0.957,0.297,1.843,0.8,2.576C5.649,6.484,8.206,4.553,11.197,3.593zM27.106,9.014c0.503-0.733,0.8-1.619,0.8-2.576c0-2.52-2.043-4.562-4.562-4.562c-1.438,0-2.704,0.678-3.541,1.717C22.794,4.553,25.351,6.484,27.106,9.014z")}}),draw2d.shape.icon.Clock=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Clock",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z")}}),draw2d.shape.icon.StopWatch=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.StopWatch",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.216,18.533c0-3.636-1.655-6.883-4.253-9.032l0.733-0.998l0.482,0.354c0.198,0.146,0.481,0.104,0.628-0.097l0.442-0.604c0.146-0.198,0.103-0.482-0.097-0.628l-2.052-1.506c-0.199-0.146-0.481-0.103-0.628,0.097L22.03,6.724c-0.146,0.199-0.104,0.482,0.096,0.628l0.483,0.354l-0.736,1.003c-1.28-0.834-2.734-1.419-4.296-1.699c0.847-0.635,1.402-1.638,1.403-2.778h-0.002c0-1.922-1.557-3.48-3.479-3.48c-1.925,0-3.48,1.559-3.48,3.48c0,1.141,0.556,2.144,1.401,2.778c-1.549,0.277-2.99,0.857-4.265,1.68L8.424,7.684l0.484-0.353c0.198-0.145,0.245-0.428,0.098-0.628l-0.44-0.604C8.42,5.899,8.136,5.855,7.937,6.001L5.881,7.5c-0.2,0.146-0.243,0.428-0.099,0.628l0.442,0.604c0.145,0.2,0.428,0.244,0.627,0.099l0.483-0.354l0.729,0.999c-2.615,2.149-4.282,5.407-4.282,9.057c0,6.471,5.245,11.716,11.718,11.716c6.47,0,11.716-5.243,11.718-11.716H27.216zM12.918,4.231c0.002-1.425,1.155-2.58,2.582-2.582c1.426,0.002,2.579,1.157,2.581,2.582c-0.002,1.192-0.812,2.184-1.908,2.482v-1.77h0.6c0.246,0,0.449-0.203,0.449-0.449V3.746c0-0.247-0.203-0.449-0.449-0.449h-2.545c-0.247,0-0.449,0.202-0.449,0.449v0.749c0,0.246,0.202,0.449,0.449,0.449h0.599v1.77C13.729,6.415,12.919,5.424,12.918,4.231zM15.5,27.554c-4.983-0.008-9.015-4.038-9.022-9.021c0.008-4.982,4.039-9.013,9.022-9.022c4.981,0.01,9.013,4.04,9.021,9.022C24.513,23.514,20.481,27.546,15.5,27.554zM15.5,12.138c0.476,0,0.861-0.385,0.861-0.86s-0.386-0.861-0.861-0.861s-0.861,0.386-0.861,0.861S15.024,12.138,15.5,12.138zM15.5,24.927c-0.476,0-0.861,0.386-0.861,0.861s0.386,0.861,0.861,0.861s0.861-0.386,0.861-0.861S15.976,24.927,15.5,24.927zM12.618,11.818c-0.237-0.412-0.764-0.553-1.176-0.315c-0.412,0.238-0.554,0.765-0.315,1.177l2.867,6.722c0.481,0.831,1.543,1.116,2.375,0.637c0.829-0.479,1.114-1.543,0.635-2.374L12.618,11.818zM18.698,24.07c-0.412,0.237-0.555,0.765-0.316,1.176c0.237,0.412,0.764,0.554,1.176,0.315c0.413-0.238,0.553-0.765,0.316-1.176C19.635,23.974,19.108,23.832,18.698,24.07zM8.787,15.65c0.412,0.238,0.938,0.097,1.176-0.315c0.237-0.413,0.097-0.938-0.314-1.176c-0.412-0.239-0.938-0.098-1.177,0.313C8.234,14.886,8.375,15.412,8.787,15.65zM22.215,21.413c-0.412-0.236-0.938-0.096-1.176,0.316c-0.238,0.412-0.099,0.938,0.314,1.176c0.41,0.238,0.937,0.098,1.176-0.314C22.768,22.178,22.625,21.652,22.215,21.413zM9.107,18.531c-0.002-0.476-0.387-0.86-0.861-0.86c-0.477,0-0.862,0.385-0.862,0.86c0.001,0.476,0.386,0.86,0.861,0.861C8.722,19.393,9.106,19.008,9.107,18.531zM21.896,18.531c0,0.477,0.384,0.862,0.859,0.86c0.476,0.002,0.862-0.382,0.862-0.859s-0.387-0.86-0.862-0.862C22.279,17.671,21.896,18.056,21.896,18.531zM8.787,21.413c-0.412,0.238-0.554,0.765-0.316,1.176c0.239,0.412,0.765,0.553,1.177,0.316c0.413-0.239,0.553-0.765,0.315-1.178C9.725,21.317,9.198,21.176,8.787,21.413zM21.352,14.157c-0.411,0.238-0.551,0.764-0.312,1.176c0.237,0.413,0.764,0.555,1.174,0.315c0.412-0.236,0.555-0.762,0.316-1.176C22.29,14.06,21.766,13.921,21.352,14.157zM12.304,24.067c-0.413-0.235-0.939-0.096-1.176,0.315c-0.238,0.413-0.098,0.939,0.312,1.178c0.413,0.236,0.939,0.096,1.178-0.315C12.857,24.832,12.715,24.308,12.304,24.067zM18.698,12.992c0.41,0.238,0.938,0.099,1.174-0.313c0.238-0.411,0.1-0.938-0.314-1.177c-0.414-0.238-0.937-0.097-1.177,0.315C18.144,12.229,18.286,12.755,18.698,12.992z")}}),draw2d.shape.icon.History=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.History",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.666,18.292c0.275,0.479,0.889,0.644,1.365,0.367l3.305-1.677C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876c0-0.552-0.448-1-1-1c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96C10.553,17.204,10.389,17.816,10.666,18.292zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.888,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM6.624,15.5c0,0.553,0.449,1,1,1c0.552,0,1-0.447,1.001-1c-0.001-0.552-0.448-0.999-1.001-1C7.071,14.5,6.624,14.948,6.624,15.5zM14.501,23.377c0,0.553,0.448,1,1,1c0.552,0,1-0.447,1-1s-0.448-1-1-1C14.949,22.377,14.501,22.824,14.501,23.377zM10.696,21.822c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.276,1.091,0.11,1.365-0.365c0.277-0.479,0.113-1.09-0.365-1.367C11.584,21.18,10.973,21.344,10.696,21.822zM21.822,10.696c-0.479,0.278-0.643,0.89-0.366,1.367s0.888,0.642,1.366,0.365c0.478-0.275,0.643-0.888,0.365-1.366C22.913,10.584,22.298,10.42,21.822,10.696zM21.456,18.938c-0.274,0.479-0.112,1.092,0.367,1.367c0.477,0.274,1.089,0.112,1.364-0.365c0.276-0.479,0.112-1.092-0.364-1.367C22.343,18.297,21.73,18.461,21.456,18.938zM24.378,15.5c0-0.551-0.448-1-1-1c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1C23.93,16.5,24.378,16.053,24.378,15.5zM18.573,22.822c0.274,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.89,0.365-1.365c-0.277-0.479-0.888-0.643-1.365-0.367C18.46,21.732,18.296,22.344,18.573,22.822zM18.939,9.546c0.477,0.276,1.088,0.112,1.365-0.366c0.276-0.478,0.113-1.091-0.367-1.367c-0.477-0.276-1.09-0.111-1.364,0.366C18.298,8.659,18.462,9.27,18.939,9.546zM28.703,14.364C28.074,7.072,21.654,1.67,14.364,2.295c-3.254,0.281-6.118,1.726-8.25,3.877L4.341,4.681l-1.309,7.364l7.031-2.548L8.427,8.12c1.627-1.567,3.767-2.621,6.194-2.833c5.64-0.477,10.595,3.694,11.089,9.335c0.477,5.64-3.693,10.595-9.333,11.09c-5.643,0.476-10.599-3.694-11.092-9.333c-0.102-1.204,0.019-2.373,0.31-3.478l-3.27,1.186c-0.089,0.832-0.106,1.684-0.031,2.55c0.629,7.29,7.048,12.691,14.341,12.066C23.926,28.074,29.328,21.655,28.703,14.364z")}}),draw2d.shape.icon.Future=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Future",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M17.001,15.5l-0.5-7.876c0-0.552-0.448-1-1-1c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.89-0.365,1.365c0.275,0.479,0.889,0.644,1.365,0.367l3.305-1.677C15.39,16.99,15.444,17,15.501,17C16.329,17,17.001,16.329,17.001,15.5zM18.939,21.455c-0.479,0.277-0.644,0.889-0.366,1.367c0.274,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.89,0.365-1.365C20.027,21.344,19.417,21.18,18.939,21.455zM19.938,7.813c-0.477-0.276-1.09-0.111-1.364,0.366c-0.275,0.48-0.111,1.091,0.366,1.367c0.477,0.276,1.088,0.112,1.365-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM21.823,20.305c0.477,0.274,1.089,0.112,1.364-0.365c0.276-0.479,0.112-1.092-0.364-1.367c-0.48-0.275-1.093-0.111-1.367,0.365C21.182,19.416,21.344,20.029,21.823,20.305zM22.822,12.428c0.478-0.275,0.643-0.888,0.365-1.366c-0.274-0.478-0.89-0.642-1.365-0.366c-0.479,0.278-0.643,0.89-0.366,1.367S22.344,12.705,22.822,12.428zM24.378,15.5c0-0.551-0.448-1-1-1c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1C23.93,16.5,24.378,16.053,24.378,15.5zM9.546,12.062c0.275-0.478,0.111-1.089-0.366-1.366c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366C8.658,12.704,9.269,12.541,9.546,12.062zM6.624,15.5c0,0.553,0.449,1,1,1c0.552,0,1-0.447,1.001-1c-0.001-0.552-0.448-0.999-1.001-1C7.071,14.5,6.624,14.948,6.624,15.5zM9.179,20.305c0.479-0.275,0.643-0.888,0.367-1.367c-0.276-0.477-0.888-0.641-1.367-0.365c-0.478,0.277-0.642,0.889-0.365,1.367C8.089,20.418,8.703,20.58,9.179,20.305zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM14.501,23.377c0,0.553,0.448,1,1,1c0.552,0,1-0.447,1-1s-0.448-1-1-1C14.949,22.377,14.501,22.824,14.501,23.377zM10.696,21.822c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.276,1.091,0.11,1.365-0.365c0.277-0.479,0.113-1.09-0.365-1.367C11.584,21.18,10.973,21.344,10.696,21.822zM28.674,14.087l-3.27-1.186c0.291,1.105,0.41,2.274,0.309,3.478c-0.492,5.639-5.449,9.809-11.091,9.333c-5.639-0.495-9.809-5.45-9.333-11.09c0.494-5.641,5.449-9.812,11.089-9.335c2.428,0.212,4.567,1.266,6.194,2.833l-1.637,1.377l7.031,2.548l-1.309-7.364l-1.771,1.492c-2.133-2.151-4.996-3.597-8.25-3.877C9.346,1.67,2.926,7.072,2.297,14.364c-0.625,7.291,4.777,13.71,12.066,14.339c7.293,0.625,13.713-4.776,14.342-12.066C28.779,15.771,28.762,14.919,28.674,14.087z")}}),draw2d.shape.icon.GlobeAlt2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.GlobeAlt2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM8.251,7.48c0.122,0.055,0.255,0.104,0.28,0.137C8.57,7.668,8.621,7.823,8.557,7.861C8.492,7.9,8.39,7.887,8.376,7.771c-0.013-0.115-0.026-0.128-0.18-0.18c-0.022-0.007-0.035-0.01-0.051-0.015C8.18,7.544,8.216,7.512,8.251,7.48zM7.733,7.974c0.031,0.087,0.113,0.125,0,0.17C7.673,8.168,7.611,8.172,7.559,8.165C7.617,8.102,7.672,8.035,7.733,7.974zM16,27.533C9.639,27.533,4.466,22.36,4.466,16c0-0.085,0.011-0.168,0.013-0.254c0.004-0.003,0.008-0.006,0.012-0.009c0.129-0.102,0.283-0.359,0.334-0.45c0.052-0.089,0.181-0.154,0.116-0.256c-0.059-0.096-0.292-0.23-0.407-0.261c0.01-0.099,0.032-0.195,0.045-0.294c0.063,0.077,0.137,0.17,0.208,0.194c0.115,0.038,0.501,0.052,0.566,0.052c0.063,0,0.334,0.014,0.386-0.064c0.051-0.077,0.09-0.077,0.154-0.077c0.064,0,0.18,0.231,0.271,0.257c0.089,0.026,0.257,0.013,0.244,0.181c-0.012,0.166,0.077,0.309,0.167,0.321c0.09,0.013,0.296-0.194,0.296-0.194s0,0.322-0.012,0.438C6.846,15.698,7,16.124,7,16.124s0.193,0.397,0.244,0.488c0.052,0.09,0.27,0.36,0.27,0.476c0,0.117,0.026,0.297,0.104,0.297s0.155-0.206,0.244-0.335c0.091-0.128,0.117-0.31,0.155-0.438c0.039-0.129,0.039-0.36,0.039-0.45c0-0.091,0.076-0.168,0.257-0.245c0.181-0.077,0.309-0.296,0.463-0.412c0.155-0.116,0.142-0.309,0.452-0.309c0.308,0,0.282,0,0.36-0.078c0.077-0.077,0.154-0.128,0.192,0.013c0.039,0.142,0.257,0.347,0.296,0.399c0.039,0.052,0.116,0.193,0.104,0.348c-0.013,0.153,0.012,0.334,0.077,0.334c0.064,0,0.193-0.219,0.193-0.219s0.283-0.192,0.27,0.014c-0.014,0.205,0.025,0.425,0.025,0.552c0,0.13,0.232,0.438,0.232,0.362c0-0.079,0.103-0.296,0.103-0.413c0-0.114,0.064-0.063,0.231,0.051c0.167,0.116,0.283,0.349,0.283,0.349s0.168,0.154,0.193,0.219c0.026,0.064,0.206-0.025,0.244-0.104c0.039-0.076,0.065-0.115,0.167-0.141c0.104-0.026,0.231-0.026,0.271-0.168c0.039-0.142,0.154-0.308,0-0.502c-0.154-0.193-0.232-0.321-0.347-0.412c-0.117-0.09-0.206-0.322-0.206-0.322s0.244-0.218,0.321-0.296c0.079-0.077,0.193-0.025,0.207,0.064c0.013,0.091-0.115,0.168-0.141,0.361c-0.026,0.192,0.154,0.257,0.206,0.192c0.051-0.065,0.18-0.219,0.18-0.257c0-0.039-0.089-0.026-0.102-0.167c-0.013-0.142,0.166-0.245,0.23-0.207c0.066,0.039,0.477-0.051,0.67-0.154s0.308-0.322,0.425-0.412c0.116-0.089,0.515-0.386,0.489-0.527c-0.026-0.142,0.012-0.334-0.09-0.515c-0.103-0.18-0.232-0.295-0.283-0.373c-0.051-0.077,0.219-0.09,0.347-0.206c0.129-0.116,0-0.219-0.064-0.206c-0.064,0.013-0.232,0.052-0.296,0.039c-0.064-0.013-0.103-0.077-0.206-0.155c-0.102-0.077,0.026-0.192,0.091-0.179c0.064,0.013,0.23-0.129,0.308-0.193c0.077-0.064,0.193-0.115,0.154-0.051c-0.038,0.064-0.128,0.296-0.026,0.309c0.104,0.013,0.348-0.193,0.388-0.18c0.038,0.013,0.102,0.18,0.064,0.257c-0.039,0.077-0.039,0.206,0.013,0.193c0.051-0.013,0.154-0.129,0.18-0.09c0.027,0.039,0.154,0.116,0.09,0.257c-0.063,0.142-0.193,0.193-0.039,0.284c0.154,0.089,0.206,0.012,0.322-0.052c0.115-0.064,0.193-0.347,0.128-0.438c-0.064-0.09-0.218-0.27-0.218-0.334c0-0.064,0.257-0.064,0.257-0.167s0.09-0.18,0.18-0.219c0.091-0.039,0.206-0.206,0.244-0.154c0.039,0.052,0.271,0.116,0.334,0.039c0.064-0.077,0.4-0.36,0.605-0.515c0.206-0.154,0.283-0.334,0.336-0.515c0.051-0.18,0.128-0.296,0.102-0.437v0c0.077,0.18,0.09,0.309,0.077,0.45c-0.013,0.142,0,0.438,0.026,0.476c0.025,0.039,0.129,0.128,0.192,0.103c0.064-0.025-0.025-0.283-0.025-0.334c0-0.052,0.09-0.129,0.142-0.142c0.052-0.013,0-0.231-0.065-0.322c-0.063-0.09-0.154-0.142-0.102-0.154c0.051-0.013,0.115-0.116,0.077-0.142c-0.039-0.025-0.014-0.116-0.103-0.09c-0.065,0.019-0.241-0.015-0.235,0.095c-0.037-0.11-0.116-0.183-0.216-0.172c-0.116,0.013-0.181,0.077-0.296,0.077s-0.025-0.18-0.077-0.18c-0.051,0-0.168,0.167-0.231,0.077c-0.064-0.09,0.18-0.206,0.373-0.27c0.192-0.064,0.514-0.438,0.644-0.451c0.128-0.013,0.45,0.026,0.733,0.013c0.283-0.013,0.373-0.129,0.463-0.064s0.283,0.142,0.399,0.129c0.116-0.014,0.064,0,0.244-0.129c0.18-0.129,0.348-0.193,0.438-0.296c0.09-0.103,0.335-0.18,0.348-0.077c0.014,0.103-0.026,0.206,0.077,0.206s0.258-0.103,0.386-0.154c0.129-0.051,0.231-0.116,0.231-0.116s-0.527,0.36-0.655,0.438c-0.129,0.077-0.438,0.129-0.567,0.283c-0.128,0.155-0.205,0.206-0.192,0.374c0.014,0.167,0.231,0.386,0.128,0.54c-0.103,0.154-0.141,0.373-0.141,0.373s0.154-0.219,0.373-0.36s0.348-0.334,0.425-0.412s0.309-0.091,0.309-0.181s0.064-0.206,0.104-0.309c0.038-0.103-0.077-0.078,0-0.206c0.076-0.129,0.064-0.232,0.45-0.232s0.257,0.026,0.566,0.013c0.309-0.013,0.424-0.167,0.72-0.245c0.296-0.077,0.527-0.128,0.618-0.089c0.09,0.038,0.232,0.012,0.141-0.078c-0.089-0.09-0.295-0.219-0.193-0.245c0.104-0.026,0.207-0.039,0.246-0.142c0.039-0.103-0.142-0.283-0.039-0.386c0.104-0.103-0.077-0.231-0.207-0.257c-0.128-0.025-0.63,0.026-0.731-0.025c-0.104-0.052-0.271-0.116-0.322-0.078c-0.052,0.039-0.168,0.245-0.168,0.245s-0.09,0.025-0.168-0.09c-0.076-0.116-0.5-0.103-0.629-0.103s-0.271,0.025-0.413,0.039c-0.141,0.013-0.219,0.052-0.322-0.039c-0.102-0.09-0.243-0.129-0.296-0.167c-0.051-0.039-0.334-0.039-0.553-0.012c-0.218,0.025-0.438,0.025-0.438,0.025s-0.104-0.039-0.257-0.129c-0.154-0.09-0.309-0.154-0.361-0.154c-0.051,0-0.449,0.064-0.539,0c-0.091-0.064-0.181-0.103-0.245-0.103s-0.115-0.103-0.038-0.103s0.437-0.103,0.437-0.103s-0.103-0.142-0.231-0.142c-0.128,0-0.359-0.064-0.424-0.064s-0.014,0.064-0.142,0.039c-0.13-0.026-0.258-0.078-0.335-0.026c-0.076,0.051-0.258,0.128-0.064,0.18c0.193,0.052,0.373,0,0.425,0.078c0.052,0.077,0,0.115,0,0.167s-0.103,0.193-0.167,0.219c-0.064,0.025-0.143-0.039-0.27,0.025c-0.129,0.064-0.451,0.013-0.49,0.052c-0.038,0.039-0.115-0.103-0.18-0.077c-0.064,0.025-0.232,0.193-0.322,0.18c-0.089-0.013-0.206-0.103-0.206-0.206s-0.038-0.232-0.077-0.258c-0.038-0.025-0.322-0.039-0.425-0.025c-0.103,0.013-0.424,0.038-0.477,0.09c-0.052,0.052-0.193,0.09-0.283,0.09s-0.167-0.09-0.36-0.116c-0.192-0.026-0.617-0.039-0.669-0.026s-0.218-0.025-0.155-0.077c0.065-0.051,0.257-0.219,0.143-0.295c-0.117-0.078-0.375-0.078-0.489-0.09c-0.117-0.013-0.232-0.039-0.413-0.013c-0.181,0.026-0.219,0.116-0.296,0.039c-0.077-0.077,0.193,0.039-0.077-0.077c-0.27-0.116-0.399-0.103-0.477-0.064c-0.077,0.039,0.013,0.025-0.192,0.103c-0.206,0.078-0.322,0.116-0.374,0.129c-0.051,0.012-0.372-0.065-0.411-0.091c-0.038-0.025-0.181,0.013-0.309,0.064S9.895,7.025,9.767,7C9.638,6.973,9.432,6.973,9.303,7.025C9.174,7.076,9.084,7.076,8.956,7.166c-0.13,0.09-0.373,0.142-0.373,0.142S8.522,7.305,8.448,7.301C10.474,5.541,13.111,4.466,16,4.466c6.361,0,11.534,5.173,11.534,11.534S22.36,27.533,16,27.533zM14.888,19.92c0,0,0.207-0.026,0.207-0.117c0-0.089-0.207-0.205-0.282-0.102c-0.078,0.102-0.219,0.205-0.207,0.296C14.625,20.138,14.888,19.92,14.888,19.92zM14.875,17.023c-0.181,0.233-0.167,0.182-0.296,0.128c-0.128-0.05-0.334,0.116-0.296,0.182c0.039,0.064,0.322-0.014,0.386,0.102c0.065,0.116,0.065,0.129,0.193,0.104c0.128-0.026,0.257-0.205,0.219-0.295C15.043,17.151,14.875,17.023,14.875,17.023zM14.837,18.245c-0.051,0-0.412,0.064-0.451,0.079c-0.039,0.013-0.27-0.025-0.27-0.025c-0.09,0.089-0.026,0.179,0.116,0.166s0.438-0.052,0.502-0.052C14.799,18.413,14.888,18.245,14.837,18.245zM14.284,14.668c-0.19,0.03-0.308,0.438-0.155,0.425C14.284,15.081,14.451,14.643,14.284,14.668zM14.734,16.959c-0.052-0.064-0.181-0.271-0.323-0.219c-0.042,0.017-0.153,0.245-0.012,0.245C14.541,16.985,14.786,17.023,14.734,16.959zM14.85,16.805c0.232-0.013,0.167-0.245-0.013-0.257C14.786,16.544,14.618,16.818,14.85,16.805zM17.591,18.928c-0.193-0.039-0.244-0.102-0.45-0.205c-0.207-0.103-0.67-0.103-0.682-0.039c-0.014,0.064,0,0-0.155-0.05c-0.153-0.054-0.271,0-0.309-0.091c-0.038-0.091-0.128-0.117-0.244-0.002c-0.097,0.097-0.142,0.104,0.078,0.143c0.218,0.039,0.283,0.039,0.192,0.141c-0.09,0.104-0.154,0.233-0.077,0.244c0.077,0.015,0.309-0.05,0.334,0c0.026,0.054-0.051,0.064,0.207,0.105c0.258,0.037,0.309,0.128,0.359,0.178c0.051,0.052,0.206,0.22,0.104,0.22c-0.104,0-0.219,0.128-0.142,0.143c0.077,0.013,0.309-0.039,0.321,0c0.014,0.037,0.143,0.283,0.271,0.271c0.129-0.013,0.206-0.244,0.27-0.31c0.065-0.064,0.322-0.104,0.349,0.012c0.026,0.116,0.104,0.233,0.257,0.311c0.154,0.076,0.335,0.154,0.348,0.089c0.013-0.064-0.077-0.309-0.181-0.346c-0.103-0.041-0.282-0.259-0.282-0.348c0-0.091-0.155-0.117-0.232-0.182C17.849,19.147,17.784,18.967,17.591,18.928zM8.042,17.023c-0.084,0.037-0.155,0.476,0,0.527c0.154,0.052,0.244-0.205,0.193-0.271C8.183,17.218,8.158,16.973,8.042,17.023zM15.429,18.117c-0.118-0.05-0.335,0.424-0.181,0.463C15.403,18.62,15.518,18.156,15.429,18.117zM15.687,13.703c0.077,0,0.18-0.051,0.18-0.193c0-0.142,0.18,0,0.27-0.013s0.141-0.103,0.18-0.206c0.005-0.013,0.008-0.021,0.009-0.027c-0.003,0.024-0.001,0.093,0.095,0.117c0.154,0.038,0.205-0.064,0.205-0.103s0.283-0.103,0.336-0.142c0.051-0.038,0.258-0.103,0.27-0.154c0.013-0.051,0-0.348,0.064-0.373c0.064-0.026,0.154-0.026,0.052-0.206c-0.104-0.181-0.104-0.348-0.232-0.271c-0.095,0.057-0.038,0.284-0.115,0.438s-0.142,0.296-0.193,0.296s-0.321,0.103-0.399,0.18c-0.076,0.077-0.45-0.064-0.501,0c-0.052,0.064-0.154,0.141-0.219,0.193c-0.065,0.051-0.245,0.013-0.207,0.167C15.518,13.562,15.609,13.703,15.687,13.703zM17.449,12.056c0.18-0.013,0.348-0.064,0.348-0.064s0.271,0.013,0.232-0.116c-0.04-0.128-0.322-0.141-0.375-0.128c-0.051,0.013-0.142-0.142-0.244-0.116c-0.096,0.023-0.128,0.155-0.128,0.193c0,0.039-0.36,0.115-0.245,0.219C17.153,12.146,17.27,12.069,17.449,12.056zM13.91,19.058c0.104,0.064,0.296-0.219,0.349-0.13c0.051,0.091-0.013,0.13,0.076,0.246c0.091,0.114,0.258,0.102,0.258,0.102s-0.013-0.309-0.155-0.387c-0.142-0.077-0.232-0.166-0.064-0.141c0.167,0.026,0.257-0.039,0.219-0.114c-0.039-0.078-0.283-0.039-0.361-0.026s-0.193-0.052-0.193-0.052c-0.077,0.024-0.063,0.089-0.09,0.219C13.923,18.902,13.807,18.992,13.91,19.058zM20.924,21.618c-0.231-0.052-0.077,0.039,0,0.154c0.077,0.116,0.232,0.176,0.258,0.05C21.193,21.759,21.155,21.67,20.924,21.618zM21.915,24.744c-0.077,0.064,0,0.091-0.219,0.22c-0.22,0.13-0.49,0.271-0.541,0.386c-0.052,0.116,0.051,0.181,0.258,0.192c0.206,0.013,0.154,0.053,0.296-0.103s0.271-0.244,0.438-0.373c0.168-0.128,0.168-0.322,0.168-0.322s-0.181-0.178-0.193-0.141C22.1,24.665,21.992,24.681,21.915,24.744zM18.504,21.618c0.014-0.116-0.219-0.116-0.334-0.207c-0.116-0.089-0.128-0.359-0.193-0.515c-0.064-0.153-0.192-0.257-0.322-0.397c-0.128-0.143-0.192-0.465-0.23-0.438c-0.039,0.025-0.154,0.399-0.064,0.515c0.09,0.116-0.039,0.348-0.103,0.503c-0.065,0.153-0.22-0.026-0.349-0.104c-0.129-0.078-0.308-0.128-0.398-0.219c-0.09-0.091,0.155-0.335,0.091-0.426c-0.065-0.09-0.412-0.013-0.45-0.013c-0.039,0-0.116-0.128-0.194-0.128c-0.077,0-0.064,0.258-0.064,0.258s-0.078-0.091-0.193-0.207c-0.117-0.115,0.012,0.077-0.103,0.193c-0.117,0.117-0.079,0.078-0.129,0.206c-0.051,0.129-0.167,0.077-0.283-0.052c-0.116-0.128-0.179-0.037-0.258,0c-0.077,0.039-0.141,0.259-0.18,0.309c-0.039,0.052-0.309,0.117-0.374,0.182c-0.064,0.062-0.09,0.27-0.09,0.322c0,0.05-0.271,0.023-0.361,0.089c-0.09,0.064-0.23,0.025-0.321,0.025c-0.09,0-0.399,0.244-0.502,0.308c-0.103,0.066-0.103,0.298-0.051,0.362c0.051,0.063,0.154,0.219,0.09,0.244c-0.064,0.026-0.104,0.206,0.051,0.359c0.154,0.155,0.103,0.194,0.115,0.271c0.014,0.077,0.078,0.104,0.181,0.232c0.102,0.128-0.181,0.231-0.219,0.31c-0.039,0.076,0.091,0.192,0.167,0.257c0.077,0.063,0.271,0.026,0.386-0.013c0.117-0.039,0.245-0.143,0.321-0.155c0.079-0.013,0.438-0.026,0.438-0.026s0.129-0.192,0.219-0.296c0.089-0.102,0.372-0.013,0.372-0.013s0.117-0.076,0.426-0.141c0.309-0.065,0.179,0.064,0.296,0.104c0.115,0.037,0.27,0.062,0.359,0.128c0.09,0.064,0,0.218-0.012,0.283c-0.014,0.064,0.219,0.038,0.23-0.026c0.014-0.064,0.077-0.128,0.207-0.205c0.128-0.078,0.025,0.114,0.076,0.231c0.052,0.116,0.129-0.157,0.129-0.026c0,0.039,0.039,0.078,0.051,0.116c0.014,0.039,0.181,0.052,0.181,0.18c0,0.13,0,0.207,0.039,0.231c0.038,0.026,0.244,0,0.335,0.155c0.089,0.154,0.154,0.013,0.205-0.052c0.052-0.064,0.231,0.026,0.283,0.078c0.052,0.05,0.193-0.104,0.387-0.155c0.192-0.051,0.167-0.039,0.219-0.115c0.051-0.078,0.09-0.283,0.205-0.438c0.115-0.153,0.271-0.424,0.271-0.631c0-0.206-0.014-0.682-0.155-0.899C18.761,21.953,18.492,21.733,18.504,21.618zM18.029,24.77c-0.065-0.013-0.207-0.062-0.207-0.062c-0.142,0.141,0.142,0.141,0.104,0.283c-0.039,0.141,0.193,0.089,0.257,0.064c0.063-0.027,0.22-0.323,0.193-0.399C18.351,24.577,18.093,24.783,18.029,24.77zM22.803,24.178c-0.052,0-0.077,0.064-0.192,0c-0.117-0.063-0.091-0.037-0.168-0.167c-0.077-0.127-0.091-0.296-0.219-0.23c-0.051,0.025,0,0.168,0.051,0.218c0.053,0.052,0.077,0.231,0.064,0.283c-0.012,0.052-0.231,0.116-0.129,0.18c0.104,0.064,0.297,0,0.271,0.078c-0.025,0.077-0.129,0.179-0.013,0.205c0.115,0.025,0.154-0.089,0.207-0.178c0.051-0.093,0.089-0.169,0.179-0.221C22.944,24.294,22.854,24.178,22.803,24.178zM22.815,21.18c0.168,0.064,0.464-0.231,0.347-0.27C23.047,20.871,22.815,21.18,22.815,21.18zM13.923,19.906c-0.029,0.115,0.193,0.167,0.206,0.039C14.141,19.816,13.949,19.803,13.923,19.906zM14.27,16.47c-0.064,0.065-0.257,0.193-0.283,0.31c-0.025,0.115,0.309-0.182,0.399-0.296c0.091-0.117,0.27-0.052,0.308-0.117c0.04-0.063,0.04-0.063,0.04-0.063s-0.142-0.025-0.257-0.063c-0.117-0.039-0.258,0.102-0.193-0.104c0.064-0.206,0.257-0.167,0.219-0.322c-0.039-0.154-0.168-0.193-0.207-0.193c-0.09,0,0.013,0.141-0.116,0.231c-0.128,0.09-0.271,0.128-0.193,0.283C14.064,16.29,14.334,16.405,14.27,16.47zM13.254,19.751c0.013-0.076-0.142-0.192-0.206-0.192c-0.065,0-0.386-0.077-0.386-0.077c-0.058,0.023-0.135,0.045-0.158,0.077c-0.007-0.011-0.022-0.024-0.049-0.039c-0.142-0.075-0.309,0-0.361-0.102c-0.05-0.104-0.127-0.104-0.179-0.039c-0.094,0.117,0.025,0.206,0.063,0.231c0.038,0.024,0.181,0.052,0.309,0.039c0.08-0.008,0.181-0.027,0.21-0.059c0.004,0.014,0.016,0.027,0.035,0.044c0.103,0.092,0.167,0.13,0.321,0.116C13.009,19.74,13.241,19.829,13.254,19.751zM12.881,18.992c0.065,0,0.193,0,0.283,0.026c0.09,0.025,0.386,0.05,0.373-0.064c-0.013-0.115-0.038-0.297,0.089-0.411c0.13-0.117,0.257-0.18,0.193-0.348c-0.063-0.167-0.193-0.271-0.103-0.349c0.09-0.076,0.192-0.102,0.192-0.166c0-0.065-0.217,0.18-0.244-0.246c-0.005-0.091-0.206,0.025-0.219,0.116c-0.012,0.091,0.142,0.167-0.103,0.167c-0.245,0-0.257,0.194-0.309,0.232c-0.052,0.039-0.103,0.051-0.207,0.076c-0.102,0.026-0.127,0.13-0.153,0.194c-0.025,0.063-0.206-0.116-0.257-0.064c-0.051,0.052-0.013,0.296,0.077,0.501C12.585,18.863,12.816,18.992,12.881,18.992zM11.979,18.928c0.065-0.077,0.038-0.192-0.063-0.18c-0.103,0.013-0.193-0.168-0.36-0.283c-0.168-0.114-0.296-0.194-0.451-0.36c-0.154-0.167-0.347-0.271-0.45-0.359c-0.104-0.091-0.257-0.13-0.322-0.116c-0.159,0.032,0.231,0.309,0.271,0.346c0.039,0.041,0.387,0.335,0.387,0.478s0.231,0.476,0.296,0.527c0.064,0.052,0.385,0.244,0.437,0.348c0.052,0.103,0.167,0.13,0.167-0.013C11.89,19.174,11.916,19.006,11.979,18.928zM11.002,17.474c0.064,0.232,0.193,0.464,0.244,0.555c0.052,0.089,0.271,0.217,0.348,0.281c0.077,0.064,0.192-0.024,0.143-0.102c-0.052-0.078-0.155-0.192-0.167-0.283c-0.013-0.091-0.078-0.233-0.181-0.387c-0.102-0.153-0.192-0.192-0.257-0.295c-0.064-0.104-0.296-0.297-0.296-0.297c-0.102,0.013-0.102,0.205-0.051,0.271C10.834,17.28,10.938,17.243,11.002,17.474z");
}}),draw2d.shape.icon.GlobeAlt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.GlobeAlt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM27.436,17.39c0.001,0.002,0.004,0.002,0.005,0.004c-0.022,0.187-0.054,0.37-0.085,0.554c-0.015-0.012-0.034-0.025-0.047-0.036c-0.103-0.09-0.254-0.128-0.318-0.115c-0.157,0.032,0.229,0.305,0.267,0.342c0.009,0.009,0.031,0.03,0.062,0.058c-1.029,5.312-5.709,9.338-11.319,9.338c-4.123,0-7.736-2.18-9.776-5.441c0.123-0.016,0.24-0.016,0.28-0.076c0.051-0.077,0.102-0.241,0.178-0.331c0.077-0.089,0.165-0.229,0.127-0.292c-0.039-0.064,0.101-0.344,0.088-0.419c-0.013-0.076-0.127-0.256,0.064-0.407s0.394-0.382,0.407-0.444c0.012-0.063,0.166-0.331,0.152-0.458c-0.012-0.127-0.152-0.28-0.24-0.318c-0.09-0.037-0.28-0.05-0.356-0.151c-0.077-0.103-0.292-0.203-0.368-0.178c-0.076,0.025-0.204,0.05-0.305-0.015c-0.102-0.062-0.267-0.139-0.33-0.189c-0.065-0.05-0.229-0.088-0.305-0.088c-0.077,0-0.065-0.052-0.178,0.101c-0.114,0.153,0,0.204-0.204,0.177c-0.204-0.023,0.025-0.036,0.141-0.189c0.113-0.152-0.013-0.242-0.141-0.203c-0.126,0.038-0.038,0.115-0.241,0.153c-0.203,0.036-0.203-0.09-0.076-0.115s0.355-0.139,0.355-0.19c0-0.051-0.025-0.191-0.127-0.191s-0.077-0.126-0.229-0.291c-0.092-0.101-0.196-0.164-0.299-0.204c-0.09-0.579-0.15-1.167-0.15-1.771c0-2.844,1.039-5.446,2.751-7.458c0.024-0.02,0.048-0.034,0.069-0.036c0.084-0.009,0.31-0.025,0.51-0.059c0.202-0.034,0.418-0.161,0.489-0.153c0.069,0.008,0.241,0.008,0.186-0.042C8.417,8.2,8.339,8.082,8.223,8.082S8.215,7.896,8.246,7.896c0.03,0,0.186,0.025,0.178,0.11C8.417,8.091,8.471,8.2,8.625,8.167c0.156-0.034,0.132-0.162,0.102-0.195C8.695,7.938,8.672,7.853,8.642,7.794c-0.031-0.06-0.023-0.136,0.14-0.153C8.944,7.625,9.168,7.708,9.16,7.573s0-0.28,0.046-0.356C9.253,7.142,9.354,7.09,9.299,7.065C9.246,7.04,9.176,7.099,9.121,6.972c-0.054-0.127,0.047-0.22,0.108-0.271c0.02-0.015,0.067-0.06,0.124-0.112C11.234,5.257,13.524,4.466,16,4.466c3.213,0,6.122,1.323,8.214,3.45c-0.008,0.022-0.01,0.052-0.031,0.056c-0.077,0.013-0.166,0.063-0.179-0.051c-0.013-0.114-0.013-0.331-0.102-0.203c-0.089,0.127-0.127,0.127-0.127,0.191c0,0.063,0.076,0.127,0.051,0.241C23.8,8.264,23.8,8.341,23.84,8.341c0.036,0,0.126-0.115,0.239-0.141c0.116-0.025,0.319-0.088,0.332,0.026c0.013,0.115,0.139,0.152,0.013,0.203c-0.128,0.051-0.267,0.026-0.293-0.051c-0.025-0.077-0.114-0.077-0.203-0.013c-0.088,0.063-0.279,0.292-0.279,0.292s-0.306,0.139-0.343,0.114c-0.04-0.025,0.101-0.165,0.203-0.228c0.102-0.064,0.178-0.204,0.14-0.242c-0.038-0.038-0.088-0.279-0.063-0.343c0.025-0.063,0.139-0.152,0.013-0.216c-0.127-0.063-0.217-0.14-0.318-0.178s-0.216,0.152-0.305,0.204c-0.089,0.051-0.076,0.114-0.191,0.127c-0.114,0.013-0.189,0.165,0,0.254c0.191,0.089,0.255,0.152,0.204,0.204c-0.051,0.051-0.267-0.025-0.267-0.025s-0.165-0.076-0.268-0.076c-0.101,0-0.229-0.063-0.33-0.076c-0.102-0.013-0.306-0.013-0.355,0.038c-0.051,0.051-0.179,0.203-0.28,0.152c-0.101-0.051-0.101-0.102-0.241-0.051c-0.14,0.051-0.279-0.038-0.355,0.038c-0.077,0.076-0.013,0.076-0.255,0c-0.241-0.076-0.189,0.051-0.419,0.089s-0.368-0.038-0.432,0.038c-0.064,0.077-0.153,0.217-0.19,0.127c-0.038-0.088,0.126-0.241,0.062-0.292c-0.062-0.051-0.33-0.025-0.367,0.013c-0.039,0.038-0.014,0.178,0.011,0.229c0.026,0.05,0.064,0.254-0.011,0.216c-0.077-0.038-0.064-0.166-0.141-0.152c-0.076,0.013-0.165,0.051-0.203,0.077c-0.038,0.025-0.191,0.025-0.229,0.076c-0.037,0.051,0.014,0.191-0.051,0.203c-0.063,0.013-0.114,0.064-0.254-0.025c-0.14-0.089-0.14-0.038-0.178-0.012c-0.038,0.025-0.216,0.127-0.229,0.012c-0.013-0.114,0.025-0.152-0.089-0.229c-0.115-0.076-0.026-0.076,0.127-0.025c0.152,0.05,0.343,0.075,0.622-0.013c0.28-0.089,0.395-0.127,0.28-0.178c-0.115-0.05-0.229-0.101-0.406-0.127c-0.179-0.025-0.42-0.025-0.7-0.127c-0.279-0.102-0.343-0.14-0.457-0.165c-0.115-0.026-0.813-0.14-1.132-0.089c-0.317,0.051-1.193,0.28-1.245,0.318s-0.128,0.19-0.292,0.318c-0.165,0.127-0.47,0.419-0.712,0.47c-0.241,0.051-0.521,0.254-0.521,0.305c0,0.051,0.101,0.242,0.076,0.28c-0.025,0.038,0.05,0.229,0.191,0.28c0.139,0.05,0.381,0.038,0.393-0.039c0.014-0.076,0.204-0.241,0.217-0.127c0.013,0.115,0.14,0.292,0.114,0.368c-0.025,0.077,0,0.153,0.09,0.14c0.088-0.012,0.559-0.114,0.559-0.114s0.153-0.064,0.127-0.166c-0.026-0.101,0.166-0.241,0.203-0.279c0.038-0.038,0.178-0.191,0.014-0.241c-0.167-0.051-0.293-0.064-0.115-0.216s0.292,0,0.521-0.229c0.229-0.229-0.051-0.292,0.191-0.305c0.241-0.013,0.496-0.025,0.444,0.051c-0.05,0.076-0.342,0.242-0.508,0.318c-0.166,0.077-0.14,0.216-0.076,0.292c0.063,0.076,0.09,0.254,0.204,0.229c0.113-0.025,0.254-0.114,0.38-0.101c0.128,0.012,0.383-0.013,0.42-0.013c0.039,0,0.216,0.178,0.114,0.203c-0.101,0.025-0.229,0.013-0.445,0.025c-0.215,0.013-0.456,0.013-0.456,0.051c0,0.039,0.292,0.127,0.19,0.191c-0.102,0.063-0.203-0.013-0.331-0.026c-0.127-0.012-0.203,0.166-0.241,0.267c-0.039,0.102,0.063,0.28-0.127,0.216c-0.191-0.063-0.331-0.063-0.381-0.038c-0.051,0.025-0.203,0.076-0.331,0.114c-0.126,0.038-0.076-0.063-0.242-0.063c-0.164,0-0.164,0-0.164,0l-0.103,0.013c0,0-0.101-0.063-0.114-0.165c-0.013-0.102,0.05-0.216-0.013-0.241c-0.064-0.026-0.292,0.012-0.33,0.088c-0.038,0.076-0.077,0.216-0.026,0.28c0.052,0.063,0.204,0.19,0.064,0.152c-0.14-0.038-0.317-0.051-0.419,0.026c-0.101,0.076-0.279,0.241-0.279,0.241s-0.318,0.025-0.318,0.102c0,0.077,0,0.178-0.114,0.191c-0.115,0.013-0.268,0.05-0.42,0.076c-0.153,0.025-0.139,0.088-0.317,0.102s-0.204,0.089-0.038,0.114c0.165,0.025,0.418,0.127,0.431,0.241c0.014,0.114-0.013,0.242-0.076,0.356c-0.043,0.079-0.305,0.026-0.458,0.026c-0.152,0-0.456-0.051-0.584,0c-0.127,0.051-0.102,0.305-0.064,0.419c0.039,0.114-0.012,0.178-0.063,0.216c-0.051,0.038-0.065,0.152,0,0.204c0.063,0.051,0.114,0.165,0.166,0.178c0.051,0.013,0.215-0.038,0.279,0.025c0.064,0.064,0.127,0.216,0.165,0.178c0.039-0.038,0.089-0.203,0.153-0.166c0.064,0.039,0.216-0.012,0.331-0.025s0.177-0.14,0.292-0.204c0.114-0.063,0.05-0.063,0.013-0.14c-0.038-0.076,0.114-0.165,0.204-0.254c0.088-0.089,0.253-0.013,0.292-0.115c0.038-0.102,0.051-0.279,0.151-0.267c0.103,0.013,0.243,0.076,0.331,0.076c0.089,0,0.279-0.14,0.332-0.165c0.05-0.025,0.241-0.013,0.267,0.102c0.025,0.114,0.241,0.254,0.292,0.279c0.051,0.025,0.381,0.127,0.433,0.165c0.05,0.038,0.126,0.153,0.152,0.254c0.025,0.102,0.114,0.102,0.128,0.013c0.012-0.089-0.065-0.254,0.025-0.242c0.088,0.013,0.191-0.026,0.191-0.026s-0.243-0.165-0.331-0.203c-0.088-0.038-0.255-0.114-0.331-0.241c-0.076-0.127-0.267-0.153-0.254-0.279c0.013-0.127,0.191-0.051,0.292,0.051c0.102,0.102,0.356,0.241,0.445,0.33c0.088,0.089,0.229,0.127,0.267,0.242c0.039,0.114,0.152,0.241,0.19,0.292c0.038,0.051,0.165,0.331,0.204,0.394c0.038,0.063,0.165-0.012,0.229-0.063c0.063-0.051,0.179-0.076,0.191-0.178c0.013-0.102-0.153-0.178-0.203-0.216c-0.051-0.038,0.127-0.076,0.191-0.127c0.063-0.05,0.177-0.14,0.228-0.063c0.051,0.077,0.026,0.381,0.051,0.432c0.025,0.051,0.279,0.127,0.331,0.191c0.05,0.063,0.267,0.089,0.304,0.051c0.039-0.038,0.242,0.026,0.294,0.038c0.049,0.013,0.202-0.025,0.304-0.05c0.103-0.025,0.204-0.102,0.191,0.063c-0.013,0.165-0.051,0.419-0.179,0.546c-0.127,0.127-0.076,0.191-0.202,0.191c-0.06,0-0.113,0-0.156,0.021c-0.041-0.065-0.098-0.117-0.175-0.097c-0.152,0.038-0.344,0.038-0.47,0.19c-0.128,0.153-0.178,0.165-0.204,0.114c-0.025-0.051,0.369-0.267,0.317-0.331c-0.05-0.063-0.355-0.038-0.521-0.038c-0.166,0-0.305-0.102-0.433-0.127c-0.126-0.025-0.292,0.127-0.418,0.254c-0.128,0.127-0.216,0.038-0.331,0.038c-0.115,0-0.331-0.165-0.331-0.165s-0.216-0.089-0.305-0.089c-0.088,0-0.267-0.165-0.318-0.165c-0.05,0-0.19-0.115-0.088-0.166c0.101-0.05,0.202,0.051,0.101-0.229c-0.101-0.279-0.33-0.216-0.419-0.178c-0.088,0.039-0.724,0.025-0.775,0.025c-0.051,0-0.419,0.127-0.533,0.178c-0.116,0.051-0.318,0.115-0.369,0.14c-0.051,0.025-0.318-0.051-0.433,0.013c-0.151,0.084-0.291,0.216-0.33,0.216c-0.038,0-0.153,0.089-0.229,0.28c-0.077,0.19,0.013,0.355-0.128,0.419c-0.139,0.063-0.394,0.204-0.495,0.305c-0.102,0.101-0.229,0.458-0.355,0.623c-0.127,0.165,0,0.317,0.025,0.419c0.025,0.101,0.114,0.292-0.025,0.471c-0.14,0.178-0.127,0.266-0.191,0.279c-0.063,0.013,0.063,0.063,0.088,0.19c0.025,0.128-0.114,0.255,0.128,0.369c0.241,0.113,0.355,0.217,0.418,0.367c0.064,0.153,0.382,0.407,0.382,0.407s0.229,0.205,0.344,0.293c0.114,0.089,0.152,0.038,0.177-0.05c0.025-0.09,0.178-0.104,0.355-0.104c0.178,0,0.305,0.04,0.483,0.014c0.178-0.025,0.356-0.141,0.42-0.166c0.063-0.025,0.279-0.164,0.443-0.063c0.166,0.103,0.141,0.241,0.23,0.332c0.088,0.088,0.24,0.037,0.355-0.051c0.114-0.09,0.064-0.052,0.203,0.025c0.14,0.075,0.204,0.151,0.077,0.267c-0.128,0.113-0.051,0.293-0.128,0.47c-0.076,0.178-0.063,0.203,0.077,0.278c0.14,0.076,0.394,0.548,0.47,0.638c0.077,0.088-0.025,0.342,0.064,0.495c0.089,0.151,0.178,0.254,0.077,0.331c-0.103,0.075-0.28,0.216-0.292,0.47s0.051,0.431,0.102,0.521s0.177,0.331,0.241,0.419c0.064,0.089,0.14,0.305,0.152,0.445c0.013,0.14-0.024,0.306,0.039,0.381c0.064,0.076,0.102,0.191,0.216,0.292c0.115,0.103,0.152,0.318,0.152,0.318s0.039,0.089,0.051,0.229c0.012,0.14,0.025,0.228,0.152,0.292c0.126,0.063,0.215,0.076,0.28,0.013c0.063-0.063,0.381-0.077,0.546-0.063c0.165,0.013,0.355-0.075,0.521-0.19s0.407-0.419,0.496-0.508c0.089-0.09,0.292-0.255,0.268-0.356c-0.025-0.101-0.077-0.203,0.024-0.254c0.102-0.052,0.344-0.152,0.356-0.229c0.013-0.077-0.09-0.395-0.115-0.457c-0.024-0.064,0.064-0.18,0.165-0.306c0.103-0.128,0.421-0.216,0.471-0.267c0.051-0.053,0.191-0.267,0.217-0.433c0.024-0.167-0.051-0.369,0-0.457c0.05-0.09,0.013-0.165-0.103-0.268c-0.114-0.102-0.089-0.407-0.127-0.457c-0.037-0.051-0.013-0.319,0.063-0.345c0.076-0.023,0.242-0.279,0.344-0.393c0.102-0.114,0.394-0.47,0.534-0.496c0.139-0.025,0.355-0.229,0.368-0.343c0.013-0.115,0.38-0.547,0.394-0.635c0.013-0.09,0.166-0.42,0.102-0.497c-0.062-0.076-0.559,0.115-0.622,0.141c-0.064,0.025-0.241,0.127-0.446,0.113c-0.202-0.013-0.114-0.177-0.127-0.254c-0.012-0.076-0.228-0.368-0.279-0.381c-0.051-0.012-0.203-0.166-0.267-0.317c-0.063-0.153-0.152-0.343-0.254-0.458c-0.102-0.114-0.165-0.38-0.268-0.559c-0.101-0.178-0.189-0.407-0.279-0.572c-0.021-0.041-0.045-0.079-0.067-0.117c0.118-0.029,0.289-0.082,0.31-0.009c0.024,0.088,0.165,0.279,0.19,0.419s0.165,0.089,0.178,0.216c0.014,0.128,0.14,0.433,0.19,0.47c0.052,0.038,0.28,0.242,0.318,0.318c0.038,0.076,0.089,0.178,0.127,0.369c0.038,0.19,0.076,0.444,0.179,0.482c0.102,0.038,0.444-0.064,0.508-0.102s0.482-0.242,0.635-0.255c0.153-0.012,0.179-0.115,0.368-0.152c0.191-0.038,0.331-0.177,0.458-0.28c0.127-0.101,0.28-0.355,0.33-0.444c0.052-0.088,0.179-0.152,0.115-0.253c-0.063-0.103-0.331-0.254-0.433-0.268c-0.102-0.012-0.089-0.178-0.152-0.178s-0.051,0.088-0.178,0.153c-0.127,0.063-0.255,0.19-0.344,0.165s0.026-0.089-0.113-0.203s-0.192-0.14-0.192-0.228c0-0.089-0.278-0.255-0.304-0.382c-0.026-0.127,0.19-0.305,0.254-0.19c0.063,0.114,0.115,0.292,0.279,0.368c0.165,0.076,0.318,0.204,0.395,0.229c0.076,0.025,0.267-0.14,0.33-0.114c0.063,0.024,0.191,0.253,0.306,0.292c0.113,0.038,0.495,0.051,0.559,0.051s0.33,0.013,0.381-0.063c0.051-0.076,0.089-0.076,0.153-0.076c0.062,0,0.177,0.229,0.267,0.254c0.089,0.025,0.254,0.013,0.241,0.179c-0.012,0.164,0.076,0.305,0.165,0.317c0.09,0.012,0.293-0.191,0.293-0.191s0,0.318-0.012,0.433c-0.014,0.113,0.139,0.534,0.139,0.534s0.19,0.393,0.241,0.482s0.267,0.355,0.267,0.47c0,0.115,0.025,0.293,0.103,0.293c0.076,0,0.152-0.203,0.24-0.331c0.091-0.126,0.116-0.305,0.153-0.432c0.038-0.127,0.038-0.356,0.038-0.444c0-0.09,0.075-0.166,0.255-0.242c0.178-0.076,0.304-0.292,0.456-0.407c0.153-0.115,0.141-0.305,0.446-0.305c0.305,0,0.278,0,0.355-0.077c0.076-0.076,0.151-0.127,0.19,0.013c0.038,0.14,0.254,0.343,0.292,0.394c0.038,0.052,0.114,0.191,0.103,0.344c-0.013,0.152,0.012,0.33,0.075,0.33s0.191-0.216,0.191-0.216s0.279-0.189,0.267,0.013c-0.014,0.203,0.025,0.419,0.025,0.545c0,0.053,0.042,0.135,0.088,0.21c-0.005,0.059-0.004,0.119-0.009,0.178C27.388,17.153,27.387,17.327,27.436,17.39zM20.382,12.064c0.076,0.05,0.102,0.127,0.152,0.203c0.052,0.076,0.14,0.05,0.203,0.114c0.063,0.064-0.178,0.14-0.075,0.216c0.101,0.077,0.151,0.381,0.165,0.458c0.013,0.076-0.279,0.114-0.369,0.102c-0.089-0.013-0.354-0.102-0.445-0.127c-0.089-0.026-0.139-0.343-0.025-0.331c0.116,0.013,0.141-0.025,0.267-0.139c0.128-0.115-0.189-0.166-0.278-0.191c-0.089-0.025-0.268-0.305-0.331-0.394c-0.062-0.089-0.014-0.228,0.141-0.331c0.076-0.051,0.279,0.063,0.381,0c0.101-0.063,0.203-0.14,0.241-0.165c0.039-0.025,0.293,0.038,0.33,0.114c0.039,0.076,0.191,0.191,0.141,0.229c-0.052,0.038-0.281,0.076-0.356,0c-0.075-0.077-0.255,0.012-0.268,0.152C20.242,12.115,20.307,12.013,20.382,12.064zM16.875,12.28c-0.077-0.025,0.025-0.178,0.102-0.229c0.075-0.051,0.164-0.178,0.241-0.305c0.076-0.127,0.178-0.14,0.241-0.127c0.063,0.013,0.203,0.241,0.241,0.318c0.038,0.076,0.165-0.026,0.217-0.051c0.05-0.025,0.127-0.102,0.14-0.165s0.127-0.102,0.254-0.102s0.013,0.102-0.076,0.127c-0.09,0.025-0.038,0.077,0.113,0.127c0.153,0.051,0.293,0.191,0.459,0.279c0.165,0.089,0.19,0.267,0.088,0.292c-0.101,0.025-0.406,0.051-0.521,0.038c-0.114-0.013-0.254-0.127-0.419-0.153c-0.165-0.025-0.369-0.013-0.433,0.077s-0.292,0.05-0.395,0.05c-0.102,0-0.228,0.127-0.253,0.077C16.875,12.534,16.951,12.306,16.875,12.28zM17.307,9.458c0.063-0.178,0.419,0.038,0.355,0.127C17.599,9.675,17.264,9.579,17.307,9.458zM17.802,18.584c0.063,0.102-0.14,0.431-0.254,0.407c-0.113-0.027-0.076-0.318-0.038-0.382C17.548,18.545,17.769,18.529,17.802,18.584zM13.189,12.674c0.025-0.051-0.039-0.153-0.127-0.013C13.032,12.71,13.164,12.725,13.189,12.674zM20.813,8.035c0.141,0.076,0.339,0.107,0.433,0.013c0.076-0.076,0.013-0.204-0.05-0.216c-0.064-0.013-0.104-0.115,0.062-0.203c0.165-0.089,0.343-0.204,0.534-0.229c0.19-0.025,0.622-0.038,0.774,0c0.152,0.039,0.382-0.166,0.445-0.254s-0.203-0.152-0.279-0.051c-0.077,0.102-0.444,0.076-0.521,0.051c-0.076-0.025-0.686,0.102-0.812,0.102c-0.128,0-0.179,0.152-0.356,0.229c-0.179,0.076-0.42,0.191-0.509,0.229c-0.088,0.038-0.177,0.19-0.101,0.216C20.509,7.947,20.674,7.959,20.813,8.035zM14.142,12.674c0.064-0.089-0.051-0.217-0.114-0.217c-0.12,0-0.178,0.191-0.103,0.254C14.002,12.776,14.078,12.763,14.142,12.674zM14.714,13.017c0.064,0.025,0.114,0.102,0.165,0.114c0.052,0.013,0.217,0,0.167-0.127s-0.167-0.127-0.204-0.127c-0.038,0-0.203-0.038-0.267,0C14.528,12.905,14.65,12.992,14.714,13.017zM11.308,10.958c0.101,0.013,0.217-0.063,0.305-0.101c0.088-0.038,0.216-0.114,0.216-0.229c0-0.114-0.025-0.216-0.077-0.267c-0.051-0.051-0.14-0.064-0.216-0.051c-0.115,0.02-0.127,0.14-0.203,0.14c-0.076,0-0.165,0.025-0.14,0.114s0.077,0.152,0,0.19C11.117,10.793,11.205,10.946,11.308,10.958zM11.931,10.412c0.127,0.051,0.394,0.102,0.292,0.153c-0.102,0.051-0.28,0.19-0.305,0.267s0.216,0.153,0.216,0.153s-0.077,0.089-0.013,0.114c0.063,0.025,0.102-0.089,0.203-0.089c0.101,0,0.304,0.063,0.406,0.063c0.103,0,0.267-0.14,0.254-0.229c-0.013-0.089-0.14-0.229-0.254-0.28c-0.113-0.051-0.241-0.28-0.317-0.331c-0.076-0.051,0.076-0.178-0.013-0.267c-0.09-0.089-0.153-0.076-0.255-0.14c-0.102-0.063-0.191,0.013-0.254,0.089c-0.063,0.076-0.14-0.013-0.217,0.012c-0.102,0.035-0.063,0.166-0.012,0.229C11.714,10.221,11.804,10.361,11.931,10.412zM24.729,17.198c-0.083,0.037-0.153,0.47,0,0.521c0.152,0.052,0.241-0.202,0.191-0.267C24.868,17.39,24.843,17.147,24.729,17.198zM20.114,20.464c-0.159-0.045-0.177,0.166-0.304,0.306c-0.128,0.141-0.267,0.254-0.317,0.241c-0.052-0.013-0.331,0.089-0.242,0.279c0.089,0.191,0.076,0.382-0.013,0.472c-0.089,0.088,0.076,0.342,0.052,0.482c-0.026,0.139,0.037,0.229,0.215,0.229s0.242-0.064,0.318-0.229c0.076-0.166,0.088-0.331,0.164-0.47c0.077-0.141,0.141-0.434,0.179-0.51c0.038-0.075,0.114-0.316,0.102-0.457C20.254,20.669,20.204,20.489,20.114,20.464zM10.391,8.802c-0.069-0.06-0.229-0.102-0.306-0.11c-0.076-0.008-0.152,0.06-0.321,0.06c-0.168,0-0.279,0.067-0.347,0C9.349,8.684,9.068,8.65,9.042,8.692C9.008,8.749,8.941,8.751,9.008,8.87c0.069,0.118,0.12,0.186,0.179,0.178s0.262-0.017,0.288,0.051C9.5,9.167,9.569,9.226,9.712,9.184c0.145-0.042,0.263-0.068,0.296-0.119c0.033-0.051,0.263-0.059,0.263-0.059S10.458,8.861,10.391,8.802z")}}),draw2d.shape.icon.Globe=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Globe",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM19.158,23.269c-0.079,0.064-0.183,0.13-0.105,0.207c0.078,0.078-0.09,0.131-0.09,0.17s0.104,0.246,0.052,0.336c-0.052,0.092-0.091,0.223-0.13,0.301c-0.039,0.077-0.131,0.155-0.104,0.272c0.025,0.116-0.104,0.077-0.104,0.194c0,0.116,0.116,0.065,0.09,0.208c-0.025,0.144-0.09,0.183-0.09,0.285c0,0.104,0.064,0.247,0.064,0.286s-0.064,0.17-0.155,0.272c-0.092,0.104-0.155,0.17-0.144,0.233c0.014,0.065,0.104,0.144,0.091,0.184c-0.013,0.037-0.129,0.168-0.116,0.259c0.014,0.09,0.129,0.053,0.155,0.116c0.026,0.065-0.155,0.118-0.078,0.183c0.078,0.064,0.183,0.051,0.156,0.208c-0.019,0.112,0.064,0.163,0.126,0.198c-0.891,0.221-1.818,0.352-2.777,0.352C9.639,27.533,4.466,22.36,4.466,16c0-2.073,0.557-4.015,1.518-5.697c0.079-0.042,0.137-0.069,0.171-0.062c0.065,0.013,0.079,0.104,0.183,0.13c0.104,0.026,0.195-0.078,0.26-0.117c0.064-0.039,0.116-0.195,0.051-0.182c-0.065,0.013-0.234,0-0.234,0s0.183-0.104,0.183-0.169s0.025-0.169,0.129-0.208C6.83,9.655,6.83,9.681,6.765,9.837C6.7,9.993,6.896,9.928,6.973,9.863s0.13-0.013,0.272-0.104c0.143-0.091,0.143-0.143,0.221-0.143c0.078,0,0.221,0.143,0.299,0.091c0.077-0.052,0.299,0.065,0.429,0.065c0.129,0,0.545,0.169,0.624,0.169c0.078,0,0.312,0.09,0.325,0.259c0.013,0.169,0.09,0.156,0.168,0.156s0.26,0.065,0.26,0.13c0,0.065-0.052,0.325,0.078,0.39c0.129,0.064,0.247,0.169,0.299,0.143c0.052-0.026,0-0.233-0.064-0.26c-0.065-0.026-0.027-0.117-0.052-0.169c-0.026-0.051,0.078-0.051,0.117,0.039c0.039,0.091,0.143,0.26,0.208,0.26c0.064,0,0.208,0.156,0.168,0.247c-0.039,0.091,0.039,0.221,0.156,0.221c0.116,0,0.26,0.182,0.312,0.195c0.052,0.013,0.117,0.078,0.117,0.117c0,0.04,0.065,0.26,0.065,0.351c0,0.09-0.04,0.454-0.053,0.597s0.104,0.39,0.234,0.52c0.129,0.13,0.246,0.377,0.324,0.429c0.079,0.052,0.13,0.195,0.247,0.182c0.117-0.013,0.195,0.078,0.299,0.26c0.104,0.182,0.208,0.48,0.286,0.506c0.078,0.026,0.208,0.117,0.142,0.182c-0.064,0.064-0.168,0.208-0.051,0.208c0.117,0,0.156-0.065,0.247,0.053c0.09,0.116,0.208,0.181,0.194,0.26c-0.013,0.077,0.104,0.103,0.156,0.116c0.052,0.013,0.169,0.247,0.286,0.143c0.117-0.104-0.155-0.259-0.234-0.326c-0.078-0.064,0-0.207-0.182-0.35c-0.182-0.143-0.156-0.247-0.286-0.351c-0.13-0.104-0.233-0.195-0.104-0.286c0.13-0.091,0.143,0.091,0.195,0.208c0.052,0.116,0.324,0.351,0.441,0.454c0.117,0.104,0.326,0.468,0.39,0.468s0.247,0.208,0.247,0.208s0.103,0.168,0.064,0.22c-0.039,0.052,0.053,0.247,0.144,0.299c0.09,0.052,0.455,0.22,0.507,0.247c0.052,0.027,0.155,0.221,0.299,0.221c0.142,0,0.247,0.014,0.286,0.053c0.039,0.038,0.155,0.194,0.234,0.104c0.078-0.092,0.09-0.131,0.208-0.131c0.117,0,0.168,0.091,0.233,0.156c0.065,0.065,0.247,0.235,0.338,0.222c0.091-0.013,0.208,0.104,0.273,0.064s0.169,0.025,0.22,0.052c0.054,0.026,0.234,0.118,0.222,0.272c-0.013,0.157,0.103,0.195,0.182,0.234c0.078,0.039,0.182,0.13,0.248,0.195c0.064,0.063,0.206,0.077,0.246,0.116c0.039,0.039,0.065,0.117,0.182,0.052c0.116-0.064,0.092-0.181,0.092-0.181s0.129-0.026,0.194,0.026c0.064,0.05,0.104,0.22,0.144,0.246c0.038,0.026,0.115,0.221,0.063,0.362c-0.051,0.145-0.038,0.286-0.091,0.286c-0.052,0-0.116,0.17-0.195,0.209c-0.076,0.039-0.285,0.221-0.272,0.286c0.013,0.063,0.131,0.258,0.104,0.35c-0.025,0.091-0.194,0.195-0.154,0.338c0.038,0.144,0.312,0.183,0.323,0.312c0.014,0.131,0.209,0.417,0.235,0.546c0.025,0.13,0.246,0.272,0.246,0.453c0,0.184,0.312,0.3,0.377,0.312c0.063,0.013,0.182,0.131,0.272,0.17s0.169,0.116,0.233,0.221s0.053,0.261,0.053,0.299c0,0.039-0.039,0.44-0.078,0.674C19.145,23.021,19.235,23.203,19.158,23.269zM10.766,11.188c0.039,0.013,0.117,0.091,0.156,0.091c0.04,0,0.234,0.156,0.286,0.208c0.053,0.052,0.053,0.195-0.013,0.208s-0.104-0.143-0.117-0.208c-0.013-0.065-0.143-0.065-0.208-0.104C10.805,11.344,10.66,11.152,10.766,11.188zM27.51,16.41c-0.144,0.182-0.13,0.272-0.195,0.286c-0.064,0.013,0.065,0.065,0.09,0.194c0.022,0.112-0.065,0.224,0.063,0.327c-0.486,4.619-3.71,8.434-8.016,9.787c-0.007-0.011-0.019-0.025-0.021-0.034c-0.027-0.078-0.027-0.233,0.064-0.285c0.091-0.053,0.312-0.233,0.363-0.272c0.052-0.04,0.13-0.221,0.091-0.247c-0.038-0.026-0.232,0-0.26-0.039c-0.026-0.039-0.026-0.092,0.104-0.182c0.13-0.091,0.195-0.222,0.247-0.26c0.052-0.039,0.155-0.117,0.195-0.209c0.038-0.09-0.041-0.039-0.118-0.039s-0.117-0.142-0.117-0.207s0.195,0.026,0.339,0.052c0.143,0.024,0.077-0.065,0.064-0.142c-0.013-0.078,0.026-0.209,0.105-0.17c0.076,0.039,0.479-0.013,0.531-0.026c0.052-0.013,0.194-0.246,0.246-0.312c0.053-0.065,0.064-0.129,0-0.168c-0.065-0.04-0.143-0.184-0.168-0.221c-0.026-0.041-0.039-0.274-0.013-0.34c0.025-0.063,0,0.377,0.181,0.43c0.183,0.052,0.286,0.078,0.455-0.078c0.169-0.155,0.298-0.26,0.312-0.363c0.013-0.104,0.052-0.209,0.117-0.246c0.065-0.039,0.104,0.103,0.182-0.065c0.078-0.17,0.156-0.157,0.234-0.299c0.077-0.144-0.13-0.325,0.024-0.43c0.157-0.103,0.43-0.233,0.43-0.233s0.078-0.039,0.234-0.078c0.155-0.038,0.324-0.014,0.376-0.09c0.052-0.079,0.104-0.247,0.182-0.338c0.079-0.092,0.169-0.234,0.13-0.299c-0.039-0.065,0.104-0.352,0.091-0.429c-0.013-0.078-0.13-0.261,0.065-0.416s0.402-0.391,0.416-0.454c0.012-0.065,0.169-0.338,0.154-0.469c-0.012-0.129-0.154-0.285-0.245-0.325c-0.092-0.037-0.286-0.05-0.364-0.154s-0.299-0.208-0.377-0.182c-0.077,0.026-0.208,0.051-0.312-0.015c-0.104-0.063-0.272-0.143-0.337-0.194c-0.066-0.051-0.234-0.09-0.312-0.09s-0.065-0.053-0.182,0.103c-0.117,0.157,0,0.209-0.208,0.182c-0.209-0.024,0.025-0.038,0.144-0.194c0.115-0.155-0.014-0.247-0.144-0.207c-0.13,0.039-0.039,0.117-0.247,0.156c-0.207,0.038-0.207-0.092-0.077-0.117c0.13-0.026,0.363-0.143,0.363-0.194c0-0.053-0.026-0.196-0.13-0.196s-0.078-0.129-0.233-0.297c-0.156-0.17-0.351-0.274-0.508-0.249c-0.154,0.026-0.272,0.065-0.35-0.076c-0.078-0.144-0.169-0.17-0.222-0.247c-0.051-0.078-0.182,0-0.221-0.039s-0.039-0.039-0.039-0.039s-0.169,0.039-0.077-0.078c0.09-0.117,0.129-0.338,0.09-0.325c-0.038,0.013-0.104,0.196-0.168,0.183c-0.064-0.013-0.014-0.04-0.144-0.117c-0.13-0.078-0.337-0.013-0.337,0.052c0,0.065-0.065,0.117-0.065,0.117s-0.039-0.038-0.078-0.117c-0.039-0.078-0.221-0.091-0.312-0.013c-0.09,0.078-0.142-0.196-0.207-0.196s-0.194,0.065-0.26,0.184c-0.064,0.116-0.038,0.285-0.092,0.272c-0.05-0.013-0.063-0.233-0.05-0.312c0.012-0.079,0.155-0.208,0.05-0.234c-0.103-0.026-0.259,0.13-0.323,0.143c-0.065,0.013-0.195,0.104-0.273,0.209c-0.077,0.103-0.116,0.168-0.195,0.207c-0.077,0.039-0.193,0-0.167-0.039c0.025-0.039-0.222-0.181-0.261-0.13c-0.04,0.052-0.155,0.091-0.272,0.144c-0.117,0.052-0.222-0.065-0.247-0.117s-0.079-0.064-0.091-0.234c-0.013-0.168,0.027-0.351,0.065-0.454c0.038-0.104-0.195-0.312-0.286-0.3c-0.091,0.015-0.182,0.105-0.272,0.091c-0.092-0.012-0.052-0.038-0.195-0.038c-0.143,0-0.026-0.025,0-0.143c0.025-0.116-0.052-0.273,0.092-0.377c0.142-0.104,0.091-0.351,0-0.363c-0.092-0.014-0.261,0.039-0.377,0.026c-0.116-0.014-0.208,0.091-0.169,0.207c0.039,0.117-0.065,0.195-0.104,0.183c-0.039-0.013-0.09-0.078-0.234,0.026c-0.142,0.103-0.194,0.064-0.337-0.052c-0.143-0.118-0.299-0.234-0.325-0.416c-0.026-0.182-0.04-0.364,0.013-0.468c0.051-0.104,0.051-0.285-0.026-0.312c-0.078-0.025,0.09-0.155,0.181-0.181c0.092-0.026,0.234-0.143,0.26-0.195c0.026-0.052,0.156-0.04,0.298-0.04c0.143,0,0.169,0,0.312,0.078c0.143,0.078,0.169-0.039,0.169-0.078c0-0.039,0.052-0.117,0.208-0.104c0.156,0.013,0.376-0.052,0.416-0.013s0.116,0.195,0.194,0.143c0.079-0.051,0.104-0.143,0.131,0.014c0.025,0.155,0.09,0.39,0.208,0.429c0.116,0.039,0.052,0.194,0.168,0.207c0.115,0.013,0.17-0.246,0.131-0.337c-0.04-0.09-0.118-0.363-0.183-0.428c-0.064-0.065-0.064-0.234,0.064-0.286c0.13-0.052,0.442-0.312,0.532-0.389c0.092-0.079,0.338-0.144,0.261-0.248c-0.078-0.104-0.104-0.168-0.104-0.247s0.078-0.052,0.117,0s0.194-0.078,0.155-0.143c-0.038-0.064-0.026-0.155,0.065-0.143c0.091,0.013,0.116-0.065,0.078-0.117c-0.039-0.052,0.091-0.117,0.182-0.091c0.092,0.026,0.325-0.013,0.364-0.065c0.038-0.052-0.078-0.104-0.078-0.208c0-0.104,0.155-0.195,0.247-0.208c0.091-0.013,0.207,0,0.221-0.039c0.012-0.039,0.143-0.143,0.155-0.052c0.014,0.091,0,0.247,0.104,0.247c0.104,0,0.232-0.117,0.272-0.129c0.038-0.013,0.286-0.065,0.338-0.078c0.052-0.013,0.363-0.039,0.325-0.13c-0.039-0.09-0.078-0.181-0.118-0.22c-0.039-0.039-0.077,0.013-0.13,0.078c-0.051,0.065-0.143,0.065-0.168,0.013c-0.026-0.051,0.012-0.207-0.078-0.156c-0.092,0.052-0.104,0.104-0.157,0.078c-0.052-0.026-0.103-0.117-0.103-0.117s0.129-0.064,0.038-0.182c-0.09-0.117-0.221-0.091-0.35-0.025c-0.13,0.064-0.118,0.051-0.273,0.09s-0.234,0.078-0.234,0.078s0.209-0.129,0.299-0.208c0.091-0.078,0.209-0.117,0.286-0.195c0.078-0.078,0.285,0.039,0.285,0.039s0.105-0.104,0.105-0.039s-0.027,0.234,0.051,0.234c0.079,0,0.299-0.104,0.21-0.131c-0.093-0.026,0.129,0,0.219-0.065c0.092-0.065,0.194-0.065,0.247-0.09c0.052-0.026,0.092-0.143,0.182-0.143c0.092,0,0.13,0.117,0,0.195s-0.143,0.273-0.208,0.325c-0.064,0.052-0.026,0.117,0.078,0.104c0.104-0.013,0.194,0.013,0.286-0.013s0.143,0.026,0.168,0.065c0.026,0.039,0.104-0.039,0.104-0.039s0.169-0.039,0.221,0.026c0.053,0.064,0.092-0.039,0.053-0.104c-0.039-0.064-0.092-0.129-0.13-0.208c-0.039-0.078-0.091-0.104-0.194-0.078c-0.104,0.026-0.13-0.026-0.195-0.064c-0.065-0.04-0.118,0.052-0.065-0.04c0.053-0.09,0.078-0.117,0.117-0.195c0.039-0.078,0.209-0.221,0.039-0.259c-0.169-0.04-0.222-0.065-0.247-0.143c-0.026-0.078-0.221-0.221-0.272-0.221c-0.053,0-0.233,0-0.247-0.065c-0.013-0.065-0.143-0.208-0.208-0.273c-0.064-0.065-0.312-0.351-0.351-0.377c-0.039-0.026-0.091-0.013-0.208,0.143c-0.116,0.157-0.22,0.183-0.312,0.144c-0.091-0.039-0.104-0.026-0.193-0.13c-0.093-0.104,0.09-0.117,0.051-0.182c-0.04-0.064-0.247-0.091-0.377-0.104c-0.13-0.013-0.221-0.156-0.416-0.169c-0.194-0.013-0.428,0.026-0.493,0.026c-0.064,0-0.064,0.091-0.09,0.234c-0.027,0.143,0.09,0.182-0.027,0.208c-0.116,0.026-0.169,0.039-0.052,0.091c0.117,0.052,0.273,0.26,0.273,0.26s0,0.117-0.092,0.182c-0.09,0.065-0.182,0.13-0.233,0.053c-0.053-0.079-0.195-0.065-0.155,0.013c0.038,0.078,0.116,0.117,0.116,0.195c0,0.077,0.117,0.272,0.039,0.337c-0.078,0.065-0.168,0.014-0.233,0.026s-0.131-0.104-0.078-0.13c0.051-0.026-0.014-0.221-0.014-0.221s-0.155,0.221-0.143,0.104c0.014-0.117-0.064-0.13-0.064-0.221c0-0.091-0.079-0.13-0.194-0.104c-0.118,0.026-0.26-0.04-0.482-0.079c-0.22-0.039-0.311-0.064-0.493-0.156c-0.182-0.091-0.247-0.026-0.338-0.013c-0.091,0.013-0.052-0.182-0.169-0.207c-0.116-0.027-0.181,0.025-0.207-0.144c-0.026-0.168,0.039-0.208,0.324-0.39c0.286-0.182,0.247-0.26,0.468-0.286c0.22-0.026,0.325,0.026,0.325-0.039s0.052-0.325,0.052-0.195S16.95,9.109,16.832,9.2c-0.116,0.091-0.052,0.104,0.04,0.104c0.091,0,0.259-0.091,0.259-0.091s0.208-0.091,0.26-0.013c0.053,0.078,0.053,0.156,0.144,0.156s0.285-0.104,0.116-0.195c-0.168-0.091-0.272-0.078-0.376-0.182s-0.078-0.065-0.195-0.039c-0.116,0.026-0.116-0.039-0.156-0.039s-0.104,0.026-0.13-0.026c-0.025-0.052,0.014-0.065,0.145-0.065c0.129,0,0.285,0.039,0.285,0.039s0.155-0.052,0.194-0.065c0.039-0.013,0.247-0.039,0.208-0.155c-0.04-0.117-0.169-0.117-0.208-0.156s0.078-0.09,0.143-0.117c0.065-0.026,0.247,0,0.247,0s0.117,0.013,0.117-0.039S17.897,8.2,17.976,8.239s0,0.156,0.117,0.13c0.116-0.026,0.143,0,0.207,0.039c0.065,0.039-0.013,0.195-0.077,0.221c-0.065,0.025-0.169,0.077-0.026,0.09c0.144,0.014,0.246,0.014,0.246,0.014s0.092-0.091,0.131-0.169c0.038-0.078,0.104-0.026,0.155,0c0.052,0.025,0.247,0.065,0.065,0.117c-0.183,0.052-0.221,0.117-0.26,0.182c-0.038,0.065-0.053,0.104-0.221,0.065c-0.17-0.039-0.26-0.026-0.299,0.039c-0.039,0.064-0.013,0.273,0.053,0.247c0.063-0.026,0.129-0.026,0.207-0.052c0.078-0.026,0.39,0.026,0.467,0.013c0.078-0.013,0.209,0.13,0.248,0.104c0.039-0.026,0.117,0.052,0.194,0.104c0.078,0.052,0.052-0.117,0.194-0.013c0.144,0.104,0.065,0.104,0.144,0.104c0.076,0,0.246,0.013,0.246,0.013s0.014-0.129,0.144-0.104c0.13,0.026,0.245,0.169,0.232,0.064c-0.012-0.103,0.013-0.181-0.09-0.259c-0.104-0.078-0.272-0.13-0.299-0.169c-0.026-0.039-0.052-0.091-0.013-0.117c0.039-0.025,0.221,0.013,0.324,0.079c0.104,0.065,0.195,0.13,0.273,0.078c0.077-0.052,0.17-0.078,0.208-0.117c0.038-0.04,0.13-0.156,0.13-0.156s-0.391-0.051-0.441-0.117c-0.053-0.065-0.235-0.156-0.287-0.156s-0.194,0.091-0.246-0.039s-0.052-0.286-0.105-0.299c-0.05-0.013-0.597-0.091-0.674-0.13c-0.078-0.039-0.39-0.13-0.507-0.195s-0.286-0.156-0.389-0.156c-0.104,0-0.533,0.052-0.611,0.039c-0.078-0.013-0.312,0.026-0.403,0.039c-0.091,0.013,0.117,0.182-0.077,0.221c-0.195,0.039-0.169,0.065-0.13-0.13c0.038-0.195-0.131-0.247-0.299-0.169c-0.169,0.078-0.442,0.13-0.377,0.221c0.065,0.091-0.012,0.157,0.117,0.247c0.13,0.091,0.183,0.117,0.35,0.104c0.17-0.013,0.339,0.025,0.339,0.025s0,0.157-0.064,0.182c-0.065,0.026-0.169,0.026-0.196,0.104c-0.025,0.078-0.155,0.117-0.155,0.078s0.065-0.169-0.026-0.234c-0.09-0.065-0.117-0.078-0.221-0.013c-0.104,0.065-0.116,0.091-0.169-0.013C16.053,8.291,15.897,8.2,15.897,8.2s-0.104-0.129-0.182-0.194c-0.077-0.065-0.22-0.052-0.234,0.013c-0.013,0.064,0.026,0.129,0.078,0.247c0.052,0.117,0.104,0.337,0.013,0.351c-0.091,0.013-0.104,0.026-0.195,0.052c-0.091,0.026-0.13-0.039-0.13-0.143s-0.04-0.195-0.013-0.234c0.026-0.039-0.104,0.027-0.234,0c-0.13-0.025-0.233,0.052-0.104,0.092c0.13,0.039,0.157,0.194,0.039,0.233c-0.117,0.039-0.559,0-0.702,0s-0.35,0.039-0.39-0.039c-0.039-0.078,0.118-0.129,0.208-0.129c0.091,0,0.363,0.012,0.467-0.13c0.104-0.143-0.13-0.169-0.233-0.169c-0.104,0-0.183-0.039-0.299-0.155c-0.118-0.117,0.078-0.195,0.052-0.247c-0.026-0.052-0.156-0.014-0.272-0.014c-0.117,0-0.299-0.09-0.299,0.014c0,0.104,0.143,0.402,0.052,0.337c-0.091-0.064-0.078-0.156-0.143-0.234c-0.065-0.078-0.168-0.065-0.299-0.052c-0.129,0.013-0.35,0.052-0.415,0.039c-0.064-0.013-0.013-0.013-0.156-0.078c-0.142-0.065-0.208-0.052-0.312-0.117C12.091,7.576,12.182,7.551,12,7.538c-0.181-0.013-0.168,0.09-0.35,0.065c-0.182-0.026-0.234,0.013-0.416,0c-0.182-0.013-0.272-0.026-0.299,0.065c-0.025,0.091-0.078,0.247-0.156,0.247c-0.077,0-0.169,0.091,0.078,0.104c0.247,0.013,0.105,0.129,0.325,0.117c0.221-0.013,0.416-0.013,0.468-0.117c0.052-0.104,0.091-0.104,0.117-0.065c0.025,0.039,0.22,0.272,0.22,0.272s0.131,0.104,0.183,0.13c0.051,0.026-0.052,0.143-0.156,0.078c-0.104-0.065-0.299-0.051-0.377-0.116c-0.078-0.065-0.429-0.065-0.52-0.052c-0.09,0.013-0.247-0.039-0.299-0.039c-0.051,0-0.221,0.13-0.221,0.13S10.532,8.252,10.494,8.2c-0.039-0.052-0.104,0.052-0.156,0.065c-0.052,0.013-0.208-0.104-0.364-0.052C9.818,8.265,9.87,8.317,9.649,8.304s-0.272-0.052-0.35-0.039C9.22,8.278,9.22,8.278,9.22,8.278S9.233,8.33,9.143,8.382C9.052,8.434,8.986,8.499,8.921,8.421C8.857,8.343,8.818,8.343,8.779,8.33c-0.04-0.013-0.118-0.078-0.286-0.04C8.324,8.33,8.064,8.239,8.013,8.239c-0.04,0-0.313-0.015-0.491-0.033c2.109-2.292,5.124-3.74,8.478-3.74c2.128,0,4.117,0.589,5.83,1.598c-0.117,0.072-0.319,0.06-0.388,0.023c-0.078-0.043-0.158-0.078-0.475-0.061c-0.317,0.018-0.665,0.122-0.595,0.226c0.072,0.104-0.142,0.165-0.197,0.113c-0.055-0.052-0.309,0.06-0.293,0.165c0.016,0.104-0.039,0.225-0.175,0.199c-0.134-0.027-0.229,0.06-0.237,0.146c-0.007,0.087-0.309,0.147-0.332,0.147c-0.024,0-0.412-0.008-0.27,0.095c0.097,0.069,0.15,0.027,0.27,0.052c0.119,0.026,0.214,0.217,0.277,0.243c0.062,0.026,0.15,0,0.189-0.052c0.04-0.052,0.095-0.234,0.095-0.234s0,0.173,0.097,0.208c0.095,0.035,0.331-0.026,0.395-0.017c0.064,0.008,0.437,0.061,0.538,0.112c0.104,0.052,0.356,0.087,0.428,0.199c0.071,0.113,0.08,0.503,0.119,0.546c0.04,0.043,0.174-0.139,0.205-0.182c0.031-0.044,0.198-0.018,0.254,0.042c0.056,0.061,0.182,0.208,0.175,0.269C21.9,8.365,21.877,8.459,21.83,8.425c-0.048-0.034-0.127-0.025-0.096-0.095c0.032-0.069,0.048-0.217-0.015-0.217c-0.064,0-0.119,0-0.119,0s-0.12-0.035-0.199,0.095s-0.015,0.26,0.04,0.26s0.184,0,0.184,0.034c0,0.035-0.136,0.139-0.128,0.2c0.009,0.061,0.11,0.268,0.144,0.312c0.031,0.043,0.197,0.086,0.244,0.096c0.049,0.008-0.111,0.017-0.07,0.077c0.04,0.061,0.102,0.208,0.189,0.243c0.087,0.035,0.333,0.19,0.363,0.26c0.032,0.069,0.222-0.052,0.262-0.061c0.04-0.008,0.032,0.182,0.143,0.191c0.11,0.008,0.15-0.018,0.245-0.096s0.072-0.182,0.079-0.26c0.009-0.078,0-0.138,0.104-0.113c0.104,0.026,0.158-0.018,0.15-0.104c-0.008-0.087-0.095-0.191,0.07-0.217c0.167-0.026,0.254-0.138,0.357-0.138c0.103,0,0.389,0.043,0.419,0c0.032-0.043,0.167-0.243,0.254-0.251c0.067-0.007,0.224-0.021,0.385-0.042c1.582,1.885,2.561,4.284,2.673,6.905c-0.118,0.159-0.012,0.305,0.021,0.408c0.001,0.03,0.005,0.058,0.005,0.088c0,0.136-0.016,0.269-0.021,0.404C27.512,16.406,27.512,16.408,27.51,16.41zM17.794,12.084c-0.064,0.013-0.169-0.052-0.169-0.143s-0.091,0.169-0.04,0.247c0.053,0.078-0.104,0.169-0.155,0.169s-0.091-0.116-0.078-0.233c0.014-0.117-0.077-0.221-0.221-0.208c-0.143,0.014-0.208,0.13-0.259,0.169c-0.053,0.039-0.053,0.259-0.04,0.312s0.013,0.235-0.116,0.221c-0.118-0.013-0.092-0.233-0.079-0.312c0.014-0.078-0.039-0.273,0.014-0.376c0.053-0.104,0.207-0.143,0.312-0.156s0.324,0.065,0.363,0.052c0.04-0.014,0.222-0.014,0.312,0C17.729,11.837,17.858,12.071,17.794,12.084zM18.027,12.123c0.04,0.026,0.311-0.039,0.364,0.026c0.051,0.065-0.054,0.078-0.183,0.13c-0.129,0.052-0.169,0.039-0.221,0.104s-0.221,0.09-0.299,0.168c-0.078,0.079-0.217,0.125-0.246,0.065c-0.04-0.078,0.013-0.039,0.025-0.078c0.013-0.039,0.245-0.129,0.245-0.129S17.988,12.097,18.027,12.123zM16.988,11.668c-0.038,0.013-0.182-0.026-0.3-0.026c-0.116,0-0.091-0.078-0.143-0.064c-0.051,0.013-0.168,0.039-0.247,0.078c-0.078,0.039-0.208,0.03-0.208-0.04c0-0.104,0.052-0.078,0.221-0.143c0.169-0.065,0.352-0.247,0.429-0.169c0.078,0.078,0.221,0.169,0.312,0.182C17.144,11.5,17.026,11.655,16.988,11.668zM15.659,7.637c-0.079,0.026-0.347,0.139-0.321,0.199c0.01,0.023,0.078,0.069,0.19,0.052c0.113-0.018,0.276-0.035,0.355-0.043c0.078-0.009,0.095-0.139,0.009-0.147C15.805,7.689,15.736,7.611,15.659,7.637zM14.698,7.741c-0.061,0.026-0.243-0.043-0.338,0.018c-0.061,0.038-0.026,0.164,0.07,0.172c0.095,0.009,0.259-0.06,0.276-0.008c0.018,0.052,0.078,0.286,0.234,0.208c0.156-0.078,0.147-0.147,0.19-0.156c0.043-0.009-0.008-0.199-0.078-0.243C14.983,7.689,14.758,7.715,14.698,7.741zM14.385,7.005c0.017,0.044-0.008,0.078,0.113,0.095c0.121,0.018,0.173,0.035,0.243,0.035c0.069,0,0.042-0.113-0.018-0.19c-0.061-0.078-0.043-0.069-0.199-0.113c-0.156-0.043-0.312-0.043-0.416-0.035c-0.104,0.009-0.217-0.017-0.243,0.104c-0.013,0.062,0.07,0.112,0.174,0.112S14.368,6.962,14.385,7.005zM14.611,7.481c0.043,0.095,0.043,0.051,0.165,0.061C14.896,7.551,14.991,7.421,15,7.378c0.009-0.044-0.061-0.13-0.225-0.113c-0.165,0.017-0.667-0.026-0.736,0.034c-0.066,0.058,0,0.233-0.026,0.251c-0.026,0.017,0.009,0.095,0.077,0.078c0.069-0.017,0.104-0.182,0.157-0.182C14.299,7.447,14.568,7.386,14.611,7.481zM12.982,7.126c0.052,0.043,0.183,0.008,0.173-0.035c-0.008-0.043,0.053-0.217-0.051-0.225C13,6.858,12.854,6.962,12.697,7.014c-0.101,0.033-0.078,0.13-0.009,0.13S12.931,7.083,12.982,7.126zM13.72,7.282c-0.087,0.043-0.114,0.069-0.191,0.052c-0.078-0.017-0.078-0.156-0.217-0.13c-0.138,0.026-0.164,0.104-0.207,0.139s-0.139,0.061-0.173,0.043c-0.034-0.017-0.234-0.129-0.234-0.129s-0.416-0.018-0.433-0.07c-0.017-0.052-0.086-0.138-0.277-0.121s-0.52,0.13-0.572,0.13c-0.052,0,0.062,0.104-0.009,0.104c-0.069,0-0.155-0.008-0.181,0.069c-0.018,0.053,0.078,0.052,0.189,0.052c0.112,0,0.295,0,0.347-0.026c0.052-0.026,0.312-0.087,0.303-0.009c-0.009,0.079,0.104,0.199,0.164,0.182c0.061-0.017,0.183-0.13,0.243-0.086c0.061,0.043,0.07,0.146,0.13,0.173c0.061,0.025,0.226,0.025,0.304,0c0.077-0.027,0.294-0.027,0.389-0.009c0.095,0.018,0.373,0.069,0.399,0.018c0.026-0.053,0.104-0.061,0.112-0.113s0.051-0.216,0.051-0.216S13.806,7.239,13.72,7.282zM18.105,16.239c-0.119,0.021-0.091,0.252,0.052,0.21C18.3,16.407,18.223,16.217,18.105,16.239zM19.235,15.929c-0.104-0.026-0.221,0-0.299,0.013c-0.078,0.013-0.299,0.208-0.299,0.208s0.143,0.026,0.233,0.026c0.092,0,0.144,0.051,0.221,0.09c0.078,0.04,0.221-0.052,0.272-0.052c0.053,0,0.118,0.156,0.131-0.013C19.508,16.032,19.339,15.955,19.235,15.929zM15.616,7.507c-0.043-0.104-0.259-0.139-0.304-0.035C15.274,7.563,15.659,7.611,15.616,7.507zM18.093,15.292c0.143-0.026,0.064-0.144-0.053-0.13C17.922,15.175,17.949,15.318,18.093,15.292zM19.82,16.095c-0.119,0.022-0.092,0.253,0.051,0.211C20.015,16.264,19.937,16.074,19.82,16.095zM18.247,15.708c-0.09,0.013-0.285-0.09-0.389-0.182c-0.104-0.091-0.299-0.091-0.377-0.091c-0.077,0-0.39,0.091-0.39,0.091c-0.013,0.13,0.117,0.091,0.273,0.091s0.429-0.026,0.479,0.039c0.053,0.064,0.286,0.168,0.352,0.221c0.064,0.052,0.272,0.065,0.285,0.013S18.338,15.695,18.247,15.708zM16.698,7.412c-0.13-0.009-0.295-0.009-0.399,0c-0.104,0.008-0.182-0.069-0.26-0.113c-0.077-0.043-0.251-0.182-0.354-0.199c-0.104-0.017-0.086-0.017-0.303-0.069c-0.11-0.027-0.294-0.061-0.294-0.086c0-0.026-0.052,0.121,0.043,0.165c0.095,0.043,0.251,0.121,0.363,0.164c0.114,0.043,0.329,0.052,0.399,0.139c0.069,0.086,0.303,0.156,0.303,0.156l0.277,0.026c0,0,0.191-0.043,0.39-0.026c0.199,0.017,0.493,0.043,0.659,0.035c0.163-0.008,0.189-0.061,0.208-0.095c0.016-0.035-0.304-0.104-0.383-0.095C17.271,7.42,16.827,7.42,16.698,7.412zM17.182,9.404c-0.034,0.039,0.157,0.095,0.191,0.043C17.407,9.396,17.271,9.309,17.182,9.404zM17.764,9.585c0.086-0.035,0.043-0.139-0.079-0.104C17.547,9.521,17.676,9.62,17.764,9.585z");
}}),draw2d.shape.icon.Warning=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Warning",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.225,23.567l-3.778-6.542c-1.139-1.972-3.002-5.2-4.141-7.172l-3.778-6.542c-1.14-1.973-3.003-1.973-4.142,0L9.609,9.853c-1.139,1.972-3.003,5.201-4.142,7.172L1.69,23.567c-1.139,1.974-0.207,3.587,2.071,3.587h23.391C29.432,27.154,30.363,25.541,29.225,23.567zM16.536,24.58h-2.241v-2.151h2.241V24.58zM16.428,20.844h-2.023l-0.201-9.204h2.407L16.428,20.844z")}}),draw2d.shape.icon.Code=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Code",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M8.982,7.107L0.322,15.77l8.661,8.662l3.15-3.15L6.621,15.77l5.511-5.511L8.982,7.107zM21.657,7.107l-3.148,3.151l5.511,5.511l-5.511,5.511l3.148,3.15l8.662-8.662L21.657,7.107z")}}),draw2d.shape.icon.Pensil=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Pensil",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.31,2.872l-3.384-2.127c-0.854-0.536-1.979-0.278-2.517,0.576l-1.334,2.123l6.474,4.066l1.335-2.122C26.42,4.533,26.164,3.407,25.31,2.872zM6.555,21.786l6.474,4.066L23.581,9.054l-6.477-4.067L6.555,21.786zM5.566,26.952l-0.143,3.819l3.379-1.787l3.14-1.658l-6.246-3.925L5.566,26.952z")}}),draw2d.shape.icon.Pen=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Pen",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M13.587,12.074c-0.049-0.074-0.11-0.147-0.188-0.202c-0.333-0.243-0.803-0.169-1.047,0.166c-0.244,0.336-0.167,0.805,0.167,1.048c0.303,0.22,0.708,0.167,0.966-0.091l-7.086,9.768l-2.203,7.997l6.917-4.577L26.865,4.468l-4.716-3.42l-1.52,2.096c-0.087-0.349-0.281-0.676-0.596-0.907c-0.73-0.529-1.751-0.369-2.28,0.363C14.721,6.782,16.402,7.896,13.587,12.074zM10.118,25.148L6.56,27.503l1.133-4.117L10.118,25.148zM14.309,11.861c2.183-3.225,1.975-4.099,3.843-6.962c0.309,0.212,0.664,0.287,1.012,0.269L14.309,11.861z")}}),draw2d.shape.icon.Plus=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Plus",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.979,12.896 19.312,12.896 19.312,6.229 12.647,6.229 12.647,12.896 5.979,12.896 5.979,19.562 12.647,19.562 12.647,26.229 19.312,26.229 19.312,19.562 25.979,19.562z")}}),draw2d.shape.icon.Minus=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Minus",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.979,12.896,5.979,12.896,5.979,19.562,25.979,19.562z")}}),draw2d.shape.icon.TShirt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.TShirt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.1,4.039c-0.681,1.677-2.32,2.862-4.24,2.862c-1.921,0-3.56-1.185-4.24-2.862L1.238,8.442l2.921,6.884l3.208-1.361V28h17.099V14.015l3.093,1.312l2.922-6.884L20.1,4.039z")}}),draw2d.shape.icon.Sticker=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Sticker",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,1.999c-1.042,0-1.916,0.377-2.57,1.088L2.895,13.138C2.302,13.784,1.999,14.58,1.999,15.5C1.999,22.943,8.057,29,15.5,29S29,22.943,29,15.5S22.943,1.999,15.5,1.999zM15.5,28C8.596,28,3,22.404,3,15.5c0-3.452,5.239-2.737,7.501-4.999C12.762,8.239,12.048,3,15.5,3C22.404,3,28,8.597,28,15.5S22.404,28,15.5,28z")}}),draw2d.shape.icon.Page2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Page2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM22.157,6.545c0.805,0.786,1.529,1.676,2.069,2.534c-0.468-0.185-0.959-0.322-1.42-0.431c-1.015-0.228-2.008-0.32-2.625-0.357c0.003-0.133,0.004-0.283,0.004-0.446c0-0.869-0.055-2.108-0.356-3.2c-0.003-0.01-0.005-0.02-0.009-0.03C20.584,5.119,21.416,5.788,22.157,6.545zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z")}}),draw2d.shape.icon.Page=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Page",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z")}}),draw2d.shape.icon.Landscape1=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Landscape1",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M19.883,5.71H2.746c-0.163,0-0.319,0.071-0.435,0.188c-0.118,0.117-0.18,0.272-0.18,0.435v18.364c0,0.164,0.063,0.318,0.18,0.436c0.123,0.117,0.287,0.18,0.435,0.18h25.75c0.164,0,0.324-0.066,0.438-0.18c0.118-0.114,0.182-0.273,0.182-0.436V14.551c-0.002-0.102-0.01-0.188-0.021-0.271c-0.186-1.543-1.543-3.424-3.236-5.168C24.039,7.31,21.869,5.753,19.883,5.71zM26.914,12.314c-0.008-0.005-0.019-0.007-0.029-0.01c-1.092-0.293-2.33-0.355-3.199-0.355c-0.162,0-0.312,0.002-0.445,0.004c-0.037-0.604-0.129-1.604-0.356-2.625c-0.11-0.461-0.246-0.94-0.433-1.42c0.857,0.541,1.748,1.264,2.535,2.068C25.74,10.718,26.41,11.551,26.914,12.314zM3.365,6.947h16.517c0.058,0,0.12,0,0.183,0.004c0.694,0.105,1.307,1.221,1.616,2.646c0.335,1.484,0.354,2.997,0.354,3l0.007,0.656l0.651-0.051c0,0,0.398-0.027,0.99-0.025c0.809,0,1.977,0.062,2.871,0.312c0.939,0.275,1.352,0.635,1.326,1.051h0.002v9.542H3.365V6.951V6.947z")}}),draw2d.shape.icon.Landscape2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Landscape2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M19.883,5.71H2.746c-0.163,0-0.319,0.071-0.435,0.188c-0.118,0.117-0.18,0.272-0.18,0.435v18.364c0,0.164,0.063,0.318,0.18,0.436c0.123,0.117,0.287,0.18,0.435,0.18h25.75c0.164,0,0.324-0.066,0.438-0.18c0.118-0.114,0.182-0.273,0.182-0.436V14.551c-0.002-0.102-0.01-0.188-0.021-0.271c-0.186-1.543-1.543-3.424-3.236-5.168C24.039,7.31,21.869,5.753,19.883,5.71zM3.365,6.947h16.517c0.058,0,0.12,0,0.183,0.004c0.694,0.105,1.307,1.221,1.616,2.646c0.335,1.484,0.354,2.997,0.354,3l0.007,0.656l0.651-0.051c0,0,0.398-0.027,0.99-0.025c0.809,0,1.977,0.062,2.871,0.312c0.939,0.275,1.352,0.635,1.326,1.051h0.002v9.542H3.365V6.951V6.947z")}}),draw2d.shape.icon.Plugin=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Plugin",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.33,15.836l-3.893-1.545l3.136-7.9c0.28-0.705-0.064-1.505-0.771-1.785c-0.707-0.28-1.506,0.065-1.785,0.771l-3.136,7.9l-4.88-1.937l3.135-7.9c0.281-0.706-0.064-1.506-0.77-1.786c-0.706-0.279-1.506,0.065-1.785,0.771l-3.136,7.9L8.554,8.781l-1.614,4.066l2.15,0.854l-2.537,6.391c-0.61,1.54,0.143,3.283,1.683,3.895l1.626,0.646L8.985,26.84c-0.407,1.025,0.095,2.188,1.122,2.596l0.93,0.369c1.026,0.408,2.188-0.095,2.596-1.121l0.877-2.207l1.858,0.737c1.54,0.611,3.284-0.142,3.896-1.682l2.535-6.391l1.918,0.761L26.33,15.836z")}}),draw2d.shape.icon.Bookmark=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Bookmark",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M17.396,1.841L6.076,25.986l7.341-4.566l1.186,8.564l11.32-24.146L17.396,1.841zM19.131,9.234c-0.562-0.264-0.805-0.933-0.541-1.495c0.265-0.562,0.934-0.805,1.496-0.541s0.805,0.934,0.541,1.496S19.694,9.498,19.131,9.234z")}}),draw2d.shape.icon.Hammer=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Hammer",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M7.831,29.354c0.685,0.353,1.62,1.178,2.344,0.876c0.475-0.195,0.753-1.301,1.048-1.883c2.221-4.376,4.635-9.353,6.392-13.611c0-0.19,0.101-0.337-0.049-0.595c0.983-1.6,1.65-3.358,2.724-5.138c0.34-0.566,0.686-1.351,1.163-1.577l0.881-0.368c1.12-0.288,1.938-0.278,2.719,0.473c0.396,0.383,0.578,1.015,0.961,1.395c0.259,0.26,1.246,0.899,1.613,0.8c0.285-0.077,0.52-0.364,0.72-0.728l0.696-1.286c0.195-0.366,0.306-0.718,0.215-0.999c-0.117-0.362-1.192-0.84-1.552-0.915c-0.528-0.113-1.154,0.081-1.692-0.041c-1.057-0.243-1.513-0.922-1.883-2.02c-2.608-1.533-6.119-2.53-10.207-1.244c-1.109,0.349-2.172,0.614-2.901,1.323c-0.146,0.412,0.143,0.494,0.446,0.489c-0.237,0.216-0.62,0.341-0.399,0.848c2.495-1.146,7.34-1.542,7.669,0.804c0.072,0.522-0.395,1.241-0.682,1.835c-0.905,1.874-2.011,3.394-2.813,5.091c-0.298,0.017-0.366,0.18-0.525,0.287c-2.604,3.8-5.451,8.541-7.9,12.794c-0.326,0.566-1.098,1.402-1.002,1.906C5.961,28.641,7.146,29,7.831,29.354z")}}),draw2d.shape.icon.Users=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Users",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.053,20.8c-1.132-0.453-1.584-1.698-1.584-1.698s-0.51,0.282-0.51-0.51s0.51,0.51,1.02-2.548c0,0,1.414-0.397,1.132-3.68h-0.34c0,0,0.849-3.51,0-4.699c-0.85-1.189-1.189-1.981-3.058-2.548s-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.792-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.321s0.283,3.058,0.566,3.624l-0.337,0.113c-0.283,3.283,1.132,3.68,1.132,3.68c0.509,3.058,1.019,1.756,1.019,2.548s-0.51,0.51-0.51,0.51s-0.452,1.245-1.584,1.698c-1.132,0.452-7.416,2.886-7.927,3.396c-0.511,0.511-0.453,2.888-0.453,2.888h26.947c0,0,0.059-2.377-0.452-2.888C28.469,23.686,22.185,21.252,21.053,20.8zM8.583,20.628c-0.099-0.18-0.148-0.31-0.148-0.31s-0.432,0.239-0.432-0.432s0.432,0.432,0.864-2.159c0,0,1.199-0.336,0.959-3.119H9.538c0,0,0.143-0.591,0.237-1.334c-0.004-0.308,0.006-0.636,0.037-0.996l0.038-0.426c-0.021-0.492-0.107-0.939-0.312-1.226C8.818,9.619,8.53,8.947,6.947,8.467c-1.583-0.48-1.008-0.385-2.159-0.336C3.636,8.179,2.676,8.802,2.676,9.139c0,0-0.72,0.048-1.008,0.336c-0.271,0.271-0.705,1.462-0.757,1.885v0.281c0.047,0.653,0.258,2.449,0.469,2.872l-0.286,0.096c-0.239,2.783,0.959,3.119,0.959,3.119c0.432,2.591,0.864,1.488,0.864,2.159s-0.432,0.432-0.432,0.432s-0.383,1.057-1.343,1.439c-0.061,0.024-0.139,0.056-0.232,0.092v5.234h0.575c-0.029-1.278,0.077-2.927,0.746-3.594C2.587,23.135,3.754,22.551,8.583,20.628zM30.913,11.572c-0.04-0.378-0.127-0.715-0.292-0.946c-0.719-1.008-1.008-1.679-2.59-2.159c-1.584-0.48-1.008-0.385-2.16-0.336C24.72,8.179,23.76,8.802,23.76,9.139c0,0-0.719,0.048-1.008,0.336c-0.271,0.272-0.709,1.472-0.758,1.891h0.033l0.08,0.913c0.02,0.231,0.022,0.436,0.027,0.645c0.09,0.666,0.21,1.35,0.33,1.589l-0.286,0.096c-0.239,2.783,0.96,3.119,0.96,3.119c0.432,2.591,0.863,1.488,0.863,2.159s-0.432,0.432-0.432,0.432s-0.053,0.142-0.163,0.338c4.77,1.9,5.927,2.48,6.279,2.834c0.67,0.667,0.775,2.315,0.746,3.594h0.48v-5.306c-0.016-0.006-0.038-0.015-0.052-0.021c-0.959-0.383-1.343-1.439-1.343-1.439s-0.433,0.239-0.433-0.432s0.433,0.432,0.864-2.159c0,0,0.804-0.229,0.963-1.841v-1.227c-0.001-0.018-0.001-0.033-0.003-0.051h-0.289c0,0,0.215-0.89,0.292-1.861V11.572z")}}),draw2d.shape.icon.User=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.User",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.771,12.364c0,0,0.849-3.51,0-4.699c-0.85-1.189-1.189-1.981-3.058-2.548s-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.792-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.321s0.283,3.058,0.566,3.624l-0.337,0.113c-0.283,3.283,1.132,3.68,1.132,3.68c0.509,3.058,1.019,1.756,1.019,2.548s-0.51,0.51-0.51,0.51s-0.452,1.245-1.584,1.698c-1.132,0.452-7.416,2.886-7.927,3.396c-0.511,0.511-0.453,2.888-0.453,2.888h26.947c0,0,0.059-2.377-0.452-2.888c-0.512-0.511-6.796-2.944-7.928-3.396c-1.132-0.453-1.584-1.698-1.584-1.698s-0.51,0.282-0.51-0.51s0.51,0.51,1.02-2.548c0,0,1.414-0.397,1.132-3.68H20.771z")}}),draw2d.shape.icon.Customer=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Customer",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h12.036l0.878-3.459l-0.781-0.781l1.344-1.344l1.344,1.344l-0.781,0.781l0.879,3.459h12.035C28.977,26.709,29.039,24.332,28.523,23.813z")}}),draw2d.shape.icon.Employee=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Employee",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h26.954C28.977,26.709,29.039,24.332,28.523,23.813zM22.188,26.062h-4.562v-1.25h4.562V26.062z")}}),draw2d.shape.icon.Anonymous=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Anonymous",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.523,23.813c-0.518-0.51-6.795-2.938-7.934-3.396c-1.132-0.451-1.584-1.697-1.584-1.697s-0.51,0.282-0.51-0.51c0-0.793,0.51,0.51,1.021-2.548c0,0,1.414-0.397,1.133-3.68l-0.338,0.001c0,0,0.85-3.511,0-4.699c-0.854-1.188-1.188-1.981-3.062-2.548c-1.869-0.567-1.188-0.454-2.547-0.396c-1.359,0.057-2.492,0.793-2.492,1.188c0,0-0.849,0.057-1.188,0.397c-0.34,0.34-0.906,1.924-0.906,2.32s0.283,3.059,0.566,3.624l-0.337,0.112c-0.283,3.283,1.132,3.681,1.132,3.681c0.509,3.058,1.019,1.755,1.019,2.548c0,0.792-0.51,0.51-0.51,0.51s-0.452,1.246-1.584,1.697c-1.132,0.453-7.416,2.887-7.927,3.396c-0.511,0.521-0.453,2.896-0.453,2.896h26.954C28.977,26.709,29.039,24.332,28.523,23.813zM16.618,13.693c-0.398-0.251-0.783-1.211-0.783-1.64c0-0.133,0-0.236,0-0.236c-0.105-0.106-0.574-0.096-0.67,0c0,0,0,0.104,0,0.236c0,0.429-0.385,1.389-0.783,1.64c-0.399,0.251-1.611,0.237-2.084-0.236c-0.473-0.473-0.524-1.663-0.643-1.78c-0.118-0.119-0.185-0.185-0.185-0.185l0.029-0.414c0,0,0.842-0.207,1.699-0.207s1.803,0.502,1.803,0.502c0.231-0.074,0.784-0.083,0.996,0c0,0,0.945-0.502,1.803-0.502s1.699,0.207,1.699,0.207l0.029,0.414c0,0-0.066,0.066-0.185,0.185c-0.118,0.118-0.169,1.308-0.643,1.78C18.229,13.93,17.018,13.944,16.618,13.693z")}}),draw2d.shape.icon.Skull=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Skull",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.947,11.14c0-5.174-3.979-9.406-10.613-9.406c-6.633,0-10.282,4.232-10.282,9.406c0,5.174,1.459,4.511,1.459,7.43c0,1.095-1.061,0.564-1.061,2.919c0,2.587,3.615,2.223,4.677,3.283c1.061,1.062,0.961,3.019,0.961,3.019s0.199,0.796,0.564,0.563c0,0,0.232,0.564,0.498,0.232c0,0,0.265,0.563,0.531,0.1c0,0,0.265,0.631,0.696,0.166c0,0,0.431,0.63,0.929,0.133c0,0,0.564,0.53,1.194,0.133c0.63,0.397,1.194-0.133,1.194-0.133c0.497,0.497,0.929-0.133,0.929-0.133c0.432,0.465,0.695-0.166,0.695-0.166c0.268,0.464,0.531-0.1,0.531-0.1c0.266,0.332,0.498-0.232,0.498-0.232c0.365,0.232,0.564-0.563,0.564-0.563s-0.1-1.957,0.961-3.019c1.062-1.061,4.676-0.696,4.676-3.283c0-2.354-1.061-1.824-1.061-2.919C24.488,15.651,25.947,16.314,25.947,11.14zM10.333,20.992c-1.783,0.285-2.59-0.215-2.785-1.492c-0.508-3.328,2.555-3.866,4.079-3.683c0.731,0.088,1.99,0.862,1.99,1.825C13.617,20.229,11.992,20.727,10.333,20.992zM16.461,25.303c-0.331,0-0.862-0.431-0.895-1.227c-0.033,0.796-0.63,1.227-0.961,1.227c-0.332,0-0.83-0.331-0.863-1.127c-0.033-0.796,1.028-4.013,1.792-4.013c0.762,0,1.824,3.217,1.791,4.013S16.794,25.303,16.461,25.303zM23.361,19.5c-0.195,1.277-1.004,1.777-2.787,1.492c-1.658-0.266-3.283-0.763-3.283-3.35c0-0.963,1.258-1.737,1.99-1.825C20.805,15.634,23.869,16.172,23.361,19.5z")}}),draw2d.shape.icon.Mail=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Mail",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.516,7.167H3.482l12.517,7.108L28.516,7.167zM16.74,17.303C16.51,17.434,16.255,17.5,16,17.5s-0.51-0.066-0.741-0.197L2.5,10.06v14.773h27V10.06L16.74,17.303z")}}),draw2d.shape.icon.Picture=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Picture",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M2.5,4.833v22.334h27V4.833H2.5zM25.25,25.25H6.75V6.75h18.5V25.25zM11.25,14c1.426,0,2.583-1.157,2.583-2.583c0-1.427-1.157-2.583-2.583-2.583c-1.427,0-2.583,1.157-2.583,2.583C8.667,12.843,9.823,14,11.25,14zM24.251,16.25l-4.917-4.917l-6.917,6.917L10.5,16.333l-2.752,2.752v5.165h16.503V16.25z")}}),draw2d.shape.icon.Bubble=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Bubble",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z")}}),draw2d.shape.icon.CodeTalk=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.CodeTalk",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM13.704,19.47l-2.338,2.336l-6.43-6.431l6.429-6.432l2.339,2.341l-4.091,4.091L13.704,19.47zM20.775,21.803l-2.337-2.339l4.092-4.09l-4.092-4.092l2.337-2.339l6.43,6.426L20.775,21.803z")}}),draw2d.shape.icon.Talkq=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Talkq",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM16.868,21.375h-1.969v-1.889h1.969V21.375zM16.772,18.094h-1.777l-0.176-8.083h2.113L16.772,18.094z")}}),draw2d.shape.icon.Talke=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Talke",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,4.938c-7.732,0-14,4.701-14,10.5c0,1.981,0.741,3.833,2.016,5.414L2,25.272l5.613-1.44c2.339,1.316,5.237,2.106,8.387,2.106c7.732,0,14-4.701,14-10.5S23.732,4.938,16,4.938zM16.982,21.375h-1.969v-1.889h1.969V21.375zM16.982,17.469v0.625h-1.969v-0.769c0-2.321,2.641-2.689,2.641-4.337c0-0.752-0.672-1.329-1.553-1.329c-0.912,0-1.713,0.672-1.713,0.672l-1.12-1.393c0,0,1.104-1.153,3.009-1.153c1.81,0,3.49,1.121,3.49,3.009C19.768,15.437,16.982,15.741,16.982,17.469z")}}),draw2d.shape.icon.Home=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Home",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.812,16l-3.062-3.062V5.625h-2.625v4.688L16,4.188L4.188,16L7,15.933v11.942h17.875V16H27.812zM16,26.167h-5.833v-7H16V26.167zM21.667,23.167h-3.833v-4.042h3.833V23.167z")}}),draw2d.shape.icon.Lock=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Lock",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.335,12.833V9.999h-0.001C22.333,6.501,19.498,3.666,16,3.666S9.666,6.502,9.666,10h0v2.833H7.375V25h17.25V12.833H22.335zM11.667,10C11.667,10,11.667,10,11.667,10c0-2.39,1.944-4.334,4.333-4.334c2.391,0,4.335,1.944,4.335,4.333c0,0,0,0,0,0v2.834h-8.668V10z")}}),draw2d.shape.icon.Clip=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Clip",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.898,6.135c-1.571-1.125-3.758-0.764-4.884,0.808l-8.832,12.331c-0.804,1.122-0.546,2.684,0.577,3.488c1.123,0.803,2.684,0.545,3.488-0.578l6.236-8.706l-0.813-0.583l-6.235,8.707h0c-0.483,0.672-1.42,0.828-2.092,0.347c-0.673-0.481-0.827-1.419-0.345-2.093h0l8.831-12.33l0.001-0.001l-0.002-0.001c0.803-1.119,2.369-1.378,3.489-0.576c1.12,0.803,1.379,2.369,0.577,3.489v-0.001l-9.68,13.516l0.001,0.001c-1.124,1.569-3.316,1.931-4.885,0.808c-1.569-1.125-1.93-3.315-0.807-4.885l7.035-9.822l-0.813-0.582l-7.035,9.822c-1.447,2.02-0.982,4.83,1.039,6.277c2.021,1.448,4.831,0.982,6.278-1.037l9.68-13.516C25.83,9.447,25.47,7.261,23.898,6.135z")}}),draw2d.shape.icon.Star=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Star",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,22.375L7.116,28.83l3.396-10.438l-8.883-6.458l10.979,0.002L16.002,1.5l3.391,10.434h10.981l-8.886,6.457l3.396,10.439L16,22.375L16,22.375z")}}),draw2d.shape.icon.StarOff=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.StarOff",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,22.375L7.116,28.83l3.396-10.438l-8.883-6.458l10.979,0.002L16.002,1.5l3.391,10.434h10.981l-8.886,6.457l3.396,10.439L16,22.375L16,22.375zM22.979,26.209l-2.664-8.205l6.979-5.062h-8.627L16,4.729l-2.666,8.206H4.708l6.979,5.07l-2.666,8.203L16,21.146L22.979,26.209L22.979,26.209z")}}),draw2d.shape.icon.Star2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Star2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.615,4.928c0.487-0.986,1.284-0.986,1.771,0l2.249,4.554c0.486,0.986,1.775,1.923,2.864,2.081l5.024,0.73c1.089,0.158,1.335,0.916,0.547,1.684l-3.636,3.544c-0.788,0.769-1.28,2.283-1.095,3.368l0.859,5.004c0.186,1.085-0.459,1.553-1.433,1.041l-4.495-2.363c-0.974-0.512-2.567-0.512-3.541,0l-4.495,2.363c-0.974,0.512-1.618,0.044-1.432-1.041l0.858-5.004c0.186-1.085-0.307-2.6-1.094-3.368L3.93,13.977c-0.788-0.768-0.542-1.525,0.547-1.684l5.026-0.73c1.088-0.158,2.377-1.095,2.864-2.081L14.615,4.928z")}}),draw2d.shape.icon.Star2Off=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Star2Off",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.522,12.293l-5.024-0.73c-1.089-0.158-2.378-1.095-2.864-2.081l-2.249-4.554c-0.487-0.986-1.284-0.986-1.771,0l-2.247,4.554c-0.487,0.986-1.776,1.923-2.864,2.081l-5.026,0.73c-1.088,0.158-1.334,0.916-0.547,1.684l3.637,3.544c0.788,0.769,1.28,2.283,1.094,3.368l-0.858,5.004c-0.186,1.085,0.458,1.553,1.432,1.041l4.495-2.363c0.974-0.512,2.566-0.512,3.541,0l4.495,2.363c0.974,0.512,1.618,0.044,1.433-1.041l-0.859-5.004c-0.186-1.085,0.307-2.6,1.095-3.368l3.636-3.544C27.857,13.209,27.611,12.452,26.522,12.293zM22.037,16.089c-1.266,1.232-1.966,3.394-1.67,5.137l0.514,2.984l-2.679-1.409c-0.757-0.396-1.715-0.612-2.702-0.612s-1.945,0.216-2.7,0.61l-2.679,1.409l0.511-2.982c0.297-1.743-0.404-3.905-1.671-5.137l-2.166-2.112l2.995-0.435c1.754-0.255,3.592-1.591,4.373-3.175L15.5,7.652l1.342,2.716c0.781,1.583,2.617,2.92,4.369,3.173l2.992,0.435L22.037,16.089z")}}),draw2d.shape.icon.Star3=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Star3",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.441,28.181c-0.419,0-0.835-0.132-1.189-0.392l-5.751-4.247L9.75,27.789c-0.354,0.26-0.771,0.392-1.189,0.392c-0.412,0-0.824-0.128-1.175-0.384c-0.707-0.511-1-1.422-0.723-2.25l2.26-6.783l-5.815-4.158c-0.71-0.509-1.009-1.416-0.74-2.246c0.268-0.826,1.037-1.382,1.904-1.382c0.004,0,0.01,0,0.014,0l7.15,0.056l2.157-6.816c0.262-0.831,1.035-1.397,1.906-1.397s1.645,0.566,1.906,1.397l2.155,6.816l7.15-0.056c0.004,0,0.01,0,0.015,0c0.867,0,1.636,0.556,1.903,1.382c0.271,0.831-0.028,1.737-0.739,2.246l-5.815,4.158l2.263,6.783c0.276,0.826-0.017,1.737-0.721,2.25C23.268,28.053,22.854,28.181,22.441,28.181L22.441,28.181z")}}),draw2d.shape.icon.Star3Off=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Star3Off",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.631,12.359c-0.268-0.826-1.036-1.382-1.903-1.382h-0.015l-7.15,0.056l-2.155-6.816c-0.262-0.831-1.035-1.397-1.906-1.397s-1.645,0.566-1.906,1.397l-2.157,6.816l-7.15-0.056H4.273c-0.868,0-1.636,0.556-1.904,1.382c-0.27,0.831,0.029,1.737,0.74,2.246l5.815,4.158l-2.26,6.783c-0.276,0.828,0.017,1.739,0.723,2.25c0.351,0.256,0.763,0.384,1.175,0.384c0.418,0,0.834-0.132,1.189-0.392l5.751-4.247l5.751,4.247c0.354,0.26,0.771,0.392,1.189,0.392c0.412,0,0.826-0.128,1.177-0.384c0.704-0.513,0.997-1.424,0.721-2.25l-2.263-6.783l5.815-4.158C28.603,14.097,28.901,13.19,28.631,12.359zM19.712,17.996l2.729,8.184l-6.94-5.125L8.56,26.18l2.729-8.184l-7.019-5.018l8.627,0.066L15.5,4.82l2.603,8.225l8.627-0.066L19.712,17.996z")}}),draw2d.shape.icon.Chat=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Chat",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.985,5.972c-7.563,0-13.695,4.077-13.695,9.106c0,2.877,2.013,5.44,5.147,7.108c-0.446,1.479-1.336,3.117-3.056,4.566c0,0,4.015-0.266,6.851-3.143c0.163,0.04,0.332,0.07,0.497,0.107c-0.155-0.462-0.246-0.943-0.246-1.443c0-3.393,3.776-6.05,8.599-6.05c3.464,0,6.379,1.376,7.751,3.406c1.168-1.34,1.847-2.892,1.847-4.552C29.68,10.049,23.548,5.972,15.985,5.972zM27.68,22.274c0-2.79-3.401-5.053-7.599-5.053c-4.196,0-7.599,2.263-7.599,5.053c0,2.791,3.403,5.053,7.599,5.053c0.929,0,1.814-0.116,2.637-0.319c1.573,1.597,3.801,1.744,3.801,1.744c-0.954-0.804-1.447-1.713-1.695-2.534C26.562,25.293,27.68,23.871,27.68,22.274z")}}),draw2d.shape.icon.Quote=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Quote",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.505,5.873c-3.937,2.52-5.904,5.556-5.904,9.108c0,1.104,0.192,1.656,0.576,1.656l0.396-0.107c0.312-0.12,0.563-0.18,0.756-0.18c1.128,0,2.07,0.411,2.826,1.229c0.756,0.82,1.134,1.832,1.134,3.037c0,1.157-0.408,2.14-1.224,2.947c-0.816,0.807-1.801,1.211-2.952,1.211c-1.608,0-2.935-0.661-3.979-1.984c-1.044-1.321-1.565-2.98-1.565-4.977c0-2.259,0.443-4.327,1.332-6.203c0.888-1.875,2.243-3.57,4.067-5.085c1.824-1.514,2.988-2.272,3.492-2.272c0.336,0,0.612,0.162,0.828,0.486c0.216,0.324,0.324,0.606,0.324,0.846L14.505,5.873zM27.465,5.873c-3.937,2.52-5.904,5.556-5.904,9.108c0,1.104,0.192,1.656,0.576,1.656l0.396-0.107c0.312-0.12,0.563-0.18,0.756-0.18c1.104,0,2.04,0.411,2.808,1.229c0.769,0.82,1.152,1.832,1.152,3.037c0,1.157-0.408,2.14-1.224,2.947c-0.816,0.807-1.801,1.211-2.952,1.211c-1.608,0-2.935-0.661-3.979-1.984c-1.044-1.321-1.565-2.98-1.565-4.977c0-2.284,0.449-4.369,1.35-6.256c0.9-1.887,2.256-3.577,4.068-5.067c1.812-1.49,2.97-2.236,3.474-2.236c0.336,0,0.612,0.162,0.828,0.486c0.216,0.324,0.324,0.606,0.324,0.846L27.465,5.873z")}}),draw2d.shape.icon.Gear2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Gear2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M17.047,27.945c-0.34,0.032-0.688,0.054-1.046,0.054l0,0c-0.32,0-0.631-0.017-0.934-0.043l0,0l-2.626,3.375l-0.646-0.183c-0.758-0.213-1.494-0.48-2.202-0.8l0,0L8.979,30.07l0.158-4.24c-0.558-0.39-1.079-0.825-1.561-1.302l0,0L3.424,25.42l-0.379-0.557c-0.445-0.654-0.824-1.339-1.16-2.032l0,0l-0.292-0.605l2.819-3.12c-0.176-0.661-0.293-1.343-0.353-2.038l0,0l-3.736-1.975l0.068-0.669c0.08-0.801,0.235-1.567,0.42-2.303l0,0l0.165-0.653l4.167-0.577c0.297-0.627,0.647-1.221,1.041-1.78l0,0l-1.59-3.914l0.48-0.47c0.564-0.55,1.168-1.048,1.798-1.503l0,0l0.546-0.394l3.597,2.259c0.606-0.279,1.24-0.509,1.897-0.685l0,0l1.304-4.046l0.672-0.051c0.362-0.027,0.751-0.058,1.174-0.058l0,0c0.422,0,0.81,0.031,1.172,0.058l0,0l0.672,0.051l1.318,4.088c0.632,0.176,1.244,0.401,1.831,0.674l0,0l3.647-2.291l0.548,0.394c0.63,0.455,1.235,0.954,1.798,1.501l0,0l0.482,0.47l-1.639,4.031c0.357,0.519,0.679,1.068,0.954,1.646l0,0l4.297,0.595l0.167,0.653c0.188,0.735,0.342,1.501,0.42,2.303l0,0l0.068,0.669l-3.866,2.044c-0.058,0.634-0.161,1.258-0.315,1.866l0,0l2.913,3.218l-0.293,0.608c-0.335,0.695-0.712,1.382-1.159,2.034l0,0l-0.379,0.555l-4.255-0.912c-0.451,0.451-0.939,0.866-1.461,1.241l0,0l0.162,4.323l-0.615,0.278c-0.709,0.319-1.444,0.587-2.202,0.8l0,0l-0.648,0.183L17.047,27.945L17.047,27.945zM20.424,29.028c0.227-0.076,0.45-0.157,0.671-0.244l0,0l-0.152-4.083l0.479-0.307c0.717-0.466,1.37-1.024,1.95-1.658l0,0l0.386-0.423l4.026,0.862c0.121-0.202,0.238-0.409,0.351-0.62l0,0l-2.754-3.045l0.171-0.544c0.243-0.783,0.381-1.623,0.422-2.5l0,0l0.025-0.571l3.658-1.933c-0.038-0.234-0.082-0.467-0.132-0.7l0,0l-4.07-0.563l-0.219-0.527c-0.327-0.787-0.76-1.524-1.277-2.204l0,0l-0.342-0.453l1.548-3.808c-0.179-0.157-0.363-0.31-0.552-0.458l0,0l-3.455,2.169L20.649,7.15c-0.754-0.397-1.569-0.698-2.429-0.894l0,0l-0.556-0.127l-1.248-3.87c-0.121-0.006-0.239-0.009-0.354-0.009l0,0c-0.117,0-0.235,0.003-0.357,0.009l0,0l-1.239,3.845l-0.564,0.12c-0.875,0.188-1.709,0.494-2.486,0.896l0,0l-0.508,0.264L7.509,5.249c-0.188,0.148-0.372,0.301-0.55,0.458l0,0l1.507,3.708L8.112,9.869c-0.552,0.709-1.011,1.485-1.355,2.319l0,0l-0.218,0.529l-3.939,0.545c-0.05,0.233-0.094,0.466-0.131,0.7l0,0l3.531,1.867l0.022,0.575c0.037,0.929,0.192,1.82,0.459,2.653l0,0l0.175,0.548l-2.667,2.95c0.112,0.212,0.229,0.419,0.351,0.621l0,0l3.916-0.843l0.39,0.423c0.601,0.657,1.287,1.229,2.043,1.703l0,0l0.488,0.305l-0.149,4.02c0.221,0.087,0.445,0.168,0.672,0.244l0,0l2.479-3.188l0.566,0.07c0.427,0.054,0.843,0.089,1.257,0.089l0,0c0.445,0,0.894-0.039,1.353-0.104l0,0l0.571-0.08L20.424,29.028L20.424,29.028zM21.554,20.75l0.546,0.839l-3.463,2.253l-1.229-1.891l0,0c-0.447,0.109-0.917,0.173-1.406,0.173l0,0c-3.384,0-6.126-2.743-6.126-6.123l0,0c0-3.384,2.742-6.126,6.126-6.126l0,0c3.38,0,6.123,2.742,6.123,6.126l0,0c0,1.389-0.467,2.676-1.25,3.704l0,0L21.554,20.75M19.224,21.073l0.108-0.069l-0.987-1.519l0.572-0.572c0.748-0.75,1.207-1.773,1.207-2.912l0,0c-0.004-2.278-1.848-4.122-4.123-4.126l0,0c-2.28,0.004-4.122,1.846-4.126,4.126l0,0c0.004,2.275,1.848,4.119,4.126,4.123l0,0c0.509,0,0.999-0.104,1.473-0.286l0,0l0.756-0.29L19.224,21.073L19.224,21.073z");
}}),draw2d.shape.icon.Gear=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Gear",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.974,16.514l3.765-1.991c-0.074-0.738-0.217-1.454-0.396-2.157l-4.182-0.579c-0.362-0.872-0.84-1.681-1.402-2.423l1.594-3.921c-0.524-0.511-1.09-0.977-1.686-1.406l-3.551,2.229c-0.833-0.438-1.73-0.77-2.672-0.984l-1.283-3.976c-0.364-0.027-0.728-0.056-1.099-0.056s-0.734,0.028-1.099,0.056l-1.271,3.941c-0.967,0.207-1.884,0.543-2.738,0.986L7.458,4.037C6.863,4.466,6.297,4.932,5.773,5.443l1.55,3.812c-0.604,0.775-1.11,1.629-1.49,2.55l-4.05,0.56c-0.178,0.703-0.322,1.418-0.395,2.157l3.635,1.923c0.041,1.013,0.209,1.994,0.506,2.918l-2.742,3.032c0.319,0.661,0.674,1.303,1.085,1.905l4.037-0.867c0.662,0.72,1.416,1.351,2.248,1.873l-0.153,4.131c0.663,0.299,1.352,0.549,2.062,0.749l2.554-3.283C15.073,26.961,15.532,27,16,27c0.507,0,1.003-0.046,1.491-0.113l2.567,3.301c0.711-0.2,1.399-0.45,2.062-0.749l-0.156-4.205c0.793-0.513,1.512-1.127,2.146-1.821l4.142,0.889c0.411-0.602,0.766-1.243,1.085-1.905l-2.831-3.131C26.778,18.391,26.93,17.467,26.974,16.514zM20.717,21.297l-1.785,1.162l-1.098-1.687c-0.571,0.22-1.186,0.353-1.834,0.353c-2.831,0-5.125-2.295-5.125-5.125c0-2.831,2.294-5.125,5.125-5.125c2.83,0,5.125,2.294,5.125,5.125c0,1.414-0.573,2.693-1.499,3.621L20.717,21.297z")}}),draw2d.shape.icon.Wrench=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Wrench",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.834,14.693c1.816-2.088,2.181-4.938,1.193-7.334l-3.646,4.252l-3.594-0.699L19.596,7.45l3.637-4.242c-2.502-0.63-5.258,0.13-7.066,2.21c-1.907,2.193-2.219,5.229-1.039,7.693L5.624,24.04c-1.011,1.162-0.888,2.924,0.274,3.935c1.162,1.01,2.924,0.888,3.935-0.274l9.493-10.918C21.939,17.625,24.918,16.896,26.834,14.693z")}}),draw2d.shape.icon.Wrench2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Wrench2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.946,9.721l-2.872-0.768l-0.771-2.874l3.188-3.231c-1.992-0.653-4.268-0.192-5.848,1.391c-1.668,1.668-2.095,4.111-1.279,6.172l-3.476,3.478l-3.478,3.478c-2.062-0.816-4.504-0.391-6.173,1.277c-1.583,1.581-2.043,3.856-1.39,5.849l3.231-3.188l2.874,0.77l0.769,2.872l-3.239,3.197c1.998,0.665,4.288,0.207,5.876-1.384c1.678-1.678,2.1-4.133,1.271-6.202l3.463-3.464l3.464-3.463c2.069,0.828,4.523,0.406,6.202-1.272c1.592-1.589,2.049-3.878,1.384-5.876L24.946,9.721z")}}),draw2d.shape.icon.Wrench3=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Wrench3",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.839,6.775l-3.197,3.239L21.77,9.246l-0.771-2.874l3.188-3.231c-1.992-0.653-4.268-0.192-5.848,1.391c-1.668,1.668-2.095,4.111-1.279,6.172L7.42,20.344c-0.204-0.032-0.408-0.062-0.621-0.062c-2.173,0-3.933,1.759-3.933,3.933c0,2.173,1.76,3.933,3.933,3.933c2.171,0,3.931-1.76,3.933-3.933c0-0.24-0.03-0.473-0.071-0.7l9.592-9.59c2.069,0.828,4.523,0.406,6.202-1.272C28.047,11.062,28.504,8.772,27.839,6.775zM6.799,25.146c-0.517,0-0.933-0.418-0.935-0.933c0.002-0.515,0.418-0.933,0.935-0.933c0.514,0,0.932,0.418,0.932,0.933S7.313,25.146,6.799,25.146z")}}),draw2d.shape.icon.ScrewDriver=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ScrewDriver",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M19.387,14.373c2.119-2.619,5.322-6.77,5.149-7.75c-0.128-0.729-0.882-1.547-1.763-2.171c-0.883-0.625-1.916-1.044-2.645-0.915c-0.98,0.173-3.786,4.603-5.521,7.49c-0.208,0.344,0.328,1.177,0.156,1.468c-0.172,0.292-1.052,0.042-1.18,0.261c-0.263,0.451-0.417,0.722-0.417,0.722s-0.553,0.823,1.163,2.163l-5.233,7.473c-0.267,0.381-1.456,0.459-1.456,0.459l-1.184,3.312l0.859,0.602l2.708-2.246c0,0-0.334-1.143-0.068-1.523l5.242-7.489c1.719,1,2.377,0.336,2.377,0.336s0.201-0.238,0.536-0.639c0.161-0.194-0.374-0.936-0.159-1.197C18.169,14.467,19.133,14.685,19.387,14.373z")}}),draw2d.shape.icon.HammerAndScrewDriver=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.HammerAndScrewDriver",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.537,9.859c-0.473-0.259-1.127-0.252-1.609-0.523c-0.943-0.534-1.186-1.316-1.226-2.475c-2.059-2.215-5.138-4.176-9.424-4.114c-1.162,0.017-2.256-0.035-3.158,0.435c-0.258,0.354-0.004,0.516,0.288,0.599c-0.29,0.138-0.692,0.147-0.626,0.697c2.72-0.383,7.475,0.624,7.116,2.966c-0.08,0.521-0.735,1.076-1.179,1.563c-1.263,1.382-2.599,2.45-3.761,3.667l0.336,0.336c0.742-0.521,1.446-0.785,2.104-0.785c0.707,0,1.121,0.297,1.276,0.433c0.575-0.618,1.166-1.244,1.839-1.853c0.488-0.444,1.047-1.099,1.566-1.178l0.949-0.101c1.156,0.047,1.937,0.29,2.471,1.232c0.27,0.481,0.262,1.139,0.521,1.613c0.175,0.324,0.937,1.218,1.316,1.228c0.294,0.009,0.603-0.199,0.899-0.49l1.033-1.034c0.291-0.294,0.501-0.6,0.492-0.896C29.754,10.801,28.861,10.035,28.537,9.859zM13.021,15.353l-0.741-0.741c-3.139,2.643-6.52,5.738-9.531,8.589c-0.473,0.443-1.452,1.021-1.506,1.539c-0.083,0.781,0.95,1.465,1.506,2c0.556,0.533,1.212,1.602,1.994,1.51c0.509-0.043,1.095-1.029,1.544-1.502c2.255-2.374,4.664-4.976,6.883-7.509c-0.312-0.371-0.498-0.596-0.498-0.596C12.535,18.451,11.779,17.272,13.021,15.353zM20.64,15.643c-0.366-0.318-1.466,0.143-1.777-0.122c-0.311-0.266,0.171-1.259-0.061-1.455c-0.482-0.406-0.77-0.646-0.77-0.646s-0.862-0.829-2.812,0.928L7.44,6.569C7.045,6.173,7.203,4.746,7.203,4.746L3.517,2.646L2.623,3.541l2.1,3.686c0,0,1.428-0.158,1.824,0.237l7.792,7.793c-1.548,1.831-0.895,2.752-0.895,2.752s0.238,0.288,0.646,0.771c0.196,0.23,1.188-0.249,1.455,0.061c0.264,0.312-0.196,1.41,0.12,1.777c2.666,3.064,6.926,7.736,8.125,7.736c0.892,0,2.021-0.724,2.948-1.64c0.925-0.917,1.639-2.055,1.639-2.947C28.377,22.567,23.704,18.309,20.64,15.643z")}}),draw2d.shape.icon.Magic=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Magic",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.043,4.649l-0.404-2.312l-1.59,1.727l-2.323-0.33l1.151,2.045l-1.032,2.108l2.302-0.463l1.686,1.633l0.271-2.332l2.074-1.099L23.043,4.649zM26.217,18.198l-0.182-1.25l-0.882,0.905l-1.245-0.214l0.588,1.118l-0.588,1.118l1.245-0.214l0.882,0.905l0.182-1.25l1.133-0.56L26.217,18.198zM4.92,7.672L5.868,7.3l0.844,0.569L6.65,6.853l0.802-0.627L6.467,5.97L6.118,5.013L5.571,5.872L4.553,5.908l0.647,0.786L4.92,7.672zM10.439,10.505l1.021-1.096l1.481,0.219l-0.727-1.31l0.667-1.341l-1.47,0.287l-1.069-1.048L10.16,7.703L8.832,8.396l1.358,0.632L10.439,10.505zM17.234,12.721c-0.588-0.368-1.172-0.618-1.692-0.729c-0.492-0.089-1.039-0.149-1.425,0.374L2.562,30.788h6.68l9.669-15.416c0.303-0.576,0.012-1.041-0.283-1.447C18.303,13.508,17.822,13.09,17.234,12.721zM13.613,21.936c-0.254-0.396-0.74-0.857-1.373-1.254c-0.632-0.396-1.258-0.634-1.726-0.69l4.421-7.052c0.064-0.013,0.262-0.021,0.543,0.066c0.346,0.092,0.785,0.285,1.225,0.562c0.504,0.313,0.908,0.677,1.133,0.97c0.113,0.145,0.178,0.271,0.195,0.335c0.002,0.006,0.004,0.011,0.004,0.015L13.613,21.936z")}}),draw2d.shape.icon.Download=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Download",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM16,28.792c-1.549,0-2.806-1.256-2.806-2.806s1.256-2.806,2.806-2.806c1.55,0,2.806,1.256,2.806,2.806S17.55,28.792,16,28.792zM16,21.087l-7.858-6.562h3.469V5.747h8.779v8.778h3.468L16,21.087z")}}),draw2d.shape.icon.View=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.View",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,8.286C8.454,8.286,2.5,16,2.5,16s5.954,7.715,13.5,7.715c5.771,0,13.5-7.715,13.5-7.715S21.771,8.286,16,8.286zM16,20.807c-2.649,0-4.807-2.157-4.807-4.807s2.158-4.807,4.807-4.807s4.807,2.158,4.807,4.807S18.649,20.807,16,20.807zM16,13.194c-1.549,0-2.806,1.256-2.806,2.806c0,1.55,1.256,2.806,2.806,2.806c1.55,0,2.806-1.256,2.806-2.806C18.806,14.451,17.55,13.194,16,13.194z")}}),draw2d.shape.icon.Noview=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Noview",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M11.478,17.568c-0.172-0.494-0.285-1.017-0.285-1.568c0-2.65,2.158-4.807,4.807-4.807c0.552,0,1.074,0.113,1.568,0.285l2.283-2.283C18.541,8.647,17.227,8.286,16,8.286C8.454,8.286,2.5,16,2.5,16s2.167,2.791,5.53,5.017L11.478,17.568zM23.518,11.185l-3.056,3.056c0.217,0.546,0.345,1.138,0.345,1.76c0,2.648-2.158,4.807-4.807,4.807c-0.622,0-1.213-0.128-1.76-0.345l-2.469,2.47c1.327,0.479,2.745,0.783,4.229,0.783c5.771,0,13.5-7.715,13.5-7.715S26.859,13.374,23.518,11.185zM25.542,4.917L4.855,25.604L6.27,27.02L26.956,6.332L25.542,4.917z")}}),draw2d.shape.icon.Cloud=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cloud",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h15.875c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z")}}),draw2d.shape.icon.Cloud2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cloud2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M7.562,24.812c-3.313,0-6-2.687-6-6l0,0c0.002-2.659,1.734-4.899,4.127-5.684l0,0c0.083-2.26,1.937-4.064,4.216-4.066l0,0c0.73,0,1.415,0.19,2.01,0.517l0,0c1.266-2.105,3.57-3.516,6.208-3.517l0,0c3.947,0.002,7.157,3.155,7.248,7.079l0,0c2.362,0.804,4.062,3.034,4.064,5.671l0,0c0,3.313-2.687,6-6,6l0,0H7.562L7.562,24.812zM24.163,14.887c-0.511-0.095-0.864-0.562-0.815-1.079l0,0c0.017-0.171,0.027-0.336,0.027-0.497l0,0c-0.007-2.899-2.352-5.245-5.251-5.249l0,0c-2.249-0.002-4.162,1.418-4.911,3.41l0,0c-0.122,0.323-0.406,0.564-0.748,0.63l0,0c-0.34,0.066-0.694-0.052-0.927-0.309l0,0c-0.416-0.453-0.986-0.731-1.633-0.731l0,0c-1.225,0.002-2.216,0.993-2.22,2.218l0,0c0,0.136,0.017,0.276,0.045,0.424l0,0c0.049,0.266-0.008,0.54-0.163,0.762l0,0c-0.155,0.223-0.392,0.371-0.657,0.414l0,0c-1.9,0.313-3.352,1.949-3.35,3.931l0,0c0.004,2.209,1.792,3.995,4.001,4.001l0,0h15.874c2.209-0.006,3.994-1.792,3.999-4.001l0,0C27.438,16.854,26.024,15.231,24.163,14.887L24.163,14.887")}}),draw2d.shape.icon.CloudDown=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.CloudDown",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h3.404l-0.707-0.707c-0.377-0.377-0.585-0.879-0.585-1.413c0-0.533,0.208-1.035,0.585-1.412l0.556-0.557c0.4-0.399,0.937-0.628,1.471-0.628c0.027,0,0.054,0,0.08,0.002v-0.472c0-1.104,0.898-2.002,2-2.002h3.266c1.103,0,2,0.898,2,2.002v0.472c0.027-0.002,0.054-0.002,0.081-0.002c0.533,0,1.07,0.229,1.47,0.63l0.557,0.552c0.78,0.781,0.78,2.05,0,2.828l-0.706,0.707h2.403c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z M21.033,20.986l-0.556-0.555c-0.39-0.389-0.964-0.45-1.276-0.137c-0.312,0.312-0.568,0.118-0.568-0.432v-1.238c0-0.55-0.451-1-1-1h-3.265c-0.55,0-1,0.45-1,1v1.238c0,0.55-0.256,0.744-0.569,0.432c-0.312-0.313-0.887-0.252-1.276,0.137l-0.556,0.555c-0.39,0.389-0.39,1.024-0.001,1.413l4.328,4.331c0.194,0.194,0.451,0.291,0.707,0.291s0.512-0.097,0.707-0.291l4.327-4.331C21.424,22.011,21.423,21.375,21.033,20.986z")}}),draw2d.shape.icon.CloudUp=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.CloudUp",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.345,13.904c0.019-0.195,0.03-0.392,0.03-0.591c0-3.452-2.798-6.25-6.25-6.25c-2.679,0-4.958,1.689-5.847,4.059c-0.589-0.646-1.429-1.059-2.372-1.059c-1.778,0-3.219,1.441-3.219,3.219c0,0.21,0.023,0.415,0.062,0.613c-2.372,0.391-4.187,2.436-4.187,4.918c0,2.762,2.239,5,5,5h2.312c-0.126-0.266-0.2-0.556-0.2-0.859c0-0.535,0.208-1.04,0.587-1.415l4.325-4.329c0.375-0.377,0.877-0.585,1.413-0.585c0.54,0,1.042,0.21,1.417,0.587l4.323,4.329c0.377,0.373,0.585,0.878,0.585,1.413c0,0.304-0.073,0.594-0.2,0.859h1.312c2.762,0,5-2.238,5-5C28.438,16.362,26.672,14.332,24.345,13.904z M16.706,17.916c-0.193-0.195-0.45-0.291-0.706-0.291s-0.512,0.096-0.707,0.291l-4.327,4.33c-0.39,0.389-0.389,1.025,0.001,1.414l0.556,0.555c0.39,0.389,0.964,0.449,1.276,0.137s0.568-0.119,0.568,0.432v1.238c0,0.549,0.451,1,1,1h3.265c0.551,0,1-0.451,1-1v-1.238c0-0.551,0.256-0.744,0.569-0.432c0.312,0.312,0.887,0.252,1.276-0.137l0.556-0.555c0.39-0.389,0.39-1.025,0.001-1.414L16.706,17.916z")}}),draw2d.shape.icon.Location=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Location",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,3.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.143,7.5,18.121,7.5,18.121S23.5,15.143,23.5,11C23.5,6.858,20.143,3.5,16,3.5z M16,14.584c-1.979,0-3.584-1.604-3.584-3.584S14.021,7.416,16,7.416S19.584,9.021,19.584,11S17.979,14.584,16,14.584z")}}),draw2d.shape.icon.Volume0=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Volume0",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z")}}),draw2d.shape.icon.Volume1=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Volume1",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z")}}),draw2d.shape.icon.Volume2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Volume2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z M21.101,8.925c-0.393-0.391-1.024-0.391-1.413,0c-0.392,0.391-0.392,1.025,0,1.414c1.45,1.451,2.344,3.447,2.344,5.661c0,2.212-0.894,4.207-2.342,5.659c-0.392,0.39-0.392,1.023,0,1.414c0.195,0.195,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.293c1.808-1.809,2.929-4.315,2.927-7.073C24.033,13.24,22.912,10.732,21.101,8.925z")}}),draw2d.shape.icon.Volume3=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Volume3",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.998,12.127v7.896h4.495l6.729,5.526l0.004-18.948l-6.73,5.526H4.998z M18.806,11.219c-0.393-0.389-1.024-0.389-1.415,0.002c-0.39,0.391-0.39,1.024,0.002,1.416v-0.002c0.863,0.864,1.395,2.049,1.395,3.366c0,1.316-0.531,2.497-1.393,3.361c-0.394,0.389-0.394,1.022-0.002,1.415c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.708-0.293c1.222-1.22,1.98-2.915,1.979-4.776C20.788,14.136,20.027,12.439,18.806,11.219z M21.101,8.925c-0.393-0.391-1.024-0.391-1.413,0c-0.392,0.391-0.392,1.025,0,1.414c1.45,1.451,2.344,3.447,2.344,5.661c0,2.212-0.894,4.207-2.342,5.659c-0.392,0.39-0.392,1.023,0,1.414c0.195,0.195,0.451,0.293,0.708,0.293c0.256,0,0.512-0.098,0.707-0.293c1.808-1.809,2.929-4.315,2.927-7.073C24.033,13.24,22.912,10.732,21.101,8.925z M23.28,6.746c-0.393-0.391-1.025-0.389-1.414,0.002c-0.391,0.389-0.391,1.023,0.002,1.413h-0.002c2.009,2.009,3.248,4.773,3.248,7.839c0,3.063-1.239,5.828-3.246,7.838c-0.391,0.39-0.391,1.023,0.002,1.415c0.194,0.194,0.45,0.291,0.706,0.291s0.513-0.098,0.708-0.293c2.363-2.366,3.831-5.643,3.829-9.251C27.115,12.389,25.647,9.111,23.28,6.746z")}}),draw2d.shape.icon.Key=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Key",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M18.386,16.009l0.009-0.006l-0.58-0.912c1.654-2.226,1.876-5.319,0.3-7.8c-2.043-3.213-6.303-4.161-9.516-2.118c-3.212,2.042-4.163,6.302-2.12,9.517c1.528,2.402,4.3,3.537,6.944,3.102l0.424,0.669l0.206,0.045l0.779-0.447l-0.305,1.377l2.483,0.552l-0.296,1.325l1.903,0.424l-0.68,3.06l1.406,0.313l-0.424,1.906l4.135,0.918l0.758-3.392L18.386,16.009z M10.996,8.944c-0.685,0.436-1.593,0.233-2.029-0.452C8.532,7.807,8.733,6.898,9.418,6.463s1.594-0.233,2.028,0.452C11.883,7.6,11.68,8.509,10.996,8.944z")}}),draw2d.shape.icon.Ruler=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ruler",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M6.63,21.796l-5.122,5.121h25.743V1.175L6.63,21.796zM18.702,10.48c0.186-0.183,0.48-0.183,0.664,0l1.16,1.159c0.184,0.183,0.186,0.48,0.002,0.663c-0.092,0.091-0.213,0.137-0.332,0.137c-0.121,0-0.24-0.046-0.33-0.137l-1.164-1.159C18.519,10.96,18.519,10.664,18.702,10.48zM17.101,12.084c0.184-0.183,0.48-0.183,0.662,0l2.156,2.154c0.184,0.183,0.184,0.48,0.002,0.661c-0.092,0.092-0.213,0.139-0.334,0.139s-0.24-0.046-0.33-0.137l-2.156-2.154C16.917,12.564,16.917,12.267,17.101,12.084zM15.497,13.685c0.184-0.183,0.48-0.183,0.664,0l1.16,1.161c0.184,0.183,0.182,0.48-0.002,0.663c-0.092,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.24-0.046-0.332-0.138l-1.16-1.16C15.314,14.166,15.314,13.868,15.497,13.685zM13.896,15.288c0.184-0.183,0.48-0.181,0.664,0.002l1.158,1.159c0.183,0.184,0.183,0.48,0,0.663c-0.092,0.092-0.212,0.138-0.332,0.138c-0.119,0-0.24-0.046-0.332-0.138l-1.158-1.161C13.713,15.767,13.713,15.471,13.896,15.288zM12.293,16.892c0.183-0.184,0.479-0.184,0.663,0l2.154,2.153c0.184,0.184,0.184,0.481,0,0.665c-0.092,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.242-0.046-0.334-0.138l-2.153-2.155C12.11,17.371,12.11,17.075,12.293,16.892zM10.302,24.515c-0.091,0.093-0.212,0.139-0.332,0.139c-0.119,0-0.238-0.045-0.33-0.137l-2.154-2.153c-0.184-0.183-0.184-0.479,0-0.663s0.479-0.184,0.662,0l2.154,2.153C10.485,24.036,10.485,24.332,10.302,24.515zM10.912,21.918c-0.093,0.093-0.214,0.139-0.333,0.139c-0.12,0-0.24-0.045-0.33-0.137l-1.162-1.161c-0.184-0.183-0.184-0.479,0-0.66c0.184-0.185,0.48-0.187,0.664-0.003l1.161,1.162C11.095,21.438,11.095,21.735,10.912,21.918zM12.513,20.316c-0.092,0.092-0.211,0.138-0.332,0.138c-0.119,0-0.239-0.046-0.331-0.138l-1.159-1.16c-0.184-0.184-0.184-0.48,0-0.664s0.48-0.182,0.663,0.002l1.159,1.161C12.696,19.838,12.696,20.135,12.513,20.316zM22.25,21.917h-8.67l8.67-8.67V21.917zM22.13,10.7c-0.09,0.092-0.211,0.138-0.33,0.138c-0.121,0-0.242-0.046-0.334-0.138l-1.16-1.159c-0.184-0.183-0.184-0.479,0-0.663c0.182-0.183,0.479-0.183,0.662,0l1.16,1.159C22.312,10.221,22.313,10.517,22.13,10.7zM24.726,10.092c-0.092,0.092-0.213,0.137-0.332,0.137s-0.24-0.045-0.33-0.137l-2.154-2.154c-0.184-0.183-0.184-0.481,0-0.664s0.482-0.181,0.664,0.002l2.154,2.154C24.911,9.613,24.909,9.91,24.726,10.092z")}}),draw2d.shape.icon.Power=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Power",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.542,8.354c-1.47-1.766-2.896-2.617-3.025-2.695c-0.954-0.565-2.181-0.241-2.739,0.724c-0.556,0.961-0.24,2.194,0.705,2.763c0,0,0.001,0,0.002,0.001c0.001,0,0.002,0.001,0.003,0.002c0.001,0,0.003,0.001,0.004,0.001c0.102,0.062,1.124,0.729,2.08,1.925c1.003,1.261,1.933,3.017,1.937,5.438c-0.001,2.519-1.005,4.783-2.64,6.438c-1.637,1.652-3.877,2.668-6.368,2.669c-2.491-0.001-4.731-1.017-6.369-2.669c-1.635-1.654-2.639-3.919-2.64-6.438c0.005-2.499,0.995-4.292,2.035-5.558c0.517-0.625,1.043-1.098,1.425-1.401c0.191-0.152,0.346-0.263,0.445-0.329c0.049-0.034,0.085-0.058,0.104-0.069c0.005-0.004,0.009-0.006,0.012-0.008s0.004-0.002,0.004-0.002l0,0c0.946-0.567,1.262-1.802,0.705-2.763c-0.559-0.965-1.785-1.288-2.739-0.724c-0.128,0.079-1.555,0.93-3.024,2.696c-1.462,1.751-2.974,4.511-2.97,8.157C2.49,23.775,8.315,29.664,15.5,29.667c7.186-0.003,13.01-5.892,13.012-13.155C28.516,12.864,27.005,10.105,25.542,8.354zM15.5,17.523c1.105,0,2.002-0.907,2.002-2.023h-0.001V3.357c0-1.118-0.896-2.024-2.001-2.024s-2.002,0.906-2.002,2.024V15.5C13.498,16.616,14.395,17.523,15.5,17.523z")}}),draw2d.shape.icon.Unlock=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Unlock",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.375,12.833h-2.209V10c0,0,0,0,0-0.001c0-2.389,1.945-4.333,4.334-4.333c2.391,0,4.335,1.944,4.335,4.333c0,0,0,0,0,0v2.834h2V9.999h-0.001c-0.001-3.498-2.836-6.333-6.334-6.333S16.166,6.502,16.166,10v2.833H3.125V25h17.25V12.833z")}}),draw2d.shape.icon.Flag=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Flag",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.04,9.508c0.138-0.533,0.15-1.407,0.028-1.943l-0.404-1.771c-0.122-0.536-0.665-1.052-1.207-1.146l-3.723-0.643c-0.542-0.094-1.429-0.091-1.97,0.007l-4.033,0.726c-0.542,0.098-1.429,0.108-1.973,0.023L8.812,4.146C8.817,4.165,8.826,4.182,8.83,4.201l2.701,12.831l1.236,0.214c0.542,0.094,1.428,0.09,1.97-0.007l4.032-0.727c0.541-0.097,1.429-0.107,1.973-0.022l4.329,0.675c0.544,0.085,0.906-0.288,0.807-0.829l-0.485-2.625c-0.1-0.541-0.069-1.419,0.068-1.952L26.04,9.508zM6.667,3.636C6.126,3.75,5.78,4.279,5.894,4.819l5.763,27.378H13.7L7.852,4.409C7.736,3.867,7.207,3.521,6.667,3.636z")}}),draw2d.shape.icon.Tag=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Tag",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.263,2.826H7.904L2.702,8.028v6.359L18.405,30.09l11.561-11.562L14.263,2.826zM6.495,8.859c-0.619-0.619-0.619-1.622,0-2.24C7.114,6,8.117,6,8.736,6.619c0.62,0.62,0.619,1.621,0,2.241C8.117,9.479,7.114,9.479,6.495,8.859z")}}),draw2d.shape.icon.Search=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Search",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z")}}),draw2d.shape.icon.ZoomOut=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ZoomOut",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM8.854,11.884v4.001l9.665-0.001v-3.999L8.854,11.884z")}}),draw2d.shape.icon.ZoomIn=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ZoomIn",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM15.687,9.051h-4v2.833H8.854v4.001h2.833v2.833h4v-2.834h2.832v-3.999h-2.833V9.051z")}}),draw2d.shape.icon.Cross=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cross",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z")}}),draw2d.shape.icon.Check=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Check",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M2.379,14.729 5.208,11.899 12.958,19.648 25.877,6.733 28.707,9.561 12.958,25.308z")}}),draw2d.shape.icon.Settings=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Settings",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16.015,12.03c-2.156,0-3.903,1.747-3.903,3.903c0,2.155,1.747,3.903,3.903,3.903c0.494,0,0.962-0.102,1.397-0.27l0.836,1.285l1.359-0.885l-0.831-1.276c0.705-0.706,1.142-1.681,1.142-2.757C19.918,13.777,18.171,12.03,16.015,12.03zM16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM26.174,20.809c-0.241,0.504-0.513,0.99-0.826,1.45L22.19,21.58c-0.481,0.526-1.029,0.994-1.634,1.385l0.119,3.202c-0.507,0.23-1.028,0.421-1.569,0.57l-1.955-2.514c-0.372,0.051-0.75,0.086-1.136,0.086c-0.356,0-0.706-0.029-1.051-0.074l-1.945,2.5c-0.541-0.151-1.065-0.342-1.57-0.569l0.117-3.146c-0.634-0.398-1.208-0.88-1.712-1.427L6.78,22.251c-0.313-0.456-0.583-0.944-0.826-1.448l2.088-2.309c-0.226-0.703-0.354-1.451-0.385-2.223l-2.768-1.464c0.055-0.563,0.165-1.107,0.301-1.643l3.084-0.427c0.29-0.702,0.675-1.352,1.135-1.942L8.227,7.894c0.399-0.389,0.83-0.744,1.283-1.07l2.663,1.672c0.65-0.337,1.349-0.593,2.085-0.75l0.968-3.001c0.278-0.021,0.555-0.042,0.837-0.042c0.282,0,0.56,0.022,0.837,0.042l0.976,3.028c0.72,0.163,1.401,0.416,2.036,0.75l2.704-1.697c0.455,0.326,0.887,0.681,1.285,1.07l-1.216,2.986c0.428,0.564,0.793,1.181,1.068,1.845l3.185,0.441c0.135,0.535,0.247,1.081,0.302,1.643l-2.867,1.516c-0.034,0.726-0.15,1.43-0.355,2.1L26.174,20.809z")}}),draw2d.shape.icon.SettingsAlt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.SettingsAlt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM24.386,14.968c-1.451,1.669-3.706,2.221-5.685,1.586l-7.188,8.266c-0.766,0.88-2.099,0.97-2.979,0.205s-0.973-2.099-0.208-2.979l7.198-8.275c-0.893-1.865-0.657-4.164,0.787-5.824c1.367-1.575,3.453-2.151,5.348-1.674l-2.754,3.212l0.901,2.621l2.722,0.529l2.761-3.22C26.037,11.229,25.762,13.387,24.386,14.968z")}}),draw2d.shape.icon.Feed=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Feed",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.135,16.762c3.078,0,5.972,1.205,8.146,3.391c2.179,2.187,3.377,5.101,3.377,8.202h4.745c0-9.008-7.299-16.335-16.269-16.335V16.762zM4.141,8.354c10.973,0,19.898,8.975,19.898,20.006h4.743c0-13.646-11.054-24.749-24.642-24.749V8.354zM10.701,25.045c0,1.815-1.471,3.287-3.285,3.287s-3.285-1.472-3.285-3.287c0-1.813,1.471-3.285,3.285-3.285S10.701,23.231,10.701,25.045z")}}),draw2d.shape.icon.Bug=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Bug",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.589,10.903l-5.828,1.612c-0.534-1.419-1.338-2.649-2.311-3.628l3.082-5.44c0.271-0.48,0.104-1.092-0.38-1.365c-0.479-0.271-1.09-0.102-1.36,0.377l-2.924,5.162c-0.604-0.383-1.24-0.689-1.9-0.896c-0.416-1.437-1.652-2.411-3.058-2.562c-0.001-0.004-0.002-0.008-0.003-0.012c-0.061-0.242-0.093-0.46-0.098-0.65c-0.005-0.189,0.012-0.351,0.046-0.479c0.037-0.13,0.079-0.235,0.125-0.317c0.146-0.26,0.34-0.43,0.577-0.509c0.023,0.281,0.142,0.482,0.352,0.601c0.155,0.088,0.336,0.115,0.546,0.086c0.211-0.031,0.376-0.152,0.496-0.363c0.105-0.186,0.127-0.389,0.064-0.607c-0.064-0.219-0.203-0.388-0.414-0.507c-0.154-0.087-0.314-0.131-0.482-0.129c-0.167,0.001-0.327,0.034-0.481,0.097c-0.153,0.063-0.296,0.16-0.429,0.289c-0.132,0.129-0.241,0.271-0.33,0.426c-0.132,0.234-0.216,0.496-0.25,0.783c-0.033,0.286-0.037,0.565-0.009,0.84c0.017,0.16,0.061,0.301,0.094,0.449c-0.375-0.021-0.758,0.002-1.14,0.108c-0.482,0.133-0.913,0.36-1.28,0.653c-0.052-0.172-0.098-0.344-0.18-0.518c-0.116-0.249-0.263-0.486-0.438-0.716c-0.178-0.229-0.384-0.41-0.618-0.543C9.904,3.059,9.737,2.994,9.557,2.951c-0.18-0.043-0.352-0.052-0.516-0.027s-0.318,0.08-0.463,0.164C8.432,3.172,8.318,3.293,8.23,3.445C8.111,3.656,8.08,3.873,8.136,4.092c0.058,0.221,0.181,0.384,0.367,0.49c0.21,0.119,0.415,0.138,0.611,0.056C9.31,4.556,9.451,4.439,9.539,4.283c0.119-0.21,0.118-0.443-0.007-0.695c0.244-0.055,0.497-0.008,0.757,0.141c0.081,0.045,0.171,0.115,0.27,0.208c0.097,0.092,0.193,0.222,0.286,0.388c0.094,0.166,0.179,0.368,0.251,0.608c0.013,0.044,0.023,0.098,0.035,0.146c-0.911,0.828-1.357,2.088-1.098,3.357c-0.582,0.584-1.072,1.27-1.457,2.035l-5.16-2.926c-0.48-0.271-1.092-0.102-1.364,0.377C1.781,8.404,1.95,9.016,2.43,9.289l5.441,3.082c-0.331,1.34-0.387,2.807-0.117,4.297l-5.828,1.613c-0.534,0.147-0.846,0.699-0.698,1.231c0.147,0.53,0.697,0.843,1.231,0.694l5.879-1.627c0.503,1.057,1.363,2.28,2.371,3.443l-3.194,5.639c-0.272,0.481-0.104,1.092,0.378,1.363c0.239,0.137,0.512,0.162,0.758,0.094c0.248-0.068,0.469-0.229,0.604-0.471l2.895-5.109c2.7,2.594,5.684,4.123,5.778,1.053c1.598,2.56,3.451-0.338,4.502-3.976l5.203,2.947c0.24,0.138,0.514,0.162,0.762,0.094c0.246-0.067,0.467-0.229,0.603-0.471c0.272-0.479,0.104-1.091-0.377-1.362l-5.701-3.229c0.291-1.505,0.422-2.983,0.319-4.138l5.886-1.627c0.53-0.147,0.847-0.697,0.696-1.229C29.673,11.068,29.121,10.756,28.589,10.903z")}}),draw2d.shape.icon.Link=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Link",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16.45,18.085l-2.47,2.471c0.054,1.023-0.297,2.062-1.078,2.846c-1.465,1.459-3.837,1.459-5.302-0.002c-1.461-1.465-1.46-3.836-0.001-5.301c0.783-0.781,1.824-1.131,2.847-1.078l2.469-2.469c-2.463-1.057-5.425-0.586-7.438,1.426c-2.634,2.637-2.636,6.907,0,9.545c2.638,2.637,6.909,2.635,9.545,0l0.001,0.002C17.033,23.511,17.506,20.548,16.45,18.085zM14.552,12.915l2.467-2.469c-0.053-1.023,0.297-2.062,1.078-2.848C19.564,6.139,21.934,6.137,23.4,7.6c1.462,1.465,1.462,3.837,0,5.301c-0.783,0.783-1.822,1.132-2.846,1.079l-2.469,2.468c2.463,1.057,5.424,0.584,7.438-1.424c2.634-2.639,2.633-6.91,0-9.546c-2.639-2.636-6.91-2.637-9.545-0.001C13.967,7.489,13.495,10.451,14.552,12.915zM18.152,10.727l-7.424,7.426c-0.585,0.584-0.587,1.535,0,2.121c0.585,0.584,1.536,0.584,2.121-0.002l7.425-7.424c0.584-0.586,0.584-1.535,0-2.121C19.687,10.141,18.736,10.142,18.152,10.727z")}}),draw2d.shape.icon.Calendar=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Calendar",
init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M11.758,15.318c0.312-0.3,0.408-0.492,0.408-0.492h0.024c0,0-0.012,0.264-0.012,0.528v5.469h-1.871v1.031h4.87v-1.031H13.33v-7.436h-1.055l-2.027,1.967l0.719,0.744L11.758,15.318zM16.163,21.207c0,0.205,0.024,0.42,0.06,0.647h5.457v-1.031h-4.197c0.023-1.931,4.065-2.362,4.065-5.146c0-1.463-1.114-2.436-2.674-2.436c-1.907,0-2.675,1.607-2.675,1.607l0.875,0.587c0,0,0.6-1.08,1.716-1.08c0.887,0,1.522,0.563,1.522,1.403C20.312,17.754,16.163,18.186,16.163,21.207zM12,3.604h-2v3.335h2V3.604zM23,4.77v3.17h-4V4.77h-6v3.168H9.002V4.77H6.583v21.669h18.833V4.77H23zM24.417,25.438H7.584V10.522h16.833V25.438zM22,3.604h-2v3.335h2V3.604z")}}),draw2d.shape.icon.Picker=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Picker",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.221,10.853c-0.111-0.414-0.261-0.412,0.221-1.539l1.66-3.519c0.021-0.051,0.2-0.412,0.192-0.946c0.015-0.529-0.313-1.289-1.119-1.642c-1.172-0.555-1.17-0.557-2.344-1.107c-0.784-0.396-1.581-0.171-1.979,0.179c-0.42,0.333-0.584,0.7-0.609,0.75L16.58,6.545c-0.564,1.084-0.655,0.97-1.048,1.147c-0.469,0.129-1.244,0.558-1.785,1.815c-1.108,2.346-1.108,2.346-1.108,2.346l-0.276,0.586l1.17,0.553l-3.599,7.623c-0.38,0.828-0.166,1.436-0.166,2.032c0.01,0.627-0.077,1.509-0.876,3.21l-0.276,0.586l3.517,1.661l0.276-0.585c0.808-1.699,1.431-2.326,1.922-2.717c0.46-0.381,1.066-0.6,1.465-1.42l3.599-7.618l1.172,0.554l0.279-0.589c0,0,0,0,1.105-2.345C22.578,12.166,22.419,11.301,22.221,10.853zM14.623,22.83c-0.156,0.353-0.413,0.439-1.091,0.955c-0.577,0.448-1.264,1.172-2.009,2.6l-1.191-0.562c0.628-1.48,0.75-2.474,0.73-3.203c-0.031-0.851-0.128-1.104,0.045-1.449l3.599-7.621l3.517,1.662L14.623,22.83z")}}),draw2d.shape.icon.No=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.No",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16,2.939C9.006,2.942,3.338,8.61,3.335,15.605C3.335,22.6,9.005,28.268,16,28.27c6.994-0.002,12.662-5.67,12.664-12.664C28.663,8.61,22.995,2.939,16,2.939zM25.663,15.605c-0.003,1.943-0.583,3.748-1.569,5.264L10.736,7.513c1.515-0.988,3.32-1.569,5.265-1.573C21.337,5.951,25.654,10.269,25.663,15.605zM6.335,15.605c0.004-1.943,0.584-3.75,1.573-5.266l13.355,13.357c-1.516,0.986-3.32,1.566-5.264,1.569C10.664,25.26,6.346,20.941,6.335,15.605z")}}),draw2d.shape.icon.CommandLine=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.CommandLine",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M2.021,9.748L2.021,9.748V9.746V9.748zM2.022,9.746l5.771,5.773l-5.772,5.771l2.122,2.123l7.894-7.895L4.143,7.623L2.022,9.746zM12.248,23.269h14.419V20.27H12.248V23.269zM16.583,17.019h10.084V14.02H16.583V17.019zM12.248,7.769v3.001h14.419V7.769H12.248z")}}),draw2d.shape.icon.Photo=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Photo",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.25,10.25H20.5v-1.5h-9.375v1.5h-3.75c-1.104,0-2,0.896-2,2v10.375c0,1.104,0.896,2,2,2H24.25c1.104,0,2-0.896,2-2V12.25C26.25,11.146,25.354,10.25,24.25,10.25zM15.812,23.499c-3.342,0-6.06-2.719-6.06-6.061c0-3.342,2.718-6.062,6.06-6.062s6.062,2.72,6.062,6.062C21.874,20.78,19.153,23.499,15.812,23.499zM15.812,13.375c-2.244,0-4.062,1.819-4.062,4.062c0,2.244,1.819,4.062,4.062,4.062c2.244,0,4.062-1.818,4.062-4.062C19.875,15.194,18.057,13.375,15.812,13.375z")}}),draw2d.shape.icon.Printer=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Printer",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.569,12.125h-2.12c-0.207-1.34-1.247-2.759-2.444-3.967c-1.277-1.24-2.654-2.234-3.784-2.37c-0.062-0.008-0.124-0.014-0.198-0.015H8.594c-0.119,0-0.235,0.047-0.319,0.132c-0.083,0.083-0.132,0.2-0.132,0.32v5.9H6.069c-1.104,0-2,0.896-2,2V23h4.074v2.079c0,0.118,0.046,0.23,0.132,0.318c0.086,0.085,0.199,0.131,0.319,0.131h13.445c0.118,0,0.232-0.046,0.318-0.131s0.138-0.199,0.138-0.318V23h4.074v-8.875C26.569,13.021,25.674,12.125,24.569,12.125zM21.589,24.626H9.043V21.5h12.546V24.626zM21.589,13.921c0-0.03,0-0.063-0.003-0.096c-0.015-0.068-0.062-0.135-0.124-0.2H9.043v-6.95h6.987v0.001c0.305-0.019,0.567,0.282,0.769,0.971c0.183,0.655,0.229,1.509,0.229,2.102c0.001,0.433-0.019,0.725-0.019,0.725l-0.037,0.478l0.48,0.005c0.002,0,1.109,0.014,2.196,0.26c1.044,0.226,1.86,0.675,1.938,1.184c0.003,0.045,0.003,0.091,0.003,0.133V13.921z")}}),draw2d.shape.icon.Export=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Export",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.086,20.904c-1.805,3.113-5.163,5.212-9.023,5.219c-5.766-0.01-10.427-4.672-10.438-10.435C4.636,9.922,9.297,5.261,15.063,5.25c3.859,0.007,7.216,2.105,9.022,5.218l3.962,2.284l0.143,0.082C26.879,6.784,21.504,2.25,15.063,2.248C7.64,2.25,1.625,8.265,1.624,15.688c0.002,7.42,6.017,13.435,13.439,13.437c6.442-0.002,11.819-4.538,13.127-10.589l-0.141,0.081L24.086,20.904zM28.4,15.688l-7.15-4.129v2.297H10.275v3.661H21.25v2.297L28.4,15.688z")}}),draw2d.shape.icon.Import=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Import",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.067,2.25c-5.979,0-11.035,3.91-12.778,9.309h3.213c1.602-3.705,5.271-6.301,9.565-6.309c5.764,0.01,10.428,4.674,10.437,10.437c-0.009,5.764-4.673,10.428-10.437,10.438c-4.294-0.007-7.964-2.605-9.566-6.311H2.289c1.744,5.399,6.799,9.31,12.779,9.312c7.419-0.002,13.437-6.016,13.438-13.438C28.504,8.265,22.486,2.252,15.067,2.25zM10.918,19.813l7.15-4.126l-7.15-4.129v2.297H-0.057v3.661h10.975V19.813z")}}),draw2d.shape.icon.Run=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Run",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M17.41,20.395l-0.778-2.723c0.228-0.2,0.442-0.414,0.644-0.643l2.721,0.778c0.287-0.418,0.534-0.862,0.755-1.323l-2.025-1.96c0.097-0.288,0.181-0.581,0.241-0.883l2.729-0.684c0.02-0.252,0.039-0.505,0.039-0.763s-0.02-0.51-0.039-0.762l-2.729-0.684c-0.061-0.302-0.145-0.595-0.241-0.883l2.026-1.96c-0.222-0.46-0.469-0.905-0.756-1.323l-2.721,0.777c-0.201-0.228-0.416-0.442-0.644-0.643l0.778-2.722c-0.418-0.286-0.863-0.534-1.324-0.755l-1.96,2.026c-0.287-0.097-0.581-0.18-0.883-0.241l-0.683-2.73c-0.253-0.019-0.505-0.039-0.763-0.039s-0.51,0.02-0.762,0.039l-0.684,2.73c-0.302,0.061-0.595,0.144-0.883,0.241l-1.96-2.026C7.048,3.463,6.604,3.71,6.186,3.997l0.778,2.722C6.736,6.919,6.521,7.134,6.321,7.361L3.599,6.583C3.312,7.001,3.065,7.446,2.844,7.907l2.026,1.96c-0.096,0.288-0.18,0.581-0.241,0.883l-2.73,0.684c-0.019,0.252-0.039,0.505-0.039,0.762s0.02,0.51,0.039,0.763l2.73,0.684c0.061,0.302,0.145,0.595,0.241,0.883l-2.026,1.96c0.221,0.46,0.468,0.905,0.755,1.323l2.722-0.778c0.2,0.229,0.415,0.442,0.643,0.643l-0.778,2.723c0.418,0.286,0.863,0.533,1.323,0.755l1.96-2.026c0.288,0.097,0.581,0.181,0.883,0.241l0.684,2.729c0.252,0.02,0.505,0.039,0.763,0.039s0.51-0.02,0.763-0.039l0.683-2.729c0.302-0.061,0.596-0.145,0.883-0.241l1.96,2.026C16.547,20.928,16.992,20.681,17.41,20.395zM11.798,15.594c-1.877,0-3.399-1.522-3.399-3.399s1.522-3.398,3.399-3.398s3.398,1.521,3.398,3.398S13.675,15.594,11.798,15.594zM27.29,22.699c0.019-0.547-0.06-1.104-0.23-1.654l1.244-1.773c-0.188-0.35-0.4-0.682-0.641-0.984l-2.122,0.445c-0.428-0.364-0.915-0.648-1.436-0.851l-0.611-2.079c-0.386-0.068-0.777-0.105-1.173-0.106l-0.974,1.936c-0.279,0.054-0.558,0.128-0.832,0.233c-0.257,0.098-0.497,0.22-0.727,0.353L17.782,17.4c-0.297,0.262-0.568,0.545-0.813,0.852l0.907,1.968c-0.259,0.495-0.437,1.028-0.519,1.585l-1.891,1.06c0.019,0.388,0.076,0.776,0.164,1.165l2.104,0.519c0.231,0.524,0.541,0.993,0.916,1.393l-0.352,2.138c0.32,0.23,0.66,0.428,1.013,0.6l1.715-1.32c0.536,0.141,1.097,0.195,1.662,0.15l1.452,1.607c0.2-0.057,0.399-0.118,0.596-0.193c0.175-0.066,0.34-0.144,0.505-0.223l0.037-2.165c0.455-0.339,0.843-0.747,1.152-1.206l2.161-0.134c0.152-0.359,0.279-0.732,0.368-1.115L27.29,22.699zM23.127,24.706c-1.201,0.458-2.545-0.144-3.004-1.345s0.143-2.546,1.344-3.005c1.201-0.458,2.547,0.144,3.006,1.345C24.931,22.902,24.328,24.247,23.127,24.706z")}}),draw2d.shape.icon.Magnet=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Magnet",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.812,19.5h5.002v-6.867c-0.028-1.706-0.61-3.807-2.172-5.841c-1.539-2.014-4.315-3.72-7.939-3.687C12.076,3.073,9.3,4.779,7.762,6.792C6.2,8.826,5.617,10.928,5.588,12.634V19.5h5v-6.866c-0.027-0.377,0.303-1.789,1.099-2.748c0.819-0.979,1.848-1.747,4.014-1.778c2.165,0.032,3.195,0.799,4.013,1.778c0.798,0.959,1.126,2.372,1.099,2.748V19.5L20.812,19.5zM25.814,25.579c0,0,0-2.354,0-5.079h-5.002c0,2.727,0,5.08,0,5.08l5.004-0.001H25.814zM5.588,25.58h5c0,0,0-2.354,0-5.08h-5C5.588,23.227,5.588,25.58,5.588,25.58z")}}),draw2d.shape.icon.NoMagnet=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.NoMagnet",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.59,17.857v-5.225c-0.027-0.376,0.303-1.789,1.099-2.748c0.819-0.979,1.849-1.748,4.014-1.778c1.704,0.026,2.699,0.508,3.447,1.189l3.539-3.539c-1.616-1.526-4.01-2.679-6.986-2.652C12.077,3.073,9.3,4.779,7.762,6.793C6.2,8.826,5.617,10.928,5.59,12.634V19.5h3.357L10.59,17.857zM5.59,20.5v2.357L7.947,20.5H5.59zM20.812,13.29v6.21h5.002v-6.866c-0.021-1.064-0.252-2.283-0.803-3.542L20.812,13.29zM25.339,4.522L4.652,25.209l1.415,1.416L26.753,5.937L25.339,4.522zM20.812,25.58h5.002c0,0,0-2.354,0-5.08h-5.002C20.812,23.227,20.812,25.58,20.812,25.58zM10.59,25.58c0,0,0-0.827,0-2.064L8.525,25.58H10.59z")}}),draw2d.shape.icon.ReflectH=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ReflectH",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.57,20.273h0.854v-1.705H15.57V20.273zM15.57,23.686h0.854V21.98H15.57V23.686zM15.57,27.096h0.854v-1.705H15.57V27.096zM15.57,29.689h0.854V28.8H15.57V29.689zM15.57,16.865h0.854V15.16H15.57V16.865zM15.57,3.225h0.854V1.52H15.57V3.225zM15.57,6.635h0.854V4.93H15.57V6.635zM15.57,10.045h0.854V8.34H15.57V10.045zM15.57,13.455h0.854V11.75H15.57V13.455zM18.41,3.327V25.46h12.015L18.41,3.327zM19.264,6.68l9.729,17.93h-9.729V6.68zM13.535,25.46V3.327L1.521,25.46H13.535z")}}),draw2d.shape.icon.ReflectV=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ReflectV",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.643,16.008v-0.854h-1.705v0.854H20.643zM24.053,16.008v-0.854h-1.705v0.854H24.053zM27.463,16.008v-0.854h-1.705v0.854H27.463zM30.059,16.008v-0.854h-0.891v0.854H30.059zM17.232,16.008v-0.854h-1.709v0.854H17.232zM3.593,16.008v-0.854H1.888v0.854H3.593zM7.003,16.008v-0.854H5.298v0.854H7.003zM10.414,16.008v-0.854H8.709v0.854H10.414zM13.824,16.008v-0.854h-1.705v0.854H13.824zM3.694,13.167h22.134V1.152L3.694,13.167zM7.048,12.314l17.929-9.729v9.729H7.048zM25.828,18.042H3.694l22.134,12.015V18.042z")}}),draw2d.shape.icon.Resize2=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Resize2",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M1.999,2.332v26.499H28.5V2.332H1.999zM26.499,26.832H4V12.5h8.167V4.332h14.332V26.832zM15.631,17.649l5.468,5.469l-1.208,1.206l5.482,1.469l-1.47-5.481l-1.195,1.195l-5.467-5.466l1.209-1.208l-5.482-1.469l1.468,5.48L15.631,17.649z")}}),draw2d.shape.icon.Rotate=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Rotate",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,5.27c1.914,0,3.666,0.629,5.089,1.686l-1.781,1.783l8.428,2.256l-2.26-8.427l-1.889,1.89C21.016,2.781,18.371,1.77,15.5,1.77C8.827,1.773,3.418,7.181,3.417,13.855c0.001,4.063,2.012,7.647,5.084,9.838v-4.887c-0.993-1.4-1.583-3.105-1.585-4.952C6.923,9.114,10.759,5.278,15.5,5.27zM9.5,29.23h12V12.355h-12V29.23z")}}),draw2d.shape.icon.Connect=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Connect",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.06,13.719c-0.944-5.172-5.461-9.094-10.903-9.094v4c3.917,0.006,7.085,3.176,7.094,7.094c-0.009,3.917-3.177,7.085-7.094,7.093v4.002c5.442-0.004,9.959-3.926,10.903-9.096h4.69v-3.999H25.06zM20.375,15.719c0-3.435-2.784-6.219-6.219-6.219c-2.733,0-5.05,1.766-5.884,4.218H1.438v4.001h6.834c0.833,2.452,3.15,4.219,5.884,4.219C17.591,21.938,20.375,19.153,20.375,15.719z")}}),draw2d.shape.icon.Disconnect=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Disconnect",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M9.219,9.5c-2.733,0-5.05,1.766-5.884,4.218H1.438v4.001h1.897c0.833,2.452,3.15,4.219,5.884,4.219c3.435,0,6.219-2.784,6.219-6.219S12.653,9.5,9.219,9.5zM27.685,13.719c-0.944-5.172-5.461-9.094-10.903-9.094v4c3.917,0.006,7.085,3.176,7.094,7.094c-0.009,3.917-3.177,7.085-7.094,7.093v4.002c5.442-0.004,9.959-3.926,10.903-9.096h2.065v-3.999H27.685z")}}),draw2d.shape.icon.Folder=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Folder",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.625,26.75h-26.5V8.375h1.124c1.751,0,0.748-3.125,3-3.125c3.215,0,1.912,0,5.126,0c2.251,0,1.251,3.125,3.001,3.125h14.25V26.75z")}}),draw2d.shape.icon.Man=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Man",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.021,16.349c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.103,1.031c-1.164,0-2.231-0.391-3.105-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.55,0.307,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.932,1.139,5.307,2.543,5.307c0.846,0,1.265-0.865,1.466-2.189c0.201,1.324,0.62,2.189,1.463,2.189c1.406,0,2.545-2.375,2.545-5.307c0-0.66-0.061-1.291-0.168-1.873c0.598,0.574,1.174,0.803,1.725,0.496C22.602,21.541,22.443,18.912,21.021,16.349zM15.808,13.757c2.362,0,4.278-1.916,4.278-4.279s-1.916-4.279-4.278-4.279c-2.363,0-4.28,1.916-4.28,4.279S13.445,13.757,15.808,13.757z")}}),draw2d.shape.icon.Woman=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Woman",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.022,16.349c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.104,1.031c-1.164,0-2.231-0.391-3.105-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.579,5.192-0.351,5.874c0.55,0.307,1.127,0.078,1.723-0.496c-0.105,0.582-0.167,1.213-0.167,1.873c0,2.932,1.139,5.307,2.543,5.307c0.846,0,1.265-0.865,1.466-2.189c0.201,1.324,0.62,2.189,1.464,2.189c1.406,0,2.545-2.375,2.545-5.307c0-0.66-0.061-1.291-0.168-1.873c0.598,0.574,1.174,0.803,1.725,0.496C22.603,21.541,22.444,18.912,21.022,16.349zM15.808,13.757c2.363,0,4.279-1.916,4.279-4.279s-1.916-4.279-4.279-4.279c-2.363,0-4.28,1.916-4.28,4.279S13.445,13.757,15.808,13.757zM18.731,4.974c1.235,0.455,0.492-0.725,0.492-1.531s0.762-1.792-0.492-1.391c-1.316,0.422-2.383,0.654-2.383,1.461S17.415,4.489,18.731,4.974zM15.816,4.4c0.782,0,0.345-0.396,0.345-0.884c0-0.488,0.438-0.883-0.345-0.883s-0.374,0.396-0.374,0.883C15.442,4.005,15.034,4.4,15.816,4.4zM12.884,4.974c1.316-0.484,2.383-0.654,2.383-1.461S14.2,2.474,12.884,2.052c-1.254-0.402-0.492,0.584-0.492,1.391S11.648,5.428,12.884,4.974z")}}),draw2d.shape.icon.People=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.People",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.066,20.667c1.227-0.682,1.068-3.311-0.354-5.874c-0.611-1.104-1.359-1.998-2.109-2.623c-0.875,0.641-1.941,1.031-3.102,1.031c-1.164,0-2.231-0.391-3.104-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.549,0.312,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.938,1.139,5.312,2.543,5.312c0.846,0,1.265-0.865,1.466-2.188c0.2,1.314,0.62,2.188,1.461,2.188c1.396,0,2.545-2.375,2.545-5.312c0-0.66-0.062-1.291-0.168-1.873C19.939,20.745,20.516,20.983,21.066,20.667zM15.5,12.201c2.361,0,4.277-1.916,4.277-4.279S17.861,3.644,15.5,3.644c-2.363,0-4.28,1.916-4.28,4.279S13.137,12.201,15.5,12.201zM24.094,14.914c1.938,0,3.512-1.573,3.512-3.513c0-1.939-1.573-3.513-3.512-3.513c-1.94,0-3.513,1.573-3.513,3.513C20.581,13.341,22.153,14.914,24.094,14.914zM28.374,17.043c-0.502-0.907-1.116-1.641-1.732-2.154c-0.718,0.526-1.594,0.846-2.546,0.846c-0.756,0-1.459-0.207-2.076-0.55c0.496,1.093,0.803,2.2,0.861,3.19c0.093,1.516-0.381,2.641-1.329,3.165c-0.204,0.117-0.426,0.183-0.653,0.224c-0.056,0.392-0.095,0.801-0.095,1.231c0,2.412,0.935,4.361,2.088,4.361c0.694,0,1.039-0.71,1.204-1.796c0.163,1.079,0.508,1.796,1.199,1.796c1.146,0,2.09-1.95,2.09-4.361c0-0.542-0.052-1.06-0.139-1.538c0.492,0.472,0.966,0.667,1.418,0.407C29.671,21.305,29.541,19.146,28.374,17.043zM6.906,14.914c1.939,0,3.512-1.573,3.512-3.513c0-1.939-1.573-3.513-3.512-3.513c-1.94,0-3.514,1.573-3.514,3.513C3.392,13.341,4.966,14.914,6.906,14.914zM9.441,21.536c-1.593-0.885-1.739-3.524-0.457-6.354c-0.619,0.346-1.322,0.553-2.078,0.553c-0.956,0-1.832-0.321-2.549-0.846c-0.616,0.513-1.229,1.247-1.733,2.154c-1.167,2.104-1.295,4.262-0.287,4.821c0.451,0.257,0.925,0.064,1.414-0.407c-0.086,0.479-0.136,0.996-0.136,1.538c0,2.412,0.935,4.361,2.088,4.361c0.694,0,1.039-0.71,1.204-1.796c0.165,1.079,0.509,1.796,1.201,1.796c1.146,0,2.089-1.95,2.089-4.361c0-0.432-0.04-0.841-0.097-1.233C9.874,21.721,9.651,21.656,9.441,21.536z")}}),draw2d.shape.icon.Parent=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Parent",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.423,12.17c-0.875,0.641-1.941,1.031-3.102,1.031c-1.164,0-2.231-0.391-3.104-1.031c-0.75,0.625-1.498,1.519-2.111,2.623c-1.422,2.563-1.578,5.192-0.35,5.874c0.549,0.312,1.127,0.078,1.723-0.496c-0.105,0.582-0.166,1.213-0.166,1.873c0,2.938,1.139,5.312,2.543,5.312c0.846,0,1.265-0.865,1.466-2.188c0.2,1.314,0.62,2.188,1.461,2.188c1.396,0,2.545-2.375,2.545-5.312c0-0.66-0.062-1.291-0.168-1.873c0.6,0.574,1.176,0.812,1.726,0.496c1.227-0.682,1.068-3.311-0.354-5.874C15.921,13.689,15.173,12.795,14.423,12.17zM11.32,12.201c2.361,0,4.277-1.916,4.277-4.279s-1.916-4.279-4.277-4.279c-2.363,0-4.28,1.916-4.28,4.279S8.957,12.201,11.32,12.201zM21.987,17.671c1.508,0,2.732-1.225,2.732-2.735c0-1.51-1.225-2.735-2.732-2.735c-1.511,0-2.736,1.225-2.736,2.735C19.251,16.446,20.477,17.671,21.987,17.671zM25.318,19.327c-0.391-0.705-0.869-1.277-1.349-1.677c-0.56,0.41-1.24,0.659-1.982,0.659c-0.744,0-1.426-0.25-1.983-0.659c-0.479,0.399-0.958,0.972-1.35,1.677c-0.909,1.638-1.009,3.318-0.224,3.754c0.351,0.2,0.721,0.05,1.101-0.317c-0.067,0.372-0.105,0.775-0.105,1.197c0,1.878,0.728,3.396,1.625,3.396c0.54,0,0.808-0.553,0.937-1.398c0.128,0.841,0.396,1.398,0.934,1.398c0.893,0,1.627-1.518,1.627-3.396c0-0.422-0.04-0.825-0.107-1.197c0.383,0.367,0.752,0.52,1.104,0.317C26.328,22.646,26.227,20.965,25.318,19.327z")}}),draw2d.shape.icon.Notebook=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Notebook",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.875,1.375H8c-1.033,0-1.874,0.787-1.979,1.792h1.604c1.102,0,2,0.898,2,2c0,1.102-0.898,2-2,2H6v0.999h1.625c1.104,0,2.002,0.898,2.002,2.002c0,1.104-0.898,2.001-2.002,2.001H6v0.997h1.625c1.102,0,2,0.898,2,2c0,1.104-0.898,2.004-2,2.004H6v0.994h1.625c1.102,0,2,0.898,2,2.002s-0.898,2.002-2,2.002H6v0.997h1.624c1.104,0,2.002,0.897,2.002,2.001c0,1.104-0.898,2.002-2.002,2.002H6.004C6.027,28.252,6.91,29.125,8,29.125h16.875c1.104,0,2-0.896,2-2V3.375C26.875,2.271,25.979,1.375,24.875,1.375zM25.25,8.375c0,0.552-0.447,1-1,1H14c-0.553,0-1-0.448-1-1V4c0-0.552,0.447-1,1-1h10.25c0.553,0,1,0.448,1,1V8.375zM8.625,25.166c0-0.554-0.449-1.001-1-1.001h-3.25c-0.552,0-1,0.447-1,1.001c0,0.552,0.449,1,1,1h3.25C8.176,26.166,8.625,25.718,8.625,25.166zM4.375,6.166h3.251c0.551,0,0.999-0.448,0.999-0.999c0-0.555-0.448-1-0.999-1H4.375c-0.553,0-1,0.445-1,1C3.374,5.718,3.822,6.166,4.375,6.166zM4.375,11.167h3.25c0.553,0,1-0.448,1-1s-0.448-1-1-1h-3.25c-0.553,0-1,0.448-1,1S3.822,11.167,4.375,11.167zM4.375,16.167h3.25c0.551,0,1-0.448,1-1.001s-0.448-0.999-1-0.999h-3.25c-0.553,0-1.001,0.446-1.001,0.999S3.822,16.167,4.375,16.167zM3.375,20.165c0,0.553,0.446,1.002,1,1.002h3.25c0.551,0,1-0.449,1-1.002c0-0.552-0.448-1-1-1h-3.25C3.821,19.165,3.375,19.613,3.375,20.165z")}}),draw2d.shape.icon.Diagram=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Diagram",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M6.812,17.202l7.396-3.665v-2.164h-0.834c-0.414,0-0.808-0.084-1.167-0.237v1.159l-7.396,3.667v2.912h2V17.202zM26.561,18.875v-2.913l-7.396-3.666v-1.158c-0.358,0.152-0.753,0.236-1.166,0.236h-0.832l-0.001,2.164l7.396,3.666v1.672H26.561zM16.688,18.875v-7.501h-2v7.501H16.688zM27.875,19.875H23.25c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2h4.625c1.104,0,2-0.896,2-2v-4.625C29.875,20.771,28.979,19.875,27.875,19.875zM8.125,19.875H3.5c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2h4.625c1.104,0,2-0.896,2-2v-4.625C10.125,20.771,9.229,19.875,8.125,19.875zM13.375,10.375H18c1.104,0,2-0.896,2-2V3.75c0-1.104-0.896-2-2-2h-4.625c-1.104,0-2,0.896-2,2v4.625C11.375,9.479,12.271,10.375,13.375,10.375zM18,19.875h-4.625c-1.104,0-2,0.896-2,2V26.5c0,1.104,0.896,2,2,2H18c1.104,0,2-0.896,2-2v-4.625C20,20.771,19.104,19.875,18,19.875z")}}),draw2d.shape.icon.BarChart=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.BarChart",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.25,8.375V28h6.5V8.375H21.25zM12.25,28h6.5V4.125h-6.5V28zM3.25,28h6.5V12.625h-6.5V28z")}}),draw2d.shape.icon.PieChart=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.PieChart",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.583,15.917l1.648-10.779C16.692,5.056,16.145,5,15.583,5C9.554,5,4.666,9.888,4.666,15.917c0,6.029,4.888,10.917,10.917,10.917S26.5,21.946,26.5,15.917c0-0.256-0.021-0.507-0.038-0.759L15.583,15.917zM19.437,3.127l-1.648,10.779l10.879-0.759C28.313,8.026,24.436,3.886,19.437,3.127z")}}),draw2d.shape.icon.LineChart=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.LineChart",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M3.625,25.062c-0.539-0.115-0.885-0.646-0.77-1.187l0,0L6.51,6.584l2.267,9.259l1.923-5.188l3.581,3.741l3.883-13.103l2.934,11.734l1.96-1.509l5.271,11.74c0.226,0.504,0,1.095-0.505,1.321l0,0c-0.505,0.227-1.096,0-1.322-0.504l0,0l-4.23-9.428l-2.374,1.826l-1.896-7.596l-2.783,9.393l-3.754-3.924L8.386,22.66l-1.731-7.083l-1.843,8.711c-0.101,0.472-0.515,0.794-0.979,0.794l0,0C3.765,25.083,3.695,25.076,3.625,25.062L3.625,25.062z")}}),draw2d.shape.icon.Apps=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Apps",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.359,18.424l-2.326,1.215c0.708,1.174,1.384,2.281,1.844,3.033l2.043-1.066C25.538,20.822,24.966,19.652,24.359,18.424zM19.143,14.688c0.445,0.84,1.342,2.367,2.274,3.926l2.414-1.261c-0.872-1.769-1.72-3.458-2.087-4.122c-0.896-1.621-1.982-3.108-3.454-5.417c-1.673-2.625-3.462-5.492-4.052-4.947c-1.194,0.384,1.237,4.094,1.876,5.715C16.73,10.147,17.991,12.512,19.143,14.688zM26.457,22.673l-1.961,1.022l1.982,4.598c0,0,0.811,0.684,1.92,0.213c1.104-0.469,0.81-1.706,0.81-1.706L26.457,22.673zM24.35,15.711c0.168,0.339,2.924,5.93,2.924,5.93h1.983v-5.93H24.35zM18.34,15.704h-4.726l-3.424,5.935h11.66C21.559,21.159,18.771,16.479,18.34,15.704zM3.231,21.613l3.437-5.902H2.083v5.93h1.133L3.231,21.613zM15.048,10.145c0-0.93-0.754-1.685-1.685-1.685c-0.661,0-1.231,0.381-1.507,0.936l2.976,1.572C14.97,10.725,15.048,10.444,15.048,10.145zM14.343,12.06l-3.188-1.684L9.62,13.012l3.197,1.689L14.343,12.06zM3.192,26.886l-0.384,1.108v0.299l0.298-0.128l0.725-0.896l2.997-2.354l-3.137-1.651L3.192,26.886zM9.02,14.044l-4.757,8.17l3.23,1.706l4.728-8.186L9.02,14.044z")}}),draw2d.shape.icon.Locked=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Locked",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.711,14.085L16.914,4.29c-0.778-0.778-2.051-0.778-2.829,0L4.29,14.086c-0.778,0.778-0.778,2.05,0,2.829l9.796,9.796c0.778,0.777,2.051,0.777,2.829,0l9.797-9.797C27.488,16.136,27.488,14.863,26.711,14.085zM8.218,16.424c-0.4-0.153-0.687-0.533-0.687-0.987s0.287-0.834,0.687-0.987V16.424zM8.969,16.424v-1.974c0.4,0.152,0.687,0.533,0.687,0.987S9.369,16.272,8.969,16.424zM13.5,19.188l1.203-3.609c-0.689-0.306-1.172-0.994-1.172-1.797c0-1.087,0.881-1.969,1.969-1.969c1.087,0,1.969,0.881,1.969,1.969c0,0.803-0.482,1.491-1.172,1.797l1.203,3.609H13.5zM22.03,16.549c-0.399-0.152-0.687-0.533-0.687-0.986s0.287-0.834,0.687-0.987V16.549zM22.781,16.549v-1.973c0.4,0.152,0.688,0.533,0.688,0.987S23.182,16.397,22.781,16.549z")}}),draw2d.shape.icon.Ppt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ppt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16.604,1.914c0-0.575-0.466-1.041-1.041-1.041s-1.041,0.466-1.041,1.041v1.04h2.082V1.914zM16.604,22.717h-2.082v3.207c0,0.574-4.225,4.031-4.225,4.031l2.468-0.003l2.807-2.673l3.013,2.693l2.272-0.039l-4.254-4.011V22.717L16.604,22.717zM28.566,7.113c0.86,0,1.56-0.698,1.56-1.56c0-0.861-0.698-1.56-1.56-1.56H2.561c-0.861,0-1.56,0.699-1.56,1.56c0,0.862,0.699,1.56,1.56,1.56h1.583v12.505l-0.932-0.022c-0.861,0-1.213,0.467-1.213,1.04c0,0.576,0.352,1.041,1.213,1.041h24.597c0.86,0,1.299-0.465,1.299-1.041c0-1.094-1.299-1.04-1.299-1.04l-0.804,0.109V7.113H28.566zM11.435,17.516c-3.771,0-4.194-4.191-4.194-4.191c0-4.096,4.162-4.161,4.162-4.161v4.161h4.193C15.596,17.516,11.435,17.516,11.435,17.516zM18.716,13.388h-1.071v-1.073h1.071V13.388zM18.716,10.267h-1.071V9.194h1.071V10.267zM23.314,13.388H20.26c-0.296,0-0.535-0.24-0.535-0.536c0-0.297,0.239-0.537,0.535-0.537h3.057c0.297,0,0.535,0.24,0.535,0.537C23.852,13.147,23.611,13.388,23.314,13.388zM23.314,10.267H20.26c-0.296,0-0.535-0.239-0.535-0.535c0-0.297,0.239-0.537,0.535-0.537h3.057c0.297,0,0.535,0.24,0.535,0.537C23.852,10.027,23.611,10.267,23.314,10.267z")}}),draw2d.shape.icon.Lab=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Lab",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.121,24.438l-3.362-7.847c-0.329-0.769-0.599-2.081-0.599-2.917s0.513-1.521,1.14-1.521s1.141-0.513,1.141-1.14s-0.685-1.14-1.521-1.14h-6.84c-0.836,0-1.52,0.513-1.52,1.14s0.513,1.14,1.14,1.14s1.14,0.685,1.14,1.521s-0.269,2.148-0.599,2.917l-3.362,7.847C8.55,25.206,8.28,26.177,8.28,26.595s0.342,1.103,0.76,1.521s1.444,0.76,2.28,0.76h8.359c0.836,0,1.862-0.342,2.28-0.76s0.76-1.103,0.76-1.521S22.45,25.206,22.121,24.438zM16.582,7.625c0,0.599,0.484,1.083,1.083,1.083s1.083-0.484,1.083-1.083s-0.484-1.084-1.083-1.084S16.582,7.026,16.582,7.625zM13.667,7.792c0.276,0,0.5-0.224,0.5-0.5s-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5S13.391,7.792,13.667,7.792zM15.584,5.292c0.874,0,1.583-0.709,1.583-1.583c0-0.875-0.709-1.584-1.583-1.584C14.709,2.125,14,2.834,14,3.709C14,4.583,14.709,5.292,15.584,5.292z")}}),draw2d.shape.icon.Umbrella=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Umbrella",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.784,26.991c0,1.238-1.329,1.696-1.835,1.696c-0.504,0-1.536-0.413-1.65-1.812c0-0.354-0.288-0.642-0.644-0.642c-0.354,0-0.641,0.287-0.641,0.642c0.045,1.056,0.756,3.052,2.935,3.052c2.432,0,3.166-1.882,3.166-3.144v-8.176l-1.328-0.024C14.787,18.584,14.784,25.889,14.784,26.991zM15.584,9.804c-6.807,0-11.084,4.859-11.587,8.326c0.636-0.913,1.694-1.51,2.89-1.51c1.197,0,2.22,0.582,2.855,1.495c0.638-0.904,1.69-1.495,2.88-1.495c1.2,0,2.26,0.6,2.896,1.517c0.635-0.917,1.83-1.517,3.03-1.517c1.19,0,2.241,0.591,2.879,1.495c0.636-0.913,1.659-1.495,2.855-1.495c1.197,0,2.254,0.597,2.89,1.51C26.669,14.663,22.393,9.804,15.584,9.804zM14.733,7.125v2.081h1.323V7.125c0-0.365-0.296-0.661-0.661-0.661C15.029,6.464,14.733,6.76,14.733,7.125z")}}),draw2d.shape.icon.Dry=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Dry",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.784,26.991c0,1.238-1.329,1.696-1.835,1.696c-0.504,0-1.536-0.413-1.65-1.812c0-0.354-0.288-0.642-0.644-0.642c-0.354,0-0.641,0.287-0.641,0.642c0.045,1.056,0.756,3.052,2.935,3.052c2.432,0,3.166-1.882,3.166-3.144v-8.176l-1.328-0.024C14.787,18.584,14.784,25.889,14.784,26.991zM15.584,9.804c-6.807,0-11.084,4.859-11.587,8.326c0.636-0.913,1.694-1.51,2.89-1.51c1.197,0,2.22,0.582,2.855,1.495c0.638-0.904,1.69-1.495,2.88-1.495c1.2,0,2.26,0.6,2.896,1.517c0.635-0.917,1.83-1.517,3.03-1.517c1.19,0,2.241,0.591,2.879,1.495c0.636-0.913,1.659-1.495,2.855-1.495c1.197,0,2.254,0.597,2.89,1.51C26.669,14.663,22.393,9.804,15.584,9.804zM14.733,7.125v2.081h1.323V7.125c0-0.365-0.296-0.661-0.661-0.661C15.029,6.464,14.733,6.76,14.733,7.125zM7.562,6.015c0.54,0.312,1.229,0.128,1.54-0.412c0.109-0.189,0.157-0.398,0.15-0.602L9.251,3.09L7.59,4.047c-0.178,0.095-0.333,0.24-0.441,0.428C6.837,5.015,7.022,5.703,7.562,6.015zM5.572,11.717c0.109-0.19,0.158-0.398,0.151-0.602L5.721,9.203l-1.66,0.957c-0.178,0.096-0.333,0.241-0.441,0.429c-0.311,0.539-0.127,1.229,0.413,1.539C4.571,12.44,5.26,12.256,5.572,11.717zM10.523,9.355c0.539,0.312,1.229,0.126,1.541-0.412c0.109-0.189,0.156-0.398,0.15-0.603L12.214,6.43l-1.662,0.956c-0.177,0.097-0.332,0.241-0.441,0.43C9.799,8.354,9.984,9.044,10.523,9.355zM15.251,3.998c0.539,0.312,1.229,0.126,1.54-0.412c0.11-0.19,0.157-0.398,0.15-0.603L16.94,1.072l-1.661,0.956c-0.178,0.097-0.332,0.242-0.441,0.43C14.526,2.998,14.711,3.687,15.251,3.998zM19.348,8.914c0.539,0.312,1.228,0.128,1.541-0.412c0.109-0.189,0.156-0.398,0.149-0.602h-0.001V5.988l-1.661,0.957c-0.178,0.096-0.332,0.241-0.441,0.429C18.623,7.914,18.809,8.603,19.348,8.914zM23.633,5.196c0.54,0.312,1.23,0.126,1.542-0.413c0.109-0.189,0.156-0.398,0.149-0.602h-0.001V2.27l-1.662,0.957c-0.177,0.096-0.331,0.24-0.44,0.43C22.909,4.195,23.094,4.885,23.633,5.196zM27.528,8.51l-1.659,0.956c-0.18,0.097-0.334,0.242-0.443,0.43c-0.312,0.539-0.127,1.229,0.413,1.54c0.539,0.312,1.229,0.127,1.541-0.412c0.109-0.19,0.158-0.398,0.151-0.603L27.528,8.51z")}}),draw2d.shape.icon.Ipad=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ipad",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.221,1.417H6.11c-0.865,0-1.566,0.702-1.566,1.566v25.313c0,0.865,0.701,1.565,1.566,1.565h19.111c0.865,0,1.565-0.7,1.565-1.565V2.984C26.787,2.119,26.087,1.417,25.221,1.417zM15.666,29.299c-0.346,0-0.626-0.279-0.626-0.625s0.281-0.627,0.626-0.627c0.346,0,0.627,0.281,0.627,0.627S16.012,29.299,15.666,29.299zM24.376,26.855c0,0.174-0.142,0.312-0.313,0.312H7.27c-0.173,0-0.313-0.142-0.313-0.312V4.3c0-0.173,0.14-0.313,0.313-0.313h16.792c0.172,0,0.312,0.14,0.312,0.313L24.376,26.855L24.376,26.855z")}}),draw2d.shape.icon.Iphone=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Iphone",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){
return this.canvas.paper.path("M20.755,1H10.62C9.484,1,8.562,1.921,8.562,3.058v24.385c0,1.136,0.921,2.058,2.058,2.058h10.135c1.136,0,2.058-0.922,2.058-2.058V3.058C22.812,1.921,21.891,1,20.755,1zM14.659,3.264h2.057c0.101,0,0.183,0.081,0.183,0.18c0,0.1-0.082,0.18-0.183,0.18h-2.057c-0.1,0-0.181-0.081-0.181-0.18C14.478,3.344,14.559,3.264,14.659,3.264zM13.225,3.058c0.199,0,0.359,0.162,0.359,0.36c0,0.198-0.161,0.36-0.359,0.36c-0.2,0-0.36-0.161-0.36-0.36S13.025,3.058,13.225,3.058zM15.688,28.473c-0.796,0-1.44-0.646-1.44-1.438c0-0.799,0.645-1.439,1.44-1.439s1.44,0.646,1.44,1.439S16.483,28.473,15.688,28.473zM22.041,24.355c0,0.17-0.139,0.309-0.309,0.309H9.642c-0.17,0-0.308-0.139-0.308-0.309V6.042c0-0.17,0.138-0.309,0.308-0.309h12.09c0.17,0,0.309,0.138,0.309,0.309V24.355z")}}),draw2d.shape.icon.Jigsaw=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Jigsaw",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M3.739,13.619c0,0,3.516-4.669,5.592-3.642c2.077,1.027-0.414,2.795,1.598,3.719c2.011,0.924,5.048-0.229,4.376-2.899c-0.672-2.67-1.866-0.776-2.798-2.208c-0.934-1.432,4.586-4.59,4.586-4.59s3.361,6.651,4.316,4.911c1.157-2.105,3.193-4.265,5.305-1.025c0,0,1.814,2.412,0.246,3.434s-2.917,0.443-3.506,1.553c-0.586,1.112,3.784,4.093,3.784,4.093s-2.987,4.81-4.926,3.548c-1.939-1.262,0.356-3.364-2.599-3.989c-1.288-0.23-3.438,0.538-3.818,2.34c-0.13,2.709,1.604,2.016,2.797,3.475c1.191,1.457-4.484,4.522-4.484,4.522s-1.584-3.923-3.811-4.657c-2.227-0.735-0.893,2.135-2.917,2.531c-2.024,0.396-4.816-2.399-3.46-4.789c1.358-2.391,3.275-0.044,3.441-1.951C7.629,16.087,3.739,13.619,3.739,13.619z")}}),draw2d.shape.icon.Lamp=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Lamp",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,2.833c-3.866,0-7,3.134-7,7c0,3.859,3.945,4.937,4.223,9.499h5.553c0.278-4.562,4.224-5.639,4.224-9.499C22.5,5.968,19.366,2.833,15.5,2.833zM15.5,28.166c1.894,0,2.483-1.027,2.667-1.666h-5.334C13.017,27.139,13.606,28.166,15.5,28.166zM12.75,25.498h5.5v-5.164h-5.5V25.498z")}}),draw2d.shape.icon.Lamp_alt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Lamp_alt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M12.75,25.498h5.5v-5.164h-5.5V25.498zM15.5,28.166c1.894,0,2.483-1.027,2.667-1.666h-5.334C13.017,27.139,13.606,28.166,15.5,28.166zM15.5,2.833c-3.866,0-7,3.134-7,7c0,3.859,3.945,4.937,4.223,9.499h1.271c-0.009-0.025-0.024-0.049-0.029-0.078L11.965,8.256c-0.043-0.245,0.099-0.485,0.335-0.563c0.237-0.078,0.494,0.026,0.605,0.25l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.446-0.277c0.189,0,0.362,0.107,0.446,0.277l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.448-0.277c0.189,0,0.36,0.107,0.446,0.277l0.554,1.106l0.553-1.106c0.111-0.224,0.368-0.329,0.604-0.25s0.377,0.318,0.333,0.563l-1.999,10.998c-0.005,0.029-0.02,0.053-0.029,0.078h1.356c0.278-4.562,4.224-5.639,4.224-9.499C22.5,5.968,19.366,2.833,15.5,2.833zM17.458,10.666c-0.191,0-0.364-0.107-0.446-0.275l-0.554-1.106l-0.553,1.106c-0.086,0.168-0.257,0.275-0.446,0.275c-0.191,0-0.364-0.107-0.449-0.275l-0.553-1.106l-0.553,1.106c-0.084,0.168-0.257,0.275-0.446,0.275c-0.012,0-0.025,0-0.037-0.001l1.454,8.001h1.167l1.454-8.001C17.482,10.666,17.47,10.666,17.458,10.666z")}}),draw2d.shape.icon.Video=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Video",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.188,4.875v1.094h-4.5V4.875H8.062v1.094h-4.5V4.875h-1v21.25h1v-1.094h4.5v1.094h14.625v-1.094h4.5v1.094h1.25V4.875H27.188zM8.062,23.719h-4.5v-3.125h4.5V23.719zM8.062,19.281h-4.5v-3.125h4.5V19.281zM8.062,14.844h-4.5v-3.125h4.5V14.844zM8.062,10.406h-4.5V7.281h4.5V10.406zM11.247,20.59V9.754l9.382,5.418L11.247,20.59zM27.188,23.719h-4.5v-3.125h4.5V23.719zM27.188,19.281h-4.5v-3.125h4.5V19.281zM27.188,14.844h-4.5v-3.125h4.5V14.844zM27.188,10.406h-4.5V7.281h4.5V10.406z")}}),draw2d.shape.icon.Palm=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Palm",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.296,27.885v-2.013c0,0-0.402-1.408-1.073-2.013c-0.671-0.604-1.274-1.274-1.409-1.61c0,0-0.268,0.135-0.737-0.335s-1.812-2.616-1.812-2.616l-0.671-0.872c0,0-0.47-0.671-1.275-1.342c-0.805-0.672-0.938-0.067-1.476-0.738s0.604-1.275,1.006-1.409c0.403-0.134,1.946,0.134,2.684,0.872c0.738,0.738,0.738,0.738,0.738,0.738l1.073,1.141l0.537,0.201l0.671-1.073l-0.269-2.281c0,0-0.604-2.55-0.737-4.764c-0.135-2.214-0.47-5.703,1.006-5.837s1.007,2.55,1.073,3.489c0.067,0.938,0.806,5.232,1.208,5.568c0.402,0.335,0.671,0.066,0.671,0.066l0.402-7.514c0,0-0.479-2.438,1.073-2.549c0.939-0.067,0.872,1.543,0.872,2.147c0,0.604,0.269,7.514,0.269,7.514l0.537,0.135c0,0,0.402-2.214,0.604-3.153s0.604-2.416,0.537-3.087c-0.067-0.671-0.135-2.348,1.006-2.348s0.872,1.812,0.939,2.415s-0.134,3.153-0.134,3.757c0,0.604-0.738,3.623-0.537,3.824s2.08-2.817,2.349-3.958c0.268-1.141,0.201-3.02,1.408-2.885c1.208,0.134,0.47,2.817,0.402,3.086c-0.066,0.269-0.671,2.349-0.872,2.952s-0.805,1.476-1.006,2.013s0.402,2.349,0,4.629c-0.402,2.281-1.61,5.166-1.61,5.166l0.604,2.08c0,0-1.744,0.671-3.824,0.805C16.443,28.221,14.296,27.885,14.296,27.885z")}}),draw2d.shape.icon.Fave=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Fave",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.132,7.971c-2.203-2.205-5.916-2.098-8.25,0.235L15.5,8.588l-0.382-0.382c-2.334-2.333-6.047-2.44-8.25-0.235c-2.204,2.203-2.098,5.916,0.235,8.249l8.396,8.396l8.396-8.396C26.229,13.887,26.336,10.174,24.132,7.971z")}}),draw2d.shape.icon.Help=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Help",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.834,4.834L4.833,4.833c-5.889,5.892-5.89,15.443,0.001,21.334s15.44,5.888,21.33-0.002c5.891-5.891,5.893-15.44,0.002-21.33C20.275-1.056,10.725-1.056,4.834,4.834zM25.459,5.542c0.833,0.836,1.523,1.757,2.104,2.726l-4.08,4.08c-0.418-1.062-1.053-2.06-1.912-2.918c-0.859-0.859-1.857-1.494-2.92-1.913l4.08-4.08C23.7,4.018,24.622,4.709,25.459,5.542zM10.139,20.862c-2.958-2.968-2.959-7.758-0.001-10.725c2.966-2.957,7.756-2.957,10.725,0c2.954,2.965,2.955,7.757-0.001,10.724C17.896,23.819,13.104,23.817,10.139,20.862zM5.542,25.459c-0.833-0.837-1.524-1.759-2.105-2.728l4.081-4.081c0.418,1.063,1.055,2.06,1.914,2.919c0.858,0.859,1.855,1.494,2.917,1.913l-4.081,4.081C7.299,26.982,6.379,26.292,5.542,25.459zM8.268,3.435l4.082,4.082C11.288,7.935,10.29,8.571,9.43,9.43c-0.858,0.859-1.494,1.855-1.912,2.918L3.436,8.267c0.58-0.969,1.271-1.89,2.105-2.727C6.377,4.707,7.299,4.016,8.268,3.435zM22.732,27.563l-4.082-4.082c1.062-0.418,2.061-1.053,2.919-1.912c0.859-0.859,1.495-1.857,1.913-2.92l4.082,4.082c-0.58,0.969-1.271,1.891-2.105,2.728C24.623,26.292,23.701,26.983,22.732,27.563z")}}),draw2d.shape.icon.Crop=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Crop",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.303,21.707V8.275l4.48-4.421l-2.021-2.048l-4.126,4.07H8.761V2.083H5.882v3.793H1.8v2.877h4.083v15.832h15.542v4.609h2.878v-4.609H29.2v-2.878H24.303zM19.72,8.753L8.761,19.565V8.753H19.72zM10.688,21.706l10.735-10.591l0.001,10.592L10.688,21.706z")}}),draw2d.shape.icon.BioHazard=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.BioHazard",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.154,13.988c-0.96-0.554-1.982-0.892-3.019-1.032c0.396-0.966,0.616-2.023,0.616-3.131c0-4.399-3.438-8.001-7.772-8.264c3.245,0.258,5.803,2.979,5.803,6.292c0,3.373-2.653,6.123-5.983,6.294v1.292c0.908,0.144,1.605,0.934,1.605,1.883c0,0.232-0.043,0.454-0.118,0.66l1.181,0.683c1.826-2.758,5.509-3.658,8.41-1.981c2.896,1.672,3.965,5.299,2.506,8.254C31.386,21.038,29.992,16.204,26.154,13.988zM4.122,16.587c2.92-1.686,6.628-0.764,8.442,2.034l1.141-0.657c-0.072-0.2-0.109-0.417-0.109-0.642c0-0.909,0.638-1.67,1.489-1.859v-1.319c-3.3-0.202-5.92-2.94-5.92-6.292c0-3.297,2.532-6.007,5.757-6.286c-4.312,0.285-7.729,3.875-7.729,8.258c0,1.078,0.206,2.106,0.581,3.05c-1.004,0.147-1.999,0.481-2.931,1.02c-3.812,2.201-5.209,6.985-3.264,10.87C0.174,21.823,1.251,18.244,4.122,16.587zM11.15,11.452c0.114,0.139,0.235,0.271,0.362,0.398c0.126,0.126,0.259,0.247,0.397,0.361c0.102,0.084,0.211,0.16,0.318,0.236c0.93-0.611,2.045-0.969,3.244-0.969c1.201,0,2.312,0.357,3.242,0.969c0.107-0.077,0.217-0.152,0.318-0.236c0.139-0.114,0.271-0.235,0.397-0.361c0.127-0.127,0.248-0.259,0.362-0.398c0.113-0.138,0.222-0.283,0.323-0.431c-1.307-0.956-2.908-1.528-4.643-1.528c-0.042,0-0.083-0.001-0.124,0c-0.019,0-0.04-0.001-0.06,0c-1.666,0.038-3.201,0.605-4.462,1.528C10.929,11.17,11.037,11.314,11.15,11.452zM9.269,16.787c-0.168-0.062-0.338-0.117-0.512-0.164c-0.173-0.047-0.348-0.083-0.525-0.113c-0.177-0.03-0.355-0.053-0.535-0.065c-0.175,1.609,0.13,3.282,0.998,4.786c0.868,1.503,2.164,2.606,3.645,3.259c0.079-0.162,0.15-0.328,0.212-0.496c0.063-0.169,0.118-0.338,0.164-0.512c0.047-0.173,0.087-0.349,0.115-0.525c0.022-0.13,0.034-0.262,0.046-0.394c-0.993-0.5-1.86-1.286-2.461-2.325c-0.6-1.04-0.847-2.182-0.783-3.294C9.512,16.889,9.392,16.833,9.269,16.787zM18.122,22.657c0.014,0.132,0.024,0.263,0.046,0.394c0.03,0.177,0.067,0.352,0.113,0.524c0.047,0.174,0.102,0.346,0.165,0.514c0.062,0.169,0.132,0.333,0.212,0.495c1.48-0.653,2.777-1.755,3.644-3.257c0.868-1.504,1.176-3.179,1.001-4.788c-0.18,0.013-0.358,0.035-0.535,0.065c-0.177,0.029-0.353,0.067-0.525,0.113s-0.345,0.101-0.513,0.163c-0.124,0.047-0.241,0.105-0.362,0.16c0.063,1.11-0.183,2.253-0.784,3.292C19.984,21.373,19.116,22.157,18.122,22.657zM20.569,27.611c-2.92-1.687-3.977-5.358-2.46-8.329l-1.192-0.689c-0.349,0.389-0.854,0.634-1.417,0.634c-0.571,0-1.086-0.254-1.436-0.653l-1.146,0.666c1.475,2.96,0.414,6.598-2.488,8.272c-2.888,1.668-6.552,0.791-8.386-1.935c2.38,3.667,7.249,4.87,11.079,2.658c0.929-0.535,1.711-1.227,2.339-2.018c0.64,0.832,1.45,1.554,2.416,2.112c3.835,2.213,8.709,1.006,11.086-2.671C27.132,28.396,23.463,29.282,20.569,27.611z")}}),draw2d.shape.icon.WheelChair=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.WheelChair",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.373,19.85c0,4.079-3.318,7.397-7.398,7.397c-4.079,0-7.398-3.318-7.398-7.397c0-2.466,1.213-4.652,3.073-5.997l-0.251-2.21c-2.875,1.609-4.825,4.684-4.825,8.207c0,5.184,4.217,9.4,9.401,9.4c4.395,0,8.093-3.031,9.117-7.111L20.37,19.73C20.37,19.771,20.373,19.81,20.373,19.85zM11.768,6.534c1.321,0,2.392-1.071,2.392-2.392c0-1.321-1.071-2.392-2.392-2.392c-1.321,0-2.392,1.071-2.392,2.392C9.375,5.463,10.446,6.534,11.768,6.534zM27.188,22.677l-5.367-7.505c-0.28-0.393-0.749-0.579-1.226-0.538c-0.035-0.003-0.071-0.006-0.106-0.006h-6.132l-0.152-1.335h4.557c0.53,0,0.96-0.429,0.96-0.959c0-0.53-0.43-0.959-0.96-0.959h-4.776l-0.25-2.192c-0.146-1.282-1.303-2.203-2.585-2.057C9.869,7.271,8.948,8.428,9.094,9.71l0.705,6.19c0.136,1.197,1.154,2.078,2.332,2.071c0.004,0,0.007,0.001,0.012,0.001h8.023l4.603,6.436c0.439,0.615,1.338,0.727,2.007,0.248C27.442,24.178,27.628,23.292,27.188,22.677z")}}),draw2d.shape.icon.Mic=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Mic",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,21.125c2.682,0,4.875-2.25,4.875-5V5.875c0-2.75-2.193-5-4.875-5s-4.875,2.25-4.875,5v10.25C10.625,18.875,12.818,21.125,15.5,21.125zM21.376,11v5.125c0,3.308-2.636,6-5.876,6s-5.875-2.691-5.875-6V11H6.626v5.125c0,4.443,3.194,8.132,7.372,8.861v2.139h-3.372v3h9.749v-3h-3.376v-2.139c4.181-0.727,7.375-4.418,7.375-8.861V11H21.376z")}}),draw2d.shape.icon.MicMute=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.MicMute",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.121,18.529c-0.317-0.736-0.496-1.549-0.496-2.404V11H6.626v5.125c0,1.693,0.466,3.275,1.272,4.627L10.121,18.529zM20.375,8.276V5.875c0-2.75-2.193-5-4.875-5s-4.875,2.25-4.875,5v10.25c0,0.568,0.113,1.105,0.285,1.615L20.375,8.276zM21.376,12.931v3.195c0,3.308-2.636,6-5.876,6c-0.958,0-1.861-0.24-2.661-0.657l-2.179,2.179c0.995,0.659,2.123,1.128,3.338,1.34v2.139h-3.372v3h9.749v-3h-3.376v-2.139c4.181-0.727,7.375-4.418,7.375-8.861V11h-1.068L21.376,12.931zM20.375,16.125v-2.194l-6.788,6.788c0.588,0.26,1.234,0.405,1.913,0.405C18.182,21.125,20.375,18.875,20.375,16.125zM25.542,4.522L4.855,25.209l1.415,1.416L26.956,5.937L25.542,4.522z")}}),draw2d.shape.icon.IMac=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.IMac",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.936,2.099H2.046c-0.506,0-0.919,0.414-0.919,0.92v21.097c0,0.506,0.413,0.919,0.919,0.919h17.062v-0.003h9.828c0.506,0,0.92-0.413,0.92-0.921V3.019C29.854,2.513,29.439,2.099,28.936,2.099zM28.562,20.062c0,0.412-0.338,0.75-0.75,0.75H3.062c-0.413,0-0.75-0.338-0.75-0.75v-16c0-0.413,0.337-0.75,0.75-0.75h24.75c0.412,0,0.75,0.337,0.75,0.75V20.062zM20.518,28.4c-0.033-0.035-0.062-0.055-0.068-0.062l-0.01-0.004l-0.008-0.004c0,0-0.046-0.021-0.119-0.062c-0.108-0.056-0.283-0.144-0.445-0.237c-0.162-0.097-0.32-0.199-0.393-0.271c-0.008-0.014-0.035-0.079-0.058-0.17c-0.083-0.32-0.161-0.95-0.22-1.539h-7.5c-0.023,0.23-0.048,0.467-0.076,0.691c-0.035,0.272-0.073,0.524-0.113,0.716c-0.02,0.096-0.039,0.175-0.059,0.23c-0.009,0.025-0.018,0.05-0.024,0.062c-0.003,0.006-0.005,0.01-0.007,0.013c-0.094,0.096-0.34,0.246-0.553,0.36c-0.107,0.062-0.209,0.11-0.283,0.146c-0.074,0.037-0.119,0.062-0.119,0.062l-0.007,0.004l-0.008,0.004c-0.01,0.009-0.038,0.022-0.07,0.062c-0.031,0.037-0.067,0.103-0.067,0.185c0.002,0.002-0.004,0.037-0.006,0.088c0,0.043,0.007,0.118,0.068,0.185c0.061,0.062,0.143,0.08,0.217,0.08h9.716c0.073,0,0.153-0.021,0.215-0.08c0.062-0.063,0.068-0.142,0.068-0.185c-0.001-0.051-0.008-0.086-0.007-0.088C20.583,28.503,20.548,28.439,20.518,28.4z")}}),draw2d.shape.icon.Pc=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Pc",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.249,3.14h-9.188l-0.459,0.459v18.225l0.33,2.389H19.57v0.245h-0.307v-0.306h-0.611v0.244h-0.311v-0.367h-0.486v0.307h-1.104l-2.022-0.367v-0.92h0.858l0.302-1.47h2.728c0.188,0,0.339-0.152,0.339-0.339V7.828c0-0.187-0.149-0.338-0.339-0.338H1.591c-0.187,0-0.339,0.152-0.339,0.338V21.24c0,0.187,0.152,0.339,0.339,0.339h3.016l0.199,1.47h1.409l-3.4,3.4L2.11,27.951c0,0,2.941,1.102,6.678,1.102c3.737,0,9.679-0.857,10.476-0.857s4.84,0,4.84,0v-1.225l-0.137-1.068h1.744c-0.2,0.106-0.322,0.244-0.322,0.396v0.979c0,0.341,0.604,0.613,1.352,0.613c0.742,0,1.348-0.272,1.348-0.613v-0.979c0-0.339-0.604-0.611-1.348-0.611c-0.188,0-0.364,0.019-0.525,0.049v-0.17h-2.29l-0.055-0.432h5.382L29.249,3.14L29.249,3.14zM2.478,20.17V8.714h15.07V20.17H2.478z")}}),draw2d.shape.icon.Cube=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cube",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,3.029l-10.8,6.235L4.7,21.735L15.5,27.971l10.8-6.235V9.265L15.5,3.029zM24.988,10.599L16,15.789v10.378c0,0.275-0.225,0.5-0.5,0.5s-0.5-0.225-0.5-0.5V15.786l-8.987-5.188c-0.239-0.138-0.321-0.444-0.183-0.683c0.138-0.238,0.444-0.321,0.683-0.183l8.988,5.189l8.988-5.189c0.238-0.138,0.545-0.055,0.684,0.184C25.309,10.155,25.227,10.461,24.988,10.599z")}}),draw2d.shape.icon.FullCube=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.FullCube",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,3.029l-10.8,6.235L4.7,21.735L15.5,27.971l10.8-6.235V9.265L15.5,3.029zM15.5,7.029l6.327,3.652L15.5,14.334l-6.326-3.652L15.5,7.029zM24.988,10.599L16,15.789v10.378c0,0.275-0.225,0.5-0.5,0.5s-0.5-0.225-0.5-0.5V15.786l-8.987-5.188c-0.239-0.138-0.321-0.444-0.183-0.683c0.138-0.238,0.444-0.321,0.683-0.183l8.988,5.189l8.988-5.189c0.238-0.138,0.545-0.055,0.684,0.184C25.309,10.155,25.227,10.461,24.988,10.599z")}}),draw2d.shape.icon.Font=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Font",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.255,19.327l-1.017,0.131c-0.609,0.081-1.067,0.208-1.375,0.382c-0.521,0.293-0.779,0.76-0.779,1.398c0,0.484,0.178,0.867,0.532,1.146c0.354,0.28,0.774,0.421,1.262,0.421c0.593,0,1.164-0.138,1.72-0.412c0.938-0.453,1.4-1.188,1.4-2.229v-1.354c-0.205,0.131-0.469,0.229-0.792,0.328C22.883,19.229,22.564,19.29,22.255,19.327zM8.036,18.273h4.309l-2.113-6.063L8.036,18.273zM28.167,7.75H3.168c-0.552,0-1,0.448-1,1v16.583c0,0.553,0.448,1,1,1h24.999c0.554,0,1-0.447,1-1V8.75C29.167,8.198,28.721,7.75,28.167,7.75zM14.305,23.896l-1.433-4.109H7.488L6,23.896H4.094L9.262,10.17h2.099l4.981,13.727H14.305L14.305,23.896zM26.792,23.943c-0.263,0.074-0.461,0.121-0.599,0.141c-0.137,0.02-0.323,0.027-0.562,0.027c-0.579,0-0.999-0.204-1.261-0.615c-0.138-0.219-0.231-0.525-0.29-0.926c-0.344,0.449-0.834,0.839-1.477,1.169c-0.646,0.329-1.354,0.493-2.121,0.493c-0.928,0-1.688-0.28-2.273-0.844c-0.589-0.562-0.884-1.271-0.884-2.113c0-0.928,0.29-1.646,0.868-2.155c0.578-0.511,1.34-0.824,2.279-0.942l2.682-0.336c0.388-0.05,0.646-0.211,0.775-0.484c0.063-0.146,0.104-0.354,0.104-0.646c0-0.575-0.203-0.993-0.604-1.252c-0.408-0.26-0.99-0.389-1.748-0.389c-0.877,0-1.5,0.238-1.865,0.713c-0.205,0.263-0.34,0.654-0.399,1.174H17.85c0.031-1.237,0.438-2.097,1.199-2.582c0.77-0.484,1.659-0.726,2.674-0.726c1.176,0,2.131,0.225,2.864,0.673c0.729,0.448,1.093,1.146,1.093,2.093v5.766c0,0.176,0.035,0.313,0.106,0.422c0.071,0.104,0.223,0.156,0.452,0.156c0.076,0,0.16-0.005,0.254-0.015c0.093-0.011,0.191-0.021,0.299-0.041L26.792,23.943L26.792,23.943z")}}),draw2d.shape.icon.Trash=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Trash",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.826,5.75l0.396,1.188c1.54,0.575,2.589,1.44,2.589,2.626c0,2.405-4.308,3.498-8.312,3.498c-4.003,0-8.311-1.093-8.311-3.498c0-1.272,1.21-2.174,2.938-2.746l0.388-1.165c-2.443,0.648-4.327,1.876-4.327,3.91v2.264c0,1.224,0.685,2.155,1.759,2.845l0.396,9.265c0,1.381,3.274,2.5,7.312,2.5c4.038,0,7.313-1.119,7.313-2.5l0.405-9.493c0.885-0.664,1.438-1.521,1.438-2.617V9.562C24.812,7.625,23.101,6.42,20.826,5.75zM11.093,24.127c-0.476-0.286-1.022-0.846-1.166-1.237c-1.007-2.76-0.73-4.921-0.529-7.509c0.747,0.28,1.58,0.491,2.45,0.642c-0.216,2.658-0.43,4.923,0.003,7.828C11.916,24.278,11.567,24.411,11.093,24.127zM17.219,24.329c-0.019,0.445-0.691,0.856-1.517,0.856c-0.828,0-1.498-0.413-1.517-0.858c-0.126-2.996-0.032-5.322,0.068-8.039c0.418,0.022,0.835,0.037,1.246,0.037c0.543,0,1.097-0.02,1.651-0.059C17.251,18.994,17.346,21.325,17.219,24.329zM21.476,22.892c-0.143,0.392-0.69,0.95-1.165,1.235c-0.474,0.284-0.817,0.151-0.754-0.276c0.437-2.93,0.214-5.209-0.005-7.897c0.881-0.174,1.708-0.417,2.44-0.731C22.194,17.883,22.503,20.076,21.476,22.892zM11.338,9.512c0.525,0.173,1.092-0.109,1.268-0.633h-0.002l0.771-2.316h4.56l0.771,2.316c0.14,0.419,0.53,0.685,0.949,0.685c0.104,0,0.211-0.017,0.316-0.052c0.524-0.175,0.808-0.742,0.633-1.265l-1.002-3.001c-0.136-0.407-0.518-0.683-0.945-0.683h-6.002c-0.428,0-0.812,0.275-0.948,0.683l-1,2.999C10.532,8.77,10.815,9.337,11.338,9.512z")}}),draw2d.shape.icon.NewWindow=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.NewWindow",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M5.896,5.333V21.25h23.417V5.333H5.896zM26.312,18.25H8.896V8.334h17.417V18.25L26.312,18.25zM4.896,9.542H1.687v15.917h23.417V22.25H4.896V9.542z")}}),draw2d.shape.icon.DockRight=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.DockRight",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M3.083,7.333v16.334h24.833V7.333H3.083z M19.333,20.668H6.083V10.332h13.25V20.668z")}}),draw2d.shape.icon.DockLeft=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.DockLeft",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M3.084,7.333v16.334h24.832V7.333H3.084z M11.667,10.332h13.251v10.336H11.667V10.332z")}}),draw2d.shape.icon.DockBottom=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.DockBottom",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M3.083,7.333v16.334h24.833V7.333H3.083zM24.915,16.833H6.083v-6.501h18.833L24.915,16.833L24.915,16.833z")}}),draw2d.shape.icon.DockTop=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.DockTop",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.916,23.667V7.333H3.083v16.334H27.916zM24.915,20.668H6.083v-6.501h18.833L24.915,20.668L24.915,20.668z")}}),draw2d.shape.icon.Pallete=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Pallete",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.653,7.25c-3.417,0-8.577,0.983-8.577,3.282c0,1.91,2.704,3.229,1.691,3.889c-1.02,0.666-2.684-1.848-4.048-1.848c-1.653,0-2.815,1.434-2.815,2.926c0,4.558,6.326,8.25,13.749,8.25c7.424,0,13.443-3.692,13.443-8.25C29.096,10.944,23.077,7.25,15.653,7.25zM10.308,13.521c0-0.645,0.887-1.166,1.98-1.166c1.093,0,1.979,0.521,1.979,1.166c0,0.644-0.886,1.166-1.979,1.166C11.195,14.687,10.308,14.164,10.308,13.521zM14.289,22.299c-1.058,0-1.914-0.68-1.914-1.518s0.856-1.518,1.914-1.518c1.057,0,1.914,0.68,1.914,1.518S15.346,22.299,14.289,22.299zM19.611,21.771c-1.057,0-1.913-0.681-1.913-1.519c0-0.84,0.856-1.521,1.913-1.521c1.059,0,1.914,0.681,1.914,1.521C21.525,21.092,20.67,21.771,19.611,21.771zM20.075,10.66c0-0.838,0.856-1.518,1.914-1.518s1.913,0.68,1.913,1.518c0,0.839-0.855,1.518-1.913,1.518C20.934,12.178,20.075,11.499,20.075,10.66zM24.275,19.482c-1.057,0-1.914-0.681-1.914-1.519s0.857-1.518,1.914-1.518c1.059,0,1.914,0.68,1.914,1.518S25.334,19.482,24.275,19.482zM25.286,15.475c-1.058,0-1.914-0.68-1.914-1.519c0-0.838,0.856-1.518,1.914-1.518c1.057,0,1.913,0.68,1.913,1.518C27.199,14.795,26.343,15.475,25.286,15.475z")}}),draw2d.shape.icon.Cart=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Cart",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M29.02,11.754L8.416,9.473L7.16,4.716C7.071,4.389,6.772,4.158,6.433,4.158H3.341C3.114,3.866,2.775,3.667,2.377,3.667c-0.686,0-1.242,0.556-1.242,1.242c0,0.686,0.556,1.242,1.242,1.242c0.399,0,0.738-0.201,0.965-0.493h2.512l5.23,19.8c-0.548,0.589-0.891,1.373-0.891,2.242c0,1.821,1.473,3.293,3.293,3.293c1.82,0,3.294-1.472,3.297-3.293c0-0.257-0.036-0.504-0.093-0.743h5.533c-0.056,0.239-0.092,0.486-0.092,0.743c0,1.821,1.475,3.293,3.295,3.293s3.295-1.472,3.295-3.293c0-1.82-1.473-3.295-3.295-3.297c-0.951,0.001-1.801,0.409-2.402,1.053h-7.136c-0.601-0.644-1.451-1.052-2.402-1.053c-0.379,0-0.738,0.078-1.077,0.196l-0.181-0.685H26.81c1.157-0.027,2.138-0.83,2.391-1.959l1.574-7.799c0.028-0.145,0.041-0.282,0.039-0.414C30.823,12.733,30.051,11.86,29.02,11.754zM25.428,27.994c-0.163,0-0.295-0.132-0.297-0.295c0.002-0.165,0.134-0.297,0.297-0.297s0.295,0.132,0.297,0.297C25.723,27.862,25.591,27.994,25.428,27.994zM27.208,20.499l0.948-0.948l-0.318,1.578L27.208,20.499zM12.755,11.463l1.036,1.036l-1.292,1.292l-1.292-1.292l1.087-1.087L12.755,11.463zM17.253,11.961l0.538,0.538l-1.292,1.292l-1.292-1.292l0.688-0.688L17.253,11.961zM9.631,14.075l0.868-0.868l1.292,1.292l-1.292,1.292l-0.564-0.564L9.631,14.075zM9.335,12.956l-0.328-1.24L9.792,12.5L9.335,12.956zM21.791,16.499l-1.292,1.292l-1.292-1.292l1.292-1.292L21.791,16.499zM21.207,14.5l1.292-1.292l1.292,1.292l-1.292,1.292L21.207,14.5zM18.5,15.791l-1.293-1.292l1.292-1.292l1.292,1.292L18.5,15.791zM17.791,16.499L16.5,17.791l-1.292-1.292l1.292-1.292L17.791,16.499zM14.499,15.791l-1.292-1.292l1.292-1.292l1.292,1.292L14.499,15.791zM13.791,16.499l-1.292,1.291l-1.292-1.291l1.292-1.292L13.791,16.499zM10.499,17.207l1.292,1.292l-0.785,0.784l-0.54-2.044L10.499,17.207zM11.302,20.404l1.197-1.197l1.292,1.292L12.5,21.791l-1.131-1.13L11.302,20.404zM13.208,18.499l1.291-1.292l1.292,1.292L14.5,19.791L13.208,18.499zM16.5,19.207l1.292,1.292L16.5,21.79l-1.292-1.291L16.5,19.207zM17.208,18.499l1.292-1.292l1.291,1.292L18.5,19.79L17.208,18.499zM20.499,19.207l1.292,1.292L20.5,21.79l-1.292-1.292L20.499,19.207zM21.207,18.499l1.292-1.292l1.292,1.292l-1.292,1.292L21.207,18.499zM23.207,16.499l1.292-1.292l1.292,1.292l-1.292,1.292L23.207,16.499zM25.207,14.499l1.292-1.292L27.79,14.5l-1.291,1.292L25.207,14.499zM24.499,13.792l-1.156-1.156l2.082,0.23L24.499,13.792zM21.791,12.5l-1.292,1.292L19.207,12.5l0.29-0.29l2.253,0.25L21.791,12.5zM14.5,11.791l-0.152-0.152l0.273,0.03L14.5,11.791zM10.5,11.792l-0.65-0.65l1.171,0.129L10.5,11.792zM14.5,21.207l1.205,1.205h-2.409L14.5,21.207zM18.499,21.207l1.206,1.206h-2.412L18.499,21.207zM22.499,21.207l1.208,1.207l-2.414-0.001L22.499,21.207zM23.207,20.499l1.292-1.292l1.292,1.292l-1.292,1.292L23.207,20.499zM25.207,18.499l1.292-1.291l1.291,1.291l-1.291,1.292L25.207,18.499zM28.499,17.791l-1.291-1.292l1.291-1.291l0.444,0.444l-0.429,2.124L28.499,17.791zM29.001,13.289l-0.502,0.502l-0.658-0.658l1.016,0.112C28.911,13.253,28.956,13.271,29.001,13.289zM13.487,27.994c-0.161,0-0.295-0.132-0.295-0.295c0-0.165,0.134-0.297,0.295-0.297c0.163,0,0.296,0.132,0.296,0.297C13.783,27.862,13.651,27.994,13.487,27.994zM26.81,22.414h-1.517l1.207-1.207l0.93,0.93C27.243,22.306,27.007,22.428,26.81,22.414z")}}),draw2d.shape.icon.Glasses=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Glasses",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.075,9.531c0,0-2.705-1.438-5.158-1.438c-2.453,0-4.862,0.593-4.862,0.593L3.971,9.869c0,0,0.19,0.19,0.528,0.53c0.338,0.336,0.486,3.741,1.838,5.094c1.353,1.354,4.82,1.396,5.963,0.676c1.14-0.718,2.241-3.466,2.241-4.693c0-0.38,0-0.676,0-0.676c0.274-0.275,1.615-0.303,1.917,0c0,0,0,0.296,0,0.676c0,1.227,1.101,3.975,2.241,4.693c1.144,0.72,4.611,0.678,5.963-0.676c1.355-1.353,1.501-4.757,1.839-5.094c0.338-0.34,0.528-0.53,0.528-0.53l-0.084-1.183c0,0-2.408-0.593-4.862-0.593c-2.453,0-5.158,1.438-5.158,1.438C16.319,9.292,14.737,9.32,14.075,9.531z")}}),draw2d.shape.icon.Package=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Package",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M17.078,22.004l-1.758-4.129l-2.007,4.752l-7.519-3.289l0.174,3.905l9.437,4.374l10.909-5.365l-0.149-4.989L17.078,22.004zM29.454,6.619L18.521,3.383l-3.006,2.671l-3.091-2.359L1.546,8.199l3.795,3.048l-3.433,5.302l10.879,4.757l2.53-5.998l2.257,5.308l11.393-5.942l-3.105-4.709L29.454,6.619zM15.277,14.579l-9.059-3.83l9.275-4.101l9.608,3.255L15.277,14.579z")}}),draw2d.shape.icon.Book=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Book",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.754,4.626c-0.233-0.161-0.536-0.198-0.802-0.097L12.16,9.409c-0.557,0.213-1.253,0.316-1.968,0.316c-0.997,0.002-2.029-0.202-2.747-0.48C7.188,9.148,6.972,9.04,6.821,8.943c0.056-0.024,0.12-0.05,0.193-0.075L18.648,4.43l1.733,0.654V3.172c0-0.284-0.14-0.554-0.374-0.714c-0.233-0.161-0.538-0.198-0.802-0.097L6.414,7.241c-0.395,0.142-0.732,0.312-1.02,0.564C5.111,8.049,4.868,8.45,4.872,8.896c0,0.012,0.004,0.031,0.004,0.031v17.186c0,0.008-0.003,0.015-0.003,0.021c0,0.006,0.003,0.01,0.003,0.016v0.017h0.002c0.028,0.601,0.371,0.983,0.699,1.255c1.034,0.803,2.769,1.252,4.614,1.274c0.874,0,1.761-0.116,2.583-0.427l12.796-4.881c0.337-0.128,0.558-0.448,0.558-0.809V5.341C26.128,5.057,25.988,4.787,25.754,4.626zM5.672,11.736c0.035,0.086,0.064,0.176,0.069,0.273l0.004,0.054c0.016,0.264,0.13,0.406,0.363,0.611c0.783,0.626,2.382,1.08,4.083,1.093c0.669,0,1.326-0.083,1.931-0.264v1.791c-0.647,0.143-1.301,0.206-1.942,0.206c-1.674-0.026-3.266-0.353-4.509-1.053V11.736zM10.181,24.588c-1.674-0.028-3.266-0.354-4.508-1.055v-2.712c0.035,0.086,0.065,0.176,0.07,0.275l0.002,0.053c0.018,0.267,0.13,0.408,0.364,0.613c0.783,0.625,2.381,1.079,4.083,1.091c0.67,0,1.327-0.082,1.932-0.262v1.789C11.476,24.525,10.821,24.588,10.181,24.588z")}}),draw2d.shape.icon.Books=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Books",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M26.679,7.858c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183c-0.42,0.183-0.946,0.271-1.486,0.271c-0.753,0.002-1.532-0.173-2.075-0.412c-0.194-0.083-0.356-0.176-0.471-0.259c0.042-0.021,0.09-0.042,0.146-0.064l8.786-3.804l1.31,0.561V6.612c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.406-0.17-0.605-0.083l-9.66,4.183c-0.298,0.121-0.554,0.268-0.771,0.483c-0.213,0.208-0.397,0.552-0.394,0.934c0,0.01,0.003,0.027,0.003,0.027v14.73c0,0.006-0.002,0.012-0.002,0.019c0,0.005,0.002,0.007,0.002,0.012v0.015h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.073,3.484,1.093c0.66,0,1.33-0.1,1.951-0.366l9.662-4.184c0.255-0.109,0.422-0.383,0.422-0.692V8.471C26.961,8.227,26.855,7.996,26.679,7.858zM20.553,5.058c-0.017-0.221-0.108-0.429-0.271-0.556c-0.176-0.138-0.404-0.17-0.606-0.083l-9.66,4.183C9.596,8.784,9.069,8.873,8.53,8.873C7.777,8.874,6.998,8.699,6.455,8.46C6.262,8.378,6.099,8.285,5.984,8.202C6.026,8.181,6.075,8.16,6.13,8.138l8.787-3.804l1.309,0.561V3.256c0-0.244-0.106-0.475-0.283-0.612c-0.176-0.138-0.407-0.17-0.606-0.083l-9.66,4.183C5.379,6.864,5.124,7.011,4.907,7.227C4.693,7.435,4.51,7.779,4.513,8.161c0,0.011,0.003,0.027,0.003,0.027v14.73c0,0.006-0.001,0.013-0.001,0.019c0,0.005,0.001,0.007,0.001,0.012v0.016h0.002c0.021,0.515,0.28,0.843,0.528,1.075c0.781,0.688,2.091,1.072,3.485,1.092c0.376,0,0.754-0.045,1.126-0.122V11.544c-0.01-0.7,0.27-1.372,0.762-1.856c0.319-0.315,0.708-0.564,1.19-0.756L20.553,5.058z")}}),draw2d.shape.icon.Icons=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Icons",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.083,14H14V4.083H4.083V14zM17,4.083V14h9.917V4.083H17zM17,26.917h9.917v-9.918H17V26.917zM4.083,26.917H14v-9.918H4.083V26.917z")}}),draw2d.shape.icon.List=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.List",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.082,4.083v2.999h22.835V4.083H4.082zM4.082,20.306h22.835v-2.999H4.082V20.306zM4.082,13.694h22.835v-2.999H4.082V13.694zM4.082,26.917h22.835v-2.999H4.082V26.917z")}}),draw2d.shape.icon.Db=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Db",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.499,23.438c-3.846,0-7.708-0.987-9.534-3.117c-0.054,0.236-0.09,0.48-0.09,0.737v3.877c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998v-3.877c0-0.258-0.036-0.501-0.09-0.737C23.209,22.451,19.347,23.438,15.499,23.438zM15.499,15.943c-3.846,0-7.708-0.987-9.533-3.117c-0.054,0.236-0.091,0.479-0.091,0.736v3.877c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998v-3.877c0-0.257-0.036-0.501-0.09-0.737C23.209,14.956,19.347,15.943,15.499,15.943zM15.5,1.066c-4.637,0-9.625,1.565-9.625,5.001v3.876c0,3.435,4.988,4.998,9.625,4.998s9.625-1.563,9.625-4.998V6.067C25.125,2.632,20.137,1.066,15.5,1.066zM15.5,9.066c-4.211,0-7.625-1.343-7.625-3c0-1.656,3.414-3,7.625-3s7.625,1.344,7.625,3C23.125,7.724,19.711,9.066,15.5,9.066z")}}),draw2d.shape.icon.Paper=draw2d.shape.icon.Icon.extend({
NAME:"draw2d.shape.icon.Paper",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.916,8.009L15.953,1.888c-0.251-0.119-0.548-0.115-0.798,0.008c-0.25,0.125-0.433,0.357-0.491,0.629c-0.002,0.01-1.04,4.83-2.578,9.636c-0.526,1.646-1.114,3.274-1.728,4.704l1.665,0.786c2-4.643,3.584-11.052,4.181-13.614l11.264,5.316c-0.346,1.513-1.233,5.223-2.42,8.927c-0.767,2.399-1.665,4.797-2.585,6.532c-0.889,1.79-1.958,2.669-2.197,2.552c-1.419,0.03-2.418-1.262-3.09-2.918c-0.32-0.803-0.53-1.63-0.657-2.246c-0.127-0.618-0.166-1.006-0.168-1.006c-0.034-0.317-0.232-0.597-0.52-0.731l-12.962-6.12c-0.301-0.142-0.654-0.11-0.925,0.081c-0.27,0.193-0.416,0.518-0.38,0.847c0.008,0.045,0.195,1.848,0.947,3.736c0.521,1.321,1.406,2.818,2.845,3.575l12.956,6.131l0.006-0.013c0.562,0.295,1.201,0.487,1.947,0.496c1.797-0.117,2.777-1.668,3.818-3.525c3-5.69,5.32-16.602,5.338-16.642C29.512,8.615,29.302,8.19,28.916,8.009z")}}),draw2d.shape.icon.TakeOff=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.TakeOff",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.27,19.267c0,0,9.375-1.981,16.074-8.681c0,0,1.395-1.339-1.338-1.339c-2.305,0-5.6,2.438-5.6,2.438l-9.137-1.42l-1.769,1.769l4.983,2.411l-3.001,2.035l-2.571-1.285L6.09,16.052C6.09,16.052,8.02,18.062,10.27,19.267zM3.251,23.106v1.998h24.498v-1.998H3.251z")}}),draw2d.shape.icon.Landing=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Landing",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.322,19.491c0,0,1.903,0.342,0.299-1.869c-1.353-1.866-5.261-3.104-5.261-3.104l-4.213-8.229l-2.47-0.394l0.973,5.449L9.241,10.11L8.772,7.273L7.008,6.302c0,0-0.496,2.742-0.149,5.271C6.859,11.573,13.965,17.999,23.322,19.491zM3.251,23.106v1.998h24.498v-1.998H3.251zM14,17.94c0,0.414,0.336,0.75,0.75,0.75s0.75-0.336,0.75-0.75s-0.336-0.75-0.75-0.75S14,17.526,14,17.94z")}}),draw2d.shape.icon.Plane=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Plane",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M19.671,8.11l-2.777,2.777l-3.837-0.861c0.362-0.505,0.916-1.683,0.464-2.135c-0.518-0.517-1.979,0.278-2.305,0.604l-0.913,0.913L7.614,8.804l-2.021,2.021l2.232,1.061l-0.082,0.082l1.701,1.701l0.688-0.687l3.164,1.504L9.571,18.21H6.413l-1.137,1.138l3.6,0.948l1.83,1.83l0.947,3.598l1.137-1.137V21.43l3.725-3.725l1.504,3.164l-0.687,0.687l1.702,1.701l0.081-0.081l1.062,2.231l2.02-2.02l-0.604-2.689l0.912-0.912c0.326-0.326,1.121-1.789,0.604-2.306c-0.452-0.452-1.63,0.101-2.135,0.464l-0.861-3.838l2.777-2.777c0.947-0.947,3.599-4.862,2.62-5.839C24.533,4.512,20.618,7.163,19.671,8.11z")}}),draw2d.shape.icon.Phone=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Phone",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.065,18.53c-0.467-0.29-1.167-0.21-1.556,0.179l-3.093,3.092c-0.389,0.389-1.025,0.389-1.414,0L9.05,14.848c-0.389-0.389-0.389-1.025,0-1.414l2.913-2.912c0.389-0.389,0.447-1.075,0.131-1.524L6.792,1.485C6.476,1.036,5.863,0.948,5.433,1.29c0,0-4.134,3.281-4.134,6.295c0,12.335,10,22.334,22.334,22.334c3.015,0,5.948-5.533,5.948-5.533c0.258-0.486,0.087-1.122-0.38-1.412L22.065,18.53z")}}),draw2d.shape.icon.HangUp=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.HangUp",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.563,10.494c-7.35-7.349-19.265-7.348-26.612,0.001c-1.796,1.796-0.247,6.84-0.247,6.84c0.135,0.443,0.616,0.72,1.067,0.614l6.898-1.604c0.451-0.105,0.82-0.57,0.82-1.033l0.001-3.685c0-0.463,0.379-0.842,0.842-0.842h8.285c0.464,0,0.843,0.379,0.843,0.842l-0.001,3.471c0.001,0.462,0.375,0.907,0.83,0.986l7.635,1.316c0.456,0.08,0.873-0.232,0.926-0.692C29.851,16.708,30.359,12.29,28.563,10.494zM17.264,14.072h-3.501v4.39h-2.625l4.363,7.556l4.363-7.556h-2.6V14.072z")}}),draw2d.shape.icon.SlideShare=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.SlideShare",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.952,12.795c-0.956,1.062-5.073,2.409-5.604,2.409h-4.513c-0.749,0-1.877,0.147-2.408,0.484c0.061,0.054,0.122,0.108,0.181,0.163c0.408,0.379,1.362,0.913,2.206,0.913c0.397,0,0.723-0.115,1-0.354c1.178-1.007,1.79-1.125,2.145-1.125c0.421,0,0.783,0.193,0.996,0.531c0.4,0.626,0.106,1.445-0.194,2.087c-0.718,1.524-3.058,3.171-5.595,3.171c-0.002,0-0.002,0-0.004,0c-0.354,0-0.701-0.033-1.033-0.099v3.251c0,0.742,1.033,2.533,4.167,2.533s3.955-3.701,3.955-4.338v-4.512c2.23-1.169,4.512-1.805,5.604-3.895C30.882,12.05,29.907,11.733,28.952,12.795zM21.942,17.521c0.796-1.699-0.053-1.699-1.54-0.425s-3.665,0.105-4.408-0.585c-0.743-0.689-1.486-1.22-2.814-1.167c-1.328,0.053-4.46-0.161-6.267-0.585c-1.805-0.425-4.895-3-5.15-2.335c-0.266,0.69,0.211,1.168,1.168,2.335c0.955,1.169,5.075,2.778,5.075,2.778s0,3.453,0,4.886c0,1.435,2.973,3.61,4.512,3.61s2.708-1.062,2.708-1.806v-4.512C17.775,21.045,21.146,19.221,21.942,17.521zM20.342,13.73c1.744,0,3.159-1.414,3.159-3.158c0-1.745-1.415-3.159-3.159-3.159s-3.158,1.414-3.158,3.159C17.184,12.316,18.598,13.73,20.342,13.73zM12.019,13.73c1.744,0,3.158-1.414,3.158-3.158c0-1.745-1.414-3.159-3.158-3.159c-1.745,0-3.159,1.414-3.159,3.159C8.86,12.316,10.273,13.73,12.019,13.73z")}}),draw2d.shape.icon.Twitter=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Twitter",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.295,22.567h-7.213c-2.125,0-4.103-2.215-4.103-4.736v-1.829h11.232c1.817,0,3.291-1.469,3.291-3.281c0-1.813-1.474-3.282-3.291-3.282H11.979V6.198c0-1.835-1.375-3.323-3.192-3.323c-1.816,0-3.29,1.488-3.29,3.323v11.633c0,6.23,4.685,11.274,10.476,11.274h7.211c1.818,0,3.318-1.463,3.318-3.298S25.112,22.567,23.295,22.567z")}}),draw2d.shape.icon.TwitterBird=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.TwitterBird",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.605,13.11c0.913-2.851,2.029-4.698,3.313-6.038c0.959-1,1.453-1.316,0.891-0.216c0.25-0.199,0.606-0.464,0.885-0.605c1.555-0.733,1.442-0.119,0.373,0.54c2.923-1.045,2.82,0.286-0.271,0.949c2.527,0.047,5.214,1.656,5.987,5.077c0.105,0.474-0.021,0.428,0.464,0.514c1.047,0.186,2.03,0.174,2.991-0.13c-0.104,0.708-1.039,1.167-2.497,1.471c-0.541,0.112-0.651,0.083-0.005,0.229c0.799,0.179,1.69,0.226,2.634,0.182c-0.734,0.846-1.905,1.278-3.354,1.296c-0.904,3.309-2.976,5.678-5.596,7.164c-6.152,3.492-15.108,2.984-19.599-3.359c2.947,2.312,7.312,2.821,10.555-0.401c-2.125,0-2.674-1.591-0.99-2.449c-1.595-0.017-2.608-0.521-3.203-1.434c-0.226-0.347-0.229-0.374,0.14-0.64c0.405-0.293,0.958-0.423,1.528-0.467c-1.651-0.473-2.66-1.335-3.009-2.491c-0.116-0.382-0.134-0.363,0.256-0.462c0.38-0.097,0.87-0.148,1.309-0.17C6.11,10.88,5.336,9.917,5.139,8.852c-0.186-1.006,0.005-0.748,0.758-0.46C9.263,9.68,12.619,11.062,14.605,13.11L14.605,13.11z")}}),draw2d.shape.icon.Skype=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Skype",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.777,18.438c0.209-0.948,0.318-1.934,0.318-2.944c0-7.578-6.144-13.722-13.724-13.722c-0.799,0-1.584,0.069-2.346,0.2C11.801,1.199,10.35,0.75,8.793,0.75c-4.395,0-7.958,3.562-7.958,7.958c0,1.47,0.399,2.845,1.094,4.024c-0.183,0.893-0.277,1.814-0.277,2.76c0,7.58,6.144,13.723,13.722,13.723c0.859,0,1.699-0.078,2.515-0.23c1.119,0.604,2.399,0.945,3.762,0.945c4.395,0,7.957-3.562,7.957-7.959C29.605,20.701,29.309,19.502,28.777,18.438zM22.412,22.051c-0.635,0.898-1.573,1.609-2.789,2.115c-1.203,0.5-2.646,0.754-4.287,0.754c-1.971,0-3.624-0.346-4.914-1.031C9.5,23.391,8.74,22.717,8.163,21.885c-0.583-0.842-0.879-1.676-0.879-2.479c0-0.503,0.192-0.939,0.573-1.296c0.375-0.354,0.857-0.532,1.432-0.532c0.471,0,0.878,0.141,1.209,0.422c0.315,0.269,0.586,0.662,0.805,1.174c0.242,0.558,0.508,1.027,0.788,1.397c0.269,0.355,0.656,0.656,1.151,0.89c0.497,0.235,1.168,0.354,1.992,0.354c1.135,0,2.064-0.241,2.764-0.721c0.684-0.465,1.016-1.025,1.016-1.711c0-0.543-0.173-0.969-0.529-1.303c-0.373-0.348-0.865-0.621-1.465-0.807c-0.623-0.195-1.47-0.404-2.518-0.623c-1.424-0.306-2.634-0.668-3.596-1.076c-0.984-0.419-1.777-1-2.357-1.727c-0.59-0.736-0.889-1.662-0.889-2.75c0-1.036,0.314-1.971,0.933-2.776c0.613-0.8,1.51-1.423,2.663-1.849c1.139-0.422,2.494-0.635,4.027-0.635c1.225,0,2.303,0.141,3.201,0.421c0.904,0.282,1.668,0.662,2.267,1.13c0.604,0.472,1.054,0.977,1.335,1.5c0.284,0.529,0.43,1.057,0.43,1.565c0,0.49-0.189,0.937-0.563,1.324c-0.375,0.391-0.851,0.589-1.408,0.589c-0.509,0-0.905-0.124-1.183-0.369c-0.258-0.227-0.523-0.58-0.819-1.09c-0.342-0.65-0.756-1.162-1.229-1.523c-0.463-0.351-1.232-0.529-2.292-0.529c-0.984,0-1.784,0.197-2.379,0.588c-0.572,0.375-0.85,0.805-0.85,1.314c0,0.312,0.09,0.574,0.273,0.799c0.195,0.238,0.471,0.447,0.818,0.621c0.36,0.182,0.732,0.326,1.104,0.429c0.382,0.106,1.021,0.263,1.899,0.466c1.11,0.238,2.131,0.506,3.034,0.793c0.913,0.293,1.703,0.654,2.348,1.072c0.656,0.429,1.178,0.979,1.547,1.635c0.369,0.658,0.558,1.471,0.558,2.416C23.371,20.119,23.049,21.148,22.412,22.051z")}}),draw2d.shape.icon.Windows=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Windows",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.023,17.484c-1.732-0.205-3.022-0.908-4.212-1.701l0,0l-0.559,0.279l-2.578,8.924l0,0c1.217,0.805,2.905,1.707,4.682,1.914c2.686,0.312,5.56-0.744,6.391-1.195l2.617-9.061l-0.559-0.279C25.805,16.365,23.193,17.857,20.023,17.484zM14.424,14.825c-1.267-0.87-2.578-1.652-4.375-1.816c-0.318-0.029-0.627-0.042-0.925-0.042c-3.011,0-4.948,1.347-4.948,1.347l-2.565,8.877l0,0l0.526,0.281c0.981-0.476,2.78-1.145,5.09-0.984c1.665,0.113,2.92,0.781,4.117,1.531l0.507-0.26l0,0L14.424,14.825zM10.201,12.094c1.664,0.114,2.921,0.78,4.117,1.533l0.509-0.26l0,0L17.4,4.431c-1.27-0.87-2.579-1.653-4.377-1.816c-0.318-0.029-0.626-0.042-0.924-0.042C9.088,2.573,7.15,3.92,7.15,3.92l-2.566,8.878L5.11,13.08C6.092,12.604,7.891,11.936,10.201,12.094zM28.779,5.971L28.779,5.971c0,0.001-2.609,1.492-5.779,1.119c-1.734-0.204-3.023-0.907-4.213-1.701L18.227,5.67l-2.576,8.923l0,0c1.215,0.803,2.906,1.709,4.68,1.915c2.687,0.312,5.558-0.745,6.392-1.197l2.615-9.059L28.779,5.971z")}}),draw2d.shape.icon.Apple=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Apple",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M24.32,10.85c-1.743,1.233-2.615,2.719-2.615,4.455c0,2.079,1.078,3.673,3.232,4.786c-0.578,1.677-1.416,3.134-2.514,4.375c-1.097,1.241-2.098,1.862-3.004,1.862c-0.427,0-1.009-0.143-1.748-0.423l-0.354-0.138c-0.725-0.281-1.363-0.423-1.92-0.423c-0.525,0-1.1,0.11-1.725,0.331l-0.445,0.16l-0.56,0.229c-0.441,0.176-0.888,0.264-1.337,0.264c-1.059,0-2.228-0.872-3.507-2.616c-1.843-2.498-2.764-5.221-2.764-8.167c0-2.095,0.574-3.781,1.725-5.061c1.149-1.279,2.673-1.92,4.568-1.92c0.709,0,1.371,0.13,1.988,0.389l0.423,0.172l0.445,0.183c0.396,0.167,0.716,0.251,0.959,0.251c0.312,0,0.659-0.072,1.04-0.217l0.582-0.229l0.435-0.16c0.693-0.251,1.459-0.377,2.297-0.377C21.512,8.576,23.109,9.334,24.32,10.85zM19.615,3.287c0.021,0.267,0.033,0.473,0.033,0.617c0,1.317-0.479,2.473-1.438,3.467s-2.075,1.49-3.347,1.49c-0.038-0.297-0.058-0.51-0.058-0.639c0-1.12,0.445-2.171,1.337-3.153c0.891-0.982,1.922-1.558,3.096-1.725C19.32,3.329,19.447,3.311,19.615,3.287z")}}),draw2d.shape.icon.Linux=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Linux",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M11.791,25.229c1.027-0.104,1.162-1.191,0.68-1.666c-0.398-0.392-2.598-2.022-3.171-2.664C9.033,20.6,8.673,20.454,8.52,20.12c-0.352-0.771-0.598-1.869-0.151-2.658c0.081-0.144,0.133-0.078,0.071,0.22c-0.351,1.684,0.746,3.059,0.986,2.354c0.167-0.487,0.013-1.358,0.102-2.051c0.158-1.226,1.273-3.577,1.763-3.712c-0.755-1.398,0.886-2.494,0.866-3.723c-0.014-0.798,0.701,0.982,1.419,1.359c0.802,0.422,1.684-0.794,2.936-1.41c0.354-0.176,0.809-0.376,0.776-0.524c-0.146-0.718-1.644,0.886-2.979,0.939c-0.61,0.024-0.837-0.12-1.072-0.347c-0.712-0.689,0.073-0.115,1.132-0.307c0.471-0.085,0.629-0.163,1.128-0.365c0.5-0.201,1.069-0.5,1.636-0.654c0.395-0.106,0.361-0.402,0.208-0.491c-0.088-0.051-0.219-0.046-0.321,0.133c-0.244,0.419-1.383,0.661-1.74,0.771c-0.457,0.14-0.962,0.271-1.634,0.243c-1.021-0.042-0.782-0.509-1.513-0.928c-0.213-0.122-0.156-0.444,0.129-0.729c0.148-0.148,0.557-0.232,0.76-0.572c0.028-0.047,0.289-0.32,0.494-0.461c0.07-0.049,0.076-1.295-0.562-1.32c-0.543-0.021-0.697,0.398-0.675,0.818c0.022,0.419,0.245,0.765,0.393,0.764c0.285-0.004,0.019,0.311-0.138,0.361c-0.237,0.078-0.562-0.934-0.525-1.418c0.039-0.506,0.303-1.4,0.942-1.383c0.576,0.016,0.993,0.737,0.973,1.983c-0.003,0.211,0.935-0.101,1.247,0.229c0.224,0.236-0.767-2.207,1.438-2.375c0.582,0.111,1.14,0.305,1.371,1.641c-0.086,0.139,0.146,1.07-0.215,1.182c-0.438,0.135-0.707-0.02-0.453-0.438c0.172-0.418,0.004-1.483-0.882-1.42c-0.887,0.064-0.769,1.637-0.526,1.668c0.243,0.031,0.854,0.465,1.282,0.549c1.401,0.271,0.371,1.075,0.555,2.048c0.205,1.099,0.929,0.809,1.578,3.717c0.137,0.177,0.676,0.345,1.199,2.579c0.473,2.011-0.195,3.473,0.938,3.353c0.256-0.026,0.629-0.1,0.792-0.668c0.425-1.489-0.213-3.263-0.855-4.46c-0.375-0.698-0.729-1.174-0.916-1.337c0.738,0.436,1.683,1.829,1.898,2.862c0.286,1.358,0.49,1.934,0.059,3.37c0.25,0.125,0.871,0.39,0.871,0.685c-0.647-0.53-2.629-0.625-2.68,0.646c-0.338,0.008-0.594,0.034-0.811,0.293c-0.797,0.944-0.059,2.842-0.139,3.859c-0.07,0.896-0.318,1.783-0.46,2.683c-0.474-0.019-0.428-0.364-0.274-0.852c0.135-0.431,0.351-0.968,0.365-1.484c0.012-0.467-0.039-0.759-0.156-0.831c-0.118-0.072-0.303,0.074-0.559,0.485c-0.543,0.875-1.722,1.261-2.821,1.397c-1.099,0.138-2.123,0.028-2.664-0.578c-0.186-0.207-0.492,0.058-0.529,0.111c-0.049,0.074,0.18,0.219,0.352,0.533c0.251,0.461,0.49,1.159-0.105,1.479C12.83,26.314,12.316,26.221,11.791,25.229L11.791,25.229zM11.398,25.188c0.395,0.621,1.783,3.232-0.652,3.571c-0.814,0.114-2.125-0.474-3.396-0.784c-1.142-0.279-2.301-0.444-2.949-0.627c-0.391-0.108-0.554-0.25-0.588-0.414c-0.091-0.434,0.474-1.041,0.503-1.555c0.028-0.514-0.188-0.779-0.364-1.199c-0.177-0.42-0.224-0.734-0.081-0.914c0.109-0.141,0.334-0.199,0.698-0.164c0.462,0.047,1.02-0.049,1.319-0.23c0.505-0.309,0.742-0.939,0.516-1.699c0,0.744-0.244,1.025-0.855,1.366c-0.577,0.319-1.467,0.062-1.875,0.416c-0.492,0.427,0.175,1.528,0.12,2.338c-0.042,0.622-0.69,1.322-0.401,1.946c0.291,0.627,1.648,0.695,3.064,0.99c2.012,0.422,3.184,1.153,4.113,1.188c1.356,0.05,1.564-1.342,3.693-1.36c0.621-0.033,1.229-0.052,1.835-0.06c0.688-0.009,1.375-0.003,2.079,0.014c1.417,0.034,0.931,0.773,1.851,1.246c0.774,0.397,2.17,0.241,2.504-0.077c0.451-0.431,1.662-1.467,2.592-1.935c1.156-0.583,3.876-1.588,1.902-2.812c-0.461-0.285-1.547-0.588-1.639-2.676c-0.412,0.366-0.365,2.312,0.784,2.697c1.283,0.431,2.085,1.152-0.301,1.969c-1.58,0.54-1.849,0.706-3.099,1.747c-1.267,1.054-3.145,0.636-2.815-1.582c0.171-1.155,0.269-2.11-0.019-3.114c-0.142-0.49-0.211-1.119-0.114-1.562c0.187-0.858,0.651-1.117,1.106-0.293c0.285,0.519,0.385,1.122,1.408,1.171c1.607,0.077,1.926-1.553,2.439-1.627c0.343-0.05,0.686-1.02,0.425-2.589c-0.28-1.681-1.269-4.332-2.536-5.677c-1.053-1.118-1.717-2.098-2.135-3.497c-0.352-1.175-0.547-2.318-0.475-3.412c0.094-1.417-0.691-3.389-1.943-4.316c-0.782-0.581-2.011-0.893-3.122-0.88c-0.623,0.007-1.21,0.099-1.661,0.343c-1.855,1.008-2.113,2.445-2.086,4.088c0.025,1.543,0.078,3.303,0.254,4.977c-0.208,0.77-1.288,2.227-1.979,3.114C8.59,14.233,8.121,16.01,7.52,17.561c-0.321,0.828-0.862,1.2-0.908,2.265C6.6,20.122,6.61,20.891,6.894,20.672C7.98,19.829,9.343,21.95,11.398,25.188L11.398,25.188zM17.044,2.953c-0.06,0.176-0.3,0.321-0.146,0.443c0.152,0.123,0.24-0.171,0.549-0.281c0.08-0.028,0.449,0.012,0.519-0.164c0.03-0.077-0.19-0.164-0.321-0.291c-0.133-0.125-0.262-0.236-0.386-0.229C16.938,2.451,17.096,2.798,17.044,2.953L17.044,2.953zM18.934,9.35c0.115-0.121,0.174,0.207,0.483,0.402c0.244,0.154,0.481,0.04,0.545,0.354c0.044,0.225-0.097,0.467-0.284,0.436C19.35,10.486,18.596,9.705,18.934,9.35L18.934,9.35zM13.832,7.375c-0.508-0.037-0.543,0.33-0.375,0.324C13.629,7.693,13.523,7.408,13.832,7.375L13.832,7.375zM12.96,6.436c0.06-0.013,0.146,0.09,0.119,0.233c-0.037,0.199-0.021,0.324,0.117,0.325c0.022,0,0.048-0.005,0.056-0.057c0.066-0.396-0.14-0.688-0.225-0.711C12.834,6.178,12.857,6.458,12.96,6.436L12.96,6.436zM16.663,6.268c0.129,0.039,0.253,0.262,0.28,0.504c0.002,0.021,0.168-0.035,0.17-0.088c0.011-0.389-0.321-0.571-0.408-0.562C16.506,6.139,16.562,6.238,16.663,6.268L16.663,6.268zM14.765,7.423c0.463-0.214,0.625,0.118,0.465,0.171C15.066,7.648,15.065,7.345,14.765,7.423L14.765,7.423zM9.178,15.304c-0.219-0.026,0.063-0.19,0.184-0.397c0.131-0.227,0.105-0.511,0.244-0.469s0.061,0.2-0.033,0.461C9.491,15.121,9.258,15.313,9.178,15.304L9.178,15.304z")}}),draw2d.shape.icon.NodeJs=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.NodeJs",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M4.783,4.458L2.59,3.196C2.553,3.174,2.511,3.163,2.469,3.161H2.447C2.405,3.163,2.363,3.174,2.326,3.196L0.133,4.458C0.051,4.505,0,4.593,0,4.688l0.005,3.398c0,0.047,0.024,0.092,0.066,0.114c0.041,0.024,0.091,0.024,0.132,0l1.303-0.746c0.083-0.049,0.132-0.136,0.132-0.229V5.637c0-0.095,0.05-0.183,0.132-0.229l0.555-0.32c0.041-0.023,0.086-0.035,0.132-0.035c0.045,0,0.092,0.012,0.132,0.035l0.555,0.32c0.082,0.047,0.133,0.135,0.133,0.229v1.588c0,0.094,0.051,0.182,0.132,0.229l1.303,0.746c0.041,0.024,0.092,0.024,0.132,0c0.041-0.022,0.066-0.067,0.066-0.114l0.004-3.398C4.915,4.593,4.865,4.505,4.783,4.458zM17.93,0.745l-1.305-0.729c-0.042-0.023-0.091-0.022-0.132,0.001c-0.041,0.024-0.065,0.067-0.065,0.114v3.365c0,0.033-0.018,0.064-0.046,0.081s-0.064,0.017-0.093,0l-0.549-0.316c-0.082-0.047-0.183-0.047-0.265,0l-2.193,1.266c-0.082,0.047-0.133,0.135-0.133,0.229V7.29c0,0.095,0.051,0.182,0.132,0.229l2.194,1.267c0.082,0.048,0.183,0.048,0.265,0l2.194-1.267c0.082-0.048,0.133-0.135,0.133-0.229V0.977C18.066,0.88,18.014,0.792,17.93,0.745zM16.421,6.458c0,0.023-0.013,0.045-0.033,0.057l-0.753,0.435c-0.021,0.012-0.045,0.012-0.066,0l-0.753-0.435c-0.021-0.012-0.033-0.034-0.033-0.057v-0.87c0-0.023,0.013-0.045,0.033-0.058l0.753-0.435c0.021-0.012,0.045-0.012,0.066,0l0.753,0.435c0.021,0.012,0.033,0.034,0.033,0.058V6.458zM24.473,4.493l-2.18-1.266c-0.082-0.047-0.183-0.048-0.265,0l-2.193,1.266c-0.082,0.047-0.132,0.135-0.132,0.229v2.532c0,0.096,0.051,0.184,0.133,0.23l2.18,1.242c0.08,0.045,0.179,0.046,0.26,0.001l1.318-0.732c0.042-0.023,0.067-0.067,0.068-0.115c0-0.048-0.025-0.092-0.066-0.116l-2.207-1.266c-0.041-0.023-0.066-0.067-0.066-0.115V5.59c0-0.047,0.025-0.091,0.065-0.115l0.688-0.396c0.041-0.024,0.091-0.024,0.132,0l0.688,0.396c0.041,0.023,0.066,0.067,0.066,0.115v0.625c0,0.047,0.025,0.091,0.066,0.114c0.041,0.024,0.092,0.024,0.132,0l1.314-0.764c0.081-0.047,0.132-0.135,0.132-0.229V4.722C24.605,4.628,24.555,4.541,24.473,4.493zM11.363,4.48L9.169,3.214c-0.082-0.047-0.183-0.047-0.265,0L6.711,4.48C6.629,4.527,6.579,4.615,6.579,4.709v2.534c0,0.095,0.051,0.182,0.133,0.229l2.193,1.267c0.082,0.048,0.183,0.048,0.265,0l2.193-1.267c0.082-0.048,0.132-0.135,0.132-0.229V4.709C11.495,4.615,11.445,4.527,11.363,4.48zM31.019,4.382L28.95,3.187c-0.13-0.074-0.304-0.074-0.435,0l-2.068,1.195c-0.135,0.077-0.218,0.222-0.218,0.377v2.386c0,0.156,0.083,0.301,0.218,0.378l0.542,0.312c0.263,0.13,0.356,0.13,0.477,0.13c0.389,0,0.612-0.236,0.612-0.646V4.962c0-0.033-0.027-0.06-0.06-0.06h-0.263c-0.033,0-0.061,0.026-0.061,0.06v2.356c0,0.182-0.188,0.363-0.495,0.209l-0.566-0.326c-0.021-0.012-0.033-0.033-0.033-0.057V4.759c0-0.023,0.013-0.045,0.033-0.057l2.067-1.193c0.019-0.011,0.044-0.011,0.063,0l2.067,1.193c0.02,0.012,0.032,0.034,0.032,0.057v2.386c0,0.023-0.013,0.046-0.032,0.057l-2.068,1.193c-0.018,0.012-0.045,0.012-0.063,0l-0.53-0.314c-0.017-0.01-0.036-0.013-0.052-0.004c-0.146,0.083-0.175,0.094-0.312,0.143c-0.034,0.012-0.084,0.031,0.019,0.09l0.691,0.408c0.065,0.038,0.141,0.059,0.217,0.059s0.151-0.021,0.218-0.059l2.068-1.194c0.134-0.078,0.217-0.222,0.217-0.378V4.759C31.235,4.604,31.152,4.459,31.019,4.382zM29.371,6.768c-0.548,0-0.668-0.138-0.708-0.41c-0.005-0.029-0.029-0.051-0.06-0.051h-0.268c-0.033,0-0.06,0.026-0.06,0.06c0,0.349,0.189,0.765,1.095,0.765c0.655,0,1.031-0.259,1.031-0.709c0-0.447-0.302-0.566-0.938-0.65c-0.643-0.085-0.708-0.128-0.708-0.279c0-0.125,0.056-0.29,0.531-0.29c0.425,0,0.581,0.091,0.646,0.378c0.006,0.027,0.03,0.047,0.059,0.047h0.269c0.017,0,0.032-0.007,0.044-0.019c0.011-0.013,0.017-0.029,0.016-0.046c-0.042-0.493-0.37-0.723-1.032-0.723c-0.59,0-0.941,0.249-0.941,0.666c0,0.453,0.35,0.578,0.916,0.634c0.677,0.066,0.729,0.166,0.729,0.298C29.992,6.669,29.807,6.768,29.371,6.768zM22.128,5.446l-0.42,0.243c-0.016,0.009-0.025,0.026-0.025,0.044v0.486c0,0.019,0.01,0.035,0.025,0.044l0.42,0.243c0.016,0.009,0.035,0.009,0.052,0l0.421-0.243c0.016-0.009,0.025-0.025,0.025-0.044V5.733c0-0.018-0.01-0.035-0.025-0.044L22.18,5.446C22.163,5.438,22.144,5.438,22.128,5.446z")}}),draw2d.shape.icon.JQuery=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.JQuery",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M10.322,23.041C4.579,18.723,2.777,11.07,5.494,4.583c-0.254,0.291-0.502,0.59-0.739,0.904c-5.177,6.887-4.008,16.505,2.613,21.482c6.62,4.979,16.184,3.432,21.362-3.455c0.237-0.314,0.454-0.635,0.663-0.959C23.915,26.963,16.064,27.357,10.322,23.041zM13.662,18.598c4.765,3.582,11.604,2.564,15.567-2.198c-3.609,2.641-9.09,2.475-13.361-0.736S9.916,7.231,11.451,3.03C7.976,8.161,8.897,15.015,13.662,18.598zM18.642,11.976c3.254,2.447,8.146,1.438,10.967-2.242c-2.604,1.921-6.341,1.955-9.157-0.164c-2.819-2.118-3.826-5.718-2.701-8.754C14.998,4.549,15.387,9.528,18.642,11.976z")}}),draw2d.shape.icon.Sencha=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Sencha",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M18.265,22.734c1.365,0.662,2.309,2.062,2.309,3.682c0,1.566-0.881,2.928-2.176,3.615l1.922-0.98c3.16-1.58,5.332-4.846,5.332-8.617c0-3.719-2.109-6.945-5.195-8.547l-6.272-3.144c-1.366-0.662-2.308-2.062-2.308-3.682c0-1.567,0.881-2.928,2.175-3.614L12.13,2.428c-3.161,1.578-5.332,4.843-5.332,8.616c0,3.718,2.108,6.944,5.195,8.546L18.265,22.734z")}}),draw2d.shape.icon.Vim=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Vim",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M25.012,10.44l4.571-4.645c0.11-0.113,0.173-0.264,0.173-0.423V3.134c0-0.159-0.064-0.314-0.177-0.427l-0.604-0.602c-0.111-0.112-0.261-0.176-0.42-0.177l-9.646-0.086C18.71,1.84,18.523,1.935,18.41,2.099L17.807,2.96c-0.033,0.047-0.059,0.099-0.076,0.154l-2.144-2.156l0,0l-1.646,1.666l-0.447-0.497c-0.112-0.125-0.27-0.197-0.438-0.199L3.324,1.756c-0.163-0.003-0.322,0.06-0.437,0.176L2.284,2.535C2.171,2.647,2.107,2.803,2.107,2.962v2.325c0,0.164,0.066,0.32,0.183,0.434l0.657,0.635C3.056,6.461,3.2,6.521,3.352,6.525l0.285,0.007l0.007,6.512l-2.527,2.557l2.533,2.533l0.008,8.084c0,0.159,0.065,0.314,0.177,0.427l0.861,0.861c0.112,0.111,0.268,0.176,0.427,0.176h2.67c0.161,0,0.317-0.064,0.43-0.181l2.378-2.417l4.9,4.9l14.47-14.558L25.012,10.44zM9.747,24.232l-2.208,2.242H5.372l-0.509-0.509L4.856,19.34l-0.008-7.515L4.842,5.943c0-0.328-0.261-0.594-0.588-0.603L3.617,5.326L3.313,5.031v-1.82l0.245-0.245l9.215,0.163l0.319,0.354l0.126,0.141v1.419l-0.352,0.362H12.26c-0.331,0-0.6,0.266-0.603,0.597l-0.076,7.203c-0.002,0.244,0.141,0.463,0.365,0.56c0.224,0.096,0.482,0.049,0.657-0.12l7.495-7.235c0.174-0.171,0.23-0.432,0.139-0.66c-0.09-0.228-0.312-0.377-0.56-0.377h-0.479l-0.296-0.379V3.496l0.312-0.445l9.083,0.081l0.252,0.252v1.743l-4.388,4.458L9.747,24.232z")}}),draw2d.shape.icon.InkScape=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.InkScape",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M20.402,17.626c0.84-0.772,2.468-0.381,5.979-1.853c1.716-0.72,1.572-1.265,1.566-1.928c-0.001-0.014,0-0.027,0-0.041h-0.005c-0.012-0.667-0.291-1.332-0.846-1.845L17.049,2.684c-0.566-0.522-1.304-0.782-2.042-0.782V1.898c-0.738,0-1.475,0.261-2.04,0.783l-10.05,9.276c-0.554,0.512-0.832,1.176-0.843,1.844H2.07c0,0,0.003,0.011,0.004,0.011c0,0.012-0.004,0.024-0.004,0.034h0.017c0.193,0.676,5.164,1.536,5.718,2.049c0.838,0.774-3.211,1.339-2.374,2.114c0.838,0.773,5.062,1.496,5.898,2.271c0.838,0.771-1.711,1.596-0.874,2.366c0.837,0.773,3.651-0.191,3.142,1.822c1.13,1.045,3.49,0.547,5.071-0.498c0.837-0.771-1.607-0.703-0.77-1.477c0.836-0.774,2.949-0.777,4.73-2.627C21.913,18.838,19.566,18.398,20.402,17.626zM10.973,16.868l-0.42-0.504c1.497,0.358,3.162,0.827,4.498,0.837l0.058,0.554C13.964,17.646,11.544,17.137,10.973,16.868zM18.161,8.58l-1.396-0.74L14.53,9.594l-1.067-3.192l-1.177,2.545L8.998,9.25l0.036-1.352c0-0.324,1.895-2.596,3.05-3.136l2.112-1.401c0.312-0.186,0.53-0.261,0.727-0.257c0.327,0.011,0.593,0.239,1.112,0.55l4.748,3.25c0.357,0.215,0.619,0.522,0.626,0.898l-2.813-1.254L18.161,8.58zM26.434,19.594c-0.313-0.07-1.688-0.691-2.035,0.165c0.968,0.981,2.645,2.181,3.316,1.482C28.391,20.543,27.102,19.745,26.434,19.594zM4.663,21.566c-0.315,0.074-1.842,0.115-1.719,1.021c1.351,0.451,3.438,0.792,3.684-0.113C6.873,21.566,5.33,21.414,4.663,21.566zM17.877,26.396c-0.232,0.209-1.53,0.953-0.929,1.681c1.413-0.236,3.403-0.914,3.12-1.812C19.786,25.369,18.37,25.953,17.877,26.396z")}}),draw2d.shape.icon.Aumade=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Aumade",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M14.513,24.52c-0.131-0.217-0.14-0.481-0.022-0.711l1.987-3.844l0,0c0.186-0.357,0.625-0.497,0.981-0.312c0.357,0.188,0.498,0.625,0.312,0.982l-1.801,3.48l2.228,3.699h12.269l-14.8-25.631L6.433,18.178c0.434,0.242,0.909,0.479,1.391,0.654c0.571,0.211,1.148,0.342,1.658,0.342c0.276,0,0.579-0.078,0.916-0.238c0.337-0.158,0.7-0.396,1.073-0.688c0.749-0.582,1.527-1.354,2.334-2.021c0.539-0.442,1.091-0.844,1.706-1.099c0.352-0.145,0.729-0.239,1.128-0.239c0.622,0,1.174,0.214,1.622,0.5c0.449,0.287,0.813,0.646,1.11,0.995c0.59,0.697,0.902,1.359,0.924,1.394l0,0c0.18,0.361,0.021,0.801-0.341,0.977c-0.356,0.176-0.798,0.021-0.978-0.34c0-0.002-0.002-0.004-0.004-0.007c-0.002-0.011-0.008-0.021-0.018-0.034c-0.018-0.033-0.043-0.082-0.078-0.146c-0.07-0.125-0.179-0.305-0.312-0.496c-0.271-0.391-0.668-0.845-1.092-1.104c-0.281-0.178-0.561-0.272-0.844-0.272c-0.216,0-0.479,0.069-0.788,0.229c-0.309,0.153-0.653,0.396-1.016,0.688c-0.727,0.584-1.511,1.362-2.351,2.033c-0.562,0.445-1.15,0.853-1.809,1.103c-0.375,0.143-0.776,0.229-1.195,0.229c-0.749,0-1.48-0.181-2.164-0.433c-0.58-0.219-1.125-0.482-1.613-0.764L0.86,27.816h15.63L14.513,24.52zM18.214,22.242c0.222-0.557,0.537-1.217,0.963-1.848c0.427-0.627,0.957-1.232,1.646-1.646c0.379-0.229,0.812-0.391,1.282-0.438l-0.604-0.934l0,0c-0.22-0.339-0.123-0.789,0.215-1.009c0.341-0.219,0.789-0.123,1.013,0.216l1.545,2.391c0.184,0.274,0.147,0.646-0.075,0.893c-0.228,0.247-0.591,0.305-0.886,0.145c-0.354-0.191-0.646-0.258-0.901-0.258c-0.291,0-0.562,0.084-0.845,0.25c-0.277,0.164-0.562,0.414-0.813,0.719c-0.519,0.607-0.937,1.422-1.185,2.055c-0.111,0.285-0.387,0.466-0.678,0.466c-0.092,0-0.183-0.021-0.271-0.056C18.249,23.039,18.064,22.615,18.214,22.242z")}}),draw2d.shape.icon.Firefox=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Firefox",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.4,22.469c0.479-0.964,0.851-1.991,1.095-3.066c0.953-3.661,0.666-6.854,0.666-6.854l-0.327,2.104c0,0-0.469-3.896-1.044-5.353c-0.881-2.231-1.273-2.214-1.274-2.21c0.542,1.379,0.494,2.169,0.483,2.288c-0.01-0.016-0.019-0.032-0.027-0.047c-0.131-0.324-0.797-1.819-2.225-2.878c-2.502-2.481-5.943-4.014-9.745-4.015c-4.056,0-7.705,1.745-10.238,4.525C5.444,6.5,5.183,5.938,5.159,5.317c0,0-0.002,0.002-0.006,0.005c0-0.011-0.003-0.021-0.003-0.031c0,0-1.61,1.247-1.436,4.612c-0.299,0.574-0.56,1.172-0.777,1.791c-0.375,0.817-0.75,2.004-1.059,3.746c0,0,0.133-0.422,0.399-0.988c-0.064,0.482-0.103,0.971-0.116,1.467c-0.09,0.845-0.118,1.865-0.039,3.088c0,0,0.032-0.406,0.136-1.021c0.834,6.854,6.667,12.165,13.743,12.165l0,0c1.86,0,3.636-0.37,5.256-1.036C24.938,27.771,27.116,25.196,28.4,22.469zM16.002,3.356c2.446,0,4.73,0.68,6.68,1.86c-2.274-0.528-3.433-0.261-3.423-0.248c0.013,0.015,3.384,0.589,3.981,1.411c0,0-1.431,0-2.856,0.41c-0.065,0.019,5.242,0.663,6.327,5.966c0,0-0.582-1.213-1.301-1.42c0.473,1.439,0.351,4.17-0.1,5.528c-0.058,0.174-0.118-0.755-1.004-1.155c0.284,2.037-0.018,5.268-1.432,6.158c-0.109,0.07,0.887-3.189,0.201-1.93c-4.093,6.276-8.959,2.539-10.934,1.208c1.585,0.388,3.267,0.108,4.242-0.559c0.982-0.672,1.564-1.162,2.087-1.047c0.522,0.117,0.87-0.407,0.464-0.872c-0.405-0.466-1.392-1.105-2.725-0.757c-0.94,0.247-2.107,1.287-3.886,0.233c-1.518-0.899-1.507-1.63-1.507-2.095c0-0.366,0.257-0.88,0.734-1.028c0.58,0.062,1.044,0.214,1.537,0.466c0.005-0.135,0.006-0.315-0.001-0.519c0.039-0.077,0.015-0.311-0.047-0.596c-0.036-0.287-0.097-0.582-0.19-0.851c0.01-0.002,0.017-0.007,0.021-0.021c0.076-0.344,2.147-1.544,2.299-1.659c0.153-0.114,0.55-0.378,0.506-1.183c-0.015-0.265-0.058-0.294-2.232-0.286c-0.917,0.003-1.425-0.894-1.589-1.245c0.222-1.231,0.863-2.11,1.919-2.704c0.02-0.011,0.015-0.021-0.008-0.027c0.219-0.127-2.524-0.006-3.76,1.604C9.674,8.045,9.219,7.95,8.71,7.95c-0.638,0-1.139,0.07-1.603,0.187c-0.05,0.013-0.122,0.011-0.208-0.001C6.769,8.04,6.575,7.88,6.365,7.672c0.161-0.18,0.324-0.356,0.495-0.526C9.201,4.804,12.43,3.357,16.002,3.356z")}}),draw2d.shape.icon.Ie=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ie",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.998,2.266c-2.12-1.91-6.925,0.382-9.575,1.93c-0.76-0.12-1.557-0.185-2.388-0.185c-3.349,0-6.052,0.985-8.106,2.843c-2.336,2.139-3.631,4.94-3.631,8.177c0,0.028,0.001,0.056,0.001,0.084c3.287-5.15,8.342-7.79,9.682-8.487c0.212-0.099,0.338,0.155,0.141,0.253c-0.015,0.042-0.015,0,0,0c-2.254,1.35-6.434,5.259-9.146,10.886l-0.003-0.007c-1.717,3.547-3.167,8.529-0.267,10.358c2.197,1.382,6.13-0.248,9.295-2.318c0.764,0.108,1.567,0.165,2.415,0.165c5.84,0,9.937-3.223,11.399-7.924l-8.022-0.014c-0.337,1.661-1.464,2.548-3.223,2.548c-2.21,0-3.729-1.211-3.828-4.012l15.228-0.014c0.028-0.578-0.042-0.985-0.042-1.436c0-5.251-3.143-9.355-8.255-10.663c2.081-1.294,5.974-3.209,7.848-1.681c1.407,1.14,0.633,3.533,0.295,4.518c-0.056,0.254,0.24,0.296,0.296,0.057C28.814,5.573,29.026,3.194,27.998,2.266zM13.272,25.676c-2.469,1.475-5.873,2.539-7.539,1.289c-1.243-0.935-0.696-3.468,0.398-5.938c0.664,0.992,1.495,1.886,2.473,2.63C9.926,24.651,11.479,25.324,13.272,25.676zM12.714,13.046c0.042-2.435,1.787-3.49,3.617-3.49c1.928,0,3.49,1.112,3.49,3.49H12.714z")}}),draw2d.shape.icon.Ie9=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ie9",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.751,17.887c0.054-0.434,0.081-0.876,0.081-1.324c0-1.744-0.413-3.393-1.146-4.854c1.133-2.885,1.155-5.369-0.201-6.777c-1.756-1.822-5.391-1.406-9.433,0.721c-0.069-0.001-0.138-0.003-0.206-0.003c-6.069,0-10.988,4.888-10.988,10.917c0,0.183,0.005,0.354,0.014,0.529c-2.688,4.071-3.491,7.967-1.688,9.838c1.557,1.613,4.691,1.344,8.2-0.392c1.363,0.604,2.873,0.938,4.462,0.938c4.793,0,8.867-3.049,10.369-7.299H21.26c-0.814,1.483-2.438,2.504-4.307,2.504c-2.688,0-4.867-2.104-4.867-4.688c0-0.036,0.002-0.071,0.003-0.106h15.662V17.887zM26.337,6.099c0.903,0.937,0.806,2.684-0.087,4.818c-1.27-2.083-3.221-3.71-5.546-4.576C23.244,5.217,25.324,5.047,26.337,6.099zM16.917,10.372c2.522,0,4.585,1.991,4.748,4.509h-9.496C12.333,12.363,14.396,10.372,16.917,10.372zM5.687,26.501c-1.103-1.146-0.712-3.502,0.799-6.298c0.907,2.546,2.736,4.658,5.09,5.938C8.92,27.368,6.733,27.587,5.687,26.501z");
}}),draw2d.shape.icon.Opera=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Opera",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.954,2.046c-7.489,0-12.872,5.432-12.872,13.581c0,7.25,5.234,13.835,12.873,13.835c7.712,0,12.974-6.583,12.974-13.835C28.929,7.413,23.375,2.046,15.954,2.046zM15.952,26.548L15.952,26.548c-2.289,0-3.49-1.611-4.121-3.796c-0.284-1.037-0.458-2.185-0.563-3.341c-0.114-1.374-0.129-2.773-0.129-4.028c0-0.993,0.018-1.979,0.074-2.926c0.124-1.728,0.386-3.431,0.89-4.833c0.694-1.718,1.871-2.822,3.849-2.822c2.5,0,3.763,1.782,4.385,4.322c0.429,1.894,0.56,4.124,0.56,6.274c0,2.299-0.103,5.153-0.763,7.442C19.473,24.979,18.242,26.548,15.952,26.548z")}}),draw2d.shape.icon.Chrome=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Chrome",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.318,7.677c0.071-0.029,0.148-0.046,0.229-0.046h11.949c-2.533-3.915-6.938-6.506-11.949-6.506c-5.017,0-9.428,2.598-11.959,6.522l4.291,7.431C8.018,11.041,11.274,7.796,15.318,7.677zM28.196,8.84h-8.579c2.165,1.357,3.605,3.763,3.605,6.506c0,1.321-0.334,2.564-0.921,3.649c-0.012,0.071-0.035,0.142-0.073,0.209l-5.973,10.347c7.526-0.368,13.514-6.587,13.514-14.205C29.77,13.002,29.201,10.791,28.196,8.84zM15.547,23.022c-2.761,0-5.181-1.458-6.533-3.646c-0.058-0.046-0.109-0.103-0.149-0.171L2.89,8.855c-1,1.946-1.565,4.153-1.565,6.492c0,7.624,5.999,13.846,13.534,14.205l4.287-7.425C18.073,22.698,16.848,23.022,15.547,23.022zM9.08,15.347c0,1.788,0.723,3.401,1.894,4.573c1.172,1.172,2.785,1.895,4.573,1.895c1.788,0,3.401-0.723,4.573-1.895s1.895-2.785,1.895-4.573c0-1.788-0.723-3.4-1.895-4.573c-1.172-1.171-2.785-1.894-4.573-1.894c-1.788,0-3.401,0.723-4.573,1.894C9.803,11.946,9.081,13.559,9.08,15.347z")}}),draw2d.shape.icon.Safari=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Safari",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M16.154,5.135c-0.504,0-1,0.031-1.488,0.089l-0.036-0.18c-0.021-0.104-0.06-0.198-0.112-0.283c0.381-0.308,0.625-0.778,0.625-1.306c0-0.927-0.751-1.678-1.678-1.678s-1.678,0.751-1.678,1.678c0,0.745,0.485,1.376,1.157,1.595c-0.021,0.105-0.021,0.216,0,0.328l0.033,0.167C7.645,6.95,3.712,11.804,3.712,17.578c0,6.871,5.571,12.441,12.442,12.441c6.871,0,12.441-5.57,12.441-12.441C28.596,10.706,23.025,5.135,16.154,5.135zM16.369,8.1c4.455,0,8.183,3.116,9.123,7.287l-0.576,0.234c-0.148-0.681-0.755-1.191-1.48-1.191c-0.837,0-1.516,0.679-1.516,1.516c0,0.075,0.008,0.148,0.018,0.221l-2.771-0.028c-0.054-0.115-0.114-0.226-0.182-0.333l3.399-5.11l0.055-0.083l-4.766,4.059c-0.352-0.157-0.74-0.248-1.148-0.256l0.086-0.018l-1.177-2.585c0.64-0.177,1.111-0.763,1.111-1.459c0-0.837-0.678-1.515-1.516-1.515c-0.075,0-0.147,0.007-0.219,0.018l0.058-0.634C15.357,8.141,15.858,8.1,16.369,8.1zM12.146,3.455c0-0.727,0.591-1.318,1.318-1.318c0.727,0,1.318,0.591,1.318,1.318c0,0.425-0.203,0.802-0.516,1.043c-0.183-0.123-0.413-0.176-0.647-0.13c-0.226,0.045-0.413,0.174-0.535,0.349C12.542,4.553,12.146,4.049,12.146,3.455zM7.017,17.452c0-4.443,3.098-8.163,7.252-9.116l0.297,0.573c-0.61,0.196-1.051,0.768-1.051,1.442c0,0.837,0.678,1.516,1.515,1.516c0.068,0,0.135-0.006,0.2-0.015l-0.058,2.845l0.052-0.011c-0.442,0.204-0.824,0.513-1.116,0.895l0.093-0.147l-1.574-0.603l1.172,1.239l0.026-0.042c-0.19,0.371-0.306,0.788-0.324,1.229l-0.003-0.016l-2.623,1.209c-0.199-0.604-0.767-1.041-1.438-1.041c-0.837,0-1.516,0.678-1.516,1.516c0,0.064,0.005,0.128,0.013,0.191l-0.783-0.076C7.063,18.524,7.017,17.994,7.017,17.452zM16.369,26.805c-4.429,0-8.138-3.078-9.106-7.211l0.691-0.353c0.146,0.686,0.753,1.2,1.482,1.2c0.837,0,1.515-0.679,1.515-1.516c0-0.105-0.011-0.207-0.031-0.307l2.858,0.03c0.045,0.095,0.096,0.187,0.15,0.276l-3.45,5.277l0.227-0.195l4.529-3.92c0.336,0.153,0.705,0.248,1.094,0.266l-0.019,0.004l1.226,2.627c-0.655,0.166-1.142,0.76-1.142,1.468c0,0.837,0.678,1.515,1.516,1.515c0.076,0,0.151-0.007,0.225-0.018l0.004,0.688C17.566,26.746,16.975,26.805,16.369,26.805zM18.662,26.521l-0.389-0.6c0.661-0.164,1.152-0.759,1.152-1.47c0-0.837-0.68-1.516-1.516-1.516c-0.066,0-0.13,0.005-0.193,0.014v-2.86l-0.025,0.004c0.409-0.185,0.77-0.459,1.055-0.798l1.516,0.659l-1.104-1.304c0.158-0.335,0.256-0.704,0.278-1.095l2.552-1.164c0.19,0.618,0.766,1.068,1.447,1.068c0.838,0,1.516-0.679,1.516-1.516c0-0.069-0.006-0.137-0.016-0.204l0.65,0.12c0.089,0.517,0.136,1.049,0.136,1.591C25.722,21.826,22.719,25.499,18.662,26.521z")}}),draw2d.shape.icon.LinkedIn=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.LinkedIn",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.25,3.125h-22c-1.104,0-2,0.896-2,2v22c0,1.104,0.896,2,2,2h22c1.104,0,2-0.896,2-2v-22C29.25,4.021,28.354,3.125,27.25,3.125zM11.219,26.781h-4v-14h4V26.781zM9.219,11.281c-1.383,0-2.5-1.119-2.5-2.5s1.117-2.5,2.5-2.5s2.5,1.119,2.5,2.5S10.602,11.281,9.219,11.281zM25.219,26.781h-4v-8.5c0-0.4-0.403-1.055-0.687-1.213c-0.375-0.211-1.261-0.229-1.665-0.034l-1.648,0.793v8.954h-4v-14h4v0.614c1.583-0.723,3.78-0.652,5.27,0.184c1.582,0.886,2.73,2.864,2.73,4.702V26.781z")}}),draw2d.shape.icon.Flickr=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Flickr",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M21.77,8.895c-2.379,0-4.479,1.174-5.77,2.969c-1.289-1.795-3.39-2.969-5.77-2.969c-3.924,0-7.105,3.181-7.105,7.105c0,3.924,3.181,7.105,7.105,7.105c2.379,0,4.48-1.175,5.77-2.97c1.29,1.795,3.391,2.97,5.77,2.97c3.925,0,7.105-3.182,7.105-7.105C28.875,12.075,25.694,8.895,21.77,8.895zM21.769,21.822c-3.211,0-5.821-2.61-5.821-5.821c0-3.213,2.61-5.824,5.821-5.824c3.213,0,5.824,2.611,5.824,5.824C27.593,19.212,24.981,21.822,21.769,21.822z")}}),draw2d.shape.icon.GitHub=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.GitHub",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.436,15.099c-1.201-0.202-2.451-0.335-3.466-0.371l-0.179-0.006c0.041-0.09,0.072-0.151,0.082-0.16c0.022-0.018,0.04-0.094,0.042-0.168c0-0.041,0.018-0.174,0.046-0.35c0.275,0.01,0.64,0.018,1.038,0.021c1.537,0.012,3.145,0.136,4.248,0.331c0.657,0.116,0.874,0.112,0.389-0.006c-0.491-0.119-1.947-0.294-3.107-0.37c-0.779-0.053-1.896-0.073-2.554-0.062c0.019-0.114,0.041-0.241,0.064-0.371c0.093-0.503,0.124-1.009,0.126-2.016c0.002-1.562-0.082-1.992-0.591-3.025c-0.207-0.422-0.441-0.78-0.724-1.104c0.247-0.729,0.241-1.858-0.015-2.848c-0.211-0.812-0.285-0.864-1.021-0.708C22.19,4.019,21.69,4.2,21.049,4.523c-0.303,0.153-0.721,0.391-1.024,0.578c-0.79-0.278-1.607-0.462-2.479-0.561c-0.884-0.1-3.051-0.044-3.82,0.098c-0.752,0.139-1.429,0.309-2.042,0.511c-0.306-0.189-0.75-0.444-1.067-0.604C9.973,4.221,9.473,4.041,8.847,3.908c-0.734-0.157-0.81-0.104-1.02,0.708c-0.26,1.003-0.262,2.151-0.005,2.878C7.852,7.577,7.87,7.636,7.877,7.682c-1.042,1.312-1.382,2.78-1.156,4.829c0.059,0.534,0.15,1.024,0.277,1.473c-0.665-0.004-1.611,0.02-2.294,0.064c-1.162,0.077-2.618,0.25-3.109,0.369c-0.484,0.118-0.269,0.122,0.389,0.007c1.103-0.194,2.712-0.32,4.248-0.331c0.29-0.001,0.561-0.007,0.794-0.013c0.07,0.237,0.15,0.463,0.241,0.678L7.26,14.759c-1.015,0.035-2.264,0.168-3.465,0.37c-0.901,0.151-2.231,0.453-2.386,0.54c-0.163,0.091-0.03,0.071,0.668-0.106c1.273-0.322,2.928-0.569,4.978-0.741l0.229-0.02c0.44,1.022,1.118,1.802,2.076,2.41c0.586,0.373,1.525,0.756,1.998,0.816c0.13,0.016,0.508,0.094,0.84,0.172c0.333,0.078,0.984,0.195,1.446,0.262h0.011c-0.009,0.006-0.017,0.01-0.025,0.016c-0.56,0.291-0.924,0.744-1.169,1.457c-0.11,0.033-0.247,0.078-0.395,0.129c-0.529,0.18-0.735,0.217-1.271,0.221c-0.556,0.004-0.688-0.02-1.02-0.176c-0.483-0.225-0.933-0.639-1.233-1.133c-0.501-0.826-1.367-1.41-2.089-1.41c-0.617,0-0.734,0.25-0.288,0.615c0.672,0.549,1.174,1.109,1.38,1.537c0.116,0.24,0.294,0.611,0.397,0.824c0.109,0.227,0.342,0.535,0.564,0.748c0.522,0.498,1.026,0.736,1.778,0.848c0.504,0.074,0.628,0.074,1.223-0.002c0.287-0.035,0.529-0.076,0.746-0.127c0,0.244,0,0.525,0,0.855c0,1.766-0.021,2.334-0.091,2.5c-0.132,0.316-0.428,0.641-0.716,0.787c-0.287,0.146-0.376,0.307-0.255,0.455c0.067,0.08,0.196,0.094,0.629,0.066c0.822-0.051,1.403-0.355,1.699-0.891c0.095-0.172,0.117-0.518,0.147-2.318c0.032-1.953,0.046-2.141,0.173-2.42c0.077-0.166,0.188-0.346,0.25-0.395c0.104-0.086,0.111,0.084,0.111,2.42c-0.001,2.578-0.027,2.889-0.285,3.385c-0.058,0.113-0.168,0.26-0.245,0.33c-0.135,0.123-0.192,0.438-0.098,0.533c0.155,0.154,0.932-0.088,1.356-0.422c0.722-0.572,0.808-1.045,0.814-4.461l0.003-2.004l0.219,0.021l0.219,0.02l0.036,2.621c0.041,2.951,0.047,2.994,0.549,3.564c0.285,0.322,0.572,0.5,1.039,0.639c0.625,0.188,0.813-0.102,0.393-0.605c-0.457-0.547-0.479-0.756-0.454-3.994c0.017-2.076,0.017-2.076,0.151-1.955c0.282,0.256,0.336,0.676,0.336,2.623c0,2.418,0.069,2.648,0.923,3.07c0.399,0.195,0.511,0.219,1.022,0.221c0.544,0.002,0.577-0.006,0.597-0.148c0.017-0.115-0.05-0.193-0.304-0.348c-0.333-0.205-0.564-0.467-0.709-0.797c-0.055-0.127-0.092-0.959-0.117-2.672c-0.036-2.393-0.044-2.502-0.193-2.877c-0.201-0.504-0.508-0.902-0.897-1.166c-0.101-0.066-0.202-0.121-0.333-0.162c0.161-0.016,0.317-0.033,0.468-0.055c1.572-0.209,2.403-0.383,3.07-0.641c1.411-0.543,2.365-1.445,2.882-2.724c0.046-0.114,0.092-0.222,0.131-0.309l0.398,0.033c2.051,0.173,3.706,0.42,4.979,0.743c0.698,0.177,0.831,0.198,0.668,0.105C30.666,15.551,29.336,15.25,28.436,15.099zM22.422,15.068c-0.233,0.512-0.883,1.17-1.408,1.428c-0.518,0.256-1.33,0.451-2.25,0.544c-0.629,0.064-4.137,0.083-4.716,0.026c-1.917-0.188-2.991-0.557-3.783-1.296c-0.75-0.702-1.1-1.655-1.039-2.828c0.039-0.734,0.216-1.195,0.679-1.755c0.421-0.51,0.864-0.825,1.386-0.985c0.437-0.134,1.778-0.146,3.581-0.03c0.797,0.051,1.456,0.051,2.252,0c1.886-0.119,3.145-0.106,3.61,0.038c0.731,0.226,1.397,0.834,1.797,1.644c0.18,0.362,0.215,0.516,0.241,1.075C22.808,13.699,22.675,14.517,22.422,15.068zM12.912,11.762c-1.073-0.188-1.686,1.649-0.863,2.587c0.391,0.445,0.738,0.518,1.172,0.248c0.402-0.251,0.62-0.72,0.62-1.328C13.841,12.458,13.472,11.862,12.912,11.762zM19.425,11.872c-1.073-0.188-1.687,1.647-0.864,2.586c0.392,0.445,0.738,0.519,1.173,0.247c0.401-0.25,0.62-0.72,0.62-1.328C20.354,12.569,19.985,11.971,19.425,11.872zM16.539,15.484c-0.023,0.074-0.135,0.184-0.248,0.243c-0.286,0.147-0.492,0.096-0.794-0.179c-0.187-0.169-0.272-0.258-0.329-0.081c-0.053,0.164,0.28,0.493,0.537,0.594c0.236,0.094,0.405,0.097,0.661-0.01c0.254-0.106,0.476-0.391,0.476-0.576C16.842,15.303,16.595,15.311,16.539,15.484zM16.222,14.909c0.163-0.144,0.2-0.44,0.044-0.597s-0.473-0.133-0.597,0.043c-0.144,0.206-0.067,0.363,0.036,0.53C15.865,15.009,16.08,15.034,16.222,14.909z")}}),draw2d.shape.icon.GitHubAlt=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.GitHubAlt",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M23.356,17.485c-0.004,0.007-0.007,0.013-0.01,0.021l0.162,0.005c0.107,0.004,0.218,0.01,0.33,0.016c-0.046-0.004-0.09-0.009-0.136-0.013L23.356,17.485zM15.5,1.249C7.629,1.25,1.25,7.629,1.249,15.5C1.25,23.371,7.629,29.75,15.5,29.751c7.871-0.001,14.25-6.38,14.251-14.251C29.75,7.629,23.371,1.25,15.5,1.249zM3.771,17.093c0.849-0.092,1.833-0.148,2.791-0.156c0.262,0,0.507-0.006,0.717-0.012c0.063,0.213,0.136,0.419,0.219,0.613H7.492c-0.918,0.031-2.047,0.152-3.134,0.335c-0.138,0.023-0.288,0.051-0.441,0.08C3.857,17.67,3.81,17.383,3.771,17.093zM12.196,22.224c-0.1,0.028-0.224,0.07-0.357,0.117c-0.479,0.169-0.665,0.206-1.15,0.206c-0.502,0.015-0.621-0.019-0.921-0.17C9.33,22.171,8.923,21.8,8.651,21.353c-0.453-0.746-1.236-1.275-1.889-1.275c-0.559,0-0.664,0.227-0.261,0.557c0.608,0.496,1.062,0.998,1.248,1.385c0.105,0.215,0.266,0.546,0.358,0.744c0.099,0.206,0.311,0.474,0.511,0.676c0.472,0.441,0.928,0.659,1.608,0.772c0.455,0.06,0.567,0.06,1.105-0.004c0.26-0.03,0.479-0.067,0.675-0.118v0.771c0,1.049-0.008,1.628-0.031,1.945c-1.852-0.576-3.507-1.595-4.848-2.934c-1.576-1.578-2.706-3.592-3.195-5.848c0.952-0.176,2.073-0.32,3.373-0.43l0.208-0.018c0.398,0.925,1.011,1.631,1.876,2.179c0.53,0.337,1.38,0.685,1.808,0.733c0.118,0.02,0.46,0.09,0.76,0.16c0.302,0.066,0.89,0.172,1.309,0.236h0.009c-0.007,0.018-0.014,0.02-0.022,0.02C12.747,21.169,12.418,21.579,12.196,22.224zM13.732,27.207c-0.168-0.025-0.335-0.056-0.5-0.087c0.024-0.286,0.038-0.785,0.054-1.723c0.028-1.767,0.041-1.94,0.156-2.189c0.069-0.15,0.17-0.32,0.226-0.357c0.095-0.078,0.101,0.076,0.101,2.188C13.769,26.143,13.763,26.786,13.732,27.207zM15.5,27.339c-0.148,0-0.296-0.006-0.443-0.012c0.086-0.562,0.104-1.428,0.106-2.871l0.003-1.82l0.197,0.019l0.199,0.02l0.032,2.365c0.017,1.21,0.027,1.878,0.075,2.296C15.613,27.335,15.558,27.339,15.5,27.339zM17.006,27.24c-0.039-0.485-0.037-1.243-0.027-2.553c0.019-1.866,0.019-1.866,0.131-1.769c0.246,0.246,0.305,0.623,0.305,2.373c0,0.928,0.011,1.497,0.082,1.876C17.334,27.196,17.17,27.22,17.006,27.24zM27.089,17.927c-0.155-0.029-0.307-0.057-0.446-0.08c-0.96-0.162-1.953-0.275-2.804-0.32c1.25,0.108,2.327,0.248,3.246,0.418c-0.479,2.289-1.618,4.33-3.214,5.928c-1.402,1.4-3.15,2.448-5.106,3.008c-0.034-0.335-0.058-1.048-0.066-2.212c-0.03-2.167-0.039-2.263-0.17-2.602c-0.181-0.458-0.47-0.811-0.811-1.055c-0.094-0.057-0.181-0.103-0.301-0.14c0.145-0.02,0.282-0.021,0.427-0.057c1.418-0.188,2.168-0.357,2.772-0.584c1.263-0.492,2.129-1.301,2.606-2.468c0.044-0.103,0.088-0.2,0.123-0.279l0.011,0.001c0.032-0.07,0.057-0.118,0.064-0.125c0.02-0.017,0.036-0.085,0.038-0.151c0-0.037,0.017-0.157,0.041-0.317c0.249,0.01,0.58,0.018,0.938,0.02c0.959,0.008,1.945,0.064,2.794,0.156C27.194,17.356,27.148,17.644,27.089,17.927zM25.823,16.87c-0.697-0.049-1.715-0.064-2.311-0.057c0.02-0.103,0.037-0.218,0.059-0.336c0.083-0.454,0.111-0.912,0.113-1.823c0.002-1.413-0.074-1.801-0.534-2.735c-0.188-0.381-0.399-0.705-0.655-0.998c0.225-0.659,0.207-1.68-0.02-2.575c-0.19-0.734-0.258-0.781-0.924-0.64c-0.563,0.12-1.016,0.283-1.598,0.576c-0.274,0.138-0.652,0.354-0.923,0.522c-0.715-0.251-1.451-0.419-2.242-0.508c-0.799-0.092-2.759-0.04-3.454,0.089c-0.681,0.126-1.293,0.28-1.848,0.462c-0.276-0.171-0.678-0.4-0.964-0.547C9.944,8.008,9.491,7.846,8.925,7.727c-0.664-0.144-0.732-0.095-0.922,0.64c-0.235,0.907-0.237,1.945-0.004,2.603c0.026,0.075,0.043,0.129,0.05,0.17c-0.942,1.187-1.25,2.515-1.046,4.367c0.053,0.482,0.136,0.926,0.251,1.333c-0.602-0.004-1.457,0.018-2.074,0.057c-0.454,0.031-0.957,0.076-1.418,0.129c-0.063-0.5-0.101-1.008-0.101-1.524c0-3.273,1.323-6.225,3.468-8.372c2.146-2.144,5.099-3.467,8.371-3.467c3.273,0,6.226,1.323,8.371,3.467c2.145,2.147,3.468,5.099,3.468,8.372c0,0.508-0.036,1.008-0.098,1.499C26.78,16.946,26.276,16.899,25.823,16.87z")}}),draw2d.shape.icon.Raphael=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Raphael",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M27.777,18.941c0.584-0.881,0.896-1.914,0.896-2.998c0-1.457-0.567-2.826-1.598-3.854l-6.91-6.911l-0.003,0.002c-0.985-0.988-2.35-1.6-3.851-1.6c-1.502,0-2.864,0.612-3.85,1.6H12.46l-6.911,6.911c-1.031,1.029-1.598,2.398-1.598,3.854c0,1.457,0.567,2.826,1.598,3.854l6.231,6.229c0.25,0.281,0.512,0.544,0.789,0.785c1.016,0.961,2.338,1.49,3.743,1.49c1.456,0,2.825-0.565,3.854-1.598l6.723-6.725c0.021-0.019,0.034-0.032,0.051-0.051l0.14-0.138c0.26-0.26,0.487-0.54,0.688-0.838c0.004-0.008,0.01-0.015,0.014-0.021L27.777,18.941zM26.658,15.946c0,0.678-0.197,1.326-0.561,1.879c-0.222,0.298-0.447,0.559-0.684,0.784L25.4,18.625c-1.105,1.052-2.354,1.35-3.414,1.35c-0.584,0-1.109-0.09-1.523-0.195c-2.422-0.608-5.056-2.692-6.261-5.732c0.649,0.274,1.362,0.426,2.11,0.426c2.811,0,5.129-2.141,5.415-4.877l3.924,3.925C26.301,14.167,26.658,15.029,26.658,15.946zM16.312,5.6c1.89,0,3.426,1.538,3.426,3.427c0,1.89-1.536,3.427-3.426,3.427c-1.889,0-3.426-1.537-3.426-3.427C12.886,7.138,14.423,5.6,16.312,5.6zM6.974,18.375c-0.649-0.648-1.007-1.512-1.007-2.429c0-0.917,0.357-1.78,1.007-2.428l2.655-2.656c-0.693,2.359-0.991,4.842-0.831,7.221c0.057,0.854,0.175,1.677,0.345,2.46L6.974,18.375zM11.514,11.592c0.583,4.562,4.195,9.066,8.455,10.143c0.693,0.179,1.375,0.265,2.033,0.265c0.01,0,0.02,0,0.027,0l-3.289,3.289c-0.648,0.646-1.512,1.006-2.428,1.006c-0.638,0-1.248-0.177-1.779-0.5l0.001-0.002c-0.209-0.142-0.408-0.295-0.603-0.461c-0.015-0.019-0.031-0.026-0.046-0.043l-0.665-0.664c-1.367-1.567-2.227-3.903-2.412-6.671C10.669,15.856,10.921,13.673,11.514,11.592")}}),draw2d.shape.icon.GRaphael=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.GRaphael",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M28.833,15.709c0-1.477-0.574-2.862-1.617-3.904l-7.002-7.001l-0.003,0.002c-1.027-1.03-2.445-1.62-3.9-1.62c-1.455,0-2.871,0.59-3.9,1.621l-0.002-0.002l-7,7C4.376,12.836,3.79,14.25,3.79,15.709s0.586,2.873,1.619,3.902l6.312,6.312c0.253,0.285,0.519,0.556,0.8,0.8c1.049,0.989,2.463,1.534,3.908,1.51c1.417-0.021,2.783-0.604,3.785-1.604l6.812-6.812c0.021-0.021,0.035-0.029,0.062-0.062l0.143-0.146c0.271-0.271,0.484-0.562,0.725-0.86l-0.012-0.002C28.516,17.85,28.833,16.805,28.833,15.709zM18.77,25.17c-1.121,1.119-2.917,1.336-4.271,0.514l0.002-0.002c-0.213-0.145-0.414-0.303-0.61-0.471c-0.016-0.016-7.04-7.041-7.04-7.041c-1.34-1.34-1.342-3.584,0-4.92l7-6.998c1.121-1.121,2.908-1.338,4.259-0.512v0.002c0.213,0.141,0.414,0.299,0.604,0.467c0.021,0.016,7.053,7.043,7.053,7.043c0.396,0.388,0.655,0.852,0.818,1.348l-2.607,0.006c-0.537-3.754-3.769-6.641-7.667-6.641c-4.277,0-7.744,3.468-7.745,7.746c0.001,4.277,3.468,7.744,7.745,7.744c3.917,0,7.156-2.91,7.668-6.688l2.638-0.021c-0.16,0.521-0.441,1.02-0.849,1.412L18.77,25.17zM16.312,16.789c0.002,0,0.002,0,0.004,0l5.476-0.02c-0.5,2.562-2.76,4.518-5.48,4.521c-3.084-0.004-5.578-2.5-5.584-5.582c0.006-3.084,2.5-5.58,5.584-5.584c2.708,0.004,4.959,1.929,5.472,4.484l-5.476,0.018c-0.596,0.002-1.078,0.488-1.076,1.084C15.233,16.308,15.715,16.789,16.312,16.789z")}}),draw2d.shape.icon.Svg=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Svg",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M31.274,15.989c0-2.473-2.005-4.478-4.478-4.478l0,0c0.81-0.811,1.312-1.93,1.312-3.167c0-2.474-2.005-4.479-4.479-4.479c-1.236,0-2.356,0.501-3.167,1.312c0-2.473-2.005-4.478-4.478-4.478c-2.474,0-4.479,2.005-4.479,4.478c-0.811-0.81-1.93-1.312-3.167-1.312c-2.474,0-4.479,2.005-4.479,4.479c0,1.236,0.501,2.356,1.312,3.166c-2.474,0-4.479,2.005-4.479,4.479c0,2.474,2.005,4.479,4.479,4.479c-0.811,0.81-1.312,1.93-1.312,3.167c0,2.473,2.005,4.478,4.479,4.478c1.236,0,2.356-0.501,3.167-1.312c0,2.473,2.005,4.479,4.479,4.479c2.473,0,4.478-2.006,4.478-4.479l0,0c0.811,0.811,1.931,1.312,3.167,1.312c2.474,0,4.478-2.005,4.478-4.478c0-1.237-0.501-2.357-1.312-3.168c0.001,0,0.001,0,0.001,0C29.27,20.467,31.274,18.463,31.274,15.989zM23.583,21.211c0.016,0,0.031-0.001,0.047-0.001c1.339,0,2.424,1.085,2.424,2.425c0,1.338-1.085,2.424-2.424,2.424s-2.424-1.086-2.424-2.424c0-0.017,0.001-0.031,0.001-0.047l-3.541-3.542v5.009c0.457,0.44,0.743,1.06,0.743,1.746c0,1.339-1.086,2.424-2.424,2.424c-1.339,0-2.425-1.085-2.425-2.424c0-0.687,0.286-1.306,0.743-1.746v-5.009l-3.541,3.542c0,0.016,0.001,0.031,0.001,0.047c0,1.338-1.085,2.424-2.424,2.424s-2.424-1.086-2.424-2.424c0-1.34,1.085-2.425,2.424-2.425c0.015,0,0.031,0.001,0.046,0.001l3.542-3.541H6.919c-0.44,0.458-1.06,0.743-1.746,0.743c-1.339,0-2.424-1.085-2.424-2.424s1.085-2.424,2.424-2.424c0.686,0,1.305,0.285,1.746,0.744h5.008l-3.542-3.542c-0.015,0-0.031,0.001-0.046,0.001c-1.339,0-2.424-1.085-2.424-2.424S7.001,5.92,8.34,5.92s2.424,1.085,2.424,2.424c0,0.015-0.001,0.031-0.001,0.046l3.541,3.542V6.924c-0.457-0.441-0.743-1.06-0.743-1.746c0-1.339,1.086-2.425,2.425-2.425c1.338,0,2.424,1.085,2.424,2.425c0,0.686-0.286,1.305-0.743,1.746v5.008l3.541-3.542c0-0.015-0.001-0.031-0.001-0.046c0-1.339,1.085-2.424,2.424-2.424s2.424,1.085,2.424,2.424c0,1.339-1.085,2.424-2.424,2.424c-0.016,0-0.031-0.001-0.047-0.001l-3.541,3.542h5.008c0.441-0.458,1.061-0.744,1.747-0.744c1.338,0,2.423,1.085,2.423,2.424s-1.085,2.424-2.423,2.424c-0.687,0-1.306-0.285-1.747-0.743h-5.008L23.583,21.211z")}}),draw2d.shape.icon.Usb=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Usb",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M15.5,1.667L13.745,4.74h1.252v15.709L11.8,17.391c-0.205-0.26-0.351-0.601-0.358-0.952c0-1.417-0.001-2.258-0.001-2.568c0.592-0.21,1.02-0.774,1.02-1.444c0-0.849-0.682-1.538-1.521-1.538c-0.84,0-1.521,0.689-1.521,1.538c0,0.67,0.427,1.234,1.019,1.444l-0.001,2.539c0,0.688,0.373,1.409,0.812,1.868c-0.013-0.013-0.027-0.025,0,0c0.011,0.01,3.392,3.245,3.392,3.245c0.205,0.26,0.35,0.6,0.357,0.951v1.776c-1.161,0.236-2.036,1.272-2.036,2.517c0,1.418,1.137,2.566,2.539,2.566c1.403,0,2.54-1.148,2.54-2.566c0-1.244-0.875-2.28-2.038-2.517v-1.746c0-0.005,0-0.009,0-0.014v-3.861c0.008-0.35,0.152-0.689,0.358-0.949c0,0,3.38-3.234,3.392-3.245c0.027-0.026,0.012-0.013,0,0c0.438-0.459,0.811-1.181,0.811-1.869V10.12h1.02V7.046h-3.041v3.075h1.018c0,0-0.002,0.644-0.002,2.476c-0.008,0.351-0.152,0.692-0.357,0.952l-3.198,3.06V4.74h1.254L15.5,1.667z")}}),draw2d.shape.icon.Ethernet=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.Ethernet",init:function(t,e,i){this._super($.extend({width:50,height:50},t),e,i)},createSet:function(){return this.canvas.paper.path("M22.5,8.5v3.168l3.832,3.832L22.5,19.332V22.5l7-7L22.5,8.5zM8.5,22.5v-3.168L4.667,15.5L8.5,11.668V8.5l-7,7L8.5,22.5zM15.5,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681c0.927,0,1.68-0.754,1.68-1.681C17.18,14.852,16.427,14.101,15.5,14.101zM10.46,14.101c-0.928,0-1.68,0.751-1.68,1.68c0,0.927,0.752,1.681,1.68,1.681s1.68-0.754,1.68-1.681C12.14,14.852,11.388,14.101,10.46,14.101zM20.541,14.101c-0.928,0-1.682,0.751-1.682,1.68c0,0.927,0.754,1.681,1.682,1.681s1.68-0.754,1.68-1.681C22.221,14.852,21.469,14.101,20.541,14.101z")}}),draw2d.shape.pert.Activity=draw2d.shape.layout.VerticalLayout.extend({NAME:"draw2d.shape.pert.Activity",init:function(t,e,i){var n=this;this.mementoValues={duration:null},this.bgColor=new draw2d.util.Color("#f3f3f3"),this.lighterBgColor=this.bgColor.lighter(.2).hash(),this.darkerBgColor=this.bgColor.darker(.2).hash(),this._super($.extend({bgColor:this.bgColor,stroke:2,radius:2,color:this.darkerBgColor},t),e,i);var s=new draw2d.shape.layout.HorizontalLayout({stroke:0});this.earlyStartLabel=this.createLabel("Early Start").setStroke(0),this.durationLabel=new draw2d.shape.basic.Label({text:"Duration",stroke:1,color:this.darkerBgColor,radius:0,bgColor:null,padding:5}),this.durationLabel.installEditor(new draw2d.ui.LabelEditor({onCommit:function(t){n.setDuration(parseFloat(t))}})),this.earlyEndLabel=this.createLabel({text:"Early End",stroke:0}),s.add(this.earlyStartLabel),s.add(this.durationLabel),s.add(this.earlyEndLabel),this.activityLabel=new draw2d.shape.basic.Label({text:"Activity Name",radius:0,padding:10,color:this.darkerBgColor,bgColor:null}),this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor),this.inputPort=this.activityLabel.createPort("input"),this.inputPort.getActivity=function(){return n},this.inputPort.onConnect=function(){n.setDuration(n.mementoValues.duration)},this.inputPort.onDisconnect=function(){n.setDuration(n.mementoValues.duration)},this.inputPort.setValue=function(t){n.setDuration(n.mementoValues.duration)},this.outputPort=this.activityLabel.createPort("output"),this.outputPort.getActivity=function(){return n},this.outputPort.onConnect=function(){n.setDuration(n.mementoValues.duration)},this.outputPort.onDisconnect=function(){n.setDuration(n.mementoValues.duration)};var r=new draw2d.shape.layout.HorizontalLayout({stroke:0});this.lateStartLabel=this.createLabel("Late Start").setStroke(0),this.stackLabel=this.createLabel("Stack"),this.lateEndLabel=this.createLabel("Late End").setStroke(0),r.add(this.lateStartLabel),r.add(this.stackLabel),r.add(this.lateEndLabel),this.add(s),this.add(this.activityLabel),this.add(r),this.setDuration(1)},setDuration:function(t){this.mementoValues.duration!==t&&(this.mementoValues.duration=t,this.durationLabel.setText(this.mementoValues.duration));var e=this.getEarlyStart();this.earlyStartLabel.setText(e),this.earlyEndLabel.setText(e+this.mementoValues.duration);var i=this.outputPort.getConnections();if(i.each(function(t,e){var i=e.getTarget();i.setValue()}),0===i.getSize()){var n=parseFloat(this.earlyEndLabel.getText());this.setLateFinish(n)}},getEarlyEnd:function(){return this.getEarlyStart()+this.mementoValues.duration},getEarlyStart:function(){var t=0;return this.inputPort.getConnections().each(function(e,i){var n=i.getSource().getActivity();t=Math.max(t,n.getEarlyEnd())}),t},setLateFinish:function(t){var e=t-this.mementoValues.duration;this.lateEndLabel.setText(t),this.lateStartLabel.setText(e),this.stackLabel.setText(e-parseFloat(this.earlyStartLabel.getText()));var i=this.inputPort.getConnections();i.each(function(t,i){var n=i.getSource();n.getActivity().setLateFinish(e)})},createLabel:function(t){var e=new draw2d.shape.basic.Label({text:t});return e.setStroke(1),e.setColor(this.darkerBgColor),e.setRadius(0),e.setBackgroundColor(null),e.setPadding(5),e.setColor(this.bgColor.darker(.2)),e.onDoubleClick=function(t){},e},setBackgroundColor:function(t){this._super(t),this.lighterBgColor=this.bgColor.lighter(.2).hash(),this.darkerBgColor=this.bgColor.darker(.2).hash()},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},this.getAlpha()<.9?t.fill=this.bgColor.hash():t.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-"),this._super(t))}}),draw2d.shape.pert.Start=draw2d.shape.layout.VerticalLayout.extend({NAME:"draw2d.shape.pert.Start",init:function(t,e,i){var n=this;this.mementoValues={duration:null},this.bgColor=new draw2d.util.Color("#f3f3f3"),this.lighterBgColor=this.bgColor.lighter(.2).hash(),this.darkerBgColor=this.bgColor.darker(.2).hash(),this._super($.extend({bgColor:this.bgColor,stroke:2,radius:2,color:this.darkerBgColor},t),e,i);var s=new draw2d.shape.layout.HorizontalLayout({stroke:0});this.durationLabel=new draw2d.shape.basic.Label({text:"Duration",stroke:1,color:this.darkerBgColor,radius:0,bgColor:null,padding:5}),this.durationLabel.installEditor(new draw2d.ui.LabelEditor({text:"Enter new duration",onCommit:function(t){n.setDuration(parseFloat(t))}})),this.earlyEndLabel=this.createLabel({text:"Early End",stroke:0}),s.add(this.durationLabel),s.add(this.earlyEndLabel),this.activityLabel=new draw2d.shape.basic.Label({text:"Start",radius:0,padding:10,color:this.darkerBgColor,bgColor:null}),this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor),this.outputPort=this.activityLabel.createPort("output"),this.outputPort.getActivity=function(){return n},this.outputPort.onConnect=function(){n.setDuration(n.mementoValues.duration)},this.outputPort.onDisconnect=function(){n.setDuration(n.mementoValues.duration)};var r=this.createLabel(" ");r.setPadding(10),r.setStroke(0),this.lateEndLabel=r,this.add(s),this.add(this.activityLabel),this.add(r),this.setDuration(1)},setDuration:function(t){this.mementoValues.duration!==t&&(this.mementoValues.duration=t,this.durationLabel.setText(this.mementoValues.duration)),this.earlyEndLabel.setText(this.mementoValues.duration);var e=this.outputPort.getConnections();if(e.each(function(t,e){var i=e.getTarget();i.setValue()}),0===e.getSize()){var i=parseFloat(this.earlyEndLabel.getText());this.setLateFinish(i)}},getEarlyEnd:function(){return this.mementoValues.duration},setLateFinish:function(t){t-this.mementoValues.duration;this.lateEndLabel.setText(t)},createLabel:function(t){var e=new draw2d.shape.basic.Label({text:t});return e.setStroke(1),e.setColor(this.darkerBgColor),e.setRadius(0),e.setBackgroundColor(null),e.setPadding(5),e.setColor(this.bgColor.darker(.2)),e.onDoubleClick=function(t){},e},setBackgroundColor:function(t){this._super(t),this.lighterBgColor=this.bgColor.lighter(.2).hash(),this.darkerBgColor=this.bgColor.darker(.2).hash()},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(t=t||{},this.getAlpha()<.9?t.fill=this.bgColor.hash():t.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-"),this._super(t))}}),draw2d.shape.state.Start=draw2d.shape.basic.Circle.extend({NAME:"draw2d.shape.state.Start",DEFAULT_COLOR:new draw2d.util.Color("#3369E8"),init:function(t,e,i){this._super(t,e,i),this.port=this.createPort("output",new draw2d.layout.locator.BottomLocator),this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port)),this.setDimension(50,50),this.setBackgroundColor(this.DEFAULT_COLOR),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy),this.setStroke(0);var n=new draw2d.shape.basic.Label({text:"START"});n.setStroke(0),n.setFontColor("#ffffff"),n.setFontFamily('"Open Sans",sans-serif'),this.add(n,new draw2d.layout.locator.CenterLocator)}}),draw2d.shape.state.End=draw2d.shape.basic.Circle.extend({NAME:"draw2d.shape.state.End",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(t,e,i){this.innerCircle=new draw2d.shape.basic.Circle(20),this._super(t,e,i),this.port=this.createPort("input",new draw2d.layout.locator.TopLocator),this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port)),this.setDimension(50,50),this.setBackgroundColor(this.DEFAULT_COLOR),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy),this.innerCircle.setStroke(2),this.innerCircle.setBackgroundColor(null),this.add(this.innerCircle,new draw2d.layout.locator.CenterLocator),this.setStroke(0)},setDimension:function(t,e){this._super(t,e),this.innerCircle.setDimension(this.getWidth()-10,this.getHeight()-10)}}),draw2d.shape.state.State=draw2d.shape.layout.VerticalLayout.extend({NAME:"draw2d.shape.state.State",init:function(t,e,i){this._super(t,e,i),this.port=this.createPort("hybrid",new draw2d.layout.locator.BottomLocator),this.port.setConnectionAnchor(new draw2d.layout.anchor.ChopboxConnectionAnchor(this.port)),this.setBackgroundColor("#f3f3f3"),this.setStroke(1),this.setColor("#e0e0e0"),this.setRadius(5);var n=this.createLabel("State").setStroke(0);this.label=n;var s=new draw2d.shape.basic.Rectangle;s.getHeight=function(){return 1},s.setMinWidth(90),s.setColor("#e0e0e0");var r=new draw2d.shape.basic.Rectangle;r.setMinHeight(30),r.setStroke(0),r.setBackgroundColor(null),this.add(n),this.add(s),this.add(r)},setLabel:function(t){return this.label.setText(t),this.fireEvent("change:label",{value:t}),this},getLabel:function(){return this.label.getText()},createLabel:function(t){var e=new draw2d.shape.basic.Label(t);return e.setStroke(1),e.setColor(this.darkerBgColor),e.setRadius(0),e.setBackgroundColor(null),e.setPadding(5),e.setColor(this.bgColor.darker(.2)),e.onDoubleClick=function(t){},e},getPersistentAttributes:function(){return $.extend(this._super(),{label:this.getLabel()})},setPersistentAttributes:function(t){this._super(t),"undefined"!=typeof t.label&&this.setLabel(t.label)}}),draw2d.shape.state.Connection=draw2d.Connection.extend({NAME:"draw2d.shape.state.Connection",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(t,e,i){this._super($.extend({router:null,stroke:2},t),e,i),this.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator(17,8)),this.label=new draw2d.shape.basic.Label({text:"label"}),this.label.setStroke(1),this.label.setPadding(2),this.label.setBackgroundColor("#f0f0f0"),this.add(this.label,new draw2d.layout.locator.ParallelMidpointLocator)},setLabel:function(t){return this.label.setText(t),this.label.setVisible(!(null===t||""===t)),this.fireEvent("change:label",{value:t}),this},getLabel:function(){return this.label.getText()},getPersistentAttributes:function(){return $.extend(this._super(),{label:this.getLabel()})},setPersistentAttributes:function(t){this._super(t),"undefined"!=typeof t.label&&this.setLabel(t.label)}}),draw2d.ui.LabelEditor=Class.extend({NAME:"draw2d.ui.LabelEditor",init:function(t){this.configuration=$.extend({onCommit:function(){},onCancel:function(){},
text:"Value"},t)},start:function(t){var e=prompt(this.configuration.text,t.getText());if(e){var i=new draw2d.command.CommandAttr(t,{text:e});t.getCanvas().getCommandStack().execute(i),this.configuration.onCommit(t.getText())}else this.configuration.onCancel()}}),draw2d.ui.LabelInplaceEditor=draw2d.ui.LabelEditor.extend({NAME:"draw2d.ui.LabelInplaceEditor",init:function(t){this._super(),this.listener=$.extend({onCommit:function(){},onCancel:function(){}},t)},start:function(t){this.label=t,this.commitCallback=$.proxy(this.commit,this),$("body").bind("click",this.commitCallback),this.html=$('<input id="inplaceeditor">'),this.html.val(t.getText()),this.html.hide(),$("body").append(this.html),this.html.autoResize({animate:!1}),this.html.bind("keyup",$.proxy(function(t){switch(t.which){case 13:this.commit();break;case 27:this.cancel()}},this)),this.html.bind("blur",this.commitCallback),this.html.bind("click",function(t){t.stopPropagation(),t.preventDefault()});var e=this.label.getCanvas(),i=this.label.getBoundingBox();i.setPosition(e.fromCanvasToDocumentCoordinate(i.x,i.y));var n=e.getScrollArea();n.is($("body"))&&i.translate(e.getScrollLeft(),e.getScrollTop()),i.translate(-1,-1),i.resize(2,2),this.html.css({position:"absolute",top:i.y,left:i.x,"min-width":i.w*(1/e.getZoom()),height:Math.max(25,i.h*(1/e.getZoom()))}),this.html.fadeIn($.proxy(function(){this.html.focus()},this))},commit:function(){this.html.unbind("blur",this.commitCallback),$("body").unbind("click",this.commitCallback);var t=this.html.val(),e=new draw2d.command.CommandAttr(this.label,{text:t});this.label.getCanvas().getCommandStack().execute(e),this.html.fadeOut($.proxy(function(){this.html.remove(),this.html=null,this.listener.onCommit(this.label.getText())},this))},cancel:function(){this.html.unbind("blur",this.commitCallback),$("body").unbind("click",this.commitCallback),this.html.fadeOut($.proxy(function(){this.html.remove(),this.html=null,this.listener.onCancel()},this))}}),draw2d.decoration.connection.Decorator=Class.extend({NAME:"draw2d.decoration.connection.Decorator",init:function(t,e){"undefined"==typeof t||t<1?this.width=20:this.width=t,"undefined"==typeof e||e<1?this.height=15:this.height=e,this.color=new draw2d.util.Color(0,0,0),this.backgroundColor=new draw2d.util.Color(250,250,250)},paint:function(t){},setColor:function(t){return this.color=new draw2d.util.Color(t),this},setBackgroundColor:function(t){return this.backgroundColor=new draw2d.util.Color(t),this},setDimension:function(t,e){return this.width=t,this.height=e,this}}),draw2d.decoration.connection.ArrowDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.ArrowDecorator",init:function(t,e){this._super(t,e)},paint:function(t){var e=t.set();return e.push(t.path(["M0 0","L",this.width," ",-this.height/2,"L",this.width," ",this.height/2,"L0 0"].join(""))),e.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),e}}),draw2d.decoration.connection.DiamondDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.DiamondDecorator",init:function(t,e){this._super(t,e)},paint:function(t){var e=t.set();return e.push(t.path(["M",this.width/2," ",-this.height/2,"L",this.width," ",0,"L",this.width/2," ",this.height/2,"L",0," ",0,"L",this.width/2," ",-this.height/2,"Z"].join(""))),e.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),e}}),draw2d.decoration.connection.CircleDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.CircleDecorator",init:function(t,e){this._super(t,e)},paint:function(t){var e=t.set();return e.push(t.circle(0,0,this.width/2)),e.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),e}}),draw2d.decoration.connection.BarDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.BarDecorator",init:function(t,e){this._super(t,e)},paint:function(t){var e=t.set(),i=["M",this.width/2," ",-this.height/2];return i.push("L",this.width/2," ",this.height/2),e.push(t.path(i.join(""))),e.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),e}}),draw2d.io.Reader=Class.extend({init:function(){},unmarshal:function(t,e){}}),draw2d.io.Writer=Class.extend({init:function(){},marshal:function(t,e){if("function"!=typeof e)throw"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.";e("","")},formatXml:function(t){var e="",i=new RegExp("(>)(<)(/*)","g");t=t.replace(i,"$1\r\n$2$3");var n=0;return jQuery.each(t.split("\r\n"),function(t,i){var s=0;i.match(new RegExp(".+</w[^>]*>$"))?s=0:i.match(new RegExp("^</w"))?0!=n&&(n-=1):s=i.match(new RegExp("^<w[^>]*[^/]>.*$"))?1:0;for(var r="",o=0;o<n;o++)r+="  ";e+=r+i+"\r\n",n+=s}),e}}),draw2d.io.svg.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(t,e){if("function"!=typeof e)throw"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.";var i=t.getPrimarySelection();t.setCurrentSelection(null);var n=t.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<");n=this.formatXml(n),n=n.replace(/<desc>.*<\/desc>/g,"<desc>Create with draw2d JS graph library and RaphaelJS</desc>"),t.setCurrentSelection(i);var s=draw2d.util.Base64.encode(n);e(n,s)}}),draw2d.io.png.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(t,e,i){if("function"!=typeof e)throw"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.";var n="";if(t instanceof draw2d.Figure){var s=t.getPosition();t.setPosition(1,1),n='<svg xmlns:xlink="http://www.w3.org/1999/xlink" >'+t.shape.node.outerHTML+"</svg>",t.setPosition(s),t.initialWidth=t.getWidth()+2,t.initialHeight=t.getHeight()+2}else t.hideDecoration(),n=t.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<"),n.includes("http://www.w3.org/1999/xlink")||(n=n.replace("<svg ",'<svg xmlns:xlink="http://www.w3.org/1999/xlink" '));document.all&&(n=n.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"")),canvasDomNode=$('<canvas id="canvas_png_export_for_draw2d" style="display:none"></canvas>'),$("body").append(canvasDomNode),fullSizeCanvas=$("#canvas_png_export_for_draw2d")[0],fullSizeCanvas.width=t.initialWidth,fullSizeCanvas.height=t.initialHeight,canvg("canvas_png_export_for_draw2d",n,{ignoreMouse:!0,ignoreAnimation:!0,renderCallback:function(){try{if(t instanceof draw2d.Canvas&&t.showDecoration(),"undefined"!=typeof i){var n=i.x,s=i.y,r=i.w,o=i.h;croppedCanvas=document.createElement("canvas"),croppedCanvas.width=r,croppedCanvas.height=o,croppedCanvas.getContext("2d").drawImage(fullSizeCanvas,n,s,r,o,0,0,r,o);var a=croppedCanvas.toDataURL("image/png"),c=a.replace("data:image/png;base64,","");e(a,c)}else{var h=fullSizeCanvas.toDataURL("image/png");e(h,h.replace("data:image/png;base64,",""))}}finally{canvasDomNode.remove()}}})}});draw2d.io.json.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(t,e){if("function"!=typeof e)throw"Writer.marshal method signature has been change from version 2.10.1 to version 3.0.0. Please consult the API documentation about this issue.";var i=[];t.getFigures().each(function(t,e){i.push(e.getPersistentAttributes())}),t.getLines().each(function(t,e){i.push(e.getPersistentAttributes())});var n=draw2d.util.Base64.encode(JSON.stringify(i,null,2));e(i,n)}});draw2d.io.json.Reader=draw2d.io.Reader.extend({NAME:"draw2d.io.json.Reader",init:function(){this._super()},unmarshal:function(t,e){var i=this,n=new draw2d.util.ArrayList;"string"==typeof e&&(e=JSON.parse(e));var s=null;return $.each(e,$.proxy(function(e,r){try{var o=i.createFigureFromType(r.type),a=null,c=null;for(e in r){var h=r[e];if("source"===e){if(s=t.getFigure(h.node),null===s)throw"Source figure with id '"+h.node+"' not found";if(a=s.getPort(h.port),null===a)throw"Unable to find source port '"+h.port+"' at figure '"+h.node+"' to unmarschal '"+r.type+"'"}else if("target"===e){if(s=t.getFigure(h.node),null===s)throw"Target figure with id '"+h.node+"' not found";if(c=s.getPort(h.port),null===c)throw"Unable to find target port '"+h.port+"' at figure '"+h.node+"' to unmarschal '"+r.type+"'"}}null!==a&&null!==c&&(o.setSource(a),o.setTarget(c)),o.setPersistentAttributes(r),t.add(o),n.add(o)}catch(t){debug.error(r,"Unable to instantiate figure type '"+r.type+"' with id '"+r.id+"' during unmarshal by "+this.NAME+". Skipping figure.."),debug.error(t),debug.warn(r)}},this)),$.each(e,$.proxy(function(e,i){if("undefined"!=typeof i.composite){var n=t.getFigure(i.id);null===n&&(n=t.getLine(i.id));var s=t.getFigure(i.composite);s.assignFigure(n)}},this)),t.calculateConnectionIntersection(),t.getLines().each(function(t,e){e.svgPathString=null,e.repaint()}),t.linesToRepaintAfterDragDrop=t.getLines().clone(),t.showDecoration(),n},createFigureFromType:function(type){return eval("new "+type+"()")}}),draw2d.storage.FileStorage=Class.extend({NAME:"draw2d.storage.FileStorage",init:function(){},requiresLogin:function(){return!1},isLoggedIn:function(t){t(!1)},pickFileAndLoad:function(t,e,i,n){},promptForFilename:function(t,e){var i=prompt(draw2d.Configuration.i18n.dialog.filenamePrompt);i?t(i):e&&e()},saveFile:function(t,e,i,n,s,r){},updateFile:function(t,e,i,n,s){},insertFile:function(t,e,i,n,s){}}),draw2d.storage.GoogleDrive=draw2d.storage.FileStorage.extend({NAME:"draw2d.storage.GoogleDrive",init:function(){this._super(),this.checkDependencies(),this.onFileSelectedAndLoadedCallback=function(t,e){},gapi.client.setApiKey(draw2d.storage.GoogleDrive.developerKey),this.fileHandleCache=[]},pickFileAndLoad:function(t,e,i){this.checkDependencies(),"function"==typeof e&&(this.onFileSelectedAndLoadedCallback=e);var n=gapi.auth.getToken();n?this._showPicker():this._doAuth(!1,$.proxy(this._showPicker,this))},saveFile:function(t,e,i,n,s){var r=this.fileHandleCache[t];"undefined"==typeof r?this.insertFile(t,e,i,n,s):this.updateFile(r,e,i,n,s)},updateFile:function(t,e,i,n,s){this.checkDependencies();var r=gapi.auth.getToken();r?this._updateFile(t,e,i,n,s):this._doAuth(!1,$.proxy(function(){this._updateFile(t,e,i,n,s)},this))},_updateFile:function(t,e,i,n,s){var r="-------314159265358979323846",o="\r\n--"+r+"\r\n",a="\r\n--"+r+"--",c=t.type||"application/octet-stream",h={mimeType:c};i===!1&&(e=draw2d.util.Base64.encode(e));var l=o+"Content-Type: application/json\r\n\r\n"+JSON.stringify(h)+o+"Content-Type: "+c+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+e+a;gapi.client.request({path:"/upload/drive/v2/files/"+t.id,method:"PUT",params:{fileId:t.id,uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'},body:l,callback:$.proxy(function(t){t===!1?"undefined"!=typeof s&&s():"function"==typeof n&&(this.updateCache(t),n(t))},this)})},insertFile:function(t,e,i,n,s){this.checkDependencies();var r=gapi.auth.getToken();r?this._insertFile(t,e,i,n,s):this._doAuth(!1,$.proxy(function(){this._insertFile(t,e,i,n,s)},this))},_insertFile:function(t,e,i,n,s){var r="-------314159265358979323846",o="\r\n--"+r+"\r\n",a="\r\n--"+r+"--",c="application/json",h={title:t,mimeType:c},l=o+"Content-Type: application/json\r\n\r\n"+JSON.stringify(h)+o+"Content-Type: "+c+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+e+a,u=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart",useContentAsIndexableText:!1},headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'},body:l});u.execute($.proxy(function(t){t===!1?s&&s(t):(this.updateCache(t),n&&n(t))},this))},_showPicker:function(){var t=gapi.auth.getToken().access_token,e=new google.picker.View(google.picker.ViewId.DOCS);e.setQuery("title:draw2d"),this.picker=(new google.picker.PickerBuilder).addView(e).setAppId(draw2d.storage.GoogleDrive.clientId).setOAuthToken(t).setCallback($.proxy(this._pickerCallback,this)),this.picker.build().setVisible(!0)},_pickerCallback:function(t){if(t[google.picker.Response.ACTION]==google.picker.Action.PICKED){var e=t[google.picker.Response.DOCUMENTS][0],i=e[google.picker.Document.ID],n=gapi.client.drive.files.get({fileId:i});n.execute($.proxy(this._fileGetCallback,this))}},_fileGetCallback:function(t){jQuery.ajax(t.downloadUrl,{headers:{Authorization:"Bearer "+gapi.auth.getToken().access_token}}).done($.proxy(function(e){this.updateCache(t),this.onFileSelectedAndLoadedCallback(t,e);var i=t.title.replace(".draw2d","");this.loadRelatedCacheEntries(i)},this))},_driveApiLoaded:function(){this._doAuth(!0)},_doAuth:function(t,e){gapi.auth.authorize({client_id:draw2d.storage.GoogleDrive.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive",immediate:t},e)},checkDependencies:function(){if("undefined"==typeof gapi)throw"Google drive API js files not loaded yet";if(""===draw2d.storage.GoogleDrive.developerKey||""===draw2d.storage.GoogleDrive.clientId){var t="You must set the Google Drive key and clientId before usage. Please read documentation before usage";throw t}},loadRelatedCacheEntries:function(t){searchQuery='trashed = false and hidden = false and "root" in parents',t?searchQuery=searchQuery+' and title contains "'+t+'"':searchQuery+=' and title contains "draw2d"';var e=$.proxy(function(t,i){t.execute($.proxy(function(n){i=i.concat(n.items);var s=n.nextPageToken;s?(t=gapi.client.drive.files.list({pageToken:s,fields:"items(id,modifiedDate,title)",q:searchQuery}),e(t,i)):$.each(i,$.proxy(function(t,e){this.updateCache(e)},this))},this))},this),i=gapi.client.drive.files.list({fields:"items(id,modifiedDate,title)",q:searchQuery});e(i,[])},updateCache:function(t){var e=this.fileHandleCache[t.title];(!e||e.timestamp<t.timestamp)&&(t.timestamp=Date.parse(t.modifiedDate),this.fileHandleCache[t.title]=t)}}),draw2d.storage.GoogleDrive.developerKey="",draw2d.storage.GoogleDrive.clientId="",draw2d.storage.LocalFileStorage=draw2d.storage.FileStorage.extend({NAME:"draw2d.storage.LocalFileStorage",init:function(){return this._super(),this.initDone=!1,window.File&&window.FileReader&&window.FileList&&window.Blob?void(this.initDone=!0):void alert("The File APIs are not fully supported in this browser.")},pickFileAndLoad:function(t,e,i){var n={display:"block",position:"fixed",top:0,left:0,width:"100%",height:"100%","background-color":"white",opacity:.5,"-webkit-opacity":.5,"-moz-opacity":.5,filter:"alpha(opacity=50)","z-index":1e3},s={"background-color":"white","border-radius":"10px","-webkit-border-radius":"10px","-moz-border-radius":"10px","box-shadow":"0 0 20px 0 #222","-webkit-box-shadow":"0 0 20px 0 #222","-moz-box-shadow":" 0 20px 0 #222",display:"block",height:"240px",left:"50%",margin:"-120px 0 0 -160px",padding:"10px",position:"absolute",top:"50%",width:"320px","z-index":"1000"};$("body").append($('<div id="modal-background"></div><div id="modal-content">    <input type="file" id="storage_files" name="files"  /></div>')),$("#modal-background").css(n),$("#modal-content").css(s),$("#modal-background, #modal-close").click(function(){$("#modal-background, #modal-content").remove()}),$("#storage_files").on("change",function(t){$("#modal-background, #modal-content").remove();var i=t.target.files[0];i.title=i.name;var n=new FileReader;n.onload=function(t){e(i,t.target.result)},n.readAsText(i)})},saveFile:function(t,e,i,n){var s=new Blob([e]);saveAs(s,t),n({title:t})},updateFile:function(t,e,i,n){this.saveFile(t.title,e,i,n)},insertFile:function(t,e,i,n){this.saveFile(t,e,i,n)}}),draw2d.storage.TideSDKStorage=draw2d.storage.FileStorage.extend({NAME:"draw2d.storage.TideSDKStorage",init:function(){if(this._super(),this.initDone=!1,"undefined"==typeof Ti||"undefined"==typeof Ti.UI||"undefined"==typeof Ti.UI.openFileChooserDialog)throw"Application didn't run in the TideSDK desktop enviroment. TideSDKStorage is not available.";this.initDone=!0},pickFileAndLoad:function(t,e,i){try{var n=function(t){try{fileSelected=t[0];var n=Ti.Filesystem.getFile(fileSelected);if(n.exists()){var s=Ti.Filesystem.getFileStream(n);s.open(Ti.Filesystem.MODE_READ),contents=s.read(),s.close(),e({title:fileSelected},contents.toString())}else i("unable to read file")}catch(t){i(t)}},s={multiple:!1,title:"Select files to open...",types:[t],typesDescription:"Documents",path:Ti.Filesystem.getUserDirectory()};Ti.UI.openFileChooserDialog(n,s)}catch(t){i(t)}},promptForFilename:function(t,e){var i=Ti.UI.getCurrentWindow();i.openSaveAsDialog(function(i){0===i.length?e():t(i[0])},{title:"Demo",path:Ti.Filesystem.getApplicationDataDirectory(),types:["draw2d"],multiple:!1,defaultFile:"newFile.draw2d"})},saveFile:function(t,e,i,n,s){try{if(i)tideSDK_writeBase64AsBinaryData(t,e);else{var r=Ti.Filesystem.getFile(t),o=Ti.Filesystem.getFileStream(r);o.open(Ti.Filesystem.MODE_WRITE,!1),o.write(e),o.close()}n({title:t})}catch(t){s()}},updateFile:function(t,e,i,n,s){this.saveFile(t.title,e,i,n,s)},insertFile:function(t,e,i,n,s){this.saveFile(t,e,i,n,s)}}),document.ontouchmove=function(t){t.preventDefault()},function(){Raphael.fn.group=function(t,e){var i=document.getElementsByTagName("svg").length>0;if(!i)return{add:function(){}};var n;for(this.svg="http://www.w3.org/2000/svg",this.defs=document.getElementsByTagName("defs")[t],this.svgcanv=document.getElementsByTagName("svg")[t],this.group=document.createElementNS(this.svg,"g"),n=0;n<e.length;n++)this.group.appendChild(e[n].node);return this.svgcanv.appendChild(this.group),this.group.translate=function(t,e){this.setAttribute("transform","translate("+t+","+e+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+")")},this.group.rotate=function(t,e,i){this.setAttribute("transform","translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+") rotate("+t+","+e+","+i+")")},this.group.scale=function(t,e){this.setAttribute("transform","scale("+t+","+e+") translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+")")},this.group.push=function(t){this.appendChild(t.node)},this.group.getAttr=function(t){this.previous=this.getAttribute("transform")?this.getAttribute("transform"):"";var e,i,s,r=[];for(r=this.previous.split(" "),n=0;n<r.length;n++)if("t"==r[n].substring(0,1)){var o=r[n],a=[];a=o.split("("),o=a[1].substring(0,a[1].length-1),a=[],a=o.split(","),e=0===a.length?{x:0,y:0}:{x:a[0],y:a[1]}}else"r"===r[n].substring(0,1)?(o=r[n],a=o.split("("),o=a[1].substring(0,a[1].length-1),a=o.split(","),i=0===a.length?{x:0,y:0,z:0}:{x:a[0],y:a[1],z:a[2]}):"s"===r[n].substring(0,1)&&(o=r[n],a=o.split("("),o=a[1].substring(0,a[1].length-1),a=o.split(","),s=0===a.length?{x:1,y:1}:{x:a[0],y:a[1]});if("undefined"==typeof e&&(e={x:0,y:0}),"undefined"==typeof i&&(i={x:0,y:0,z:0}),"undefined"==typeof s&&(s={x:1,y:1}),"translate"==t)var c=e;else"rotate"==t?c=i:"scale"==t&&(c=s);return c},this.group.copy=function(t){this.copy=t.node.cloneNode(!0),this.appendChild(this.copy)},this.group}}(),function(){Raphael.el.isVisible=function(){return"none"!==this.node.style.display}}(),Math.sign=function(){return this<0?-1:1};var d2=angular.module("draw2d",[]);d2.directive("draw2dCanvas",["$window","$parse","$timeout","$interval","ngDialog","$rootScope",function(t,e,i,n,s,r){return{restrict:"E,A",link:function(t,e,o,a){t.wfData=t.data.tab_data.tab1.workflow_data;var c;t.wfData.click_time=function(t){var e=s.open({template:"html/directive/workflow/time.html",disableAnimation:!0,width:"300px",controller:["$scope",function(i){"undefined"!=typeof t.userData.data&&(i.data=t.userData.data),i.title="设置时间",i.save_time=function(){t.userData.data=i.data,s.close(e)}}]})};var h={start:{name:"开始",class:"start",ico:"images/workflow/start.png",color:"white",input:!1,output:!0,output_node:["time"],data:{}},time:{name:"时间",class:"time",ico:"images/workflow/time.png",color:"white",input:!0,output:!0,output_node:["time","end"],dbclick:"click_time",data:{}},search:{name:"查询",class:"search",ico:"images/workflow/search.png",color:"green",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},goods:{name:"商品",class:"goods",ico:"images/workflow/goods.png",color:"green",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},order:{name:"订单",class:"order",ico:"images/workflow/order.png",color:"green",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},group:{name:"目标组",class:"group",ico:"images/workflow/group.png",color:"blue",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},balance:{name:"抽样",class:"balance",ico:"images/workflow/balance.png",color:"blue",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},remove:{name:"排除",class:"remove",ico:"images/workflow/remove.png",color:"blue",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},merge:{name:"合并",class:"merge",ico:"images/workflow/merge.png",color:"blue",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},combine:{name:"交集",class:"combine",ico:"images/workflow/combine.png",color:"blue",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},coupon:{name:"优惠券",class:"coupon",ico:"images/workflow/coupon.png",color:"orange",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},message:{name:"发短信",class:"message",ico:"images/workflow/message.png",color:"orange",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},wechat:{name:"发微信",class:"wechat",ico:"images/workflow/wechat.png",color:"orange",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},email:{name:"发邮件",class:"email",ico:"images/workflow/email.png",color:"orange",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},receive:{name:"响应",class:"receive",ico:"images/workflow/receive.png",color:"orange",input:!0,output:!0,output_node:[],dbclick:"click_time",data:{}},end:{name:"结束",class:"end",ico:"images/workflow/end.png",color:"red",input:!0,output:!1,output_node:[],data:{}}};t.editor=$.extend(!0,{canvas:{width:2e3,height:2e3,onDrop:function(e,i,n,s,r){var o=e[0].attributes["data-shape"].value,a=t.editor.palette.figures[o];t.editor.addNode(c,a,i,n)}},palette:{figures:h},state:{dirty:!1,canUndo:!1,canRedo:!1},selection:{className:null,figure:null,attr:null}},t.editor),t.editor.addNode=function(e,i,n,s,r){var o=new draw2d.command.Command("addTask"),a={path:i.ico,resizeable:!1,angle:0,userData:JSON.parse(JSON.stringify(i))};i.id&&(a.id=i.id);var c=new draw2d.shape.basic.Image(a);return i.input&&c.createPort("input",new draw2d.layout.locator.LeftLocator),i.output&&c.createPort("output",new draw2d.layout.locator.RightLocator),c.add(new draw2d.shape.basic.Label({text:i.name}),new draw2d.layout.locator.BottomLocator),c.onDoubleClick=function(e,n,s,r,o){"function"==typeof t.wfData[i.dbclick]&&t.wfData[i.dbclick](c)},o.execute=function(){return e.add(c,n,s),c},o.undo=function(){e.remove(c)},o.redo=function(){return e.add(c,n,s),c},c.userData.x=n,c.userData.y=s,c.userData.type="task",c.userData.dbclick=i.dbclick,"undefined"==typeof i.t||""==i.t?c.userData.t=(new Date).getTime():c.userData.t=i.t,c.userData.id=c.id,task=e.getCommandStack().execute(o),r===!0?void 0:void t.wfData.task_data.push(c.userData)},t.editor.restoreLine=function(t,e,i,n){var s,r,o=new draw2d.command.Command("restoreLine"),a=new draw2d.Connection;t.getFigures().data.forEach(function(t){i==t.id&&(s=t.getOutputPort(0)),n==t.id&&(r=t.getInputPort(0))}),a.setId(e),a.setSource(s),a.setTarget(r),o.execute=function(){return t.add(a),a},o.undo=function(){t.remove(a)},o.redo=function(){return t.add(a),a},t.getCommandStack().execute(o),d()},c=new draw2d.Canvas(e.attr("id"),t.editor.canvas.width,t.editor.canvas.height),c.setScrollArea("#"+e.attr("id")),c.onDrop=$.proxy(t.editor.canvas.onDrop,c);var l=c.getCommandStack();l.addEventListener(function(e){i(function(){t.editor.state.canUndo=l.canUndo(),t.editor.state.canRedo=l.canRedo()},0)});c.on("select",function(t,e){}),t.editor.undo=$.proxy(l.undo,l),t.editor.redo=$.proxy(l.redo,l),t.editor.zoomin=function(){t.wfData.zoom<.5||(t.wfData.zoom=.8*t.wfData.zoom,c.setZoom(t.wfData.zoom))},t.editor.zoomout=function(){t.wfData.zoom>2||(t.wfData.zoom=1.25*t.wfData.zoom,c.setZoom(t.wfData.zoom))},t.editor.delete=$.proxy(function(){var t=new draw2d.command.CommandDelete(this.selection.all.data[0]);this.getCommandStack().execute(t),u(),d()},c),t.editor.clear=$.proxy(function(){t.confirm("清空整个流程以后不能还原，确认要清空吗？",function(){c.clear(),t.wfData.task_data=[],t.wfData.line_data=[]})},c),t.editor.load=$.proxy(function(t){c.clear();var e=new draw2d.io.json.Reader;e.unmarshal(c,t)},c),t.editor.console=function(){u(),d(),console.log(t.wfData)};var u=function(){t.wfData.task_data=[],c.getFigures().data.forEach(function(e){e.userData.x=e.x,e.userData.y=e.y,t.wfData.task_data.push(e.userData)})},d=function(){c.getLines().data.forEach(function(e){var i={type:"line",start:e.start,end:e.end,sourcePort:e.sourcePort.parent.id,targetPort:e.targetPort.parent.id,id:e.id,t:(new Date).getTime()};if(0==t.wfData.line_data.length)t.wfData.line_data.push(i);else{var n=!1;t.wfData.line_data.forEach(function(t){t.id==i.id&&(n=!0)}),n||t.wfData.line_data.push(i)}}),t.wfData.line_data.forEach(function(e,i){var n=!1;c.getLines().data.forEach(function(t){t.id==e.id&&(n=!0)}),n||t.wfData.line_data.splice(i,1)})},p=function(){u(),d()};n(p,1e3),r.$on("$routeChangeStart",function(t,e,i){p()});var f=function(){var e=[];t.wfData.task_data.forEach(function(t){e.push(t)}),t.wfData.line_data.forEach(function(t){e.push(t)}),e.sort(function(t,e){return t.t-e.t}),e.forEach(function(e){"task"==e.type&&t.editor.addNode(c,e,e.x,e.y,!0),"line"==e.type&&t.editor.restoreLine(c,e.id,e.sourcePort,e.targetPort)})};f()}}}]),d2.directive("draw2dPalette",["$window","$parse","$timeout",function(t,e,i){return{restrict:"E,A",link:function(t,e,n,s){i(function(){$(".draw2d_droppable").draggable({appendTo:"body",stack:"body",zIndex:27e3,helper:"clone",drag:function(t,e){},stop:function(t,e){},start:function(t,e){$(e.helper).addClass("shadow")}})},50)},template:"<div ng-repeat='figure in editor.palette.figures' data-shape='{{figure.class}}'  class='palette_node_element draw2d_droppable' ng-class='figure.class' ng-mouseenter='bubble[$index]=true;' ng-mouseleave='bubble[$index]=false' id='{{figure.class}}'></div><bubble ng-repeat='figure in editor.palette.figures' ng-if='bubble[$index]' for='{{figure.class}}' align='top' close='bubble[$index]=false' duration='2000'>{{figure.name}}</bubble>"}}]);